local a=CreateFrame("Frame")a:RegisterEvent("CHAT_MSG_GUILD")a:SetScript("OnEvent",function(self,b,c,d)local e=d;local f=mysplit(c)local g="необходимо_сделать"local h=string.gsub(c,"%s+","")local i=GetUnitName("player")if testQ[i]==nil then testQ[i]={}end;local l;testGM=gmTest(d)l=hshSenderNomeC(i)msg3=mysplit(c)if c=="!кик"and d==i then SendAddonMessage("gKick","","guild")end;if f[1]=="\"чс"and(d=="Хефе"or d=="Дервин"or d=="Люцзе"or d=="Посети"or d=="Витинари"or d=="Злойкакаш"or d=="Разбредовина"or d=="Qoshadows"or d=="Хилялко"or d=="Сантанигга"or d=="Кусяо"or d=="Колон"or d=="Кербес"or d=="Аффа"or d=="Маздам"or d=="Нугган"or d=="Magitron")then if testQ["chs"]==nil then testQ["chs"]={}end;local prov=nil;for m=1,#testQ["chs"]do if testQ["chs"][m]==f[2]then prov=1 end end;if prov~=1 then table.insert(testQ["chs"],f[2])SendChatMessage(f[2].." был добавлен в черный список","OFFICER",nil,1)else SendChatMessage(f[2].." уже есть в черном списке","OFFICER",nil,1)end end;if f[1]=="!устав"then if d==i or f[3]==i then if f[2]==nil or f[2]=="1"then SendChatMessage(ustav["1"],"OFFICER",nil,1)SendChatMessage(ustav["2"],"OFFICER",nil,1)end;if f[2]=="2"then SendChatMessage(ustav["3"],"OFFICER",nil,1)end;if f[2]=="3"then SendChatMessage(ustav["4"],"OFFICER",nil,1)end;if f[2]=="4"then SendChatMessage(ustav["5"],"OFFICER",nil,1)end;if f[2]=="5"then SendChatMessage(ustav["6"],"OFFICER",nil,1)end;if f[2]=="6"then SendChatMessage(ustav["7"],"OFFICER",nil,1)end;if f[2]=="7"then SendChatMessage(ustav["8"],"OFFICER",nil,1)end;if f[2]=="8"then SendChatMessage(ustav["9"],"OFFICER",nil,1)SendChatMessage(ustav["10"],"OFFICER",nil,1)end;if f[2]=="9"then SendChatMessage(ustav["11"],"OFFICER",nil,1)end;if f[2]=="10"then SendChatMessage(ustav["12"],"OFFICER",nil,1)SendChatMessage(ustav["13"],"OFFICER",nil,1)end;if f[2]=="11"then SendChatMessage(ustav["14"],"OFFICER",nil,1)end;if f[2]=="12"then SendChatMessage(ustav["15"],"OFFICER",nil,1)end;if f[2]=="13"then SendChatMessage(ustav["16"],"OFFICER",nil,1)end;if f[2]=="14"then SendChatMessage(ustav["17"],"OFFICER",nil,1)end;if f[2]=="15"then SendChatMessage(ustav["18"],"OFFICER",nil,1)end;if f[2]=="16"then SendChatMessage(ustav["19"],"OFFICER",nil,1)SendChatMessage(ustav["20"],"OFFICER",nil,1)end;if f[2]=="17"then SendChatMessage(ustav["21"],"OFFICER",nil,1)SendChatMessage(ustav["22"],"OFFICER",nil,1)end;if f[2]=="18"then SendChatMessage(ustav["23"],"OFFICER",nil,1)end;if f[2]=="19"then SendChatMessage(ustav["24"],"OFFICER",nil,1)end;if f[2]=="20"then SendChatMessage(ustav["25"],"OFFICER",nil,1)SendChatMessage(ustav["26"],"OFFICER",nil,1)SendChatMessage(ustav["27"],"OFFICER",nil,1)end;if f[2]=="21"then SendChatMessage(ustav["28"],"OFFICER",nil,1)end;if f[2]=="22"then SendChatMessage(ustav["29"],"OFFICER",nil,1)end;if f[2]=="23"then SendChatMessage(ustav["30"],"OFFICER",nil,1)end;if f[2]=="24"then SendChatMessage(ustav["31"],"OFFICER",nil,1)end;if f[2]=="25"then SendChatMessage(ustav["32"],"OFFICER",nil,1)end;if f[2]=="26"then SendChatMessage(ustav["33"],"OFFICER",nil,1)end;if f[2]=="27"then SendChatMessage(ustav["34"],"OFFICER",nil,1)end;if f[2]=="28"then SendChatMessage(ustav["35"],"OFFICER",nil,1)end;if f[2]=="29"then SendChatMessage(ustav["36"],"OFFICER",nil,1)end;if f[2]=="30"then SendChatMessage(ustav["37"],"OFFICER",nil,1)SendChatMessage(ustav["38"],"OFFICER",nil,1)end;if f[2]=="31"then SendChatMessage(ustav["39"],"OFFICER",nil,1)end;if f[2]=="32"then SendChatMessage(ustav["39"],"OFFICER",nil,1)end;if f[2]=="33"then SendChatMessage(ustav["41"],"OFFICER",nil,1)end;if f[2]=="34"then SendChatMessage(ustav["42"],"OFFICER",nil,1)end end end;if f[1]=="\"илвл"then if d==i then local n=nil;if GS_Data~=nil then if GS_Data[GetRealmName()].Players[i]~=nil then SendChatMessage("Мой илвл: "..string.format("%d",CalculateAverageItemLevel(i)).." гс: "..GS_Data[GetRealmName()].Players[i].GearScore.." ".."бс: "..bs(),"OFFICER",nil,1)n=1 end else SendChatMessage("Мой илвл: "..string.format("%d",CalculateAverageItemLevel(i)).." ".."бс: "..bs(),"OFFICER",nil,1)n=1 end;if n~=1 then SendChatMessage("Мой илвл: "..string.format("%d",CalculateAverageItemLevel(i)).." ".."бс: "..bs(),"OFFICER",nil,1)end else if f[2]==i then local n=nil;if GS_Data~=nil then if GS_Data[GetRealmName()].Players[i]~=nil then SendChatMessage("Мой илвл: "..string.format("%d",CalculateAverageItemLevel(i)).." гс: "..GS_Data[GetRealmName()].Players[i].GearScore.." ".."бс: "..bs(),"OFFICER",nil,1)n=1 end else SendChatMessage("Мой илвл: "..string.format("%d",CalculateAverageItemLevel(i)).." ".."бс: "..bs(),"OFFICER",nil,1)n=1 end;if n~=1 then SendChatMessage("Мой илвл: "..string.format("%d",CalculateAverageItemLevel(i)).." ".."бс: "..bs(),"OFFICER",nil,1)end end end end;if f[1]=="\"чсв"and(d=="Хефе"or d=="Дервин"or d=="Люцзе"or d=="Посети"or d=="Витинари"or d=="Злойкакаш"or d=="Разбредовина"or d=="Qoshadows"or d=="Хилялко"or d=="Сантанигга"or d=="Кусяо"or d=="Колон"or d=="Кербес"or d=="Аффа"or d=="Маздам"or d=="Нугган")then if testQ["chs"]==nil then testQ["chs"]={}end;for m=1,#testQ["chs"]do if testQ["chs"][m]==f[2]then SendChatMessage(testQ["chs"][m].." был удален из черного списка","OFFICER",nil,1)testQ["chs"][m]=nil end end end;if f[1]=="\"кик"and d==i then GuildUninvite(f[2])SendChatMessage(f[2].." был исключен  из гильдии","OFFICER",nil,1)end;if f[1]=="\"принизить"and d==i then GuildDemote(f[2])SendChatMessage(f[2].." минус звание","OFFICER",nil,1)end;if c=="!повысить"and d==i then SendAddonMessage("gUp","","guild")end;if f[1]=="локация"and f[2]=="удалить"and f[3]==i and testGM~=nil then mapTables["lokRasstoyanie"]=nil;krt["chernila"]=nil end;if f[1]=="\"камни"and f[2]==i and testGM~=nil then testQ["kamen"]=tonumber(testQ["kamen"])+tonumber(f[3])testQ["nikQK"]=antc(testQ["kamen"])testQ["fRand6"]=1 end;if f[1]=="\"кирпич"and f[2]==i and testGM~=nil then testQ["kirpich"]=tonumber(testQ["kirpich"])+tonumber(f[3])testQ["nikQKR"]=antc(testQ["kirpich"])testQ["fRand6"]=1 end;if f[1]=="\"доска"and f[2]==i and testGM~=nil then testQ["doska"]=tonumber(testQ["doska"])+tonumber(f[3])testQ["nikQD"]=antc(testQ["doska"])testQ["fRand6"]=1 end;if f[1]=="\"бревна"and f[2]==i and testGM~=nil then testQ["brevna"]=tonumber(testQ["brevna"])+tonumber(f[3])testQ["nikQB"]=antc(tonumber(testQ["brevna"]))testQ["fRand6"]=1 end;if f[1]=="\"трава"and f[2]==i and testGM~=nil then testQ["stog"]=tonumber(testQ["stog"])+tonumber(f[3])testQ["nikQF"]=antc(testQ["stog"])testQ["fRand6"]=1 end;if f[1]=="\"бетон"and f[2]==i and testGM~=nil then testQ["beton"]=tonumber(testQ["beton"])+tonumber(f[3])testQ["nikQBT"]=antc(tonumber(testQ["beton"]))testQ["fRand6"]=1 end;if f[1]=="\"самогон"and f[2]==i and testGM~=nil then testQ["smg"]=tonumber(testQ["smg"])+tonumber(f[3])testQ["nikQS"]=antc(testQ["smg"])testQ["fRand6"]=1 end;if f[1]==i..","and f[2]=="покажи"and f[3]=="свой"then SendChatMessage("У меня "..testQ[i]["dTimer"][tonumber(date("%d"))],"OFFICER",nil,1)end;if f[1]==i..","and f[2]=="покажи"and f[3]=="свою"then if testQ[i]["hTimer"]~=nil then SendChatMessage("У меня "..testQ[i]["hTimer"],"OFFICER",nil,1)else SendChatMessage("У меня нет...","OFFICER",nil,1)end end;if f[1]=="!добавить"and f[2]=="предмет"and testGM~=nil then local o;local p;if pQuest["items"]==nil then pQuest["items"]={}end;if#pQuest["items"]==0 then p=1 else p=#pQuest["items"]+1 end;pQuest["items"][p]={}pQuest["items"][p]["itemNum"]=f[3]pQuest["items"][p]["itemEnStuck"]=f[4]o=f[5]for m=6,#f do o=o.." "..f[m]end;pQuest["items"][p]["itemName"]=o;print(pQuest["items"][p]["itemName"].." успешно добавлен")end;if f[1]=="!добавить"and f[2]=="квест"and testGM~=nil then local q;if pQuest==nil then pQuest={}end;if pQuest["х"]==nil then pQuest["х"]={}end;for r,s in pairs(pQuest[f[3]])do if tonumber(s)==tonumber(f[4])then print("*Ачивка "..s.." "..GetAchievementLink(tonumber(s)).." уже была добавлена.")q=1 end end;if q~=1 then table.insert(pQuest[f[3]],f[4])print("*Ачивка "..f[4].." "..GetAchievementLink(tonumber(f[4])).." была добавлена.")end end;if zametki==nil then zametki={}end;if f[1]=="!памятка"and d==i then local t;if f[2]~=nil then if zametki[f[2]]==nil then zametki[f[2]]={}end;if f[3]~=nil then if f[3]=="###"then t="###\n"else t=f[3].." "end;if f[4]~=nil then for m=4,#f do if f[m]=="###"then t=t.." ###\n"else t=t.." "..f[m]end end end;zametki[f[2]]=t;SendChatMessage("Заметка о персонаже "..f[2].." добавлена","OFFICER",nil,1)else end else SendChatMessage("Не указано кому добавлять памятку","OFFICER",nil,1)end end;if f[1]=="!памятка+"and d==i then local t=f[3]if zametki[f[2]]==nil then if f[4]~=nil then for m=4,#f do t=t.." "..f[m]end end else t=zametki[f[2]].."\n"..t;if f[4]~=nil then for m=4,#f do t=t.." "..f[m]end end end;zametki[f[2]]=t;SendChatMessage("Заметка о персонаже "..f[2].." дополнена","OFFICER",nil,1)end;if string.find(c,"покажи мне ачивку")and string.find(c,i)and msg3[2]~="#aaa"and nachalo~="*"then msg1=mysplit(c)if msg1[2]=="покажи"then msg1=msg1[5]msg1=tonumber(msg1)id,name,points,completed,month,day,year,description,flags,icon,rewardText,isGuildAch=GetAchievementInfo(msg1)if completed==true then SendChatMessage("*"..d..", эта уже выполнена: "..msg1 .." "..GetAchievementLink(msg1),"OFFICER",nil,1)else SendChatMessage("*"..d..", эту еще не делал: "..msg1 .." "..GetAchievementLink(msg1),"OFFICER",nil,1)end end end;if f[1]=="\"пет"and f[2]==i and testGM~=nil then if f[3]=="бобер"then print('1')if testQ[i]["петы"]["bb"]~=0 then if testQ[i]["петы"]["bb"]==nil then testQ[i]["петы"]["bb"]=1 end end end;if f[3]=="гоблин"then if testQ[i]["петы"]["gg"]~=0 then testQ[i]["петы"]["gg"]="gob"end end;if f[3]=="гном"then if testQ[i]["петы"]["gg"]~=0 then testQ[i]["петы"]["gg"]="gom"end end end;if f[1]=="\"пет"and f[2]==i and f[4]=="убить"and testGM~=nil then if f[3]=="бобер"then testQ[i]["петы"]["bb"]=nil end;if f[3]=="гоблин"then testQ[i]["петы"]["gg"]=nil end;if f[3]=="гном"then testQ[i]["петы"]["gg"]=nil end end;if c=="ТестГМ"then local u=CreateFrame("Slider","MySliderGlobalName",WorldMapFrame,"OptionsSliderTemplate")u:SetWidth(20)u:SetHeight(100)u:SetOrientation('VERTICAL')u:SetOrientation('HORIZONTAL')u:Show()end;if string.find(c,"testGroup")then memberCount=0;for v=1,MAX_PARTY_MEMBERS do if GetPartyMember(v)then memberCount=memberCount+1 end end end;if string.find(c,"покажи ачивку")and string.find(c,i)and msg3[2]~="#aaa"and nachalo~="*"then msg2=mysplit(c)msg2=msg2[4]msg2=tonumber(msg2)j=0;k=0;count=GetAchievementNumCriteria(msg2)for m=1,count do local w,y,completed,z,A,B,flags,C,D,E=GetAchievementCriteriaInfo(msg2,m)prov=completed;if prov==true then j=j+1 else k=k+1 end;m=m+1 end;if k==0 then SendChatMessage(l.." #aai ".."уже выполнена полностью: "..msg2 .." "..GetAchievementLink(msg2),"OFFICER",nil,1)else SendChatMessage("*".."доступно пунктов ачивки: "..k.." из "..count.." "..msg2 .." "..GetAchievementLink(msg2),"OFFICER",nil,1)end end;if string.find(c,"покажи статистику")and string.find(c,i)and nachalo~="*"then msgStat=mysplit(c)msgStat=msgStat[4]SendChatMessage("* "..GetAchievementLink(msgStat).." "..GetStatistic(msgStat),"OFFICER",nil,1)end;if string.find(c,"покажи предмет")and string.find(c,i)and nachalo~="*"then lenCosa=mysplit(c)tblLensCosa=tablelength(lenCosa)predmet=table.concat(lenCosa," ",4,tblLensCosa)local x,F;for m=1,100000 do itemName,itemLink,itemRarity,itemLevel,itemMinLevel,itemType,itemSubType,itemStackCount,itemEquipLoc,itemTexture,itemSellPrice=GetItemInfo(m)if itemName~=nil and string.lower(predmet)==string.lower(itemName)then if itemLink~=nil then SendChatMessage("* "..itemLink,"OFFICER",nil,1)break else SendChatMessage("* предмет "..predmet.." не существует","OFFICER",nil,1)end end end end;if string.find(c,"!ачивка")and nachalo~="*"then lenShow=mysplit(c)if lenShow[1]==i then tblLensShow=tablelength(lenShow)achShow=table.concat(lenShow," ",3,tblLensShow)achShow=string.lower(achShow)for m=1,10000 do IDNumber,Name,Points,Completed,Month,Day,Year,Description,Flags,Image,RewardText,isGuildAch=GetAchievementInfo(m)if Name~=nil then Name1=string.lower(Name)if Name1==achShow then print("номер ачивки: ",m)prov1=Completed;j=0;k=0;countShow=GetAchievementNumCriteria(m)testShow=1;for G=1,countShow do local w,y,completed,z,A,B,flags,C,D,E=GetAchievementCriteriaInfo(m,G)if completed~=true then testShow="000"end;provShow=completed;quantityShow=z;reqQuantityShow=A;quantityShow=tonumber(quantityShow)reqQuantityShow=tonumber(reqQuantityShow)if provShow==true then j=j+1 else k=k+1 end end;if provShow~=true and countShow~=1 and countShow~=0 then cmpltd1=j;cmpltd2=" пунктов ачивки выполненно: "cmpltd22=" из "cmpltd=cmpltd2 ..cmpltd1 ..cmpltd22 ..countShow elseif provShow==true or prov1==true and testShow~="000"then cmpltd=" выполнена"elseif provShow~=true then cmpltd1=" "cmpltd=cmpltd1 ..GetStatistic(m)end;if quantityShow~=0 and reqQuantityShow~=0 and reqQuantityShow~=nil and testShow=="000"then cmpltd1=" выполненно пунктов ачивки "cmpltd2=j;cmpltd3=" из "cmpltd4=countShow;cmpltd=cmpltd1 ..cmpltd2 ..cmpltd3 ..cmpltd4 end;if quantityShow~=0 and quantityShow~=1 and reqQuantityShow~=0 and reqQuantityShow~=nil and testShow=="000"then cmpltd1=" выполненно пунктов ачивки "cmpltd2=quantityShow;cmpltd3=" из "cmpltd4=reqQuantityShow;cmpltd=cmpltd1 ..cmpltd2 ..cmpltd3 ..cmpltd4 end;if quantityShow~=0 and reqQuantityShow==0 and quantityShow~=nil then print(m)cmpltd1=" выполненно пунктов ачивки "cmpltd2=quantityShow;cmpltd=cmpltd1 ..cmpltd2 end;SendChatMessage(GetAchievementLink(m)..cmpltd,"OFFICER",nil,1)quantityShow=nil;reqQuantityShow=nil;quantityShow=nil;cmpltd=nil;provShow=nil;prov1=nil;Completed=nil;completed=nil;break end end end end end;ltrC=mysplit(c)if string.find(c,"получает лотерейный билет")and ltrC[1]==i and testGM~=nil then ltrNikC=ltrC[1]if testQ[ltrNikC]["лотерея"]==nil then testQ[ltrNikC]["лотерея"]=3 else lotereyaC=testQ[ltrNikC]["лотерея"]lotereyaC=lotereyaC+3;testQ[ltrNikC]["лотерея"]=lotereyaC end end;krtKus=mysplit(c)if string.find(c,"получает кусок карты")and krtKus[1]==i and testGM~=nil then krtKusNikC=krtKus[1]if krt==nil then krt={}end;if krt["777"]==nil then x=math.random(1,15)x=tostring(x)if krt[x]==nil then krt[x]=true else for m=1,15 do x=math.random(1,15)x=tostring(x)if krt[x]==nil or krt[x]~=true then krt[x]=true;break end end end end;if krt["777"]==2 then x=math.random(21,34)x=tostring(x)if krt[x]==nil then krt[x]=true else for m=21,34 do x=math.random(21,34)x=tostring(x)if krt[x]==nil or krt[x]~=true then krt[x]=true;break end end end end end;if string.find(c,"!карта")and krtKus[1]==i and testGM~=nil then if krt==nil then krt={}end;local x;x=tostring(krtKus[3])if krt[x]==nil then krt[x]=true else SendChatMessage("У "..d.." уже есть "..x.." кусок","OFFICER",nil,1)end end;if string.find(c,"получает чернила")and krtKus[1]==i and testGM~=nil then if krt["999"]==nil then krt["999"]=1 else krt["999"]=krt["999"]+1 end end;if string.find(c,"!сброс")and string.find(c,i)and testGM~=nil then if testQ[i]["сброс"]==nil then testQ[i]["сброс"]=1 else testQ[i]["сброс"]=nil end end;if string.find(c,"!отмена")and string.find(c,i)and testGM~=nil then if testQ[i]["отмена"]==nil then testQ[i]["отмена"]=1 else testQ[i]["отмена"]=nil end end;lotTest=mysplit(c)if string.find(c,"#ltr111")and testGM~=nil and lotTest[3]==i then minusLrt=testQ[i]["лотерея"]minusLrt=tonumber(minusLrt)minusLrt=minusLrt-1;testQ[i]["лотерея"]=minusLrt end;if string.find(c,"#marsh")and testGM~=nil and d==i then print("1")if testQ["marsh"]==nil then testQ["marsh"]=1 else testQ["marsh"]=nil end end;if string.find(c,"#ltr333")and testGM~=nil and lotTest[3]==i then minusLrt=testQ[i]["лотерея"]minusLrt=tonumber(minusLrt)minusLrt=minusLrt-3;testQ[i]["лотерея"]=minusLrt end;if string.find(c,"сизиф")and string.find(c,"СТАРТ")and testGM~=nil then if testQ["старт"]==nil then testQ["start"]=lotTest[3]testQ["старт"]=0;marshruT={}end end;if string.find(c,"фемида")and string.find(c,"СТАРТ")and testGM~=nil then testQ["эвент3"]=0;testQ["эвент3_k"]=lotTest[3]testQ["эвент3_l"]=lotTest[4]testQ["эвент3_n"]=lotTest[5]end;if string.find(c,"буриданов_осел")and string.find(c,"СТАРТ")and testGM~=nil then testQ["эвент1"]=lotTest[3]testQ["эвент1_запущен"]=0;testQ["boDiam"]=tonumber(lotTest[4])end;if string.find(c,"СТОП")and string.find(c,"эвент")and testGM~=nil then if testQ[testQ["start"]]~=nil then testQ[testQ["start"]]=nil end;testQ["старт"]=nil;testQ["num"]=nil;testQ["marshF"]=nil;testQ["start"]=nil;if marshruT~=nil then for m=1,9999 do if marshruT[m]~=nil then marshruT[m]:Hide()end end end;marshruT=nil;testQ["эвент1_запущен"]=nil;testQ["эвент1"]=nil;for m=1,100 do if iconRis[m]~=nil then iconRis[m]:Hide()end end;testQ["boDiam"]=nil;testQ["event1"]=nil;testQ["эвент3"]=nil;testQ["эвент3_k"]=nil;testQ["эвент3_l"]=nil;testQ["эвент3_n"]=nil;event3(1,1,"hide")end;if string.find(c,"покажи сиськи")and string.find(c,i)and nachalo~="*"then local x=math.random(1,11)if x==1 then SendChatMessage("(  .   Y   .  )","OFFICER",nil,1)elseif x==2 then SendChatMessage("[  .   Y   .  ]","OFFICER",nil,1)elseif x==3 then SendChatMessage("[__o__]","OFFICER",nil,1)elseif x==4 then SendChatMessage("[__*__]","OFFICER",nil,1)elseif x==5 then SendChatMessage("(__o__)","OFFICER",nil,1)elseif x==6 then SendChatMessage("(__*__)","OFFICER",nil,1)elseif x==7 then SendChatMessage("( >  ) (  <  )","OFFICER",nil,1)elseif x==8 then SendChatMessage("( ,  Y  , )","OFFICER",nil,1)elseif x==9 then SendChatMessage("(.)(.)","OFFICER",nil,1)elseif x==10 then SendChatMessage("(,)(,)","OFFICER",nil,1)elseif x==11 then SendChatMessage("(. )( .)","OFFICER",nil,1)end end;if string.find(c,i)and testGM~=nil and string.find(c,"версия")and string.find(c,"1234567890")and nachalo~="*"then SendChatMessage(l.." текущая версия "..versAdd,"OFFICER",nil,1)end;if testGM~=nil and string.find(c,"версия")and string.find(c,"1234567890")and lotTest[3]==nil then SendAddonMessage("NSGadd",i.." "..versAdd,"guild")end;if string.find(c,i)and testGM~=nil and string.find(c,"покажимне")then SendChatMessage(l,"OFFICER",nil,1)end end)
