iconRis={}iconRisText={}iconRisText2={}iconRisBO={}tochki={}iconRisEv3={}iconRisEvO3={}icN=1;iconCh={}iconChText={}iconRisEv3={}iconRisEvent3={}iconRisEvent3Tex={}iconQ={}iconQText={}mgznIcon={}mgznText={}function iconCh:configure(a,b,c)self[a]=self[a]or CreateFrame("FRAME","myAddonIconFrame",WorldMapDetailFrame)self[a]:SetSize(b,c)end;function iconChText:configure(a,b,c,d,e)self[a]=iconCh[a]:CreateTexture("myAddonIcon","OVERLAY")self[a]:SetTexture("Interface\\AddOns\\NSQC\\libs\\ch.png")self[a]:SetSize(b,c)self[a]:SetPoint("BOTTOMLEFT",WorldMapDetailFrame,"BOTTOMLEFT",d,e)end;function chMuestro(f,g,h)iconCh:configure(f,576,384)iconChText:configure(f,32,32,g,h)iconCh:configure(f,g,h)iconChText:configure(f,32,32,g,h)iconCh[f]:SetFrameStrata("TOOLTIP")iconChText[f]:SetPoint("BOTTOMLEFT",WorldMapDetailFrame,"BOTTOMLEFT",g,h)end;function iconQ:configure()self[1]=self[1]or CreateFrame("FRAME","myAddonIconFrame",UIParent)self[1]:SetSize(512,396)end;function iconQText:configure()self[1]=iconQ[1]:CreateTexture("myAddonIcon","OVERLAY")self[1]:SetTexture("Interface\\AddOns\\NSQC\\libs\\quest.tga")self[1]:SetSize(512,396)self[1]:SetPoint("CENTER",UIParent,"CENTER",0,0)end;function mgznIcon:configure()self[1]=self[1]or CreateFrame("FRAME","myAddonIconFrame",UIParent)self[1]:SetSize(768,512)end;function mgznText:configure()self[1]=mgznIcon[1]:CreateTexture("myAddonIcon","OVERLAY")self[1]:SetTexture("Interface\\AddOns\\NSQC\\libs\\quest.tga")self[1]:SetPoint("CENTER",UIParent,"CENTER",0,0)self[1]:SetSize(768,700)end;function magazin(i)GameTooltip:Hide()if i=="show"then if mgznIcon[1]==nil then mgznIcon:configure()mgznText:configure()mgznIcon[1]:SetFrameStrata("DIALOG")mgznText[1]:SetPoint("CENTER",UIParent,"CENTER",-80,48)if mgznZ==nil then mgznZ=CreateFrame("Button",nil,UIParent,"")mgznZ:SetFrameStrata("FULLSCREEN_DIALOG")mgznZ:SetPoint("BOTTOMLEFT",resursy[5],"BOTTOMLEFT",0,0)mgznZ:SetSize(64,64)mgznZ:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\smg.tga")mgznZ:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\smg.tga")mgznZ:SetScript("OnEnter",function(self)GameTooltip:SetOwner(self,"ANCHOR_RIGHT")GameTooltip:AddLine("|cff99ff99Валюта")GameTooltip:AddLine("|cffFFCF40Иногда падает с квеста на шерсть и прочую ткань")GameTooltip:AddLine("|cffFFCF40Можно купить на аукционе: |cff99ff99\"Обычное письмо\" |cffFFCF40от персонажа \"Хефе\"")GameTooltip:AddLine("|cff99ff99ЛКМ: |cffFFCF40Открыть/Закрыть магазин")GameTooltip:Show()end)mgznZ:SetScript("OnLeave",function(self)GameTooltip:Hide()end)mgznZ:SetScript("OnClick",function(self)PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\clc.ogg")if testQ["magSign"]==nil then dmG1[1005]:Show()dmG1[1005]:SetFrameStrata("TOOLTIP")mgznIcon[1]:Show()for j=1,100 do fBtn[j]:Hide()end;resursy[5]:Hide()mgznZ:Show()mgznZ:SetFrameStrata("LOW")else dmgText1("",mgznZ,1005,22,"FF8C00")mgznIcon[1]:Hide()for j=1,100 do fBtn[j]:Show()if mBtn[j]~=nil then mBtn[j]:Hide()end end;if not resursy[5]:IsVisible()and not mgznZ:IsVisible()then for j=1,10000 do if dmG1[j]~=nil then dmG1[j]:Hide()end;if dmG2[j]~=nil then dmG2[j]:Hide()end end end;resursy[5]:Show()btn[989]:Show()end;GameTooltip:Hide()end)else dmG1[1005]:Show()dmG1[1005]:SetFrameStrata("TOOLTIP")mgznZ:Show()GameTooltip:Hide()end else mgznIcon[1]:Show()end else if mgznIcon[1]~=nil then mgznIcon[1]:Hide()end end end;function iconRis:configure(a,b,c)self[a]=self[a]or CreateFrame("FRAME","myAddonIconFrame",WorldMapDetailFrame)self[a]:SetSize(b,c)end;function iconRisEv3:configure(a,b,c)self[a]=self[a]or CreateFrame("FRAME","myAddonIconFrame",WorldMapDetailFrame)self[a]:SetSize(b,c)end;function iconRisEvent3:configure(a,b,c)self[a]=self[a]or CreateFrame("FRAME","myAddonIconFrame",UIParent)self[a]:SetSize(b,c)end;function iconRisText:configure(a,b,c,d,e,k)self[a]=iconRis[a]:CreateTexture("myAddonIcon","OVERLAY")self[a]:SetTexture("Interface\\AddOns\\NSQC\\"..k..".tga")self[a]:SetSize(b,c)self[a]:SetPoint("BOTTOMLEFT",WorldMapDetailFrame,"BOTTOMLEFT",d,e)end;function iconRisBO:configure(a,b,c,d,e,k)self[a]=iconRis[a]:CreateTexture("myAddonIcon","OVERLAY")self[a]:SetTexture("Interface\\AddOns\\NSQC\\121212.tga")self[a]:SetSize(b,c)self[a]:SetPoint("CENTER",WorldMapDetailFrame,"BOTTOMLEFT",d,e)end;function iconRisEvO3:configure(a,b,c,d,e,k)self[a]=iconRisEv3[a]:CreateTexture("myAddonIcon","OVERLAY")self[a]:SetTexture("Interface\\AddOns\\NSQC\\"..k..".tga")self[a]:SetSize(b,c)self[a]:SetPoint("CENTER",WorldMapDetailFrame,"BOTTOMLEFT",d,e)end;function iconRisEvent3Tex:configure(a,b,c,d,e,k)self[a]=iconRisEvent3[a]:CreateTexture("myAddonIcon","OVERLAY")self[a]:SetTexture("Interface/COMMON/Indicator-Green.png")self[a]:SetPoint("CENTER",UIParent,"BOTTOMLEFT",d,e)end;function quesT(i)if i=="show"then if iconQ[1]==nil then iconQ:configure()iconQText:configure()iconQ[1]:SetFrameStrata("FULLSCREEN_DIALOG")iconQText[1]:SetPoint("CENTER",UIParent,"CENTER",0,0)else iconQ[1]:Show()end else if iconQ[1]~=nil then iconQ[1]:Hide()end end end;function bo(l,m)for n,o in pairs(mapTables[testQ["эвент1"]])do if type(n)=="string"then tKont=n end;for n,o in pairs(mapTables[testQ["эвент1"]][n])do if type(n)=="string"then tLok=n end end end;iconRis:configure(l,l,m)local p,q=getPOS(tonumber(mapTables[testQ["эвент1"]][tKont][tLok][tostring(l)]["x"]),tonumber(mapTables[testQ["эвент1"]][tKont][tLok][tostring(l)]["y"]))iconRisBO:configure(l,m,m,p,q,121212)iconRis[l]:SetFrameStrata("TOOLTIP")iconRisBO[l]:SetPoint("CENTER",WorldMapDetailFrame,"BOTTOMLEFT",p,q)end;function event3(l,m,r)if r=="show"then if iconRisEvent3[1]==nil then iconRisEvent3:configure(1,576,384)iconRisEvent3Tex:configure(1,m,m,0,0,121212)iconRisEvent3Tex[l]:SetSize(m,m)iconRisEvent3[1]:SetFrameStrata("BACKGROUND")iconRisEvent3Tex[1]:SetPoint("CENTER",UIParent,"CENTER",0,0)else if not iconRisEvent3[1]:IsVisible()then iconRisEvent3[1]:Show()iconRisEvent3Tex[1]:SetSize(m,m)else iconRisEvent3Tex[1]:SetSize(m,m)end end else if iconRisEvent3[1]~=nil then iconRisEvent3[1]:Hide()end end end;function ev3(s,l,m)for n,o in pairs(mapTables[s])do if type(n)=="string"then tKont=n end;for n,o in pairs(mapTables[s][n])do if type(n)=="string"then tLok=n end end end;iconRisEv3:configure(l,576,384)local p,q=getPOS(tonumber(mapTables[s][tKont][tLok][tostring(l)]["x"]),tonumber(mapTables[s][tKont][tLok][tostring(l)]["y"]))iconRisEvO3:configure(l,m,m,p,q,121212)iconRisEv3[l]:SetFrameStrata("TOOLTIP")iconRisEvO3[l]:SetPoint("CENTER",WorldMapDetailFrame,"BOTTOMLEFT",p,q)end;function iconRisText2:configure(a,b,c,d,e,k)self[a]=iconRis[a]:CreateTexture("myAddonIcon","OVERLAY")self[a]:SetTexture("Interface\\AddOns\\NSQC\\"..k..".tga")self[a]:SetSize(b,c)self[a]:SetPoint("TOPLEFT",WorldMapDetailFrame,"TOPLEFT",d,e)end;function setka()mostraKrtl2("Show",0,0,0,650,50,1,3)mostraKrtl2("Show",50,0,50,650,50,1,3)mostraKrtl2("Show",100,0,100,650,50,1,3)mostraKrtl2("Show",150,0,150,650,50,1,3)mostraKrtl2("Show",200,0,200,650,50,1,3)mostraKrtl2("Show",250,0,250,650,50,1,3)mostraKrtl2("Show",300,0,300,650,50,1,3)mostraKrtl2("Show",350,0,350,650,50,1,3)mostraKrtl2("Show",400,0,400,650,50,1,3)mostraKrtl2("Show",450,0,450,650,50,1,3)mostraKrtl2("Show",500,0,500,650,50,1,3)mostraKrtl2("Show",550,0,550,650,50,1,3)mostraKrtl2("Show",600,0,600,650,50,1,3)mostraKrtl2("Show",650,0,650,650,50,1,3)mostraKrtl2("Show",700,0,700,650,50,1,3)mostraKrtl2("Show",750,0,750,650,50,1,3)mostraKrtl2("Show",800,0,800,650,50,1,3)mostraKrtl2("Show",850,0,850,650,50,1,3)mostraKrtl2("Show",900,0,900,650,50,1,3)mostraKrtl2("Show",950,0,950,650,50,1,3)mostraKrtl2("Show",1000,0,1000,650,50,1,3)mostraKrtl2("Show",0,0,1000,0,50,1,3)mostraKrtl2("Show",0,50,1000,50,50,1,3)mostraKrtl2("Show",0,100,1000,100,50,1,3)mostraKrtl2("Show",0,150,1000,150,50,1,3)mostraKrtl2("Show",0,200,1000,200,50,1,3)mostraKrtl2("Show",0,250,1000,250,50,1,3)mostraKrtl2("Show",0,300,1000,300,50,1,3)mostraKrtl2("Show",0,350,1000,350,50,1,3)mostraKrtl2("Show",0,400,1000,400,50,1,3)mostraKrtl2("Show",0,450,1000,450,50,1,3)mostraKrtl2("Show",0,500,1000,500,50,1,3)mostraKrtl2("Show",0,550,1000,550,50,1,3)mostraKrtl2("Show",0,600,1000,600,50,1,3)mostraKrtl2("Show",0,650,1000,650,50,1,3)end;function mostraKrtl2(t,g,h,u,v,w,x,y)if t=="Show"then tochki[icN]=true;iconRis:configure(icN,576,384)iconRisText:configure(icN,y,y,g,h,121212)local z=g;local A=h;local B=u;local C=v;local D=B-z;local E=C-A;local F=1;local G=w;local H=x;local I=(G-F)/H;dirX=D/I;dirY=E/I;local J=z;local K=A;for j=F,G,H do icN=icN+j;tochki[icN]=true;J=J+dirX;K=K+dirY;iconRis:configure(icN,J,K)iconRisText:configure(icN,y,y,1,1,121212)iconRis[icN]:SetFrameStrata("TOOLTIP")iconRisText[icN]:SetPoint("BOTTOMLEFT",WorldMapDetailFrame,"BOTTOMLEFT",J,K)end else iconRisText[icN][t](iconRisText[icN])end end;function krtHide(t)if#tochki~=nil then for L,M in pairs(tochki)do if tochki[L]==true then iconRis[L]["Hide"](iconRis[L])end end end end
