local a=CreateFrame("Frame")a:RegisterEvent("CHAT_MSG_ADDON")a:SetScript("OnEvent",function(b,c,d,e,f,sender,g,h,l)local m=sender;local n;local o=GetUnitName("player")if testQ['sign']~="1"then n=GuildFrame["selectedName"]else n=o end;local p=mysplit(e)local q=mysplit(d)if testQ==nil then testQ={}end;if testQ[o]==nil then testQ[o]={}end;if testQ[o]["q33nik"]==nil then testQ[o]["q33nik"]={}end;if q[1]=="#yIm"then if mioFld==nil then mioFld={}end;if mioFld[e]==nil then mioFld[e]={}end;if mioFld[e]["mf"]==nil then mioFld[e]["mf"]={}end;mioFld[e]["mf"][tostring(q[2])]="my"testQ["mf"]=1;testQ["mfNome"]=e end;if q[1]=="dostPOL"and q[2]==o then if e=="1"then SendChatMessage("Кнопка аддона героически найдена и даже нажата..невероятно. *вжжжжж спецэффекты всякие там*","OFFICER",nil,1)PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\ach.ogg")end;if e=="2"then SendChatMessage("Вдалеке за Обелиском я вижу здание музея. Культура это хорошо. Нужно развиваться, иначе пиздец","OFFICER",nil,1)PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\ach.ogg")end;if e=="3"then SendChatMessage("Возле Обелиска я нахожу давно забытую технологию: Топор *оглядывается в поисках других игроков*","OFFICER",nil,1)PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\ach.ogg")end;if e=="4"then SendChatMessage("Накоплено достаточно бревен для постройки хижины. Там меня могут посетить гениальнейшие идеи долгими зимними вечерами...","OFFICER",nil,1)print("Накоплено достаточно бревен для постройки хижины. Там меня могут посетить гениальнейшие идеи долгими зимними вечерами...")PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\ach.ogg")end end;if q[1]=="#b0"then if mioFld==nil then mioFld={}end;if mioFld[e]==nil then mioFld[e]={}end;if mioFld[e]["taverna"]==nil then mioFld[e]["taverna"]={}end;mioFld[e]["taverna"][tostring(q[2])]="b0"testQ["b0Show"]=1;testQ["b0Nome"]=e end;if q[1]=="#yImx"then if mioFld==nil then mioFld={}end;if mioFld[e]==nil then mioFld[e]={}end;if mioFld[e]["mf"]==nil then mioFld[e]["mf"]={}end;mioFld[e]["mf"][tostring(q[2])]="bn"testQ["mf"]=1;testQ["mfNome"]=sender end;if q[1]=="ns_yres"then if p[1]~=nil then dmgText(p[1],resursy[1],101,13,"FF8C00")end;if p[2]~=nil then dmgText(p[2],resursy[2],102,13,"FF8C00")end;if p[3]~=nil then dmgText(p[3],resursy[3],103,13,"FF8C00")end;if p[4]~=nil then dmgText(string.format("%d",tonumber(p[4])),resursy[4],104,13,"FF8C00")end;if p[5]~=nil then dmgText(p[5],resursy[5],105,13,"FF8C00")end;if p[6]~=nil then dmgText(string.format("%d",tonumber(p[6])),resursy[6],106,13,"FF8C00")end;if p[7]~=nil then dmgText(p[7],resursy[7],107,13,"FF8C00")end;if mgznZ~=nil then dmgText1(p[5],mgznZ,1005,11,"FF8C00")dmgT=p[5]else dmgT=p[5]end end;if q[1]=="#domtv"and p[1]==o then if mioFld==nil then mioFld={}end;if mioFld[o]==nil then mioFld[o]={}end;if mioFld[o]["taverna"]==nil then mioFld[o]["taverna"]={}for i=1,100 do mioFld[o]["taverna"][tostring(i)]="pl"end end;local r=mioFld[o]["taverna"]["1"]for i=2,100 do r=r..mioFld[o]["taverna"][tostring(i)]end;if sender==o then SendAddonMessage("#mioTV "..p[2],r,"guild")else if testQ["traktirshik"]==1 then SendAddonMessage("#mioTV "..p[2],r,"guild")else SendChatMessage("Закрыто","OFFICER",nil,1)end end end;if q[1]=="ns_st"and q[2]==o then if testQ["mioR"]==nil then testQ["mioR"]={}end;for i=1,7 do testQ["mioR"][i]=p[i]end end;if q[1]=="#munusItem"and e==o then krt["podskazki"]=tonumber(krt["podskazki"])-1;testQ["kamen"]=tonumber(testQ["kamen"])-1;testQ["nikQK"]=antc(tonumber(testQ["kamen"]))testQ["brevna"]=tonumber(testQ["brevna"])-1;testQ["nikQB"]=antc(tonumber(testQ["brevna"]))testQ["stog"]=tonumber(testQ["stog"])-1;testQ["nikQF"]=antc(tonumber(testQ["stog"]))testQ["beton"]=tonumber(testQ["beton"])-1;testQ["nikQBT"]=antc(tonumber(testQ["beton"]))testQ["smg"]=tonumber(testQ["smg"])-1;testQ["nikQS"]=antc(testQ["smg"])testQ["doska"]=tonumber(testQ["doska"])-1;testQ["nikQD"]=antc(testQ["doska"])testQ["kirpich"]=tonumber(testQ["kirpich"])-1;testQ["nikQKR"]=antc(testQ["kirpich"])end;if q[1]=="#dommf"and p[1]==o then if mioFld==nil then mioFld={}end;if mioFld[o]==nil then mioFld[o]={}end;if mioFld[o]["mf"]==nil then mioFld[o]["mf"]={}for i=1,100 do mioFld[o]["mf"][tostring(i)]="bn"end end;local r=mioFld[o]["mf"]["1"]for i=2,100 do r=r..mioFld[o]["mf"][tostring(i)]end;SendAddonMessage("#mioMF "..p[2],r,"guild")end;if q[1]=="#resursy"and e==o then SendAddonMessage("#resursy1","Бревна: "..testQ["brevna"],"guild")SendAddonMessage("#resursy1","Трава: "..testQ["stog"],"guild")SendAddonMessage("#resursy1","Камень: "..testQ["kamen"],"guild")SendAddonMessage("#resursy1","Бетон: "..testQ["beton"],"guild")SendAddonMessage("#resursy1","Самогон: "..testQ["smg"],"guild")SendAddonMessage("#resursy1","Кирпич: "..testQ["kirpich"],"guild")SendAddonMessage("#resursy1","Доска: "..testQ["doska"],"guild")end;if q[1]=="#gmlist"and e==o then for i=1,#gmList do SendAddonMessage("#yanegm",gmList[i],"guild")end end;if q[1]=="награда"and q[2]==o then SendAddonMessage("#hQ1itemQ ","1","guild")end;if q[1]=="#mioTV"and q[2]==o then if mioFld==nil then mioFld={}end;if mioFld[sender]==nil then mioFld[sender]={}end;if mioFld[sender]["taverna"]==nil then mioFld[sender]["taverna"]={}end;for i=1,100 do mioFld[sender]["taverna"][tostring(i)]=e:sub(i*2-1,i*2)end;testQ["dom"]=1;testQ["domZ"]="taverna"testQ["domNome"]=sender end;if q[1]=="#mioMZ"and q[3]==o then mioFld1[q[2]]["muzeum"]={}if testQ["domZ"]==nil then for i=1,100 do fBtn[i]:Hide()dBtn[i]:Show()if e:sub(i,i)=="n"then dBtn[i]:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\e1.tga")dBtn[i]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\e1.tga")mioFld1[q[2]]["muzeum"][i]="n"end;if e:sub(i,i)=="1"then dBtn[i]:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\em.tga")dBtn[i]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\em.tga")mioFld1[q[2]]["muzeum"][i]="1"end end;testQ["domZ"]="muzeum"end end;if q[1]=="#mioMF"then if mioFld==nil then mioFld={}end;if mioFld[sender]==nil then mioFld[sender]={}end;if mioFld[sender]["mf"]==nil then mioFld[sender]["mf"]={}end;for i=1,100 do mioFld[sender]["mf"][tostring(i)]=e:sub(i*2-1,i*2)end;testQ["dom"]=1;testQ["domZ"]="mf"testQ["domNome"]=sender end;testGM=gmTest(sender)if q[1]=="dostDEL"and q[2]==o and testGM~=nil then ach_ach[tonumber(e)]=nil end;if q[1]=="построить"and q[2]==o and testGM~=nil then if mioFld~=nil then if mioFld[o]~=nil then if mioFld[o]["объекты"]~=nil then mioFld[o]["объекты"][tostring(q[3])]=e end end end end;if q[1]=="xTime"and q[2]==o and testGM~=nil then testQ[o]["hTimer"]=tonumber(e)end;if q[1]=="#hQ1x"and q[2]==o then testQ[o]["взятый_квест_х"]=nil;testQ[o]["взятый_квест_t"]=nil;testQ["taverna_num_q"]=nil;testQ[o]["взятый_квест_s"]=nil;if testQ[o]["выполненные_квесты_х"]==nil then testQ[o]["выполненные_квесты_х"]={}end;testQ[o]["выполненные_квесты_х"][e]=nil;testQ[o]["взятый_квест"]=nil;testQ["okno"]=nil;testQ[o]["itemQend"]=nil;testQ[o]["q33end"]=nil;if ach_ach[15]==nil then SendAddonMessage("#achVSE",15,"guild")end end;if q[1]=="rasstoyanie"then if mapTables==nil then mapTables={}end;if mapTables["lokRasstoyanie"]==nil then mapTables["lokRasstoyanie"]={}end;if mapTables["lokRasstoyanie"][tostring(q[2])]==nil then mapTables["lokRasstoyanie"][tostring(q[2])]={}end;mapTables["lokRasstoyanie"][tostring(q[2])][tostring(q[3])]=tonumber(e)end;if q[1]=="event1"then if testQ~=nil then testQ["event1"]={}for i=1,100 do testQ["event1"][i]=i end end end;if q[1]=="nagradaPP"and q[2]==o and testGM~=nil then testQ["vyborNagrady"]=1 end;if q[1]=="nMapPoint"then if mapTables==nil then mapTables={}end;if mapTables["nMapPoint"]==nil then mapTables["nMapPoint"]={}end;if mapTables["nMapPoint"][tostring(q[2])]==nil then mapTables["nMapPoint"][tostring(q[2])]={}end;if mapTables["nMapPoint"][tostring(q[2])][tostring(q[3])]==nil then mapTables["nMapPoint"][tostring(q[2])][tostring(q[3])]={}end;if mapTables["nMapPoint"][tostring(q[2])][tostring(q[3])][tostring(q[4])]==nil then mapTables["nMapPoint"][tostring(q[2])][tostring(q[3])][tostring(q[4])]={}end;mapTables["nMapPoint"][tostring(q[2])][tostring(q[3])][tostring(q[4])]["x"]=tonumber(q[5])mapTables["nMapPoint"][tostring(q[2])][tostring(q[3])][tostring(q[4])]["y"]=tonumber(q[6])mapTables["nMapPoint"][tostring(q[2])][tostring(q[3])][tostring(q[4])]["f"]=tonumber(q[7])mapTables["nMapPoint"][tostring(q[2])][tostring(q[3])][tostring(q[4])]["p"]=e end;if q[1]=="xTimex"and q[2]==o and testGM~=nil then if testQ[o]["hTimer"]~=nil then testQ[o]["hTimer"]=tonumber(testQ[o]["hTimer"])-tonumber(e)end end;if q[1]=="FailPointEvent1"then if iconRis[tonumber(testQ["event1"][tonumber(e)])]~=nil then iconRis[tonumber(testQ["event1"][tonumber(e)])]:Hide()end;testQ["event1"][tonumber(e)]=9999 end;if q[1]=="vyborNagradyX"and e==o then testQ["vyborNagrady"]=nil end;if q[1]=="NSGaddChatKL"then if mapTables==nil then mapTables={}end;mapTables[q[2]]={}mapTables[q[2]][tostring(p[1])]={}mapTables[q[2]][tostring(p[1])][tostring(p[2])]={}testQ["tempTabKont"]=p[1]testQ["tempTabLok"]=p[2]end;if q[1]=="NSGChatX"then local s=1;for i=1+(tonumber(q[2])-1)*50,tonumber(q[2])*50 do j=tostring(i)if p[s]~=nil then if mapTables[q[3]][tostring(testQ["tempTabKont"])][tostring(testQ["tempTabLok"])][j]==nil then mapTables[q[3]][tostring(testQ["tempTabKont"])][tostring(testQ["tempTabLok"])][j]={}end;mapTables[q[3]][tostring(testQ["tempTabKont"])][tostring(testQ["tempTabLok"])][j]["x"]=tonumber("0."..p[s])s=s+1 else break end end end;local t=string.gsub(e,"%s+","")if q[1]=="#zMYzt"and sender==o then for u=1,GetNumGuildMembers(true)do local h,v,w,z,A,B,C,D,E,F,G,H,I,J,K,L,M=GetGuildRosterInfo(u)if h==sender then local N=string.sub(D,2,2)if N~=""then local O=string.utf8sub(D,1,1)local P=string.utf8sub(D,2,5)SendChatMessage("*"..sender..": "..O.." гильдлвл".." и "..P.." опыта","officer",nil,1)local Q=tonumber(O)local R=tonumber(P)if O=="0"then local R=4-R;SendChatMessage("*"..sender..": до лвлапа осталось "..R.." опыта","officer",nil,1)SendChatMessage("Доступен 1 квест в сутки. При лвлапе: 4 сумки из ткани пустоты или ресурсы.","officer",nil,1)elseif O=="1"then local R=8-R;SendChatMessage("*"..sender..": до лвлапа осталось "..R.." опыта","officer",nil,1)SendChatMessage("Доступен 1 квест в сутки. При лвлапе: две сумки из ледяной ткани или ресурсы","officer",nil,1)elseif O=="2"then local R=16-R;SendChatMessage("*"..sender..": до лвлапа осталось "..R.." опыта","officer",nil,1)SendChatMessage("Доступны 2 квеста в сутки. При лвлапе 4 сумки из ледяной ткани или ресурсы","officer",nil,1)elseif O=="3"then local R=32-R;SendChatMessage("*"..sender..": до лвлапа осталось "..R.." опыта","officer",nil,1)SendChatMessage("*Доступны 3 квеста в сутки. При лвлапе: повышение до Мл. Капрала. Ледовая сумка или три лотерейных билета. ","officer",nil,1)elseif O=="4"then local R=64-R;SendChatMessage("*"..sender..": до лвлапа осталось "..R.." опыта","officer",nil,1)SendChatMessage("*Доступны 4 квеста в сутки. При лвлапе: Повышение до Капрала. 2 ледовые сумки или четыре лотерейных билета. ","officer",nil,1)elseif O=="5"then local R=128-R;SendChatMessage("*"..sender..": до лвлапа осталось "..R.." опыта","officer",nil,1)SendChatMessage("*Доступны 5 квестов в сутки. При лвлапе: повышение до Сержанта. 4 ледовые сумки или 5 лотерейных билетов.","officer",nil,1)elseif O=="6"then local R=256-R;SendChatMessage("*"..sender..": до лвлапа осталось "..R.." опыта","officer",nil,1)SendChatMessage("*Доступны 6 квестов в сутки. При лвлапе: ??? или ??? ","officer",nil,1)elseif O=="7"then local R=512-R;SendChatMessage("*"..sender..": до лвлапа осталось "..R.." опыта","officer",nil,1)elseif O=="8"then local R=1024-R;SendChatMessage("*"..sender..": до лвлапа осталось "..R.." опыта","officer",nil,1)elseif O=="9"then local R=2048-R;SendChatMessage("*"..sender..": до лвлапа осталось "..R.." опыта","officer",nil,1)end else SendChatMessage("*"..sender..", ты еще не делал квестов","officer",nil,1)end else end end end;if q[1]=="bNx"then if mioFld~=nil then if mioFld[e]~=nil then if mioFld[e]["целостность"]~=nil then mioFld[e]["целостность"][tostring(q[2])]=tonumber(mioFld[e]["целостность"][tostring(q[2])])-tonumber(q[3])end end end end;if fBtn[1]:IsVisible()then if q[1]=="ns_tuC"and p[2]==o then mioFld1[p[1]]["целостность"][tostring(q[2])]=tonumber(numeCod(q[3]))dmgText(tonumber(numeCod(q[3])),fBtn[tonumber(q[2])],tonumber(q[2]),13,"FF8C00")dmG[tonumber(q[2])]:Show()end;if q[1]=="ns_pstrMZ"and p[1]==o then mioFld1[p[1]]["объекты"][tostring(q[2])]="mz"fBtn[tonumber(q[2])]:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\mz.tga")fBtn[tonumber(q[2])]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\mz.tga")end;if q[1]=="ns_pstrH"and p[1]==o then mioFld1[p[1]]["объекты"][tostring(q[2])]="h"fBtn[tonumber(q[2])]:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\h.tga")fBtn[tonumber(q[2])]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\h.tga")end end;if q[1]=="MioFldO1"and q[2]==o then if pQuest==nil then pQuest={}end;if pQuest["х"]==nil then pQuest["х"]={}end;if mapTables==nil then mapTables={}end;if mapTables["lokRasstoyanie"]==nil then mapTables["lokRasstoyanie"]={}end;pQuest["х"][1]=964;pQuest["х"][2]=545;pQuest["х"][3]=546;pQuest["х"][4]=845;pQuest["х"][5]=750;pQuest["х"][6]=1017;pQuest["х"][7]=1243;pQuest["х"][8]=153;pQuest["х"][9]=627;pQuest["х"][1]=621;pQuest["х"][11]=776;pQuest["х"][12]=728;pQuest["х"][13]=736;pQuest["х"][14]=126;pQuest["х"][15]=1556;pQuest["х"][16]=629;pQuest["х"][17]=628;pQuest["х"][18]=633;pQuest["х"][19]=631;if pQuest["items"]==nil then pQuest["items"]={}end;if pQuest["items"][1]==nil then pQuest["items"][1]={}end;if pQuest["items"][2]==nil then pQuest["items"][2]={}end;if pQuest["items"][3]==nil then pQuest["items"][3]={}end;if pQuest["items"][4]==nil then pQuest["items"][4]={}end;if pQuest["items"][5]==nil then pQuest["items"][5]={}end;if pQuest["items"][6]==nil then pQuest["items"][6]={}end;if pQuest["items"][7]==nil then pQuest["items"][7]={}end;if pQuest["items"][8]==nil then pQuest["items"][8]={}end;if pQuest["items"][9]==nil then pQuest["items"][9]={}end;if pQuest["items"][10]==nil then pQuest["items"][10]={}end;if pQuest["items"][11]==nil then pQuest["items"][11]={}end;if pQuest["items"][12]==nil then pQuest["items"][12]={}end;if pQuest["items"][13]==nil then pQuest["items"][13]={}end;if pQuest["items"][14]==nil then pQuest["items"][14]={}end;if pQuest["items"][15]==nil then pQuest["items"][15]={}end;pQuest["items"][1]["itemNum"]="2"pQuest["items"][1]["itemEnStuck"]="100"pQuest["items"][1]["itemName"]="Шерсть"pQuest["items"][2]["itemNum"]="1"pQuest["items"][2]["itemEnStuck"]="100"pQuest["items"][2]["itemName"]="Шерсть"pQuest["items"][3]["itemNum"]="3"pQuest["items"][3]["itemEnStuck"]="100"pQuest["items"][3]["itemName"]="Шерсть"pQuest["items"][4]["itemNum"]="4"pQuest["items"][4]["itemEnStuck"]="100"pQuest["items"][4]["itemName"]="Шерсть"pQuest["items"][5]["itemNum"]="5"pQuest["items"][5]["itemEnStuck"]="100"pQuest["items"][5]["itemName"]="Шерсть"pQuest["items"][6]["itemNum"]="1"pQuest["items"][6]["itemEnStuck"]="100"pQuest["items"][6]["itemName"]="Магическая ткань"pQuest["items"][7]["itemNum"]="2"pQuest["items"][7]["itemEnStuck"]="100"pQuest["items"][7]["itemName"]="Магическая ткань"pQuest["items"][8]["itemNum"]="3"pQuest["items"][8]["itemEnStuck"]="100"pQuest["items"][8]["itemName"]="Магическая ткань"pQuest["items"][9]["itemNum"]="4"pQuest["items"][9]["itemEnStuck"]="100"pQuest["items"][9]["itemName"]="Магическая ткань"pQuest["items"][10]["itemNum"]="5"pQuest["items"][10]["itemEnStuck"]="100"pQuest["items"][10]["itemName"]="Магическая ткань"pQuest["items"][11]["itemNum"]="1"pQuest["items"][11]["itemEnStuck"]="100"pQuest["items"][11]["itemName"]="Ткань Пустоты"pQuest["items"][12]["itemNum"]="2"pQuest["items"][12]["itemEnStuck"]="100"pQuest["items"][12]["itemName"]="Ткань Пустоты"pQuest["items"][13]["itemNum"]="3"pQuest["items"][13]["itemEnStuck"]="100"pQuest["items"][13]["itemName"]="Ткань Пустоты"pQuest["items"][14]["itemNum"]="4"pQuest["items"][14]["itemEnStuck"]="100"pQuest["items"][14]["itemName"]="Ткань Пустоты"pQuest["items"][15]["itemNum"]="5"pQuest["items"][15]["itemEnStuck"]="100"pQuest["items"][15]["itemName"]="Ткань Пустоты"if mapTables["lokRasstoyanie"]["1"]==nil then mapTables["lokRasstoyanie"]["1"]={}end;if mapTables["lokRasstoyanie"]["2"]==nil then mapTables["lokRasstoyanie"]["2"]={}end;if mapTables["lokRasstoyanie"]["2"]==nil then mapTables["lokRasstoyanie"]["2"]={}end;if mapTables["lokRasstoyanie"]["3"]==nil then mapTables["lokRasstoyanie"]["3"]={}end;if mapTables["lokRasstoyanie"]["99"]==nil then mapTables["lokRasstoyanie"]["99"]={}end;mapTables["lokRasstoyanie"]["1"]["18"]=0.00087;mapTables["lokRasstoyanie"]["1"]["17"]=0.000499;mapTables["lokRasstoyanie"]["1"]["4"]=0.00067;mapTables["lokRasstoyanie"]["1"]["10"]=0.003676;if mapTables["lokRasstoyanie"]["99"]==nil then mapTables["lokRasstoyanie"]["99"]={}end;mapTables["lokRasstoyanie"]["99"]["1"]=0.003;if mapTables["lokRasstoyanie"]["2"]==nil then mapTables["lokRasstoyanie"]["2"]={}end;mapTables["lokRasstoyanie"]["2"]["14"]=0.002;mapTables["lokRasstoyanie"]["1"]["28"]=0.0021;mapTables["lokRasstoyanie"]["3"]["2"]=0.007;mioFld1={}mioFld1[q[5]]={}mioFld1[q[5]]["объекты"]={}mioFld1[q[5]]["целостность"]={}for i=1,35 do j=tostring(i)mioFld1[q[5]]["объекты"][j]=p[i]fBtn[i]:Show()fBtn[i]:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\"..p[i]..".tga")fBtn[i]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\"..p[i]..".tga")end end;if q[1]=="MioFldO2"and q[2]==o then for i=1,35 do j=tostring(i+35)mioFld1[q[5]]["объекты"][j]=p[i]fBtn[tonumber(j)]:Show()fBtn[tonumber(j)]:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\"..p[i]..".tga")fBtn[tonumber(j)]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\"..p[i]..".tga")end end;if q[1]=="MioFldO3"and q[2]==o then for i=1,30 do j=tostring(i+70)mioFld1[q[5]]["объекты"][j]=p[i]fBtn[tonumber(j)]:Show()fBtn[tonumber(j)]:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\"..p[i]..".tga")fBtn[tonumber(j)]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\"..p[i]..".tga")end;for i=1,100 do dmgText("",fBtn[i],i,13,"bbbbbb")end end;if q[1]=="камни"and q[2]==o and testGM~=nil then testQ["kamen"]=tonumber(e)testQ["nikQK"]=antc(tonumber(testQ["kamen"]))testQ["fRand6"]=1 end;if q[1]=="бревна"and q[2]==o and testGM~=nil then testQ["brevna"]=tonumber(e)testQ["nikQB"]=antc(tonumber(testQ["brevna"]))testQ["fRand6"]=1 end;if q[1]=="бревнаP"and q[2]==o and testGM~=nil then testQ["brevna"]=tonumber(testQ["brevna"])+1;testQ["nikQB"]=antc(tonumber(testQ["brevna"]))testQ["fRand6"]=1 end;if q[1]=="трава"and q[2]==o and testGM~=nil then testQ["stog"]=tonumber(e)testQ["nikQF"]=antc(tonumber(testQ["stog"]))testQ["fRand6"]=1 end;if q[1]=="бетон"and q[2]==o and testGM~=nil then testQ["beton"]=tonumber(e)testQ["nikQBT"]=antc(tonumber(testQ["beton"]))testQ["fRand6"]=1 end;if q[1]=="самогон"and q[2]==o and testGM~=nil then testQ["smg"]=tonumber(e)testQ["nikQS"]=antc(tonumber(testQ["smg"]))testQ["fRand6"]=1 end;if q[1]=="доска"and q[2]==o and testGM~=nil then testQ["doska"]=tonumber(e)testQ["nikQD"]=antc(tonumber(testQ["doska"]))testQ["fRand6"]=1 end;if q[1]=="кирпич"and q[2]==o and testGM~=nil then testQ["kirpich"]=tonumber(e)testQ["nikQKR"]=antc(tonumber(testQ["kirpich"]))testQ["fRand6"]=1 end;if q[1]=="bB"then if mioFld==nil then mioFld={}end;if mioFld[e]==nil then mioFld[e]={}end;if mioFld[e]["петы"]==nil then mioFld[e]["петы"]={}end;if mioFld[e]["хозяин"]==nil then mioFld[e]["хозяин"]={}end;mioFld[e]["петы"][tostring(q[2])]="bb"mioFld[e]["хозяин"][tostring(q[2])]=sender;testQ["fRandDb"]=1;testQ["fRandDbnome"]=e;if e==o then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hr.ogg")end end;if q[1]=="goB"then if mioFld[e]~=nil then if mioFld~=nil then if mioFld[e]["петы"]==nil then mioFld[e]["петы"]={}end;if mioFld[e]["хозяин"]==nil then mioFld[e]["хозяин"]={}end;mioFld[e]["петы"][tostring(q[2])]=q[3]mioFld[e]["хозяин"][tostring(q[2])]=sender;testQ["fRandDb"]=1;testQ["fRandDbnome"]=e;if e==o then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\"..q[3]..".ogg")end end end end;if q[1]=="MioFld"then if mioFld==nil then mioFld={}end;if mioFld[sender]==nil then mioFld[sender]={}end;if mioFld[sender][q[3]]==nil then mioFld[sender][q[3]]={}end;for i=1,100 do j=tostring(i)mioFld[sender][q[3]][j]=p[i]end;if mioFld[sender]["подсказки"]==nil then mioFld[sender]["подсказки"]={}end;testQ["fRand2"]=q[4]testQ["fRand2name"]=q[2]end;if q[1]=="obgIz"and p[1]==n then dmgText(q[3],fBtn[tonumber(q[2])],tonumber(q[2]),13,"FF8C00")dmG[tonumber(q[2])]:Show()if mioFld1[n]["целостность"]==nil then mioFld1[n]["целостность"]={}end;mioFld1[n]["целостность"][q[2]]=q[3]end;if q[1]=="travA"then if fBtn[1]:IsVisible()then if n==p[1]then fBtn[tonumber(q[2])]:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\f.tga")fBtn[tonumber(q[2])]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\f.tga")if mioFld1[p[1]]["целостность"]==nil then mioFld1[p[1]]["целостность"]={}end;mioFld1[p[1]]["целостность"][tostring(q[2])]=1;dmgText(1,fBtn[tonumber(q[2])],tonumber(q[2]),13,"FF8C00")dmG[tonumber(q[2])]:Show()end end end;if q[1]=="zemlYa"then if fBtn[1]:IsVisible()then if n==p[1]then fBtn[tonumber(q[2])]:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\z.tga")fBtn[tonumber(q[2])]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\z.tga")dmgText("",fBtn[tonumber(q[2])],tonumber(q[2]),13,"FF8C00")end end end;if q[1]=="oS"then if mioFld==nil then mioFld={}end;if mioFld[e]==nil then mioFld[e]={}end;if mioFld[e]["петы"]==nil then mioFld[e]["петы"]={}end;if mioFld[e]["объекты"]==nil then mioFld[e]["объекты"]={}end;mioFld[e]["петы"][tostring(q[2])]=nil;if fBtn[tonumber(q[2])]:IsVisible()then fBtn[tonumber(q[2])]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\"..mioFld[e]["объекты"][tostring(q[2])]..".tga")end;if sender==o then if q[3]=="bb"then testQ[o]["петы"][q[3]]=1;PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hr.ogg")elseif q[3]=="gob"then testQ[o]["петы"]["gg"]=q[3]PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\"..q[3]..".ogg")elseif q[3]=="gom"then testQ[o]["петы"]["gg"]=q[3]PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\"..q[3]..".ogg")end end end;if q[1]=="gZ"then local S=mioFld[e]["петы"][tostring(q[2])]mioFld[e]["петы"][tostring(q[2])]=nil;if fBtn[tonumber(q[2])]:IsVisible()then fBtn[tonumber(q[2])]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\"..mioFld[e]["объекты"][tostring(q[2])]..".tga")end;if q[4]==o then if S=="bb"then testQ[o]["петы"][q[3]]=1;PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hr.ogg")elseif S=="gob"then testQ[o]["петы"]["gg"]=S;PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\"..S..".ogg")elseif S=="gom"then testQ[o]["петы"]["gg"]=S;PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\"..S..".ogg")end end end;if q[1]=="bbM"then if mioFld~=nil then if mioFld[e]~=nil then if mioFld[e]["подсказки"]==nil then mioFld[e]["подсказки"]={}end;if mioFld[e]["целостность"]==nil then mioFld[e]["целостность"]={}end;if mioFld[e]["хозяин"]==nil then mioFld[e]["хозяин"]={}end;mioFld[e]["петы"][tostring(q[3])]=mioFld[e]["петы"][tostring(q[2])]mioFld[e]["хозяин"][tostring(q[3])]=mioFld[e]["хозяин"][tostring(q[2])]mioFld[e]["хозяин"][tostring(q[2])]=nil;mioFld[e]["петы"][tostring(q[2])]=nil;testQ["fRand4"]=1;testQ["fRand4Nome"]=e end end end;if q[1]=="gomXm"and e==o then if mioFld~=nil then if mioFld[e]~=nil then if mioFld[e]["подсказки"]==nil then mioFld[e]["подсказки"]={}end;local T=math.random(1,5)local x=math.random(1,5)if T==1 then if x==1 then testQ["brevna"]=tonumber(testQ["brevna"])-1;testQ["nikQB"]=antc(tonumber(testQ["brevna"]))elseif x==2 then testQ["stog"]=tonumber(testQ["stog"])-1;testQ["nikQF"]=antc(tonumber(testQ["stog"]))elseif x==3 then testQ["kamen"]=tonumber(testQ["kamen"])-1;testQ["nikQK"]=antc(tonumber(testQ["kamen"]))elseif x==4 then testQ["beton"]=tonumber(testQ["beton"])-1;testQ["nikQBT"]=antc(tonumber(testQ["beton"]))elseif x==3 then testQ["smg"]=tonumber(testQ["smg"])-1;testQ["nikQS"]=antc(tonumber(testQ["smg"]))testQ["zarplata"]=10000 end end;dmgText(testQ["brevna"],resursy[1],101,13,"FF8C00")dmgText(testQ["stog"],resursy[2],102,13,"FF8C00")dmgText(testQ["kamen"],resursy[3],103,13,"FF8C00")dmgText(string.format("%d",tonumber(testQ["beton"])),resursy[4],104,13,"FF8C00")dmgText(testQ["smg"],resursy[5],105,13,"FF8C00")end;if e==o then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\gobXm.ogg")end end end;if q[1]=="lom"then if mioFld~=nil then if mioFld[e]~=nil then if mioFld[e]["подсказки"]==nil then mioFld[e]["подсказки"]={}end;if mioFld[e]["целостность"]==nil then mioFld[e]["целостность"]={}end;mioFld[e]["целостность"][tostring(q[2])]=tonumber(mioFld[e]["целостность"][tostring(q[2])])-tonumber(q[3])if tonumber(mioFld[e]["целостность"][tostring(q[2])])<=-1000 then mioFld[e]["объекты"][tostring(q[2])]="z"end;testQ["fRand4"]=1;testQ["fRand4Nome"]=e end end;print(sender,o)if e==o or sender==o then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\mx.ogg")end end;if q[1]=="resObj"then if sender~=o and e==o then if mioFld[e]["объекты"][tostring(q[2])]=="ms"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\ms.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="mx"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\ms.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="t"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\tr.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="f"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\tr.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="uz"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\uz.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="hs"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="zx"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="zs"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="skc"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="sx"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="tc"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="tz"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="m0"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="lx"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="ox"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="kx"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="m1"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end;if mioFld[e]["объекты"][tostring(q[2])]=="as"or mioFld[e]["объекты"][tostring(q[2])]=="bs"or mioFld[e]["объекты"][tostring(q[2])]=="bx"or mioFld[e]["объекты"][tostring(q[2])]=="bc"then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\hs.ogg")end end;if mioFld~=nil then if mioFld[e]~=nil then if mioFld[e]["подсказки"]==nil then mioFld[e]["подсказки"]={}end;if mioFld[e]["объекты"]~=nil then if mioFld[e]["целостность"]~=nil then mioFld[e]["целостность"][tostring(q[2])]=tonumber(q[3])if tonumber(mioFld[e]["целостность"][tostring(q[2])])>=999 then if mioFld[e]["объекты"][tostring(q[2])]=="mx"then mioFld[e]["объекты"][tostring(q[2])]="m"end;if mioFld[e]["объекты"][tostring(q[2])]=="uz"then mioFld[e]["объекты"][tostring(q[2])]="uz"end;if mioFld[e]["объекты"][tostring(q[2])]=="ms"then mioFld[e]["объекты"][tostring(q[2])]="ms"end;if mioFld[e]["объекты"][tostring(q[2])]=="t"then mioFld[e]["объекты"][tostring(q[2])]="t"end;if mioFld[e]["объекты"][tostring(q[2])]=="f"then mioFld[e]["объекты"][tostring(q[2])]="t"end;if mioFld[e]["объекты"][tostring(q[2])]=="skc"then mioFld[e]["объекты"][tostring(q[2])]="sk"if sender==o then if ach_ach[23]==nil then SendAddonMessage("#achVSE",23,"guild")end end end;if mioFld[e]["объекты"][tostring(q[2])]=="ox"then mioFld[e]["объекты"][tostring(q[2])]="ob"end;if mioFld[e]["объекты"][tostring(q[2])]=="kx"then mioFld[e]["объекты"][tostring(q[2])]="ko"end;if mioFld[e]["объекты"][tostring(q[2])]=="m1"then mioFld[e]["объекты"][tostring(q[2])]="mz"end end;if tonumber(mioFld[e]["целостность"][tostring(q[2])])>=4999 then if mioFld[e]["объекты"][tostring(q[2])]=="tc"then mioFld[e]["объекты"][tostring(q[2])]="ts"if sender==o then if ach_ach[17]==nil then SendAddonMessage("#achVSE",17,"guild")end end;if fBtn[1]:IsVisible()then fBtn[tonumber(q[2])]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\ts.tga")end end end;if tonumber(mioFld[e]["целостность"][tostring(q[2])])>=9999 then if mioFld[e]["объекты"][tostring(q[2])]=="hs"then mioFld[e]["объекты"][tostring(q[2])]="h"if fBtn[1]:IsVisible()then fBtn[tonumber(q[2])]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\h.tga")end end;if mioFld[e]["объекты"][tostring(q[2])]=="zc"then mioFld[e]["объекты"][tostring(q[2])]="zp"if fBtn[1]:IsVisible()then fBtn[tonumber(q[2])]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\zp.tga")end end end;if tonumber(mioFld[e]["целостность"][tostring(q[2])])>=19999 then if mioFld[e]["объекты"][tostring(q[2])]=="zs"then mioFld[e]["объекты"][tostring(q[2])]="za"if sender==o then if ach_ach[24222222]==nil then SendAddonMessage("#achVSE",24,"guild")end end;if fBtn[1]:IsVisible()then fBtn[tonumber(q[2])]:SetHighlightTexture("Interface\\AddOns\\NSQC\\libs\\za.tga")end end end;if tonumber(mioFld[e]["целостность"][tostring(q[2])])>=19999 then if mioFld[e]["объекты"][tostring(q[2])]=="zx"then mioFld[e]["объекты"][tostring(q[2])]="za"end end;if tonumber(mioFld[e]["целостность"][tostring(q[2])])>=19999 then if mioFld[e]["объекты"][tostring(q[2])]=="lx"then mioFld[e]["объекты"][tostring(q[2])]="lp"end end;if tonumber(mioFld[e]["целостность"][tostring(q[2])])>=29999 then if mioFld[e]["объекты"][tostring(q[2])]=="sx"then mioFld[e]["объекты"][tostring(q[2])]="s"end;if mioFld[e]["объекты"][tostring(q[2])]=="tz"then mioFld[e]["объекты"][tostring(q[2])]="tv"end;if mioFld[e]["объекты"][tostring(q[2])]=="m0"then mioFld[e]["объекты"][tostring(q[2])]="mf"end end;if tonumber(mioFld[e]["целостность"][tostring(q[2])])>=14999 then if mioFld[e]["объекты"][tostring(q[2])]=="as"then mioFld[e]["объекты"][tostring(q[2])]="ar"end;if mioFld[e]["объекты"][tostring(q[2])]=="bs"then mioFld[e]["объекты"][tostring(q[2])]="bi"end;if mioFld[e]["объекты"][tostring(q[2])]=="bc"then mioFld[e]["объекты"][tostring(q[2])]="to"end;if mioFld[e]["объекты"][tostring(q[2])]=="bx"then mioFld[e]["объекты"][tostring(q[2])]="bh"end end;testQ["fRand5"]=1;testQ["fRand5Nome"]=e end end end end end;if q[1]=="NSGChatY"then local s=1;for i=1+(tonumber(q[2])-1)*50,tonumber(q[2])*50 do j=tostring(i)if p[s]~=nil then if mapTables[q[3]][tostring(testQ["tempTabKont"])][tostring(testQ["tempTabLok"])][j]==nil then mapTables[q[3]][tostring(testQ["tempTabKont"])][tostring(testQ["tempTabLok"])][j]={}end;mapTables[q[3]][tostring(testQ["tempTabKont"])][tostring(testQ["tempTabLok"])][j]["y"]=tonumber("0."..p[s])s=s+1 else SendChatMessage("Маршрут "..q[3].." добавлен","OFFICER",nil,1)break end end end;if string.find(d,"#q33q")and string.find(d,o)and testGM~=nil then testQ[o]["q33q"]=e;testQ[o]["взятый_квест"]="q33"btn[7]:Enable()btn[8]:Enable()btn[7]:SetText("Отменить квест")btn[8]:SetText("Узнать квест")end;if string.find(d,"#q33nik1")and string.find(d,o)and testGM~=nil then if testQ[o]["q33nik"][1]~=1 then testQ[o]["q33nik"][1]=e end end;if string.find(d,"#q33nik2")and string.find(d,o)and testGM~=nil then if testQ[o]["q33nik"][2]~=1 then testQ[o]["q33nik"][2]=e end end;if string.find(d,"#q33nik3")and string.find(d,o)and testGM~=nil then if testQ[o]["q33nik"][3]~=1 then testQ[o]["q33nik"][3]=e end end;if string.find(d,"#q33fnd")and string.find(d,o)and testGM~=nil then testQ[o]["q33fnd"]=e end;if string.find(d,"#q33ans")and string.find(d,o)and testGM~=nil then testQ[o]["q33ans"]=e end;if d=="#krt7772"and string.find(e,o)and testGM~=nil then if krt==nil then krt={}end;krt["777"]=2 end;if testQ~=nil then if string.find(d,"#qUpdateS1")and string.find(d,o)and testGM~=nil then testQ[o]["взятый_квест"]=e end;if string.find(d,"#qUpdate2v")and string.find(d,o)and testGM~=nil then if testQ[o]["квест_лвл2"]==nil then testQ[o]["квест_лвл2"]={}end;if testQ[o]["квест_лвл3"]==nil then testQ[o]["квест_лвл3"]={}end;testQ[o]["лвл_квестов"]=tostring(e)end;if string.find(d,"#qUpdateS2")and string.find(d,o)and testGM~=nil then testQ[o]["взятый_квест"]=e end;if string.find(d,"#qUpdateSqKol2")and string.find(d,o)and testGM~=nil then local U=testQ[o]["взятый_квест"]testQ[o]["квест_лвл2"][U]=e end;if string.find(d,"#qUpdateS3")and string.find(d,o)and testGM~=nil then testQ[o]["взятый_квест"]=e end;if string.find(d,"#qUpdateSF")and string.find(d,o)and testGM~=nil then testQ[o]["q33q"]=e end;if string.find(d,"#qUpdateSq33q")and string.find(d,o)and testGM~=nil then testQ[o]["q33ans"]=e end;if string.find(d,"#qUpdateQ3F")and string.find(d,o)and testGM~=nil then testQ[o]["q33fnd"]=e end;if testQ[o]["q33nik"]==nil then testQ[o]["q33nik"]={}end;if string.find(d,"#qUpdateSNik1")and string.find(d,o)and testGM~=nil then if testQ[o]["q33nik"][1]~=1 then testQ[o]["q33nik"][1]=e end end;if string.find(d,"#qUpdateSNik2")and string.find(d,o)and testGM~=nil then if testQ[o]["q33nik"][2]~=1 then testQ[o]["q33nik"][2]=e end end;if string.find(d,"#qUpdateSNik3")and string.find(d,o)and testGM~=nil then if testQ[o]["q33nik"][3]~=1 then testQ[o]["q33nik"][3]=e end end;if string.find(d,"#qUpdateQ32")and string.find(d,o)and testGM~=nil then local U=e;if U~="9999"then U=tonumber(U)end;testQ[o]["взятый_квест"]=U end;if string.find(d,"#qUpdate3pNum")and string.find(d,o)and testGM~=nil then local V=e;V=tonumber(V)local U=testQ[o]["взятый_квест"]if testQ[o]["квест_лвл3"]==nil then testQ[o]["квест_лвл3"]={}end;testQ[o]["квест_лвл3"][U]=V end;if string.find(d,"#qUpdate3_2vz")and string.find(d,o)and testGM~=nil then testQ[o]["взятый_квест3_2"]=e end;if string.find(d,"#qUpdate3_1vz")and string.find(d,o)and testGM~=nil then testQ[o]["взятый_квест3_1"]=e end;if string.find(d,"#qUpdate3rez")and string.find(d,o)and testGM~=nil then if testQ[o]["квест_лвл3"]==nil then testQ[o]["квест_лвл3"]={}end;local U=testQ[o]["взятый_квест"]testQ[o]["квест_лвл3"][U]=e end;if string.find(d,"#qUpq3S")and string.find(d,o)and testGM~=nil then testQ[o]["q3Stat"]=tonumber(e)end;if string.find(d,"#qUp3StatNum")and string.find(d,o)and testGM~=nil then testQ[o]["q3StatNum"]=tonumber(e)end end;if string.find(d,"#q3Stat")and string.find(d,o)and testGM~=nil then local W,X,Y,Z,_,a0,a1,a2,a3,a4=GetAchievementCriteriaInfo(tonumber(e),1)SendAddonMessage("#q3otvStat",Z,"guild")SendChatMessage("У меня выполненно "..Z.." пунктов ачивки "..GetAchievementLink(tonumber(e)),"OFFICER",nil,1)testQ[o]["q3StatTemp"]=tonumber(e)testQ[o]["q3StatNum"]=tonumber(Z)end;if string.find(d,"#q3stStart")and string.find(d,o)and testGM~=nil then testQ[o]["q3Stat"]=testQ[o]["q3StatTemp"]testQ[o]["взятый_квест"]="q3Stat"btn[7]:Enable()btn[8]:Enable()btn[7]:SetText("Отменить квест")btn[8]:SetText("Узнать квест")end;if string.find(d,"#otLadkaNS")and string.find(d,o)and testGM~=nil then local p=mysplit(e)print(e)local x,y=otladka(p[1],p[2],p[3],p[4],p[5],p[6],p[7])SendAddonMessage("NSGadd",x.." "..y,"guild")end;if d=="#ch1ernilaC"and testGM~=nil then if p[6]=="chern1"then if krt==nil then krt={}end;if krt["chernila"]==nil then krt["chernila"]={}end;if krt["chernila"][p[1]]==nil then krt["chernila"][p[1]]={}end;if krt["chernila"][p[1]][p[2]]==nil then krt["chernila"][p[1]][p[2]]={}end;if krt["chernila"][p[1]][p[2]][p[3]]==nil then krt["chernila"][p[1]][p[2]][p[3]]={}end;krt["chernila"]["nomer"]=p[1]krt["chernila"]["kont"]=p[2]krt["chernila"]["lok"]=p[3]krt["chernila"]["msg"]=1;krt["chernila"]["cel"]=1;krt["chernila"]["podskazki"]=1;krt["chernila"][p[1]][p[2]][p[3]]["x"]=p[4]krt["chernila"][p[1]][p[2]][p[3]]["y"]=p[5]end;if p[6]=="mapQuest"then if testQ==nil then testQ={}end;if testQ["mapQuest"]==nil then testQ["mapQuest"]={}end;if testQ["mapQuest"][p[1]]==nil then testQ["mapQuest"][p[1]]={}end;if testQ["mapQuest"][p[1]][p[2]]==nil then testQ["mapQuest"][p[1]][p[2]]={}end;if testQ["mapQuest"][p[1]][p[2]][p[3]]==nil then testQ["mapQuest"][p[1]][p[2]][p[3]]={}end;testQ["mapQuest"]["nomer"]=p[1]testQ["mapQuest"]["kont"]=p[2]testQ["mapQuest"]["lok"]=p[3]testQ["mapQuestMsg"]=1;testQ["mapQuestCel"]=1;testQ["mapQuestPod"]=1;testQ["mapQuest"][p[1]][p[2]][p[3]]["x"]=p[4]testQ["mapQuest"][p[1]][p[2]][p[3]]["y"]=p[5]end end;if d=="#chernilaCMsg"and testGM~=nil then if krt~=nil then if krt["chernila"]~=nil then if krt["chernila"]["msg"]==1 then krt["chernila"][krt["chernila"]["nomer"]][krt["chernila"]["kont"]][krt["chernila"]["lok"]]["msg"]=txtXor(e)end end end;if testQ["mapQuestMsg"]==1 then testQ["mapQuest"][testQ["mapQuest"]["nomer"]][testQ["mapQuest"]["kont"]][testQ["mapQuest"]["lok"]]["msg"]=txtXor(e)end end;if d=="#chernilaCel"and testGM~=nil then if krt~=nil then if krt["chernila"]~=nil then if krt["chernila"]["cel"]==1 then krt["chernila"][krt["chernila"]["nomer"]][krt["chernila"]["kont"]][krt["chernila"]["lok"]]["cel"]=txtXor(e)end end end;if testQ["mapQuestCel"]==1 then testQ["mapQuest"][testQ["mapQuest"]["nomer"]][testQ["mapQuest"]["kont"]][testQ["mapQuest"]["lok"]]["cel"]=txtXor(e)end end;if q[1]=="#ch1ernilaPod"and testGM~=nil then if krt~=nil then if krt["chernila"]~=nil then if krt["chernila"]["podskazki"]==1 then if krt["chernila"][krt["chernila"]["nomer"]][krt["chernila"]["kont"]][krt["chernila"]["lok"]]["podskazki"]==nil then krt["chernila"][krt["chernila"]["nomer"]][krt["chernila"]["kont"]][krt["chernila"]["lok"]]["podskazki"]={}end;kodMsgStr=tostring(q[2])if kodMsgStr~=q[3]then krt["chernila"][krt["chernila"]["nomer"]][krt["chernila"]["kont"]][krt["chernila"]["lok"]]["podskazki"][kodMsgStr]=txtXor(e)end;if kodMsgStr==q[3]then krt["chernila"][krt["chernila"]["nomer"]][krt["chernila"]["kont"]][krt["chernila"]["lok"]]["podskazki"][kodMsgStr]=txtXor(e)SendChatMessage("База чернил обновлена "..krt["chernila"]["nomer"],"OFFICER",nil,1)krt["chernila"]["nomer"]=nil;krt["chernila"]["kont"]=nil;krt["chernila"]["lok"]=nil;krt["chernila"]["cel"]=nil;krt["chernila"]["msg"]=nil;krt["chernila"]["podskazki"]=nil end end end end;if testQ["mapQuestPod"]==1 then kodMsgStr=tostring(q[2])if kodMsgStr~=q[3]then if testQ["mapQuest"][testQ["mapQuest"]["nomer"]][testQ["mapQuest"]["kont"]][testQ["mapQuest"]["lok"]]["podskazki"]==nil then testQ["mapQuest"][testQ["mapQuest"]["nomer"]][testQ["mapQuest"]["kont"]][testQ["mapQuest"]["lok"]]["podskazki"]={}end;testQ["mapQuest"][testQ["mapQuest"]["nomer"]][testQ["mapQuest"]["kont"]][testQ["mapQuest"]["lok"]]["podskazki"][kodMsgStr]=txtXor(e)end;if kodMsgStr==q[3]then testQ["mapQuest"][testQ["mapQuest"]["nomer"]][testQ["mapQuest"]["kont"]][testQ["mapQuest"]["lok"]]["podskazki"][kodMsgStr]=txtXor(e)SendChatMessage("База территориальных квестов обновлена "..testQ["mapQuest"]["nomer"],"OFFICER",nil,1)testQ["mapQuest"]["nomer"]=nil;testQ["mapQuest"]["kont"]=nil;testQ["mapQuest"]["lok"]=nil;testQ["mapQuestMsg"]=nil;testQ["mapQuestCel"]=nil;testQ["mapQuestPod"]=nil end end end;if string.find(d,"#qMapQuest")and string.find(e,o)and testGM~=nil then testQ["mapQuest"]["текущий"]=p[2]if testQ~=nil then if testQ["mapQuest"]~=nil then if testQ["mapQuest"]["список"]==nil then testQ["mapQuest"]["список"]={}end;if testQ["mapQuest"]["список"]~=nil then if testQ["mapQuest"]["список"][p[2]]~="9999"then testQ["mapQuest"]["список"][p[2]]=1;local a5,a6,a7,a8,a9,aa=mapQuest(p[2])SendChatMessage(txtXor(aa),"OFFICER",nil,1)else SendChatMessage("Я уже делал териториальный квест "..p[2],"OFFICER",nil,1)end end end end end;if d=="#M1QP"and e==o then if krt~=nil then if krt["777"]==nil then if krt["podskazki"]==nil then krt["podskazki"]=1 else krt["podskazki"]=krt["podskazki"]+1 end end;if krt["777"]==3 then if krt["evO3"]==nil then krt["evO3"]={}krt["evO3"]=1 else krt["evO3"]=krt["evO3"]+1 end end end;if testQ~=nil then if testQ["mapQuest"]~=nil then if testQ["mapQuest"]["текущий"]~=nil and testQ["mapQuest"]["текущий"]~="9999"then if testQ["mapQuest"]["podskazki"]==nil then testQ["mapQuest"]["podskazki"]=1;mapQuestP(testQ["mapQuest"]["текущий"])local ab=txtXor(testQ["mapQuest"]["podskazkiRez"][tostring(testQ["mapQuest"]["podskazki"])])SendChatMessage(ab,"SAY",DEFAULT_CHAT_FRAME.editBox.languageID)else mapQuestP(testQ["mapQuest"]["текущий"])local x=tablelength(testQ["mapQuest"]["podskazkiRez"])if tonumber(testQ["mapQuest"]["podskazki"])<=tonumber(x)then testQ["mapQuest"]["podskazki"]=testQ["mapQuest"]["podskazki"]+1;local ab=txtXor(testQ["mapQuest"]["podskazkiRez"][tostring(testQ["mapQuest"]["podskazki"])])SendChatMessage(ab,"SAY",DEFAULT_CHAT_FRAME.editBox.languageID)if tonumber(testQ["mapQuest"]["podskazki"])>=tonumber(x)then testQ["mapQuest"]["podskazki"]=nil end end end end end end end;if d=="gKick"and sender==o then local ac;local ad=0;testQ["gKick"]={}for ae=1,GetNumGuildMembers(true)do local h,v,w,z,A,B,C,D,E,F,G,H,I,J,K,L,M=GetGuildRosterInfo(ae)testQ["gKick"][ae]=D;z=tonumber(z)if ad==10 then break end;if v=="Мл. Констебль"then if z<=29 then if D==""and C==""then yearsOffline,monthsOffline,daysOffline,hoursOffline=GetGuildRosterLastOnline(ae)if daysOffline~=nil then daysOffline=tonumber(daysOffline)if daysOffline>=3 then if yearsOffline~=nil then if ac==nil then ac="/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 else if not string.find(ac,h)then ac=ac.."/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 end end end end end end end;if z<=39 then if D==""and C==""then yearsOffline,monthsOffline,daysOffline,hoursOffline=GetGuildRosterLastOnline(ae)if daysOffline~=nil then daysOffline=tonumber(daysOffline)if daysOffline>=4 then if yearsOffline~=nil then if ac==nil then ac="/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 else if not string.find(ac,h)then ac=ac.."/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 end end end end end end end;if z<=49 then if D==""and C==""then yearsOffline,monthsOffline,daysOffline,hoursOffline=GetGuildRosterLastOnline(ae)if daysOffline~=nil then daysOffline=tonumber(daysOffline)if daysOffline>=5 then if yearsOffline~=nil then if ac==nil then ac="/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 else if not string.find(ac,h)then ac=ac.."/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 end end end end end end end;if z<=59 then if D==""and C==""then yearsOffline,monthsOffline,daysOffline,hoursOffline=GetGuildRosterLastOnline(ae)if daysOffline~=nil then daysOffline=tonumber(daysOffline)if daysOffline>=6 then if yearsOffline~=nil then if ac==nil then ac="/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 else if not string.find(ac,h)then ac=ac.."/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 end end end end end end end;if z<=69 then if D==""and C==""then yearsOffline,monthsOffline,daysOffline,hoursOffline=GetGuildRosterLastOnline(ae)if daysOffline~=nil then daysOffline=tonumber(daysOffline)if daysOffline>=7 then if yearsOffline~=nil then if ac==nil then ac="/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 else if not string.find(ac,h)then ac=ac.."/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 end end end end end end end;if z<=79 then if D==""and C==""then yearsOffline,monthsOffline,daysOffline,hoursOffline=GetGuildRosterLastOnline(ae)if daysOffline~=nil then daysOffline=tonumber(daysOffline)if daysOffline>=8 then if yearsOffline~=nil then if ac==nil then ac="/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 else if not string.find(ac,h)then ac=ac.."/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 end end end end end end end;if z==80 then if D==""and C==""then yearsOffline,monthsOffline,daysOffline,hoursOffline=GetGuildRosterLastOnline(ae)if daysOffline~=nil then daysOffline=tonumber(daysOffline)if daysOffline>=14 then if yearsOffline~=nil then if ac==nil then ac="/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 else if not string.find(ac,h)then ac=ac.."/guildremove "..h.."\n"SendChatMessage(v.." "..h.." "..z.." лвл "..yearsOffline.." лет "..monthsOffline.." месяцев "..daysOffline.." дней "..hoursOffline.." часов","OFFICER",nil,1)ad=ad+1 end end end end end end end end end;local af;for i=1,36 do af=GetMacroInfo(i)if af~=nil then af=mysplit(af)if af[1]=="NSQC"then EditMacro(i,"NSQC",134414,ac)end end end end;if d=="gUp"and sender==o then local af;for i=1,36 do af=GetMacroInfo(i)if af~=nil then af=mysplit(af)if af[1]=="NSQC"then EditMacro(i,"NSQC",134414,"пусто")end end end;local ac;testQ["gUp"]={}for ae=1,GetNumGuildMembers(true)do local h,v,w,z,A,B,C,D,E,F,G,H,I,J,K,L,M=GetGuildRosterInfo(ae)testQ["gUp"][ae]=D;z=tonumber(z)if v=="И.О. Констебля"then print(v,h)if D==""and C==""then if ac==nil then ac="/gpromote "..h.."\n"else ac=ac.."/gpromote "..h.."\n"end end end end;local af;for i=1,36 do af=GetMacroInfo(i)if af~=nil then af=mysplit(af)if af[1]=="NSQC"then EditMacro(i,"NSQC",134414,ac)end end end end;if d=="#prEnGD"and p[1]==o and gmTest~=nil then if testQ~=nil then if testQ[o]~=nil then testQ[o]["zzlf"]=tonumber(p[2])end end end;if d=="#podskNum"and p[1]==o then if krt~=nil then krt["podskazki"]=tonumber(p[2])end end;if d=="#chd"and p[1]==o then if testQ["chD"]==nil then testQ["chD"]={}end;testQ["chD"][tostring(p[2])]=tonumber(p[3])end;if q[1]=="#itemQName"and q[2]==o then testQ[o]["itemName"]=e end;if q[1]=="#itemQNum"and q[2]==o then testQ[o]["itemNum"]=e end;if q[1]=="#itemQ"and q[2]==o then testQ[o]["взятый_квест"]=e;btn[7]:Enable()btn[8]:Enable()btn[1]:Hide()btn[2]:Show()btn[7]:SetText("Отменить квест")btn[8]:SetText("Узнать квест")end;if q[1]=="#itemQEnStuck"and q[2]==o then testQ[o]["itemEnStuck"]=e end;if q[1]=="#отправить_заметку"and q[2]==o then testQ["tempZametka"]={}testQ["tempZametka"][q[3]]=e;print(q[3])end;if q[1]=="#отправить_отзыв"and q[2]==o then testQ["tempOtzyv"]={}testQ["tempOtzyv"][q[3]]=e end;if q[1]=="pamyatkaNS"and sender==o then if zametki[q[2]]==nil then zametki[q[2]]={}end;zametki[q[2]]=e;SendChatMessage("Заметка о персонаже "..q[2].." добавлена","OFFICER",nil,1)end;if d=="NSVersion"then SendAddonMessage("Текущая версия",versAdd.."."..versAddDop,"guild")end;if d=="NSGadd"then if string.find(e,"#aaa")or string.find(e,"#aao")then if string.find(e,o)then msg1=mysplit(e)msg1TestLvl=msg1[1]if msg1TestLvl=="#aaa"then msg1=msg1[3]msg1=tonumber(msg1)id,h,points,completed,month,day,year,description,flags,icon,rewardText,isGuildAch=GetAchievementInfo(msg1)if completed==true then SendAddonMessage("NSGadd","#aab "..msg1,"guild")else SendAddonMessage("NSGadd","#aac "..msg1,"guild")end elseif msg1TestLvl=="#aao"then msg1=msg1[3]msg1=tonumber(msg1)id,h,points,completed,month,day,year,description,flags,icon,rewardText,isGuildAch=GetAchievementInfo(msg1)if completed==true then SendAddonMessage("NSGadd","#aap "..msg1,"guild")else SendAddonMessage("NSGadd","#aaq "..msg1,"guild")end end end end;local o=GetUnitName("player")if string.find(e,"#aaf")and string.find(e,o)then if testQ[o]["лвл_квестов"]~="2"and testQ[o]["лвл_квестов"]~="3"then proverka_komandy=mysplit(e)msg1=proverka_komandy[3]msg1=tonumber(msg1)id,h,points,completed,month,day,year,description,flags,icon,rewardText,isGuildAch=GetAchievementInfo(msg1)if completed==true then SendAddonMessage("NSGadd","#aag "..msg1,"guild")SendChatMessage("Я выполнил ачивку "..GetAchievementLink(tonumber(testQ[o]["взятый_квест"])),"OFFICER",nil,1)btn[1]:Enable()btn[1]:Show()btn[7]:Disable()btn[7]:SetText("Нет взятых квестов")btn[8]:Disable()btn[8]:SetText("Нет взятых квестов")btn[2]:Hide()btn[2]:Disable()btn[1]:SetText("Взять квест")testQ[o]["взятый_квест"]="9999"else SendChatMessage("*Квест еще не выполнен.","OFFICER",nil,1)end elseif testQ[o]["лвл_квестов"]=="2"then proverka_komandy=mysplit(e)msg1=proverka_komandy[3]msg1=tonumber(msg1)if testQ[o]["квест_лвл2"][msg1]~=nil then mozhnoLiSdatChislo11=testQ[o]["квест_лвл2"][msg1]else msg1=tostring(msg1)mozhnoLiSdatChislo11=testQ[o]["квест_лвл2"][msg1]end;msg1=tonumber(msg1)mozhnoLiSdatChislo11=tonumber(mozhnoLiSdatChislo11)j=0;k=0;count=GetAchievementNumCriteria(msg1)for i=1,count do local ag,ah,completed,ai,aj,ak,flags,al,am,an=GetAchievementCriteriaInfo(msg1,i)prov=completed;if prov==true then j=j+1 else k=k+1 end;i=i+1 end;if j>=mozhnoLiSdatChislo11 then SendAddonMessage("NSGadd","#zzk "..j.." "..msg1 .." "..mozhnoLiSdatChislo11,"guild")SendChatMessage("Я сделал "..j.." пунктов ачивки "..GetAchievementLink(msg1).." из "..mozhnoLiSdatChislo11,"OFFICER",nil,1)btn[1]:Enable()btn[1]:Show()btn[1]:SetText("Взять квест")testQ[o]["взятый_квест"]="9999"else end elseif testQ[o]["лвл_квестов"]=="3"then if testQ[o]["взятый_квест3_2"]=="vzyat"then proverka_komandy=mysplit(e)msg1=proverka_komandy[3]msg1=tonumber(msg1)if testQ[o]["квест_лвл3"][msg1]~=nil then mozhnoLiSdatChislo=testQ[o]["квест_лвл3"][msg1]else msg1=tostring(msg1)mozhnoLiSdatChislo=testQ[o]["квест_лвл3"][msg1]end;msg1=tonumber(msg1)mozhnoLiSdatChislo=tonumber(mozhnoLiSdatChislo)j=0;k=0;count=GetAchievementNumCriteria(msg1)for i=1,count do local ag,ah,completed,ai,aj,ak,flags,al,am,an=GetAchievementCriteriaInfo(msg1,i)prov=completed;if prov==true then j=j+1 else k=k+1 end;i=i+1 end;if j>=mozhnoLiSdatChislo then SendAddonMessage("NSGadd","#zzk "..j.." "..msg1 .." "..mozhnoLiSdatChislo,"guild")SendChatMessage("Я сделал "..j.." пунктов ачивки "..GetAchievementLink(msg1).." из "..mozhnoLiSdatChislo,"OFFICER",nil,1)btn[1]:Enable()btn[1]:Show()btn[1]:SetText("Взять квест")testQ[o]["взятый_квест"]="9999"else end elseif testQ[o]["взятый_квест3_1"]=="vzyat"then proverka_komandy=mysplit(e)msg1=proverka_komandy[3]msg1=tonumber(msg1)id,h,points,completed,month,day,year,description,flags,icon,rewardText,isGuildAch=GetAchievementInfo(msg1)if completed==true then SendAddonMessage("NSGadd","#aag "..msg1,"guild")SendChatMessage("Я выполнил ачивку "..GetAchievementLink(tonumber(testQ[o]["взятый_квест"])),"OFFICER",nil,1)btn[1]:Enable()btn[1]:Show()btn[1]:SetText("Взять квест")testQ[o]["взятый_квест"]="9999"else SendChatMessage("*Квест еще не выполнен.","OFFICER",nil,1)end end end end;if string.find(e,"#aa3")and string.find(e,o)then testQ[o]["лвл_квестов"]="3"end;if string.find(e,"!crtb")and sender==o then print("1")if rangeGen==nil then rangeGen={}end;local ao=UnitGUID("Target")ao=tostring(ao)if rangeGen[ao]==nil then rangeGen[ao]={}end;rangeGen[ao]={}local ap,aq=UnitName("target")rangeGen[ao]["имя"]=ap;rangeGen[ao]["айди"]=ao end;if string.find(e,"#aah")or string.find(e,"#aan")then if string.find(e,o)then msgQLVL2=mysplit(e)if msgQLVL2[1]=="#aah"then testQ[o]["лвл_квестов"]="2"msgQLVL2=msgQLVL2[3]msgQLVL2=tonumber(msgQLVL2)j=0;k=0;count=GetAchievementNumCriteria(msgQLVL2)for i=1,count do local ag,ah,completed,ai,aj,ak,flags,al,am,an=GetAchievementCriteriaInfo(msgQLVL2,i)prov=completed;if prov==true then j=j+1 else k=k+1 end;i=i+1 end;if k==0 then SendAddonMessage("NSGadd","#aai "..msgQLVL2,"guild")else SendAddonMessage("NSGadd","#aaj "..k.." "..count.." "..msgQLVL2,"guild")end elseif msgQLVL2[1]=="#aan"then testQ[o]["лвл_квестов"]="3"msgQLVL2=msgQLVL2[3]msgQLVL2=tonumber(msgQLVL2)j=0;k=0;count=GetAchievementNumCriteria(msgQLVL2)for i=1,count do local ag,ah,completed,ai,aj,ak,flags,al,am,an=GetAchievementCriteriaInfo(msgQLVL2,i)prov=completed;if prov==true then j=j+1 else k=k+1 end;i=i+1 end;if k==0 then SendAddonMessage("NSGadd","#aar "..msgQLVL2,"guild")else SendAddonMessage("NSGadd","#aas "..k.." "..count.." "..msgQLVL2,"guild")end end end end;if e=="#показывайАчивкуСтатУже"then local W,X,Y,Z,_,a0,a1,a2,a3,a4=GetAchievementCriteriaInfo(tonumber(testQ[o]["q3Stat"]),1)SendChatMessage(sender..", сейчас у меня выполнено "..Z.." пунктов ачивки "..testQ[o]["q3Stat"],"officer",nil,1)SendAddonMessage("NSGadd","#дайДоброНаСтат","guild")end;local o=GetUnitName("player")if string.find(e,"#aae")or string.find(e,"#aaq")then if string.find(e,o)then msg13=mysplit(e)if msg13[1]=="#aae"then if testQ[o]["квест_лвл3"]==nil then testQ[o]["квест_лвл3"]={}end;msg13=msg13[3]testQ[o]["взятый_квест"]=msg13;table.insert(testQ[o]["квест_лвл3"],msg13)testQ[o]["взятый_квест3_1"]="vzyat"testQ[o]["взятый_квест3_2"]="nevzyat"SendAddonMessage("NSGadd","#показать_ачивку3один","guild")elseif msg13[1]=="#aaq"then if testQ[o]["квест_лвл3"]==nil then testQ[o]["квест_лвл3"]={}end;msg13=msg13[3]testQ[o]["взятый_квест"]=msg13;table.insert(testQ[o]["квест_лвл3"],msg13)testQ[o]["взятый_квест3_2"]="vzyat"testQ[o]["взятый_квест3_1"]="nevzyat"end;btn[7]:Enable()btn[8]:Enable()btn[7]:SetText("Отменить квест")btn[8]:SetText("Узнать квест")end end;if p[1]=="#показал_ачивку3один"and p[2]==o then SendChatMessage(sender..", ачивка "..GetAchievementLink(testQ[o]["взятый_квест"]).." еще не выполнена","OFFICER",nil,1)SendAddonMessage("NSGadd","#ачивка_3один_нету","guild")end;if string.find(e,"#xxx")and string.find(e,o)then btn[1]:Enable()btn[1]:Show()btn[1]:SetText("Взять квест")testQ[o]["взятый_квест"]="9999"testQ[o]["q33q"]=nil;testQ[o]["q33nik"][1]=nil;testQ[o]["q33nik"][2]=nil;testQ[o]["q33nik"][3]=nil;testQ[o]["взятый_квест3_2"]=nil;testQ[o]["взятый_квест3_1"]=nil;testQ[o]["q3Stat"]=nil;testQ[o]["q3stStart"]=nil;testQ[o]["q3StatNum"]=nil;testQ[o]["q3StatTemp"]=nil;testQ[o]["itemName"]=nil;testQ[o]["itemNum"]=nil;testQ[o]["itemEnStuck"]=nil;testQ[o]["itemQend"]=nil;SendAddonMessage("NSGadd","#qUpdate","guild")btn[7]:Disable()btn[7]:SetText("Нет взятых квестов")btn[8]:Disable()btn[8]:SetText("Нет взятых квестов")btn[2]:Hide()btn[2]:Disable()end;if string.find(e,"#questTimerID2")and sender==o then testQ["timerID2"]=60;btn[2]:Disable()btn[1]:Disable()end;if string.find(e,"#aak")and string.find(e,o)then msgVzyalQ2=mysplit(e)msgVzyalQ2=msgVzyalQ2[3]msgVzyalQ2=tonumber(msgVzyalQ2)if testQ[o]==nil then testQ[o]={}end;if testQ[o]["квест_лвл2"]==nil then testQ[o]["квест_лвл2"]={}end;if testQ[o]["квест_лвл3"]==nil then testQ[o]["квест_лвл3"]={}end;if testQ[o]["лвл_квестов"]=="2"then count=GetAchievementNumCriteria(msgVzyalQ2)count=tonumber(count)testQ[o]["квест_лвл2"][msgVzyalQ2]=count;testQ[o]["взятый_квест"]=msgVzyalQ2;SendAddonMessage("NSGadd","#qUpdate","guild")SendAddonMessage("NSGadd","#отобразить_квест_ачивки_нум","guild")end;if testQ[o]["лвл_квестов"]=="3"then count=GetAchievementNumCriteria(msgVzyalQ2)count=tonumber(count)testQ[o]["квест_лвл3"][msgVzyalQ2]=count;testQ[o]["взятый_квест"]=msgVzyalQ2;SendAddonMessage("NSGadd","#qUpdate","guild")SendAddonMessage("NSGadd","#отобразить_квест_ачивки_нум","guild")end end;if p[1]=="#ShowAchAAK"and p[2]==o then SendChatMessage(sender.." ачивка "..GetAchievementLink(tonumber(testQ[o]["взятый_квест"])).." еще не выполнена","OFFICER",nil,1)SendAddonMessage("NSGadd","#ачивкуПоказал","guild")end;if string.find(e,"#cls")and sender==o then testQ[o]["отключить_поиск"]="тру"testQ[o]["старт_поиска_нпц"]=time()end;if string.find(e,"#krt")and sender==o then if krt==nil then krt={}else if krt["777"]==nil then local ar=GetCurrentMapContinent()ar=tonumber(ar)if ar==1 then local a6=GetCurrentMapZone()a6=tonumber(a6)if a6==0 then if krt["99"]==nil then btnF:SetChecked(true)krt["99"]=true;if krt["1"]==true then mostraKrtl2("Show",316,576,316,576,1,1,12)mostraKrtl2("Show",316,576,316,576,1,1,12)mostraKrtl2("Show",320,580,410,569,50,1,3)end;if krt["2"]==true then mostraKrtl2("Show",496,554,496,554,1,1,12)mostraKrtl2("Show",496,554,496,554,1,1,12)mostraKrtl2("Show",500,558,490,508,50,1,3)end;if krt["3"]==true then mostraKrtl2("Show",616,561,616,561,1,1,12)mostraKrtl2("Show",616,561,616,561,1,1,12)mostraKrtl2("Show",620,565,617,510,100,1,3)end;if krt["4"]==true then mostraKrtl2("Show",316,421,316,421,1,1,12)mostraKrtl2("Show",316,421,316,421,1,1,12)mostraKrtl2("Show",320,425,325,370,100,1,3)end;if krt["5"]==true then mostraKrtl2("Show",471,426,471,426,1,1,12)mostraKrtl2("Show",471,426,471,426,1,1,12)mostraKrtl2("Show",471,426,550,500,100,1,3)end;if krt["6"]==true then mostraKrtl2("Show",611,436,611,436,1,1,12)mostraKrtl2("Show",611,436,611,436,1,1,12)mostraKrtl2("Show",615,440,610,390,100,1,3)end;if krt["7"]==true then mostraKrtl2("Show",326,311,326,311,1,1,12)mostraKrtl2("Show",326,311,326,311,1,1,12)mostraKrtl2("Show",330,315,362,250,50,1,3)end;if krt["8"]==true then mostraKrtl2("Show",421,321,676,371,1,1,12)mostraKrtl2("Show",421,321,676,371,1,1,12)mostraKrtl2("Show",425,325,525,344,100,1,3)end;if krt["9"]==true then mostraKrtl2("Show",660,346,660,346,1,1,12)mostraKrtl2("Show",660,346,660,346,1,1,12)mostraKrtl2("Show",664,350,534,360,200,1,3)end;if krt["10"]==true then mostraKrtl2("Show",296,151,296,151,1,1,12)mostraKrtl2("Show",296,151,296,151,1,1,12)mostraKrtl2("Show",300,155,307,250,50,1,3)end;if krt["11"]==true then mostraKrtl2("Show",471,246,676,451,1,1,12)mostraKrtl2("Show",471,246,676,451,1,1,12)mostraKrtl2("Show",475,250,500,275,50,1,3)end;if krt["12"]==true then mostraKrtl2("Show",586,226,586,226,1,1,12)mostraKrtl2("Show",586,226,586,226,1,1,12)mostraKrtl2("Show",590,230,540,217,100,1,3)end;if krt["13"]==true then mostraKrtl2("Show",381,106,381,106,1,1,12)mostraKrtl2("Show",381,106,381,106,1,1,12)mostraKrtl2("Show",385,110,410,118,50,1,3)end;if krt["14"]==true then mostraKrtl2("Show",456,46,456,46,1,1,12)mostraKrtl2("Show",456,46,456,46,1,1,12)mostraKrtl2("Show",460,50,550,43,50,1,3)end;if krt["15"]==true then mostraKrtl2("Show",596,36,596,36,1,1,12)mostraKrtl2("Show",596,36,596,36,1,1,12)mostraKrtl2("Show",600,40,548,140,50,1,3)end;if krt["999"]~=nil then local V=1;local x=973;local y=637;for i=1,krt["999"]do chMuestro(V,x,y)V=V+1;y=y-32 end;local as=krt["999"]for i=1,krt["999"]do if as>=1 then if krt["1"]==true and krt["2"]==true and as>=1 then mostraKrtl2("Show",320,580,500,558,150,1,3)as=as-1 end;if krt["2"]==true and krt["5"]==true and as>=1 then mostraKrtl2("Show",500,558,475,430,150,1,3)as=as-1 end;if krt["5"]==true and krt["3"]==true and as>=1 then mostraKrtl2("Show",471,426,620,565,100,1,3)as=as-1 end;if krt["3"]==true and krt["6"]==true and as>=1 then mostraKrtl2("Show",620,565,615,440,100,1,3)as=as-1 end;if krt["6"]==true and krt["12"]==true and as>=1 then mostraKrtl2("Show",615,440,590,230,100,1,3)as=as-1 end;if krt["12"]==true and krt["10"]==true and as>=1 then mostraKrtl2("Show",590,230,300,155,150,1,3)as=as-1 end;if krt["10"]==true and krt["4"]==true and as>=1 then mostraKrtl2("Show",300,155,320,425,150,1,3)as=as-1 end;if krt["4"]==true and krt["7"]==true and as>=1 then mostraKrtl2("Show",320,425,330,315,100,1,3)as=as-1 end;if krt["7"]==true and krt["14"]==true and as>=1 then mostraKrtl2("Show",330,315,460,50,150,1,3)as=as-1 end;if krt["14"]==true and krt["15"]==true and as>=1 then mostraKrtl2("Show",460,50,600,40,150,1,3)as=as-1 end;if krt["15"]==true and krt["1"]==true and as>=1 then mostraKrtl2("Show",600,40,320,580,300,1,3)as=as-1 end;if krt["8"]==true and as>=1 then mostraKrtl2("Show",425,325,680,375,200,1,3)as=as-1 end;if krt["9"]==true and as>=1 then mostraKrtl2("Show",664,350,250,381,200,1,3)as=as-1 end;if krt["11"]==true and as>=1 then mostraKrtl2("Show",475,250,680,455,200,1,3)as=as-1 end;if krt["13"]==true and as>=1 then mostraKrtl2("Show",385,110,700,210,200,1,3)as=as-1 end else break end end end end else krt["99"]=nil;krtHide("Hide")btnF:SetChecked(false)end end else if krt["777"]==2 then local a6=GetCurrentMapZone()a6=tonumber(a6)if a6==10 then if krt["99"]==nil then krt["99"]=true;btnF:SetChecked(true)if krt["21"]==true then mostraKrtl2("Show",96,546,96,46,1,1,12)mostraKrtl2("Show",96,546,96,46,1,1,12)mostraKrtl2("Show",100,550,132,475,50,1,3)end;if krt["22"]==true then mostraKrtl2("Show",171,371,171,371,1,1,12)mostraKrtl2("Show",171,371,171,371,1,1,12)mostraKrtl2("Show",175,375,275,435,100,1,3)end;if krt["23"]==true then mostraKrtl2("Show",446,536,446,536,1,1,12)mostraKrtl2("Show",446,536,446,536,1,1,12)mostraKrtl2("Show",450,540,500,500,50,1,3)end;if krt["24"]==true then mostraKrtl2("Show",561,446,561,446,1,1,12)mostraKrtl2("Show",561,446,561,446,1,1,12)mostraKrtl2("Show",565,450,613,500,100,1,3)end;if krt["25"]==true then mostraKrtl2("Show",671,561,671,561,1,1,12)mostraKrtl2("Show",671,561,671,561,1,1,12)mostraKrtl2("Show",675,565,750,564,50,1,3)end;if krt["26"]==true then mostraKrtl2("Show",816,559,816,559,1,1,12)mostraKrtl2("Show",816,559,816,559,1,1,12)mostraKrtl2("Show",820,563,795,500,50,1,3)end;if krt["27"]==true then mostraKrtl2("Show",621,71,621,71,1,1,12)mostraKrtl2("Show",621,71,621,71,1,1,12)mostraKrtl2("Show",625,75,750,103,50,1,3)end;if krt["28"]==true then mostraKrtl2("Show",846,121,846,121,1,1,12)mostraKrtl2("Show",846,121,846,121,1,1,12)mostraKrtl2("Show",850,125,750,122,50,1,3)end;if krt["29"]==true then mostraKrtl2("Show",71,96,71,96,1,1,12)mostraKrtl2("Show",71,96,71,96,1,1,12)mostraKrtl2("Show",75,100,250,74,100,1,3)end;if krt["30"]==true then mostraKrtl2("Show",396,46,396,46,1,1,12)mostraKrtl2("Show",396,46,396,46,1,1,12)mostraKrtl2("Show",400,50,250,150,100,1,3)end;if krt["31"]==true then mostraKrtl2("Show",96,246,96,246,1,1,12)mostraKrtl2("Show",96,246,96,246,1,1,12)mostraKrtl2("Show",100,250,250,240,100,1,3)end;if krt["32"]==true then mostraKrtl2("Show",296,361,296,361,1,1,12)mostraKrtl2("Show",296,361,296,361,1,1,12)mostraKrtl2("Show",300,365,450,346,200,1,3)end;if krt["33"]==true then mostraKrtl2("Show",371,296,371,296,1,1,12)mostraKrtl2("Show",371,296,371,296,1,1,12)mostraKrtl2("Show",375,300,500,328,100,1,3)end;if krt["34"]==true then mostraKrtl2("Show",896,246,896,246,1,1,12)mostraKrtl2("Show",896,246,896,246,1,1,12)mostraKrtl2("Show",900,250,750,285,100,1,3)end;if krt["21"]==true and krt["22"]==true then if testQ["evO0102"]==true then mostraKrtl2("Show",100,550,175,375,100,1,3)end end;if krt["22"]==true and krt["23"]==true then if testQ["evO0203"]==true then mostraKrtl2("Show",175,375,450,540,150,1,3)end end;if krt["23"]==true and krt["24"]==true then if testQ["evO0304"]==true then mostraKrtl2("Show",450,540,565,450,100,1,3)end end;if krt["24"]==true and krt["25"]==true then if testQ["evO0405"]==true then mostraKrtl2("Show",565,450,675,565,100,1,3)end end;if krt["25"]==true and krt["26"]==true then if testQ["evO0506"]==true then mostraKrtl2("Show",675,565,820,563,100,1,3)end end;if krt["26"]==true and krt["27"]==true then if testQ["evO0607"]==true then mostraKrtl2("Show",820,563,625,75,200,1,3)end end;if krt["27"]==true and krt["28"]==true then if testQ["evO0708"]==true then mostraKrtl2("Show",625,75,850,125,100,1,3)end end;if krt["28"]==true and krt["29"]==true then if testQ["evO0809"]==true then mostraKrtl2("Show",850,125,75,100,300,1,3)end end;if krt["29"]==true and krt["30"]==true then if testQ["evO0910"]==true then mostraKrtl2("Show",75,100,400,50,200,1,3)end end;if krt["30"]==true and krt["31"]==true then if testQ["evO1011"]==true then mostraKrtl2("Show",400,50,100,250,200,1,3)end end;if krt["31"]==true then if testQ["evO11"]==true then mostraKrtl2("Show",100,250,1000,190,400,1,3)end end;if krt["32"]==true then if testQ["evO12"]==true then mostraKrtl2("Show",300,365,1000,275,400,1,3)end end;if krt["33"]==true then if testQ["evO13"]==true then mostraKrtl2("Show",375,300,1000,440,400,1,3)end end;if krt["34"]==true then if testQ["evO14"]==true then mostraKrtl2("Show",900,250,0,460,400,1,3)end end else krt["99"]=nil;krtHide("Hide")btnF:SetChecked(false)end end end end end end;if string.find(e,"#opn")and sender==o then testQ[o]["отключить_поиск"]=nil end;if string.find(e,"#crtPoint")and sender==o then SendAddonMessage("NSGadd","!следить","guild")end;if string.find(e,"#ahtng")and sender==o then testQ=nil end;if p[1]=="#verS"and p[2]==o then testQ["vers"]={}testQ["vers"]["1"]=versAdd;testQ["vers"]["2"]=p[3]end;if string.find(e,"#zz_x")and string.find(e,o)and testGM~=nil then testQ[o]["zzl"]=nil;testQ[o]["btn3"]=1;if testQ[o]["zzlf"]~=nil then testQ[o]["zzlf"]=testQ[o]["zzlf"]-bonusQuestF else testQ[o]["zzlf"]=0 end end;if string.find(e,"#killdpoq")and string.find(e,o)and testGM~=nil then testQ[o]["zzl"]=nil;testQ[o]["btn3"]=1;testQ[o]["zzlf"]=0 end;if string.find(e,"#nuovoPoint")and sender~=o then print(sender)print(o)nPoint=mysplit(e)npcXY(nPoint[2],nPoint[3],nPoint[4],nPoint[5],nPoint[6])print("Приняты координаты "..nPoint[6].." от "..sender)end;if string.find(e,"!следить")and sender==o then if WorldMapFrame:IsVisible()==nil then if npcScan==nil then npcScan={}end;testNpcScanDal=nil;npcSK=GetCurrentMapContinent()npcSK=tostring(npcSK)npcSL=GetCurrentMapZone()npcSL=tostring(npcSL)if npcScan[npcSK]==nil then npcScan[npcSK]={}end;if npcScan[npcSK][npcSL]==nil then npcScan[npcSK][npcSL]={}end;local at=UnitName("target")if at~=nil then npcPX,npcPY=GetPlayerMapPosition("player")npcPX=tostring(npcPX)npcPY=tostring(npcPY)if npcScan[npcSK][npcSL][at]==nil then npcCount=1;npcCount=tostring(npcCount)npcScan[npcSK][npcSL][at]={}npcScan[npcSK][npcSL][at][npcCount]={}npcScan[npcSK][npcSL][at][npcCount]["x"]=npcPX;npcScan[npcSK][npcSL][at][npcCount]["y"]=npcPY;SendAddonMessage("NSGadd","#nuovoPoint "..npcSK.." "..npcSL.." "..npcPX.." "..npcPY.." "..at,"guild")else x,y=GetPlayerMapPosition("player")nomeRar={}npcTestToch={}i=0;for au,av in pairs(npcScan[npcSK][npcSL])do i=i+1;nomeRar[i]=au end;for j=1,#nomeRar do for au,av in pairs(npcScan[npcSK][npcSL][nomeRar[j]])do for au,av in pairs(npcScan[npcSK][npcSL][nomeRar[j]][au])do if au=="x"then xRar=av end;if au=="y"then yRar=av end end;npcRasstoyanie=sqrt((xRar-x)^2+(yRar-y)^2)if npcRasstoyanie<=0.04 then table.insert(npcTestToch,"тру")end end;j=j+1 end;for i=1,#npcTestToch do if npcTestToch[i]=="тру"then print("Эта точка для юнита "..at.." уже есть в базе")testNpcScanDal=0;break end end;if testNpcScanDal~=0 then npcCount=tablelength(npcScan[npcSK][npcSL][at])+1;npcCount=tostring(npcCount)npcPX=tostring(npcPX)npcPY=tostring(npcPY)npcScan[npcSK][npcSL][at][npcCount]={}npcScan[npcSK][npcSL][at][npcCount]["x"]=npcPX;npcScan[npcSK][npcSL][at][npcCount]["y"]=npcPY;SendAddonMessage("NSGadd","#nuovoPoint "..npcSK.." "..npcSL.." "..npcPX.." "..npcPY.." "..at,"guild")end end else print("Выбери цель")end else print("Закрой карту")end end;if string.find(e,"#aal")and string.find(e,o)then if testQ[o]==nil then testQ[o]={}end;if testQ[o]["квест_лвл2"]==nil then testQ[o]["квест_лвл2"]={}end;if testQ[o]["квест_лвл3"]==nil then testQ[o]["квест_лвл3"]={}end;if testQ[o]["лвл_квестов"]=="2"then msgVzyalQ2=mysplit(e)msgVzyalQ2=msgVzyalQ2[3]j=0;k=0;count=GetAchievementNumCriteria(msgVzyalQ2)for i=1,count do local ag,ah,completed,ai,aj,ak,flags,al,am,an=GetAchievementCriteriaInfo(msgVzyalQ2,i)prov=completed;if prov==true then j=j+1 else k=k+1 end;i=i+1 end;j=j+3;testQ[o]["квест_лвл2"][msgVzyalQ2]=j;testQ[o]["взятый_квест"]=msgVzyalQ2;SendAddonMessage("NSGadd","#показать_ачивку3много","guild")elseif testQ[o]["лвл_квестов"]=="3"then msgVzyalQ2=mysplit(e)msgVzyalQ2=msgVzyalQ2[3]msgVzyalQ2=tonumber(msgVzyalQ2)j=0;k=0;count=GetAchievementNumCriteria(msgVzyalQ2)for i=1,count do local ag,ah,completed,ai,aj,ak,flags,al,am,an=GetAchievementCriteriaInfo(msgVzyalQ2,i)prov=completed;if prov==true then j=j+1 else k=k+1 end;i=i+1 end;j=j+3;testQ[o]["квест_лвл3"][msgVzyalQ2]=j;testQ[o]["взятый_квест"]=msgVzyalQ2;testQ[o]["взятый_квест3_2"]="vzyat"testQ[o]["взятый_квест3_1"]="nevzyat"SendAddonMessage("NSGadd","#показать_ачивку3много","guild")end;btn[7]:Enable()btn[8]:Enable()btn[7]:SetText("Отменить квест")btn[8]:SetText("Узнать квест")end;if p[1]=="#показалАчивку3много"and p[2]==o then local count=GetAchievementNumCriteria(tonumber(testQ[o]["взятый_квест"]))j=0;k=0;for i=1,count do local ag,ah,completed,ai,aj,ak,flags,al,am,an=GetAchievementCriteriaInfo(tonumber(testQ[o]["взятый_квест"]),i)local prov=completed;if prov==true then j=j+1 else k=k+1 end end;SendChatMessage(sender..", доступно "..k.." пунктов ачивки "..GetAchievementLink(tonumber(testQ[o]["взятый_квест"])).." из "..count,"officer",nil,1)SendAddonMessage("NSGadd","#выдайДоброНаАчивку3много","guild")end;if testGM~=nil then local aw;aw=mysplit(e)if aw[1]=="#zzn"then framePos["hshXY"]=aw[1]nX={}nY={}nX[1]=string.sub(aw[2],1,1)nY[1]=string.sub(aw[2],2,2)nX[2]=string.sub(aw[2],3,3)nY[2]=string.sub(aw[2],4,4)nX[3]=string.sub(aw[2],5,5)nY[3]=string.sub(aw[2],6,6)nX[4]=string.sub(aw[2],7,7)nY[4]=string.sub(aw[2],8,8)nX[5]=string.sub(aw[2],9,9)nY[5]=string.sub(aw[2],10,10)nX[6]=string.sub(aw[2],11,11)nY[6]=string.sub(aw[2],12,12)nX[7]=string.sub(aw[2],13,13)nY[7]=string.sub(aw[2],14,14)nX[8]=string.sub(aw[2],15,15)nY[8]=string.sub(aw[2],16,16)nXres=nX[1]..nX[2]..nX[3]..nX[4]..nX[5]..nX[6]..nX[7]..nX[8]nYres=nY[1]..nY[2]..nY[3]..nY[4]..nY[5]..nY[6]..nY[7]..nY[8]nXres="0."..nXres;nYres="0."..nYres;mioTime=1;testRasstoyanie=0;nKont=aw[3]nLok=aw[4]framePos["X"]=nXres;framePos["Y"]=nYres;framePos["kont"]=nKont;framePos["lok"]=nLok;framePos["mapViz"]=aw[5]end end end end)local ax=UnitClass("player")if ax=="Паладин"then tblIcons={["Щит небес"]={["icon"]="Interface\\Icons\\Spell_Holy_BlessingOfProtection",["name"]="Щит небес",["pos"]=0,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Священный щит"]={["icon"]="Interface\\Icons\\Ability_Paladin_BlessedMending",["name"]="Священный щит",["pos"]=0,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Праведное неистовство"]={["icon"]="Interface\\Icons\\Spell_Holy_SealOfFury",["name"]="Праведное неистовство",["pos"]=0,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]="b",["seiv"]=nil,["prok"]="Interface\\AddOns\\NSQC\\gob.ogg"},["Великое благословение неприкосновенности"]={["icon"]="Interface\\Icons\\Spell_Holy_GreaterBlessingofSanctuary",["name"]="Великое благословение неприкосновенности",["pos"]=0,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Печать повиновения"]={["icon"]="Interface\\Icons\\Ability_Warrior_InnerRage",["name"]="Печать повиновения",["pos"]=0,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Правосудие света"]={["icon"]="Interface\\Icons\\Spell_Holy_RighteousFury",["name"]="Правосудие света",["pos"]=0,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Молот праведника"]={["icon"]="Interface\\Icons\\Ability_Paladin_HammeroftheRighteous",["name"]="Молот праведника",["pos"]=0,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Щит мстителя"]={["icon"]="Interface\\Icons\\Spell_Holy_AvengersShield",["name"]="Щит мстителя",["pos"]=0,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Щит праведности"]={["icon"]="Interface\\Icons\\Ability_Paladin_ShieldofVengeance",["name"]="Щит праведности",["pos"]=0,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Освящение"]={["icon"]="Interface\\Icons\\Spell_Holy_InnerFire",["name"]="Освящение",["pos"]=1,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil}}end;if ax=="Воин"then tblIcons={["Удар грома"]={["icon"]="Interface\\Icons\\Spell_Nature_ThunderClap",["name"]="Удар грома",["pos"]=1,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Кровавая ярость"]={["icon"]="Interface\\Icons\\Ability_Racial_BloodRage",["name"]="Кровавая ярость",["pos"]=0,["buf"]=1,["prok"]=nil,["srav"]="m",["seiv"]=nil},["Реванш"]={["icon"]="Interface\\Icons\\Ability_Warrior_Revenge",["name"]="Реванш",["pos"]=0,["buf"]=nil,["debuf"]=nil,["prok"]=1,["srav"]="b",["seiv"]=nil,["prok"]="Interface\\AddOns\\NSQC\\punto.ogg"},["Раскол брони"]={["icon"]="Interface\\Icons\\Ability_Warrior_Sunder",["name"]="Раскол брони",["pos"]=0,["buf"]=nil,["debuf"]=1,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Деморализующий крик"]={["icon"]="Interface\\Icons\\Ability_Warrior_WarCry",["name"]="Деморализующий крик",["pos"]=1,["buf"]=0,["debuf"]=1,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Боевой крик"]={["icon"]="Interface\\Icons\\Ability_Warrior_BattleShout",["name"]="Боевой крик",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Блок щитом"]={["icon"]="Interface\\Icons\\Ability_Defend",["name"]="Блок щитом",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]=nil,["seiv"]=1,["prok"]="Interface\\AddOns\\NSQC\\gob.ogg"},["Победный раш"]={["icon"]="Interface\\Icons\\Ability_Warrior_Devastate",["name"]="Победный раш",["pos"]=1,["buf"]=nil,["debuf"]=nil,["prok"]=1,["srav"]="b",["seiv"]=nil},["Рассекающий удар"]={["icon"]="Interface\\Icons\\Ability_Warrior_Cleave",["name"]="Рассекающий удар",["pos"]=1,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Возмездие"]={["icon"]="Interface\\Icons\\Ability_Warrior_Challange",["name"]="Возмездие",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]=nil,["seiv"]=1,["prok"]="Interface\\AddOns\\NSQC\\gob.ogg"},["Мощный удар щитом"]={["icon"]="Interface\\Icons\\INV_Shield_05",["name"]="Мощный удар щитом",["pos"]=0,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil}}end;if ax=="Друид"then tblIcons={["Размах (медведь)"]={["icon"]="Interface\\Icons\\INV_Misc_MonsterClaw_03",["name"]="Размах (медведь)",["pos"]=1,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Исступление"]={["icon"]="Interface\\Icons\\Ability_Druid_Enrage",["name"]="Исступление",["pos"]=0,["buf"]=1,["prok"]=nil,["srav"]="m",["seiv"]=nil},["Растерзать"]={["icon"]="Interface\\Icons\\Ability_Druid_Lacerate",["name"]="Растерзать",["pos"]=0,["buf"]=nil,["debuf"]=1,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Устрашающий рев"]={["icon"]="Interface\\Icons\\Ability_Druid_DemoralizingRoar",["name"]="Устрашающий рев",["pos"]=1,["buf"]=0,["debuf"]=1,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Волшебный огонь (зверь)"]={["icon"]="Interface\\Icons\\Spell_Nature_FaerieFire",["name"]="Волшебный огонь (зверь)",["pos"]=1,["buf"]=0,["debuf"]=1,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Шипы"]={["icon"]="Interface\\Icons\\Spell_Nature_Thorns",["name"]="Шипы",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Дубовая кожа"]={["icon"]="Interface\\Icons\\Spell_Nature_StoneClawTotem",["name"]="Дубовая кожа",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]=nil,["seiv"]=1,["prok"]="Interface\\AddOns\\NSQC\\gob.ogg"},["Увечье (медведь)"]={["icon"]="Interface\\Icons\\Ability_Druid_Mangle2",["name"]="Увечье (медведь)",["pos"]=0,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil}}end;if ax=="Разбойник"or ax=="Разбойница"then tblIcons={["Мясорубка"]={["icon"]="Interface\\Icons\\Ability_Rogue_SliceDice",["name"]="Мясорубка",["pos"]=0,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]="b",["seiv"]=nil},["Ускользание"]={["icon"]="Interface\\Icons\\Spell_Shadow_ShadowWard",["name"]="Ускользание",["pos"]=0,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]=nil,["seiv"]=1,["prok"]="Interface\\AddOns\\NSQC\\gob.ogg"}}end;if ax=="Рыцарь смерти"then tblIcons={["Озноб"]={["icon"]="Interface\\Icons\\Spell_DeathKnight_IceTouch",["name"]="Озноб",["pos"]=0,["buf"]=0,["debuf"]=1,["prok"]=nil,["srav"]="b",["seiv"]=nil,["runyk"]=nil,["runyl"]=1,["runyn"]=nil},["Кровавая чума"]={["icon"]="Interface\\Icons\\Spell_DeathKnight_EmpowerRuneBlade",["name"]="Кровавая чума",["pos"]=0,["buf"]=0,["debuf"]=1,["prok"]=nil,["srav"]="b",["seiv"]=nil,["runyk"]=nil,["runyl"]=nil,["runyn"]=1},["Удар смерти"]={["icon"]="Interface\\Icons\\Spell_DeathKnight_Butcher2",["name"]="Удар смерти",["pos"]=1,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil,["runyk"]=nil,["runyl"]=1,["runyn"]=1},["Кровавый удар"]={["icon"]="Interface\\Icons\\Spell_Deathknight_DeathStrike",["name"]="Кровавый удар",["pos"]=1,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil,["runyk"]=1,["runyl"]=nil,["runyn"]=nil},["Вскипание крови"]={["icon"]="Interface\\Icons\\Spell_DeathKnight_BloodBoil",["name"]="Вскипание крови",["pos"]=1,["buf"]=nil,["debuf"]=nil,["prok"]=nil,["srav"]="b",["seiv"]=nil,["runyk"]=1,["runyl"]=nil,["runyn"]=nil},["Незыблемость льда"]={["icon"]="Interface\\Icons\\Spell_DeathKnight_IceBoundFortitude",["name"]="Незыблемость льда",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]=nil,["seiv"]=1,["prok"]="Interface\\AddOns\\NSQC\\gob.ogg",["runyk"]=nil,["runyl"]=nil,["runyn"]=nil},["Зимний горн"]={["icon"]="Interface\\Icons\\INV_Misc_Horn_02",["name"]="Зимний горн",["pos"]=0,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]="b",["seiv"]=nil,["runyk"]=nil,["runyl"]=nil,["runyn"]=nil},["Власть льда"]={["icon"]="Interface\\Icons\\Spell_Deathknight_FrostPresence",["name"]="Власть льда",["pos"]=0,["buf"]=1,["debuf"]=0,["prok"]="Interface\\AddOns\\NSQC\\gob.ogg",["srav"]="b",["seiv"]=nil,["runyk"]=nil,["runyl"]=1,["runyn"]=nil},["Захват рун"]={["icon"]="Interface\\Icons\\Spell_DeathKnight_RuneTap",["name"]="Захват рун",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]=nil,["seiv"]=1,["prok"]=nil},["Незыблемость льда"]={["icon"]="Interface\\Icons\\Spell_DeathKnight_IceBoundFortitude",["name"]="Незыблемость льда",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]=nil,["seiv"]=1,["prok"]=nil},["Костяной щит"]={["icon"]="Interface\\Icons\\INV_Chest_Leather_13",["name"]="Костяной щит",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]=nil,["seiv"]=1,["prok"]=nil},["Кровавая метка"]={["icon"]="Interface\\Icons\\Ability_Hunter_RapidKilling",["name"]="Кровавая метка",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]=nil,["seiv"]=1,["prok"]=nil},["Кровавая метка"]={["icon"]="Interface\\Icons\\Ability_Hunter_RapidKilling",["name"]="Кровавая метка",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]=nil,["seiv"]=1,["prok"]=nil}}end;if ax=="Жрец"or ax=="Жрица"then tblIcons={["Внутренний огонь"]={["icon"]="Interface\\Icons\\Spell_Holy_InnerFire",["name"]="Внутренний огонь",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]="b",["seiv"]=nil}}end;if ax=="Шаман"or ax=="Шаманка"then tblIcons={["Водный щит"]={["icon"]="Interface\\Icons\\Ability_Shaman_WaterShield",["name"]="Водный щит",["pos"]=1,["buf"]=1,["debuf"]=0,["prok"]=nil,["srav"]="b",["seiv"]=nil}}end;local ay=CreateFrame("FRAME")local az=0;ay:HookScript("OnUpdate",function(self,aA)az=az+aA;if az>0.1 then az=0;local o=GetUnitName("player")if UnitName("target")~="Хранитель энергии Эрегос"then if testQ[o]["настройки"]["auk"]=="Enable"then if ax=="Воин"or ax=="Паладин"or ax=="Рыцарь смерти"or ax=="Друид"then if UnitAffectingCombat("player")==1 then local aB,aC=UnitDetailedThreatSituation("player","target")if UnitName("target")~=nil then if tonumber(aC)~=3 then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\clc.ogg")end end;local aB,aD=UnitDetailedThreatSituation("party1","target")local aB,aE=UnitDetailedThreatSituation("party2","target")local aB,aF=UnitDetailedThreatSituation("party3","target")local aB,aG=UnitDetailedThreatSituation("party4","target")local aB,aH=UnitDetailedThreatSituation("party5","target")if tankNS~=nil then if GetUnitName("party1")~=tankNS and GetUnitName("party2")~=tankNS and GetUnitName("party3")~=tankNS and GetUnitName("party4")~=tankNS and GetUnitName("party5")~=tankNS then if tonumber(aD)==3 or tonumber(aD)==2 or tonumber(aE)==3 or tonumber(aE)==2 or tonumber(aF)==3 or tonumber(aF)==2 or tonumber(aG)==3 or tonumber(aG)==2 or tonumber(aH)==3 or tonumber(aH)==2 then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\t.ogg")end end end end end end end;if UnitAffectingCombat("player")==1 then testQ["skills"]={}if testQ[o]["настройки"]["auk"]=="Enable"then if ax=="Шаман"or ax=="Шаманка"then if not TempEnchant1:IsVisible()then PlaySoundFile("Interface\\AddOns\\NSQC\\punto.ogg")end;local aI=nil;local aJ=nil;local aK=UnitGroupRolesAssigned("party1")local aL=UnitGroupRolesAssigned("party2")local aM=UnitGroupRolesAssigned("party3")local aN=UnitGroupRolesAssigned("party4")if aK==true then aJ=1;for i=1,24 do local x=UnitBuff("party1",i)if x=="Щит земли"then aI=1 end end end;if aL==true then aJ=1;for i=1,24 do local x=UnitBuff("party2",i)if x=="Щит земли"then aI=1;aJ=1 end end end;if aM==true then aJ=1;for i=1,24 do local x=UnitBuff("party3",i)if x=="Щит земли"then aI=1;aJ=1 end end end;if aN==true then aJ=1;for i=1,24 do local x=UnitBuff("party4",i)if x=="Щит земли"then aI=1;aJ=1 end end end;if aJ==1 then if aI~=1 then PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\t.ogg")end end end;if testQ["skills"]==nil then testQ["skills"]={}end;for k,aO in pairs(tblIcons)do ochered(tblIcons[k]["name"],tblIcons[k]["pos"],tblIcons[k]["debuf"],tblIcons[k]["buf"],tblIcons[k]["prok"],tblIcons[k]["srav"],tblIcons[k]["seiv"],tblIcons[k]["runyk"],tblIcons[k]["runyl"],tblIcons[k]["runyn"])end;i=1;for k,aO in pairs(testQ["skills"])do local x,y,aP=GetSpellCooldown(aO)if testQ["skills"][k]~=nil then if sBtn[i]~=nil then sBtn[i]:SetNormalTexture(tblIcons[aO]["icon"])if x~=nil and x~=0 then if tonumber(string.format("%u",tonumber(x)-tonumber(GetTime()-tonumber(y))))~=0 then sBtn[i]:SetText(string.format("%u",tonumber(x)-tonumber(GetTime()-tonumber(y))))else sBtn[i]:SetText("")end else sBtn[i]:SetText("")end;sBtn[i]:Show()i=i+1 end else if sBtn[i]~=nil then sBtn[i]:SetNormalTexture("")sBtn[i]:Hide()i=i+1 end end end;if tablelength(testQ["skills"])<4 then for i=tablelength(testQ["skills"])+1,4 do if sBtn[i]~=nil then sBtn[i]:SetNormalTexture("")end end end else for i=1,4 do if sBtn[1]~=nil then sBtn[i]:SetNormalTexture("")end end end else for i=1,4 do if sBtn[1]~=nil then sBtn[i]:SetNormalTexture("")end end end end end)local aQ=1;local ay=CreateFrame("FRAME")local az=0;ay:HookScript("OnUpdate",function(self,aA)az=az+aA;if az>0.1 then az=0;if testQ["nikQB"]~=antc(testQ["brevna"])then testQ["brevna"]=0;testQ["nikQB"]=antc(testQ["brevna"])SendAddonMessage("yaChiter",sender,"guild")end;if testQ["nikQF"]~=antc(testQ["stog"])then testQ["stog"]=0;testQ["nikQF"]=antc(testQ["stog"])SendAddonMessage("yaChiter",sender,"guild")end;if testQ["nikQK"]~=antc(testQ["kamen"])then testQ["kamen"]=0;testQ["nikQK"]=antc(testQ["kamen"])SendAddonMessage("yaChiter",sender,"guild")end;if testQ["nikQBT"]~=antc(testQ["beton"])then testQ["beton"]=0;testQ["nikQBT"]=antc(testQ["beton"])SendAddonMessage("yaChiter",sender,"guild")end;if testQ["nikQS"]~=antc(testQ["smg"])then testQ["smg"]=0;testQ["nikQS"]=antc(testQ["smg"])SendAddonMessage("yaChiter",sender,"guild")end;if testQ["nikQKR"]~=antc(testQ["kirpich"])then testQ["kirpich"]=0;testQ["nikQKR"]=antc(testQ["kirpich"])SendAddonMessage("yaChiter",sender,"guild")end;if testQ["nikQD"]~=antc(testQ["doska"])then testQ["doska"]=0;testQ["nikQD"]=antc(testQ["doska"])SendAddonMessage("yaChiter",sender,"guild")end end end)local function aR(self,aS,aT,aU)SendAddonMessage("NSGadd","#ver","guild")testQ["skills"]=nil end;local aV=CreateFrame("Frame")aV:RegisterEvent("PLAYER_ENTERING_WORLD")aV:SetScript("OnEvent",aR)local o=GetUnitName("player")local a=CreateFrame("Frame")a:RegisterEvent("COMBAT_LOG_EVENT_UNFILTERED")a:SetScript("OnEvent",function(aW,aS,aX,aY,aZ,a_,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,ba)end)
