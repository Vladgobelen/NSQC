function mysplit(u,r)if r==nil then r="\037\115"end local J={}for u in string.gmatch(u,"\040\091\094"..(r.."\093\043\041"))do table.insert(J,u)end return J end local function u()return GetNumRaidMembers()>0 end function round(u)if(u-u%.1)-(u-u%1)<.5 then u=u-u%1 else u=(u-u%1)+1 end return u end function nsplit(u)lines={}for u in u:gmatch("\091\094\r\n\093\043")do table.insert(lines,u)end return lines end function all_trim(u)return u:match("\094\037\115\042\040\046-\041\037\115\042\036")end function kirTest(u,J)test1=u:sub(J,J)testN=u:byte(7)testN=tonumber(testN)if testN==208 then r=u:sub(J*2-1,J*2)else r=test1 end return r end function alfabet(u)shablon="\208\176\208\177\208\178\208\179\208\180\208\181\209\145\208\182\208\183\208\184\208\185\208\186\208\187\208\188\208\189\208\190\208\191\209\128\209\129\209\130\209\131\209\132\209\133\209\134\209\135\209\136\209\137\209\138\209\139\209\140\209\141\209\142\209\143\208\144\208\145\208\146\208\147\208\148\208\149\208\129\208\150\208\151\208\152\208\153\208\154\208\155\208\156\208\157\208\158\208\159\208\160\208\161\208\162\208\163\208\164\208\165\208\166\208\167\208\168\208\169\208\170\208\171\208\172\208\173\208\174\208\175\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"myB=string.find(shablon,u,1,true)return myB end function alfabetC(u,r)shablon="\208\176\208\177\208\178\208\179\208\180\208\181\209\145\208\182\208\183\208\184\208\185\208\186\208\187\208\188\208\189\208\190\208\191\209\128\209\129\209\130\209\131\209\132\209\133\209\134\209\135\209\136\209\137\209\138\209\139\209\140\209\141\209\142\209\143\208\144\208\145\208\146\208\147\208\148\208\149\208\129\208\150\208\151\208\152\208\153\208\154\208\155\208\156\208\157\208\158\208\159\208\160\208\161\208\162\208\163\208\164\208\165\208\166\208\167\208\168\208\169\208\170\208\171\208\172\208\173\208\174\208\175\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"local J if r==0 then J=string.find(shablon,u,1,true)end if r==1 then if u<133 then J=string.utf8sub(shablon,u/2+.5,u/2+.5)else J=string.sub(shablon,u,u)end end return J end function hashStr(u)local J=time()J=J%10000 J=tostring(J)J=string.utf8sub(J,2,3)J=string.format("\037\048\051\100",J)nomeLen=string.utf8len(u)nome1={}for r=1,nomeLen,1 do nome1[r]=string.utf8sub(u,r,r)tmNome=nome1[r]nome1[r]=alfabet(tmNome)end nome11=0 for u=1,nomeLen,1 do nome11=nome11+nome1[u]end nome11=nome11%1000 hNome=string.format("\037\048\051\100",nome11)iN=tostring(J)r1=string.utf8sub(iN,1,1)r2=string.utf8sub(hNome,1,1)r3=string.utf8sub(iN,2,2)r4=string.utf8sub(hNome,2,2)r5=string.utf8sub(iN,3,3)r6=string.utf8sub(hNome,3,3)r=r1 ..(r2 ..(r3 ..(r4 ..(r5 ..r6))))return r end function tablelength(u)local r=0 for u in pairs(u)do r=r+1 end return r end function getPOS(u,r)local J=(1-r)*668 local t=u*1002 return t,J end function hshStrNuovo(u,r)nomeLen=string.utf8len(r)nome1={}for u=1,nomeLen,1 do nome1[u]=string.utf8sub(r,u,u)tmNome=nome1[u]nome1[u]=alfabet(tmNome)end nome11=0 for u=1,nomeLen,1 do nome11=nome11+nome1[u]end nome11=nome11%1000 hNome=string.format("\037\048\051\100",nome11)local J=string.sub(u,2,2)local t=string.sub(u,4,4)local x=string.sub(u,6,6)local S=math.random(0,9)local K=math.random(0,9)local T=math.random(0,9)local H=J..(t..x)local v=hashStr(r)local s=string.utf8sub(nome11,2,2)local j=string.utf8sub(nome11,4,4)local y=string.utf8sub(nome11,6,6)local O=s..(j..y)local D=S..(j..(K..(s..(T..y))))return H,O,D end function hshStrNuovo(u,r)local J local t local x local S local K local T local H local v local s local j local y local O local D J=string.utf8len(r)local b={}for u=1,J,1 do b[u]=string.utf8sub(r,u,u)t=b[u]b[u]=alfabet(t)end x=0 for u=1,J,1 do x=x+b[u]end x=x%1000 S=string.format("\037\048\051\100",x)K=string.sub(S,1,1)T=string.sub(S,2,2)H=string.sub(S,3,3)v=string.sub(u,2,2)v=tonumber(v)if v==0 then s=string.sub(u,3,3)j=string.sub(u,4,4)y=string.sub(u,6,6)elseif v==1 then s=string.sub(u,4,4)j=string.sub(u,3,3)y=string.sub(u,6,6)elseif v==2 then s=string.sub(u,4,4)j=string.sub(u,6,6)y=string.sub(u,3,3)elseif v==3 then s=string.sub(u,3,3)j=string.sub(u,6,6)y=string.sub(u,4,4)elseif v==4 then s=string.sub(u,1,1)j=string.sub(u,6,6)y=string.sub(u,4,4)elseif v==5 then s=string.sub(u,1,1)j=string.sub(u,6,6)y=string.sub(u,3,3)elseif v==6 then s=string.sub(u,6,6)j=string.sub(u,1,1)y=string.sub(u,3,3)elseif v==7 then s=string.sub(u,6,6)j=string.sub(u,3,3)y=string.sub(u,1,1)elseif v==8 then s=string.sub(u,4,4)j=string.sub(u,5,5)y=string.sub(u,6,6)elseif v==9 then s=string.sub(u,5,5)j=string.sub(u,1,1)y=string.sub(u,3,3)end O=s..(j..y)D=K..(T..H)return O,D end function hshSenderNomeC(u)local r local J local t local x local S local K local T local H local v local s local j r=string.utf8len(u)J={}for r=1,r,1 do J[r]=string.utf8sub(u,r,r)tmNome=J[r]J[r]=alfabet(tmNome)end t=0 for u=1,r,1 do t=t+J[u]end t=t%1000 x=string.format("\037\048\051\100",t)S=string.sub(x,1,1)K=string.sub(x,2,2)T=string.sub(x,3,3)H=math.random(0,9)v=math.random(0,9)s=math.random(0,9)if v==0 then j=H..(v..(S..(K..(s..T))))elseif v==1 then j=H..(v..(K..(S..(s..T))))elseif v==2 then j=H..(v..(T..(S..(s..K))))elseif v==3 then j=H..(v..(S..(T..(s..K))))elseif v==4 then j=S..(v..(H..(T..(s..K))))elseif v==5 then j=S..(v..(T..(H..(s..K))))elseif v==6 then j=K..(v..(T..(H..(s..S))))elseif v==7 then j=T..(v..(K..(s..(H..S))))elseif v==8 then j=H..(v..(s..(S..(K..T))))elseif v==8 then j=S..(v..(T..(H..(K..s))))elseif v==9 then j=K..(v..(T..(H..(S..s))))end if testQ~=nil then if testQ[u]~=nil then if testQ[u].rarHSH1==nil then testQ[u].rarHSH1={}end if testQ[u].rarHSH==nil then testQ[u].rarHSH={}end testDate=date("\037\100")testDate=tonumber(testDate)if testDate%2==0 then tableHSH="\114\097\114\072\083\072"testQ[u].rarHSH1=nil else tableHSH="\114\097\114\072\083\072\049"testQ[u].rarHSH=nil end if j==testQ[u][tableHSH]then j=hshSenderNomeC(u)end table.insert(testQ[u][tableHSH],j)return j end end end function gmTest(u)local r for J=1,#gmList,1 do if u==gmList[J]then r="\208\179\208\188"break end J=J+1 end return r end function proverkaVypolneniyaKvestySachivkoj(u,r)local J=testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]if r=="\050"then r="\208\186\208\178\208\181\209\129\209\130\095\208\187\208\178\208\187\050"elseif r=="\051"then r="\208\186\208\178\208\181\209\129\209\130\095\208\187\208\178\208\187\051"end local t=testQ[u][r][J]t=tonumber(t)local x=GetAchievementNumCriteria(J)j=0 k=0 for u=1,x,1 do local r,t,x,S,K,T,H,v,s,y=GetAchievementCriteriaInfo(J,u)prov=x if prov==true then j=j+1 else k=k+1 end u=u+1 end local S=t-j if S<0 then S=0 end SendChatMessage("\208\158\209\129\209\130\208\176\208\187\208\190\209\129\209\140 \208\178\209\139\208\191\208\190\208\187\208\189\208\184\209\130\209\140 "..(S..(" \208\191\209\131\208\189\208\186\209\130\208\190\208\178 \208\176\209\135\208\184\208\178\208\186\208\184 "..(J..(" "..(GetAchievementLink(J)..(" \208\184\208\183 "..t)))))),"\071\085\073\076\068",nil,1)end function npcXY(u,r,J,t,x)local S=nil local K=u local T=r K=tostring(K)T=tostring(T)if npcScan[K]==nil then npcScan[K]={}end if npcScan[K][T]==nil then npcScan[K][T]={}end local H=x if H~=nil then local u=J local r=t u=tostring(u)r=tostring(r)if npcScan[K][T][H]==nil then npcCount=1 npcCount=tostring(npcCount)npcScan[K][T][H]={}npcScan[K][T][H][npcCount]={}npcScan[K][T][H][npcCount].x=u npcScan[K][T][H][npcCount].y=r else local J={}local t={}npcCount=tablelength(npcScan[K][T][H])+1 npcCount=tostring(npcCount)u=tostring(u)r=tostring(r)npcScan[K][T][H][npcCount]={}npcScan[K][T][H][npcCount].x=u npcScan[K][T][H][npcCount].y=r end else print("\208\146\209\139\208\177\208\181\209\128\208\184 \209\134\208\181\208\187\209\140")end end function testNpc(u)local r CreateFrame("\071\097\109\101\084\111\111\108\116\105\112","\077\121\083\099\097\110\110\105\110\103\084\111\111\108\116\105\112",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\109\112\108\097\116\101")MyScanningTooltip:SetOwner(WorldFrame,"\065\078\067\072\079\082\095\078\079\078\069")MyScanningTooltip:AddFontStrings(MyScanningTooltip:CreateFontString("\036\112\097\114\101\110\116\084\101\120\116\076\101\102\116\049",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116"),MyScanningTooltip:CreateFontString("\036\112\097\114\101\110\116\084\101\120\116\082\105\103\104\116\049",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116"))MyScanningTooltip:SetHyperlink("\117\110\105\116\058"..u)r=EnumerateTooltipLines(MyScanningTooltip)return r end local function J(...)local u for r=1,select("\035",...),1 do local J=select(r,...)if J and J:GetObjectType()=="\070\111\110\116\083\116\114\105\110\103"then local r=J:GetText()if r~=nil then print(r)if string.find(r,"\208\163\209\128\208\190\208\178\208\181\208\189\209\140")then testLvlNpc=mysplit(r)end if string.find(r,"\209\131\209\128\208\190\208\178\208\189\209\143")then testLvlNpc=mysplit(r)if string.find(testLvlNpc[3],"\037\063\037\063")then else u="\049"end if string.find(testLvlNpc[2],"\037\063\037\063")then SendAddonMessage("\078\083\071\097\100\100","\035\110\112\099\079\102\102","\103\117\105\108\100")end if string.find(testLvlNpc[1],"\208\162\209\128\209\131\208\191")then SendAddonMessage("\078\083\071\097\100\100","\035\110\112\099\068\105\101","\103\117\105\108\100")end end end end end return u end function EnumerateTooltipLines(u)local r r=J(u:GetRegions())return r end function pLid()if UnitIsPartyLeader("\112\097\114\116\121\049")then pL=1 elseif UnitIsPartyLeader("\112\097\114\116\121\050")then pL=2 elseif UnitIsPartyLeader("\112\097\114\116\121\051")then pL=3 elseif UnitIsPartyLeader("\112\097\114\116\121\052")then pL=4 else pL=0 end return pL end function pM(u)if u==UnitName("\112\097\114\116\121\049")then r=1 elseif u==UnitName("\112\097\114\116\121\050")then r=1 elseif u==UnitName("\112\097\114\116\121\051")then r=1 elseif u==UnitName("\112\097\114\116\121\052")then r=1 else r=0 end return r end function testN()testNpc(UnitGUID("\116\097\114\103\101\116"))end function tblAllFail(u,J)if mmList[u]~=nil then for t=1,mmList[u]["\208\186\208\190\208\187\208\184\209\135\208\181\209\129\209\130\208\178\208\190\095\208\177\208\190\209\129\209\129\208\190\208\178"],1 do if J==mmList[u][t]then r=t break else r=0 end end end return r end function testMarsh(u,r)trovMarsh(u,r)local J=0 for r,J in pairs(mapTables[u])do if type(r)=="\115\116\114\105\110\103"then tKont=r end for u,r in pairs(mapTables[u][r])do if type(u)=="\115\116\114\105\110\103"then tLok=u end end end if testQ.schet1~=nil then for r=testQ.schet1-10,testQ.schet1+10,1 do if testQ.schet[r]~=nil then marshrut(r,tablelength(mapTables[u][tKont][tLok]))J=J+testQ.schet[r]if J>0 then break end end end end return J end function trovMarsh(u,r)if testKontLok(u)~=nil then local J,t=GetPlayerMapPosition("\112\108\097\121\101\114")local x=GetCurrentMapContinent()x=tostring(x)local S=GetCurrentMapZone()S=tostring(S)local K=GetMapInfo()if K=="\082\097\103\101\102\105\114\101"then x="\057\057"S="\049"end local T=tablelength(mapTables[u][x][S])testQ.schet={}testQ.numPunti={}if testQ.num==nil then if testKontLok(u)<r then testQ.num=1 testQ.schet1=1 end end for K=testQ.num-10,testQ.num+10,1 do testQ.schet1=K j=tostring(K)if testQ["\209\129\209\130\208\176\209\128\209\130"]~=nil then if mapTables[u][x][S][j]~=nil then mioCel=sqrt((J-mapTables[u][x][S][j].x)^2+(t-mapTables[u][x][S][j].y)^2)if mioCel<r then testQ.schet[K]=1 j=testQ.num j=tostring(j)mioCel1=sqrt((J-mapTables[u][x][S][j].x)^2+(t-mapTables[u][x][S][j].y)^2)if mioCel1>mioCel then testQ.num=K testQ.marshF[K]=K if testQ.marshF[K]==math.modf(T/4)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \209\135\208\181\209\130\208\178\208\181\209\128\209\130\209\140 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if testQ.marshF[K]==math.modf(T/2)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \208\191\208\190\208\187\208\190\208\178\208\184\208\189\209\131 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if testQ.marshF[K]==math.modf((T/4)*3)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \209\130\209\128\208\184 \209\135\208\181\209\130\208\178\208\181\209\128\209\130\208\184 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if tonumber(T)==tonumber(K)then SendChatMessage("\208\156\208\176\209\128\209\136\209\128\209\131\209\130 \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")if marshruT~=nil then for u=1,9999,1 do if marshruT[u]~=nil then marshruT[u]:Hide()end end end marshruT=nil testQ["\209\129\209\130\208\176\209\128\209\130"]=nil testQ.num=nil testQ.marshF=nil if u=="\101\118\079\048\049\048\050"then testQ.evO0102=true testQ.startChern=nil end if u=="\101\118\079\048\050\048\051"then testQ.evO0203=true testQ.startChern=nil end if u=="\101\118\079\048\051\048\052"then testQ.evO0304=true testQ.startChern=nil end if u=="\101\118\079\048\052\048\053"then testQ.evO0405=true testQ.startChern=nil end if u=="\101\118\079\048\053\048\054"then testQ.evO0506=true testQ.startChern=nil end if u=="\101\118\079\048\054\048\055"then testQ.evO0607=true testQ.startChern=nil end if u=="\101\118\079\048\055\048\056"then testQ.evO0708=true testQ.startChern=nil end if u=="\101\118\079\048\056\048\057"then testQ.evO0809=true testQ.startChern=nil end if u=="\101\118\079\048\057\049\048"then testQ.evO0910=true testQ.startChern=nil end if u=="\101\118\079\049\048\049\049"then testQ.evO1011=true testQ.startChern=nil end if u=="\101\118\079\049\049"then testQ.evO11=true testQ.startChern=nil end if u=="\101\118\079\049\050"then testQ.evO12=true testQ.startChern=nil end if u=="\101\118\079\049\051"then testQ.evO13=true testQ.startChern=nil end if u=="\101\118\079\049\052"then testQ.evO14=true testQ.startChern=nil end testQ.start=nil end end else testQ.schet[K]=0 end end end end end end function testKontLok(u)local r=GetCurrentMapContinent()r=tostring(r)local J=GetCurrentMapZone()J=tostring(J)local t local x,S=GetPlayerMapPosition("\112\108\097\121\101\114")local K,T local H=GetMapInfo()if H=="\082\097\103\101\102\105\114\101"then r="\057\057"J="\049"end if mapTables~=nil then if mapTables[u]~=nil then for r,J in pairs(mapTables[u])do if type(r)=="\115\116\114\105\110\103"then K=r end for u,r in pairs(mapTables[u][r])do if type(u)=="\115\116\114\105\110\103"then T=u end end end if tostring(J)==tostring(T)then if u~=nil then if mapTables[u]~=nil then if K==r then if mapTables[u][r][J]~=nil then if T==J then t=sqrt((x-mapTables[u][r][J]["\049"].x)^2+(S-mapTables[u][r][J]["\049"].y)^2)return t end end end end end end end end end function startFchern(u,r,J)r=tostring(r)J=tostring(J)if krt[r]==true and krt[J]==true then testQ.start=u testQ["\209\129\209\130\208\176\209\128\209\130"]=0 testQ[u]="\209\129\209\130\208\176\209\128\209\130"marshruT={}end end function testFchern(u,r,J)r=tostring(r)J=tostring(J)local t,x if testQ[u]==nil then for r,J in pairs(mapTables[u])do if type(r)=="\115\116\114\105\110\103"then t=r end for u,r in pairs(mapTables[u][t])do if type(u)=="\115\116\114\105\110\103"then x=u end end end if mapTables.lokRasstoyanie[tostring(t)]~=nil then if mapTables.lokRasstoyanie[tostring(t)][tostring(x)]~=nil then if testKontLok(u)~=nil then if tonumber(testKontLok(u))<=tonumber(mapTables.lokRasstoyanie[tostring(t)][tostring(x)])*3 then startFchern(u,r,J)testQ.startChern=u end end end end end end function printPar(u)local r={}local J for u,J in pairs(u)do if u~=nil then table.insert(r,u)end end J=table.concat(r," ")return J end function otladka(u,r,J,t,x,S,K)local T numF=tonumber(u)if numF==1 then if r=="\116\101\115\116\081"then T=testQ end end if numF==2 then if r=="\116\101\115\116\081"then T=testQ[J]end end if numF==3 then if r=="\116\101\115\116\081"then T=testQ[J][t]end end if numF==4 then if r=="\116\101\115\116\081"then T=testQ[J][t][x]end end if numF==5 then if r=="\116\101\115\116\081"then T=testQ[J][t][x][S]end end if numF==6 then if r=="\116\101\115\116\081"then T=testQ[J][t][x][S][K]end end T=type(T)y=T return T,y end function tabellaFind(u,r)local J=1 while u[J]do print(r)print(u[J])if r==u[J]then return 1 end J=J+1 end return nil end function krtChernGetXY(u)u=tostring(u)for u,r in pairs(krt.chernila[u])do kont=u end for u,r in pairs(krt.chernila[u][kont])do lok=u end for u,r in pairs(krt.chernila[u][kont][lok])do if u=="\120"then x=r end if u=="\121"then y=r end if u=="\109\115\103"then m=r end end return kont,lok,x,y,m end function mapQuest(u)u=tostring(u)for u,r in pairs(testQ.mapQuest[u])do kont=u end for u,r in pairs(testQ.mapQuest[u][kont])do lok=u end for u,r in pairs(testQ.mapQuest[u][kont][lok])do if u=="\120"then x=r end if u=="\121"then y=r end if u=="\109\115\103"then m=r end if u=="\099\101\108"then c=r end end return kont,lok,x,y,m,c end function mapQuestP(u)u=tostring(u)testQ.mapQuest.podskazkiRez={}for u,r in pairs(testQ.mapQuest[u])do kont=u end for u,r in pairs(testQ.mapQuest[u][kont])do lok=u end for r,J in pairs(testQ.mapQuest[u][kont][lok])do if r=="\112\111\100\115\107\097\122\107\105"then for u,r in pairs(testQ.mapQuest[u][kont][lok].podskazki)do testQ.mapQuest.podskazkiRez[u]=r end end end end function chern1P(u)u=tostring(u)krt.chernila.podskazkiRez={}for u,r in pairs(krt.chernila[u])do kont=u end for u,r in pairs(krt.chernila[u][kont])do lok=u end for r,J in pairs(krt.chernila[u][kont][lok])do if r=="\112\111\100\115\107\097\122\107\105"then for u,r in pairs(krt.chernila[u][kont][lok].podskazki)do krt.chernila.podskazkiRez[u]=r end end end end function tabellaEnStr(u,r)local J,t,x,S,K,T u=tostring(u)r=tostring(r)if testQ.chD==nil then testQ.chD={}end if testQ.chD[tostring(u)]==nil then x="\048"for u,r in pairs(krt.chernila[u])do K=u end for u,r in pairs(krt.chernila[u][K])do T=u end J=tablelength(krt.chernila[u][K][T].podskazki)for J=1,J,1 do S=tostring(J)if t==nil then t=S..(" "..(txtXor(krt.chernila[u][K][T].podskazki[S]).."\n"))else t=t..(S..(" "..(txtXor(krt.chernila[u][K][T].podskazki[S]).."\n")))end x=tonumber(x)x=x+1 x=tostring(x)if x==r then break end end else for u,r in pairs(krt.chernila[u])do K=u end for u,r in pairs(krt.chernila[u][K])do T=u end t=u.." \208\178\209\139\208\191\208\190\208\187\208\189\208\181\208\189\208\190\n"x=tablelength(krt.chernila[u][K][T].podskazki)end return t,x end function txtXor(u)local r=u:utf8sub(1,3)local J local t if r~="\035\035\035"then J=string.utf8len(u)t="\035\035\035"for r=1,J,1 do t=t..string.format("\037\048\051\100",alfabet(string.utf8sub(u,r,r)))end end if r=="\035\035\035"then t=alfabetC(tonumber(string.sub(u,4,6)),1)for r=7,#u,3 do t=t..alfabetC(tonumber(string.sub(u,r,r+2)),1)end end return t end bcsQuickFrame={}function createQuickHtmlFrame(u,r,J)local t=GetTime()bcsQuickFrame[J]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)bcsQuickFrame[J]:SetSize(222,222)bcsQuickFrame[J]:SetFrameStrata("\072\073\071\072")bcsQuickFrame[J]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",33,r)bcsQuickFrame[J]:SetBackdropColor(0,103,51,1)bcsQuickFrame[J]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",32)bcsQuickFrame[J]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\057\048\101\101\057\048"..(u.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))end dmG={}function dmgText(u,r,J,t,x)if dmG[J]==nil then dmG[J]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",r)else dmG[J]:Show()end dmG[J]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG[J]:ClearAllPoints()dmG[J]:SetBackdropColor(0,103,51,1)dmG[J]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")if u~=""then if tonumber(u)<=9999 then dmG[J]:SetSize(48,48)end if tonumber(u)>9999 then dmG[J]:SetSize(54,48)end if tonumber(u)<=9999 then dmG[J]:SetPoint("\067\069\078\084\069\082",r,"\067\069\078\084\069\082",5,-10)end if tonumber(u)>9999 then dmG[J]:SetPoint("\067\069\078\084\069\082",r,"\067\069\078\084\069\082",1,-10)end end dmG[J]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(x..(u.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end dmG1={}function dmgText1(u,r,J,t,x)if dmG1[J]==nil then dmG1[J]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",r)dmG1[J]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG1[J]:ClearAllPoints()dmG1[J]:SetBackdropColor(0,103,51,1)dmG1[J]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end if u~=""then if tonumber(u)<=9999 then dmG1[J]:SetSize(48,48)end if tonumber(u)>9999 then dmG1[J]:SetSize(54,48)end if tonumber(u)<=9999 then dmG1[J]:SetPoint("\067\069\078\084\069\082",r,"\067\069\078\084\069\082",5,-10)end if tonumber(u)>9999 then dmG1[J]:SetPoint("\067\069\078\084\069\082",r,"\067\069\078\084\069\082",1,-10)end end dmG1[J]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(x..(u.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end dmG2={}function dmgText2(u,r,J,t,x)if dmG2[J]==nil then dmG2[J]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",r)dmG2[J]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG2[J]:ClearAllPoints()dmG2[J]:SetBackdropColor(0,103,51,1)dmG2[J]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end if u~=nil and u~=""then if tonumber(u)<=9999 then dmG2[J]:SetSize(48,48)end if tonumber(u)>9999 then dmG2[J]:SetSize(54,48)end if tonumber(u)<=9999 then dmG2[J]:SetPoint("\067\069\078\084\069\082",r,"\067\069\078\084\069\082",5,-10)end if tonumber(u)>9999 then dmG2[J]:SetPoint("\067\069\078\084\069\082",r,"\067\069\078\084\069\082",1,-10)end end if u~=nil then dmG2[J]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(x..(u.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end end rtnText={}function rtnTextF(u,r,J)if J=="\115\104\111\119"then if rtnText[r]==nil then rtnText[r]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)rtnText[r]:SetSize(415,396)rtnText[r]:SetFrameStrata("\084\079\079\076\084\073\080")rtnText[r]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",5,-55)rtnText[r]:SetBackdropColor(0,0,0,0)if tonumber(string.utf8len(u))<200 then rtnText[r]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",33)elseif tonumber(string.utf8len(u))>200 and tonumber(string.utf8len(u))<300 then rtnText[r]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",27)elseif tonumber(string.utf8len(u))>=400 then rtnText[r]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",16)end end rtnText[r]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\048\048\048\048\048\048"..(u.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))rtnText[r]:Show()else if rtnText[r]~=nil then rtnText[r]:Hide()end end end function versFail(u)if VerF==nil then VerF=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)end VerF:SetSize(1111,888)VerF:SetFrameStrata("\072\073\071\072")if testQ.VerF==nil then testQ.VerF=600 end VerF:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",testQ.VerF,-355)VerF:SetBackdropColor(0,103,51,1)VerF:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",u+10)VerF:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\102\102\048\048\048\048\208\158\208\145\208\157\208\158\208\146\208\152 \208\144\208\148\208\148\208\158\208\157\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")end function marshrut(u,r)local J=u-1 local t=u+1 local x=u+2 local S=u-2 local K=u+3 local T=u-3 if testQ.start~="\101\118\079\051"then if marshruT~=nil then if marshruT[u]==nil then marshruT[u]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\109\097\114\115\104\114\117\116",UIParent)marshruT[u]:SetSize(222,222)marshruT[u]:SetFrameStrata("\072\073\071\072")marshruT[u]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",333,111)marshruT[u]:SetBackdropColor(0,103,51,1)marshruT[u]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",32)marshruT[u]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\057\048\101\101\057\048"..(u..(" \208\184\208\183 "..(tostring(r).."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))))end if marshruT[J]~=nil then marshruT[J]:Hide()marshruT[J]=nil end if marshruT[t]~=nil then marshruT[t]:Hide()marshruT[t]=nil end if marshruT[x]~=nil then marshruT[x]:Hide()marshruT[x]=nil end if marshruT[S]~=nil then marshruT[S]:Hide()marshruT[S]=nil end if marshruT[K]~=nil then marshruT[K]:Hide()marshruT[K]=nil end if marshruT[T]~=nil then marshruT[T]:Hide()marshruT[T]=nil end end end end function showRB(u)if debuffChkB==nil then debuffChkB={}end if pokazat==1 and btn[1]~=nil then for u=1,15,1 do if btn[u]~=nil then btn[u]:Hide()end end btn[991]:Show()if tonumber(testQ.mioFldLvl)~=.5 and(tonumber(testQ.mioFldLvl)~=.9 and tonumber(testQ.mioFldLvl)~=nil)then btn[14]:Show()end myCheckButton1:Show()myCheckButton2:Show()myCheckButton3:Show()myCheckButton4:Show()myCheckButton5:Show()myCheckButton6:Show()myCheckButton7:Show()btn[998]:Show()btn[997]:Show()for r=1,20,1 do local J,t,x,S,K,T,H,v=UnitDebuff("\112\108\097\121\101\114",r)if J~=nil then debuffChkB[J]=createCheckbutton(UIParent,150,-20*r+230,J)debuffChkB[J].tooltip="\208\161\208\186\209\128\209\139\208\178\208\176\209\130\209\140 \208\184\208\186\208\190\208\189\208\186\209\131 "..J debuffChkB[J]:SetScript("\079\110\067\108\105\099\107",function()if testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB==nil then testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB={}end if testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[J]=="\068\105\115\097\098\108\101"or testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[J]==nil then testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[J]="\069\110\097\098\108\101"debuffChkB[J]:SetChecked(true)elseif testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[J]=="\069\110\097\098\108\101"then testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[J]="\068\105\115\097\098\108\101"debuffChkB[J]:SetChecked(false)end end)end end pokazat=0 pokazatChk=1 elseif pokazat==0 then btn[991]:Hide()if tonumber(testQ.mioFldLvl)~=.5 and(tonumber(testQ.mioFldLvl)~=.9 and tonumber(testQ.mioFldLvl)~=nil)then for u=1,15,1 do if btn[u]~=nil then btn[u]:Show()end end if btn[ii]~=nil then if testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]=="\057\057\057\057"then btn[1]:Show()btn[2]:Hide()end if testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]~="\057\057\057\057"then btn[1]:Hide()btn[2]:Show()end end end testQ.lvlProv=nil myCheckButton1:Hide()myCheckButton2:Hide()myCheckButton3:Hide()myCheckButton4:Hide()myCheckButton5:Hide()myCheckButton6:Hide()myCheckButton7:Show()for u,r in pairs(debuffChkB)do if debuffChkB[u]~=nil then debuffChkB[u]:Hide()end end btn[998]:Hide()btn[997]:Hide()pokazat=1 pokazatChk=0 end end function marSh()local u=GetCurrentMapContinent()local r=GetCurrentMapZone()local J,t=GetPlayerMapPosition("\112\108\097\121\101\114")local x u=tostring(u)r=tostring(r)local S=GetMapInfo()if S=="\082\097\103\101\102\105\114\101"then u="\057\057"r="\049"end if marsh==nil then marsh={}end if marsh[u]==nil then marsh[u]={}end if marsh[u][r]==nil then marsh[u][r]={}end local K=tablelength(marsh[u][r])K=tostring(K+1)marsh[u][r][K]={}testQ.marshK=u testQ.marshL=r testQ.marshN=K marsh[u][r][K].x=string.format("\037\046\051\102",J)marsh[u][r][K].y=string.format("\037\046\051\102",t)print(K)end function resObj1(u,r,J)if krt==nil then krt={}end if krt.podskazki==nil then krt.podskazki=1 end if testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]==nil then testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]={}testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=0 end if r==J then if mioFld~=nil then if mioFld[r]~=nil then if mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"]~=nil then if tonumber(testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"])<=tonumber(krt.podskazki)then if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\104\115"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\115"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\120"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\115\120"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\099"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\097\115"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\099"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\115"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\120"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\099"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\112"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\122"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\118"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\109\102"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\109\048"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\108\120"and mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\108\112")))))))))))))))then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\102"then SendAddonMessage("\116\114\101\101 "..tostring(u),r,"\103\117\105\108\100")end mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\109\048"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\104\115"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<9999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=9999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\116\122"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\108\120"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\122\099"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<9999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=9999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\097\115"or mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\098\099"or mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\098\115"or mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\098\120"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<14999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=14999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\122\115"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\116\099"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<4999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=4999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\122\120"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\115\120"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end else if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\104\115"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\115"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\120"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\115\120"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\099"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\097\115"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\120"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\099"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\115"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\099"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\112"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\122"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\118"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\109\102"and(mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\109\048"and mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\108\120"))))))))))))))then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+5 else if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\102"then SendAddonMessage("\116\114\101\101 "..tostring(u),r,"\103\117\105\108\100")end mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\104\115"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<9999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+5 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=9999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\108\120"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+5 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\116\122"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+5 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\109\048"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+5 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\122\099"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<9999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+5 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=9999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\097\115"or mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\098\099"or mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\098\115"or mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\098\120"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<14999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+5 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=14999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\122\115"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+5 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\116\099"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<4999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+5 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=4999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\122\120"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+5 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[r]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\115\120"then if tonumber(mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]+5 else mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end end SendAddonMessage("\114\101\115\079\098\106 "..(u..(" "..mioFld[r]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])),J,"\103\117\105\108\100")end end end else if mioFld~=nil then if mioFld[J]~=nil then if mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"]~=nil then if tonumber(testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"])<=tonumber(krt.podskazki)then if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\104\115"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\115"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\120"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\115\120"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\099"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\097\115"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\099"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\115"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\120"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\099"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\112"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\122"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\118"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\109\048"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\109\102"and mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\108\120"))))))))))))))then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\104\115"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<9999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=9999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\108\120"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\116\122"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\109\048"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\122\099"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<9999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=9999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\097\115"or mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\098\099"or mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\098\115"or mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\098\120"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<14999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=14999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\122\115"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\122\120"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\116\099"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<4999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=4999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\115\120"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end else if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\104\115"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\115"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\120"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\115\120"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\099"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\097\115"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\099"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\115"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\098\120"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\099"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\122\112"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\122"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\116\118"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\109\048"and(mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\109\102"and mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]~="\108\120"))))))))))))))then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\104\115"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<9999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=9999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\108\120"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\116\122"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\109\048"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\116\099"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<4999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=4999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\097\115"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<14999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=14999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\122\115"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\122\120"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=19999 end end if mioFld[J]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\115\120"then if tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local r=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if r==9 then mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=tonumber(mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)]=29999 end end end SendAddonMessage("\114\101\115\079\098\106 "..(u..(" "..mioFld[J]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(u)])),J,"\103\117\105\108\100")end end end end end function gKam(u,r)local J=nil if tonumber(r)==500 then for r=1,100,1 do if mioFld1[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(r)]=="\115\107"then if J==nil then J=1 else J=J+1 end end end if J==nil then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\048","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif J==1 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\049","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif J==2 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\050","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif J==3 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\051","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif J==4 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\052","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif J==5 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\053","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")end end end function bdf(u)if testQ==nil then testQ={}end if testQ.myNome==nil then testQ.myNome={}end if testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"]==nil then testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"]={}end if testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB==nil then testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB={}end if DebuffButton1~=nil then if tonumber(testQ.buffX)~=nil and tonumber(testQ.buffX)~=0 then local r,J,t,x=DebuffButton1:GetPoint()local S,K,T,H=btn[991]:GetPoint()if x~=H then local r,J=DebuffButton1:GetSize()local t=UIParent:GetSize()/2 j=1 for J=1,DEBUFF_MAX_DISPLAY,1 do if AuraButton_Update("\068\101\098\117\102\102\066\117\116\116\111\110",J,"\072\065\082\077\070\085\076")then local x,S,K,T,H,v,s,y=UnitDebuff("\112\108\097\121\101\114",J)local O=_G["\068\101\098\117\102\102\066\117\116\116\111\110"..J]if O~=nil and(testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[x]==nil or testQ[u]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[x]=="\068\105\115\097\098\108\101")then O:ClearAllPoints()if tonumber(testQ.buffX)<t then O:SetPoint("\066\079\084\084\079\077\076\069\070\084",UIParent,"\066\079\084\084\079\077\076\069\070\084",tonumber(testQ.buffX)+r*j,testQ.buffY)j=j+1 else O:SetPoint("\066\079\084\084\079\077\076\069\070\084",UIParent,"\066\079\084\084\079\077\076\069\070\084",tonumber(testQ.buffX)-r*j,testQ.buffY)j=j+1 end else if O~=nil and O:IsVisible()then O:Hide()end end end end end if testQ.buffX==0 then testQ.buffX=nil end end end end function gtest()gTest=nil gTest={}for u=1,50,1 do local r,J,t,x,S,K,T=GetWhoInfo(u)if J==""then if x~="\208\148\209\128\208\181\208\189\208\181\208\185"and(x~="\208\157\208\190\209\135\208\189\208\176\209\143 \209\141\208\187\209\140\209\132\208\184\208\185\208\186\208\176"and(x~="\208\167\208\181\208\187\208\190\208\178\208\181\208\186"and(x~="\208\157\208\190\209\135\208\189\208\190\208\185 \209\141\208\187\209\140\209\132"and(x~="\208\147\208\189\208\190\208\188"and x~="\208\148\208\178\208\190\209\128\209\132"))))then table.insert(gTest,r)end end end end function ns_q5()ns_q5Test=nil ns_q5Test={}for u=1,50,1 do local r,J,t,x,S,K,T=GetWhoInfo(u)if J==""then table.insert(ns_q5Test,r)end end end function closeFld()for u=1,100,1 do fBtn[u]:Hide()end for u=1,100,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[u]~=nil then if u==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[u]:Hide()end end end end btn[989]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end function hX()quesT("\104\105\100\101")okNo:configure(1,"\104\105\100\101")rtnTextF("\102\100\115\097",1,"\104\105\100\101")for u=1,100,1 do fBtn[u]:Hide()end if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end if okNo~=nil then okNo[1]:Hide()okNo[2]:Hide()end btn[989]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end function showFld(u,r)local J local t local x local S if mBtn[1]~=nil then if mBtn[1]:IsVisible()then S=1 end end if dBtn[1]~=nil then if dBtn[1]:IsVisible()then S=1 end end if not fBtn[1]:IsVisible()and S~=1 then if not GuildFrameLFGButton:GetChecked()or u=="\049"then if u=="\048"then J=GuildFrame.selectedName else J=r end btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",fBtn[10],"\084\079\080\082\073\071\072\084",1,1)for u=1,GetNumGuildMembers(true),1 do local S,K,T,H,v,s,j,y,O,D,b,R,d,g,Y,m,h=GetGuildRosterInfo(u)if J~=r then if S==J then t=string.sub(y,1,1)x=string.sub(y,2,2)if y~=""and(t~="\049"and t~="\048")then testQ.fldLvl=tonumber(t)testQ.qNum=string.sub(y,8,8)testQ.qDay=string.sub(y,6,7)elseif t=="\049"then testQ.fldLvl=.9 testQ.qNum=string.sub(y,8,8)testQ.qDay=string.sub(y,6,7)elseif t=="\048"then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 elseif t==""then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 end if x==nil then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 end end if S==r then t=string.sub(y,1,1)if y~=""and(t~="\049"and t~="\048")then testQ.mioFldLvl=string.sub(y,1,1)elseif t=="\049"then testQ.mioFldLvl=.9 elseif t=="\048"then testQ.mioFldLvl=.5 elseif t==""then testQ.mioFldLvl=.5 end end else if S==r then t=string.sub(y,1,1)x=string.sub(y,2,2)if y~=""and(t~="\049"and t~="\048")then testQ.mioFldLvl=string.sub(y,1,1)testQ.fldLvl=testQ.mioFldLvl testQ.qNum=string.sub(y,8,8)testQ.qDay=string.sub(y,6,7)elseif t=="\049"then testQ.mioFldLvl=.9 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=string.sub(y,8,8)testQ.qDay=string.sub(y,6,7)elseif t=="\048"then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 elseif t==""then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 end if x==nil then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 end end end if tonumber(testQ.mioFldLvl)==0 then testQ.mioFldLvl=.5 end if tonumber(testQ.fldLvl)==0 then testQ.fldLvl=.5 end end testQ.fRand1=math.random(1,1000000)testQ.sign=u SendAddonMessage("\115\104\077\070\108\100 "..testQ.fRand1,J..(" "..r),"\103\117\105\108\100")FriendsFrame:Hide()else local u=tablelength(risPet)for u=1,100,1 do if risPet[u]~=nil then risPetShow(u,"\104\105\100\101","")end end for u=1,100,1 do fBtn[u]:Hide()end btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end for u=1,100,1 do if dmG[u]~=nil and dmG[u]:IsVisible()then dmG[u]:Hide()end end for u=1,3,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[u]~=nil then if u==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[u]:Hide()end end end end for u=101,103,1 do if dmG[u]~=nil then dmG[u]:Hide()end end if tonumber(testQ.sign)==0 then FriendsFrame:Show()end testQ.sign=nil testQ.fRandD1nome=nil end else local u=tablelength(risPet)for u=1,100,1 do if risPet[u]~=nil then risPetShow(u,"\104\105\100\101","")end end for u=1,100,1 do fBtn[u]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end for u=1,100,1 do if dmG[u]~=nil and dmG[u]:IsVisible()then dmG[u]:Hide()end end for u=1,100,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[u]~=nil then if u==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[u]:Hide()end end end end for u=101,103,1 do if dmG[u]~=nil then dmG[u]:Hide()end end if tonumber(testQ.sign)==0 then FriendsFrame:Show()end if tostring(testQ.sign)=="\049"then btn[989]:Hide()end testQ.sign=nil end end function qLvl33c1()local u local r local J local t local x local S local K x=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(x)S=eMotC[x]["\208\191\208\190\208\184\209\129\208\186"]K=eMotC[x]["\208\190\209\130\208\178\208\181\209\130"]u=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]r=npcListC1[u]["\208\184\208\188\209\143"]u=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]J=npcListC1[u]["\208\184\208\188\209\143"]while true do if r==J then u=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]J=npcListC1[u]["\208\184\208\188\209\143"]else break end end u=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]t=npcListC1[u]["\208\184\208\188\209\143"]while true do if t==J or t==r then u=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]t=npcListC1[u]["\208\184\208\188\209\143"]else break end end return x,r,J,t,S,K end function qLvl33c2()local u local r local J local t local x local S local K x=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(x)S=eMotC[x]["\208\191\208\190\208\184\209\129\208\186"]K=eMotC[x]["\208\190\209\130\208\178\208\181\209\130"]u=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]r=npcListC2[u]["\208\184\208\188\209\143"]u=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]J=npcListC2[u]["\208\184\208\188\209\143"]while true do if r==J then u=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]J=npcListC2[u]["\208\184\208\188\209\143"]else break end end u=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]t=npcListC2[u]["\208\184\208\188\209\143"]while true do if t==J or t==r then u=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]t=npcListC2[u]["\208\184\208\188\209\143"]else break end end return x,r,J,t,S,K end function qLvl33c3()local u local r local J local t local x local S local K x=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(x)S=eMotC[x]["\208\191\208\190\208\184\209\129\208\186"]K=eMotC[x]["\208\190\209\130\208\178\208\181\209\130"]u=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]r=npcListC3[u]["\208\184\208\188\209\143"]u=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]J=npcListC3[u]["\208\184\208\188\209\143"]while true do if r==J then u=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]J=npcListC3[u]["\208\184\208\188\209\143"]else break end end u=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]t=npcListC3[u]["\208\184\208\188\209\143"]while true do if t==J or t==r then u=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]t=npcListC3[u]["\208\184\208\188\209\143"]else break end end return x,r,J,t,S,K end function rndTblc(u)local r={}for u in pairs(u)do table.insert(r,u)end return u[r[math.random(#r)]]end function htimer(u)local r=0 for J=1,100,1 do if mioFld1[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(J)]=="\116\111"then r="\116\111"end end if testQ[u].dTimer[30]==nil then testQ[u].dTimer[30]=26000 end if testQ[u].dTimer[tonumber(date("\037\100"))-1]==nil then testQ[u].dTimer[tonumber(date("\037\100"))-1]=26000 end if tonumber(testQ.mioFldLvl)==.5 or tonumber(testQ.mioFldLvl)==.9 then if testQ[u].hTimer==nil then if testQ[u].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[u].dTimer[30]==nil then if r~="\116\111"then testQ[u].hTimer=50400 else testQ[u].hTimer=26000 end else if tonumber(date("\037\100"))~=1 then if testQ[u].dTimer[tonumber(date("\037\100"))-1]>10800 then if r~="\116\111"then testQ[u].hTimer=testQ[u].dTimer[tonumber(date("\037\100"))-1]else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(testQ[u].dTimer[tonumber(date("\037\100"))-1])/1.5))end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end else if testQ[u].dTimer[30]~=nil and testQ[u].dTimer[30]>10800 then if r~="\116\111"then testQ[u].hTimer=testQ[u].dTimer[30]else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(testQ[u].dTimer[30])/1.5))end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==2 then if testQ[u].hTimer==nil then if testQ[u].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[u].dTimer[30]==nil then if r~="\116\111"then testQ[u].hTimer=25200 else testQ[u].hTimer=16000 end else if tonumber(date("\037\100"))~=1 then if testQ[u].dTimer[tonumber(date("\037\100"))-1]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/2))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/2))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end else if testQ[u].dTimer[30]~=nil and testQ[u].dTimer[30]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/2))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/2))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==3 then if testQ[u].hTimer==nil then if testQ[u].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[u].dTimer[30]==nil then if r~="\116\111"then testQ[u].hTimer=14500 else testQ[u].hTimer=10000 end else if tonumber(date("\037\100"))~=1 then if testQ[u].dTimer[tonumber(date("\037\100"))-1]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/3))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/3))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end else if testQ[u].dTimer[30]~=nil and testQ[u].dTimer[30]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/3))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/3))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==4 then if testQ[u].hTimer==nil then if testQ[u].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[u].dTimer[30]==nil then if r~="\116\111"then testQ[u].hTimer=11000 else testQ[u].hTimer=8000 end else if tonumber(date("\037\100"))~=1 then if testQ[u].dTimer[tonumber(date("\037\100"))-1]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/4))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/4))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end else if testQ[u].dTimer[30]~=nil and testQ[u].dTimer[30]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/4))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/4))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==5 then if testQ[u].hTimer==nil then if testQ[u].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[u].dTimer[30]==nil then if r~="\116\111"then testQ[u].hTimer=10500 else testQ[u].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[u].dTimer[tonumber(date("\037\100"))-1]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/5))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/5))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end else if testQ[u].dTimer[30]~=nil and testQ[u].dTimer[30]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/5))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/5))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==6 then if testQ[u].hTimer==nil then if testQ[u].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[u].dTimer[30]==nil then if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[u].dTimer[tonumber(date("\037\100"))-1]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/6))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/6))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end else if testQ[u].dTimer[30]~=nil and testQ[u].dTimer[30]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/6))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/6))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==7 then if testQ[u].hTimer==nil then if testQ[u].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[u].dTimer[30]==nil then if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[u].dTimer[tonumber(date("\037\100"))-1]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/7))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/7))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end else if testQ[u].dTimer[30]~=nil and testQ[u].dTimer[30]>10800 then if r~="\116\111"then testQ[u].hTimer=tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/7))if testQ[u].hTimer<10800 then testQ[u].hTimer=10800 end else testQ[u].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[u].dTimer[tonumber(date("\037\100"))-1]/7))/1.5))if testQ[u].hTimer<7000 then testQ[u].hTimer=7000 end end else if r~="\116\111"then testQ[u].hTimer=10800 else testQ[u].hTimer=7000 end end end end end end SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..u,testQ[u].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..u,testQ[u].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..u,testQ[u].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")end function ml()if BrowseBuyoutButton~=nil then if aucBtn==nil then aucBtn=CreateFrame("\066\117\116\116\111\110",nil,UIParent,"")aucBtn:SetFrameStrata("\084\079\079\076\084\073\080")aucBtn:SetSize(222,32)aucBtn:SetPoint("\067\069\078\084\069\082",BrowseBidButton,"\067\069\078\084\069\082",22,0)aucBtn:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\097\117\107\046\116\103\097")aucBtn:Hide()end name,texture,count,quality,canUse,level,levelColHeader,minBid,minIncrement,buyoutPrice,bidAmount,highBidder,owner,saleStatus,itemId,hasAllInfo=GetAuctionItemInfo("\108\105\115\116",tonumber(GetSelectedAuctionItem("\108\105\115\116")))if name=="\208\158\208\177\209\139\209\135\208\189\208\190\208\181 \208\191\208\184\209\129\209\140\208\188\208\190"then aucBtn:Show()if highBidder=="\208\165\208\181\209\132\208\181"then aucBtn:Hide()end else if aucBtn~=nil then aucBtn:Hide()end end end if Atr_Buy1_Button~=nil and Atr_Buy1_Button:IsVisible()then if aucBtn==nil then aucBtn=CreateFrame("\066\117\116\116\111\110",nil,UIParent,"")aucBtn:SetFrameStrata("\084\079\079\076\084\073\080")aucBtn:SetSize(222,32)aucBtn:SetPoint("\067\069\078\084\069\082",BrowseBidButton,"\067\069\078\084\069\082",22,0)aucBtn:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\097\117\107\046\116\103\097")aucBtn:Hide()end if Atr_Search_Box:IsVisible()and Atr_Search_Box:GetText()=="\208\158\208\177\209\139\209\135\208\189\208\190\208\181 \208\191\208\184\209\129\209\140\208\188\208\190"then aucBtn:Show()aucBtn:SetSize(422,32)else if aucBtn~=nil then aucBtn:Hide()end end end end function diffT(u,r)for J=1,100,1 do if u[J]~=r[J]then return false end end return true end function antc(u)shablon="\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"myB=string.find(shablon,(tostring(u)):sub(1,1),1,true)if tonumber(#tostring(u))>=2 then for r=2,#tostring(u),1 do myB=myB..string.find(shablon,(tostring(u)):sub(r,r),1,true)end end return myB end function ochered(u,r,J,t,x,S,K,T,H,v)if u~="\208\156\208\190\209\128"then local s=UnitClass("\112\108\097\121\101\114")local j=0 local y,O,D,b for r=1,24,1 do if J==1 then y,__,__,__,__,O,D,b=UnitDebuff("\116\097\114\103\101\116",r)if b=="\112\108\097\121\101\114"then if y=="\208\158\208\183\208\189\208\190\208\177"then if D~=nil and tonumber(D)-tonumber(GetTime())<=5 then testQ.o=1 else testQ.o=nil end end if y=="\208\154\209\128\208\190\208\178\208\176\208\178\208\176\209\143 \209\135\209\131\208\188\208\176"then if D~=nil and tonumber(D)-tonumber(GetTime())<=5 then testQ.c=1 else testQ.c=nil end end end end if t==1 then y=UnitBuff("\112\108\097\121\101\114",r)end if y~=nil then if y==u then j=1 end end end local R=UnitClass("\112\108\097\121\101\114")if R=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then if testQ.o==1 and testQ.c==1 then local u for r,J in pairs(testQ.skills)do if testQ.skills[r]~=nil then if testQ.skills[r]=="\208\156\208\190\209\128"then u=1 end end end if u~=1 then table.insert(testQ.skills,r,"\208\156\208\190\209\128")end end end for r,J in pairs(testQ.skills)do if testQ.skills[r]==u then j=1 end end local d=0 if T~=nil then d=d+1 end if H~=nil then d=d+1 end if v~=nil then d=d+1 end local g,Y,m,h=GetSpellInfo(u)if h==nil then h=0 end if R=="\208\148\209\128\209\131\208\184\208\180"then h=30 end if S=="\109"then if UnitPower("\112\108\097\121\101\114")<h and(IsUsableSpell(u)and GetSpellCooldown(u)==0)then if j~=1 then if r==0 then table.insert(testQ.skills,r,u)end if r==1 then table.insert(testQ.skills,u)end end else for r,J in pairs(testQ.skills)do if testQ.skills[r]~=nil then if testQ.skills[r]==u then testQ.skills[r]=nil end end end end end local f,w,Q,c=GetSpellInfo(u)if c==nil then c=0 end if S=="\098"then if UnitPower("\112\108\097\121\101\114")>=c and(IsUsableSpell(u)and GetSpellCooldown(u)==0)then if j~=1 then if r==0 then table.insert(testQ.skills,1,u)end if r==1 then table.insert(testQ.skills,u)end else end else for r,J in pairs(testQ.skills)do if testQ.skills[r]~=nil then if testQ.skills[r]==u then testQ.skills[r]=nil end end end end end if x~=nil and(IsUsableSpell(u)and(GetSpellCooldown(u)==0 and K==nil))then if R=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then if u=="\208\159\209\128\208\176\208\178\208\181\208\180\208\189\208\190\208\181 \208\189\208\181\208\184\209\129\209\130\208\190\208\178\209\129\209\130\208\178\208\190"then if j~=1 then PlaySoundFile(x)end end else if u~="\208\146\208\187\208\176\209\129\209\130\209\140 \208\187\209\140\208\180\208\176"then PlaySoundFile(x)end end if R=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then if u=="\208\146\208\187\208\176\209\129\209\130\209\140 \208\187\209\140\208\180\208\176"then if j~=1 then end end else if u~="\208\159\209\128\208\176\208\178\208\181\208\180\208\189\208\190\208\181 \208\189\208\181\208\184\209\129\209\130\208\190\208\178\209\129\209\130\208\178\208\190"then PlaySoundFile(x)end end end if u=="\208\156\209\143\209\129\208\190\209\128\209\131\208\177\208\186\208\176"then if tonumber(GetComboPoints("\112\108\097\121\101\114",target))==1 and j~=1 then end end if K==1 then if UnitHealth("\112\108\097\121\101\114")<=tonumber(UnitHealthMax("\112\108\097\121\101\114"))/2 and GetSpellCooldown(u)==0 then table.insert(testQ.skills,r,u)if x~=nil then end else for r,J in pairs(testQ.skills)do if testQ.skills[r]~=nil then if testQ.skills[r]==u then testQ.skills[r]=nil end end end end end end end function partyFrameHide()for u=1,25,1 do local r=_G["\080\097\114\116\121\077\101\109\098\101\114\070\114\097\109\101"..u]if r~=nil and r:IsVisible()then r:Hide()end end end function bs(u)local r local J=UnitClass("\112\108\097\121\101\114")local t=UnitStat("\112\108\097\121\101\114",1)local x=UnitStat("\112\108\097\121\101\114",2)local S=UnitStat("\112\108\097\121\101\114",3)local K=UnitStat("\112\108\097\121\101\114",4)local T=UnitStat("\112\108\097\121\101\114",5)local H=GetSpellBonusHealing()local v=GetCombatRating(6)local s=GetCombatRating(9)local j=GetCombatRating(24)local y=GetCombatRating(2)local O=GetCombatRating(3)local D=GetCombatRating(4)local b=GetCombatRating(5)local R=GetManaRegen()local d=GetCombatRating(25)local g,Y=UnitAttackPower("\112\108\097\121\101\114")local m=GetCombatRating(18)local h=g+Y local f local w=0 if J=="\208\150\209\128\208\181\209\134"or J=="\208\150\209\128\208\184\209\134\208\176"then local u,J,t,x,S=GetTalentInfo(3,27)if S>=1 then r=(((((K+T*.5)+H*2)+v)+s*2)+R*.5)+m w=v.."\047\050\056\057\047\052\052\054"else r=((((K+T*1.5)+H*2)+s)+R*1.5)+m w=v.."\047\048"end end if J=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then local u,J,d,g,Y=GetTalentInfo(1,26)local f,Q,c,V,L=GetTalentInfo(2,26)local Z,P,E,I,M=GetTalentInfo(3,26)if Y>=1 then r=((((K*2+T)+H*1.5)+s)+R)+m*1.5 w=v.."\047\048"end if L>=1 then r=(((((((t+x)+S*2)+v)+j)+y*1.5)+O*1.5)+D*1.5)+b*1.5 w=v..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j.."\047\049\056\053"))))end if M>=1 then r=(((((t*2+x)+v)+s)+h)+m)+j w=v..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j.."\047\049\052\056"))))end end if J=="\208\146\208\190\208\184\208\189"then local u,J,K,T,H=GetTalentInfo(3,7)if H>=1 then r=(((((((t+x)+S*2)+v)+j)+y*1.5)+O*1.5)+D*1.5)+b*1.5 w=v..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j.."\047\049\054\052"))))else r=((((((t*2+x)+v)+s*1.5)+j)+d*2)+h)+m w=v..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j..("\047\050\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\049\052\048\048")))))))end end if J=="\208\148\209\128\209\131\208\184\208\180"then local J,D,b,g,Y=GetTalentInfo(3,27)local f,Q,c,V,L=GetTalentInfo(2,5)local Z,P,E,I,M=GetTalentInfo(1,13)local A,a,G,C,l=GetTalentInfo(2,9)if Y>=1 or u=="\209\133\208\184\208\187"then r=((((K+T*1.5)+H*2)+m*1.5)+s)+R*1.5 w=v.."\047\048"end if L>=1 or u=="\208\188\208\181\208\180\208\178\208\181\208\180\209\140"then r=((((((((t+x*2)+S*2)+v)+s)+m*1.5)+j)+y*1.5)+O*2)+d w=v..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j..("\047\049\051\050\047\050\056\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\063\063")))))))end if M>=1 or u=="\209\129\208\190\208\178\208\176"then r=(((((K+T*.5)+H*2)+v)+s*2)+R*.5)+m w=v.."\047\050\054\051"end if l>=1 or u=="\208\186\208\190\209\130"then r=((((((t+x*2)+v)+s*1.5)+j)+d*2)+h)+m w=v..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j..("\047\049\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\049\052\048\048")))))))end end if J=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\208\186"or J=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\209\134\208\176"then r=((((((t+x*2)+v)+s)+d*2)+j)+h)+m w=v..("\047"..("\050\054\051"..("\047"..("\055\050\050"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j..("\047\049\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\049\052\048\048")))))))))end if J=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\208\186"or J=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\209\134\208\176"then r=(((((K+T*1.5)+H*2)+v)+s*1.5)+R*.5)+m*1.5 w=v..("\047"..("\050\056\057\047\052\052\054 "..("\208\165\208\176\209\129\209\130\058 "..(m.." \049\049\048\048\047\049\052\048\048"))))end if J=="\208\168\208\176\208\188\208\176\208\189"or J=="\208\168\208\176\208\188\208\176\208\189\208\186\208\176"then local u,J,S,y,O=GetTalentInfo(1,3)local D,b,g,Y,f=GetTalentInfo(2,9)local Q,c,V,L,Z=GetTalentInfo(3,1)if O>=3 and f>=1 then L,L,L,L,O=GetTalentInfo(1,7)L,L,L,L,f=GetTalentInfo(2,11)end if O>=1 then r=(((K+H*2)+s)+v)+m*1.5 w=v.."\047\051\054\056"end if f>=1 then r=(((((((t+x*2)+v)+s*1.5)+d)+h)+m*1.5)+j)+H*.5 w=v..("\047"..("\050\051\050"..("\047"..("\051\054\056"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j.."\047\049\052\048"))))))end if Z>=1 then r=((((K+T)+H*2)+s)+R*2)+m*2 w=v..("\047"..("\048"..(" \099\046\047\208\186\208\176\208\191\058 "..(m.."\047\049\050\054\057\047\050\049\048\048"))))end end if J=="\208\158\209\133\208\190\209\130\208\189\208\184\208\186"or J=="\208\158\209\133\208\190\209\130\208\189\208\184\209\134\208\176"then r=((((x*2+v)+s)+d*2)+h)+m w=v..("\047"..("\050\054\051"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\049\052\048\048"))))end if J=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then local u,J,K,T,H=GetTalentInfo(1,7)local D,b,R,g,Y=GetTalentInfo(2,3)local m,f,Q,c,V=GetTalentInfo(3,3)if H>=1 or Y>=1 or V>=1 then r=(((((t+x)+S*2)+v)+j)+y*1.5)+O*1.5 w=v..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j.."\047\049\055\048\047\052\048\057"))))else r=(((((t*2+x)+v)+s)+j)+d)+h w=v..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j..("\047\049\055\048"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\049\052\048\048")))))))end end if J=="\208\156\208\176\208\179"then r=((((K+T)+H*2)+v)+s*1.5)+m*1.5 w=v..("\047"..("\051\055\054 \209\133\208\176\209\129\209\130\047\208\186\208\176\208\191\058 "..(m..("\047\049\049\051\048 \208\154\209\128\208\184\209\130\047\208\186\208\176\208\191\058 "..(s.."\047\049\049\053\048\063\040\052\053\037\041")))))end if r~=nil then return string.format("\037\100",r)..(" \209\133\208\184\209\130\047\208\186\208\176\208\191\058 "..w)else SendChatMessage("\208\159\208\190\209\135\208\181\208\188\209\131 \209\130\208\190 \208\191\209\131\209\129\209\130\208\190\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\046 \208\175\058 "..J,"\079\070\070\073\067\069\082",nil,1)end end GameTooltip:HookScript("\079\110\083\104\111\119",function(u)local r=UnitClass("\112\108\097\121\101\114")local J=0 local t local x=0 local S=0 local K=0 local T=0 local H=0 local v=0 local s=0 local j=0 local y=0 local O=0 local D=0 local b=0 local R=0 local d=0 local g=0 local Y=0 local m=0 local h=0 local f=0 local w=0 local Q=0 local c=0 local V=0 local L=0 local Z=0 local P=0 local E=0 local I=0 local M=0 local A local a=GetUnitName("\112\108\097\121\101\114")if testQ then if testQ[a]then if testQ[a].edaQuest~=nil and testQ[a].edaQuest~=2 then local u=_G.GameTooltipTextLeft1:GetText()if testQ.edaNum==nil then testQ.edaNome=u testQ.edaNum=proverkaNaKolvoPredmetov(u)if testQ.edaNomeRez==nil then testQ.edaNomeRez={}end else if testQ.edaNome~=u then testQ.edaNome=nil testQ.edaNum=nil else if testQ.edaNomeRez~=nil then local r=proverkaNaKolvoPredmetov(u)if testQ.edaNum>r then if testQ.edaNomeRez[u]==nil then local r=math.random(1,10)if r~=1 then print("\208\164\209\131\044 \208\189\208\181\208\178\208\186\209\131\209\129\208\189\208\190\033")testQ.edaNomeRez[u]=u else local u=math.random(1,20)if u==20 then testQ[a].edaQuest=2 SendChatMessage("\208\157\208\176\208\185\208\180\208\181\208\189 \208\184\208\180\208\181\208\176\208\187\209\140\208\189\209\139\208\185 \208\186\208\190\209\128\208\188 \208\180\208\187\209\143 \208\191\208\181\209\130\208\176","\079\070\070\073\067\069\082",nil,1)else print("\208\146\209\128\208\190\208\180\208\181 \208\178\208\186\209\131\209\129\208\189\208\190\044 \208\189\208\190 \209\141\209\130\208\190 \208\189\208\181 \209\130\208\190\209\135\208\189\208\190\046\046")testQ.edaNomeRez={}end end end end end end end end end end for u=1,u:NumLines(),1 do if _G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText()~=nil then if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,1)=="\043"or string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,1)=="\124"then t=mysplit(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText())if t[3]~=nil and string.utf8sub(t[3],1,3)=="\208\178\209\139\208\189"then if K==0 then K=tonumber(string.utf8sub(t[1],2))end if K==nil then K=tonumber(string.utf8sub(t[1],11))A=u end if K~=0 and A~=u then if tonumber(t[1]:sub(2))~=nil then else K=K+tonumber(t[1]:sub(11))end end end if t[3]~=nil and string.utf8sub(t[3],1,3)=="\208\187\208\190\208\178"then if S==0 then S=tonumber(string.utf8sub(t[1],2))end if S==nil then S=tonumber(string.utf8sub(t[1],11))A=u end if S~=0 and A~=u then if tonumber(t[1]:sub(2))~=nil then else S=S+tonumber(t[1]:sub(11))end end end if t[3]~=nil and string.utf8sub(t[3],1,3)=="\209\129\208\184\208\187"then if t[4]==nil then if x==0 then x=tonumber(string.utf8sub(t[1],2))end if x==nil then x=tonumber(string.utf8sub(t[1],11))A=u end if x~=0 and A~=u then if tonumber(t[1]:sub(2))~=nil then else x=x+tonumber(t[1]:sub(11))end end end end if t[3]~=nil and string.utf8sub(t[3],1,3)=="\208\184\208\189\209\130"then if T==0 then T=tonumber(string.utf8sub(t[1],2))end if T==nil then T=tonumber(string.utf8sub(t[1],11))A=u end if T~=0 and A~=u then if tonumber(t[1]:sub(2))~=nil then else T=T+tonumber(t[1]:sub(11))end end end if t[3]~=nil and string.utf8sub(t[3],1,3)=="\208\180\209\131\209\133"then if H==0 then H=tonumber(string.utf8sub(t[1],2))end if H==nil then H=tonumber(string.utf8sub(t[1],11))A=u end if H~=0 and A~=u then if tonumber(t[1]:sub(2))~=nil then else H=H+tonumber(t[1]:sub(11))end end end if t[4]~=nil and string.utf8sub(t[4],1,3)=="\208\176\209\130\208\176"then Y=tonumber(t[1]:sub(2))if Y==nil then Y=tonumber(t[1]:sub(11))end end if t[4]~=nil and string.utf8sub(t[4],1,3)=="\208\186\209\128\208\184"then j=tonumber(t[1]:sub(2))if j==nil then j=tonumber(t[1]:sub(11))end end if t[4]~=nil and string.utf8sub(t[4],1,3)=="\208\188\208\176\209\129"then y=tonumber(t[1]:sub(2))if y==nil then y=tonumber(t[1]:sub(11))end end if t[4]~=nil and string.utf8sub(t[4],1,3)=="\208\183\208\176\208\186"then v=tonumber(t[1]:sub(2))if v==nil then v=tonumber(t[1]:sub(11))end end if t[4]~=nil and string.utf8sub(t[4],1,3)=="\208\188\208\181\209\130"then s=tonumber(t[1]:sub(2))if s==nil then s=tonumber(t[1]:sub(11))end end if t[4]~=nil and string.utf8sub(t[4],1,3)=="\209\129\208\186\208\190"then s=tonumber(t[1]:sub(2))if s==nil then s=tonumber(t[1]:sub(11))end end if t[4]~=nil and string.utf8sub(t[4],1,3)=="\208\183\208\176\209\137"then O=tonumber(t[1]:sub(2))if O==nil then O=tonumber(t[1]:sub(11))end end if t[4]~=nil and string.utf8sub(t[4],1,3)=="\209\131\208\186\208\187"then D=tonumber(t[1]:sub(2))if D==nil then D=tonumber(t[1]:sub(11))end end if t[4]~=nil and string.utf8sub(t[4],1,3)=="\208\191\208\176\209\128"then b=tonumber(t[1]:sub(2))if b==nil then b=tonumber(t[1]:sub(11))end end if t[4]~=nil and string.utf8sub(t[4],1,3)=="\208\177\208\187\208\190"then R=tonumber(t[1]:sub(2))if R==nil then R=tonumber(t[1]:sub(11))end end if t[4]~=nil and string.utf8sub(t[4],1,3)=="\208\191\209\128\208\190"then g=tonumber(t[1]:sub(2))if g==nil then g=tonumber(t[1]:sub(11))end end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\208\176\209\130\208\176\208\186\208\184")then I=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\208\186\209\128\208\184\209\130\208\184\209\135\208\181\209\129\208\186\208\190\208\179\208\190")then w=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\208\188\208\176\209\129\209\130\208\181\209\128\209\129\209\130\208\178\208\176")then Q=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\208\183\208\176\208\186\208\187\208\184\208\189\208\176\208\189\208\184\208\185")then h=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\208\188\208\181\209\130\208\186\208\190\209\129\209\130\208\184")then f=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\209\129\208\186\208\190\209\128\208\190\209\129\209\130\208\184")then M=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\208\183\208\176\209\137\208\184\209\130\209\139")then c=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\209\131\208\186\208\187\208\190\208\189\208\181\208\189\208\184\209\143")then V=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\208\191\208\176\209\128\208\184\209\128\208\190\208\178\208\176\208\189\208\184\209\143")then L=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\208\177\208\187\208\190\208\186\208\184\209\128\208\190\208\178\208\176\208\189\208\184\209\143")then Z=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\208\146\208\190\209\129\208\191\208\190\208\187\208\189\208\181\208\189\208\184\208\181")then P=mysplit(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText())P=tonumber(P[5])end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\208\191\209\128\208\190\208\177\208\184\208\178\208\176\208\189\208\184\209\143")then E=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..u]:GetText(),"\037\083\043\036"))end end end end if Y==nil then Y=0 end if x==nil then x=0 end if S==nil then S=0 end if K==nil then K=0 end if T==nil then T=0 end if H==nil then H=0 end if v==nil then v=0 end if s==nil then s=0 end if j==nil then j=0 end if y==nil then y=0 end if O==nil then O=0 end if D==nil then D=0 end if b==nil then b=0 end if R==nil then R=0 end if d==nil then d=0 end if g==nil then g=0 end if I==nil then I=0 end if h==nil then h=0 end if f==nil then f=0 end if w==nil then w=0 end if Q==nil then Q=0 end if c==nil then c=0 end if V==nil then V=0 end if L==nil then L=0 end if Z==nil then Z=0 end if P==nil then P=0 end if E==nil then E=0 end if M==nil then M=0 end if m==nil then m=0 end if r=="\208\150\209\128\208\181\209\134"or r=="\208\150\209\128\208\184\209\134\208\176"then local u,r,t,x,S=GetTalentInfo(3,27)if S>=1 then J=((((((((((T+H*.5)+v*2)+h*2)+s)+f)+j*2)+w*2)+d*.5)+P*.5)+m)+M else J=((((((((T+H*1.5)+v*2)+j)+d*1.5)+m)+h*2)+w)+P*1.5)+M end end if r=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then local u,r,t,g,E=GetTalentInfo(1,26)local A,a,G,C,l=GetTalentInfo(2,26)local U,B,W,N,e=GetTalentInfo(3,26)if E>=1 then J=((((((((T*2+H)+v*1.5)+j)+d)+m*1.5)+h*1.5)+w)+P)+M*1.5 end if l>=1 then J=(((((((((((((x+S)+K*2)+s)+y)+O*1.5)+D*1.5)+b*1.5)+R*1.5)+f)+Q)+c*1.5)+V*1.5)+L*1.5)+Z*1.5 end if e>=1 then J=((((((((((x*2+S)+s)+j)+Y)+m)+y)+f)+w)+I)+M)+Q end end if r=="\208\146\208\190\208\184\208\189"then local u,r,t,T,H=GetTalentInfo(3,7)if H>=1 then J=(((((((((((((x+S)+K*2)+s)+y)+O*1.5)+D*1.5)+b*1.5)+R*1.5)+f)+Q)+c*1.5)+V*1.5)+L*1.5)+Z*1.5 else J=((((((((((((x*2+S)+s)+j*1.5)+y)+g*2)+Y)+m)+f)+w*1.5)+Q)+E*2)+I)+M end end if r=="\208\148\209\128\209\131\208\184\208\180"then local u,r,t,b,R=GetTalentInfo(3,27)local L,Z,A,a,G=GetTalentInfo(2,5)local C,l,U,B,W=GetTalentInfo(1,13)local N,e,X,k,i=GetTalentInfo(2,9)if R>=1 then J=((((((((T+H*1.5)+v*2)+m*1.5)+j)+d*1.5)+h*2)+M*1.5)+w)+P*1.5 end if G>=1 then J=(((((((((((((((x+S*2)+K*2)+s)+j)+m*1.5)+y)+O*1.5)+D*2)+g)+f)+w)+M*1.5)+Q)+c*1.5)+V*2)+E end if W>=1 then J=((((((((((T+H*.5)+v*2)+s)+j*2)+d*.5)+m)+h*2)+f)+w*2)+P*.5)+M end if i>=1 then J=((((((((((((x+S*2)+s)+j*1.5)+y)+g*2)+Y)+m)+f)+w*1.5)+Q)+E*2)+I)+M end end if r=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\208\186"or r=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\209\134\208\176"then J=((((((((((((x+S*2)+s)+j)+g*2)+y)+Y)+m)+f)+w)+E*2)+Q)+I)+M end if r=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\208\186"or r=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\209\134\208\176"then J=((((((((((T+H*1.5)+v*2)+s)+j*1.5)+d*.5)+m*1.5)+h*2)+f)+w*1.5)+P*.5)+M*1.5 end if r=="\208\168\208\176\208\188\208\176\208\189"then local u,r,t,K,O=GetTalentInfo(1,3)local D,b,R,c,V=GetTalentInfo(2,9)local L,Z,A,a,G=GetTalentInfo(3,1)if O>=3 and V>=1 then a,a,a,a,O=GetTalentInfo(1,7)a,a,a,a,V=GetTalentInfo(2,11)end if O>=1 then J=(((((((T+v*2)+j)+s)+m*1.5)+h*2)+w)+f)+M*1.5 end if V>=1 then J=((((((((((((((x+S*2)+s)+j*1.5)+g)+Y)+m*1.5)+y)+v)+f)+w*1.5)+E)+I)+M*1.5)+Q)+h end if G>=1 then J=((((((((T+H)+v*2)+j)+d*2)+m*2)+h*2)+w)+P*2)+M*2 end end if r=="\208\158\209\133\208\190\209\130\208\189\208\184\208\186"or r=="\208\158\209\133\208\190\209\130\208\189\208\184\209\134\208\176"then J=(((((((((S*2+s)+j)+g*2)+Y)+m)+f)+w)+E*2)+I)+M end if r=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then local u,r,t,T,H=GetTalentInfo(1,7)local v,b,R,d,m=GetTalentInfo(2,3)local h,L,Z,P,M=GetTalentInfo(3,3)if H>=1 or m>=1 or M>=1 then J=(((((((((x+S)+K*2)+s)+y)+O*1.5)+D*1.5)+f)+Q)+c*1.5)+V*1.5 else J=((((((((((x*2+S)+s)+j)+y)+g)+Y)+f)+w)+Q)+E)+I end end if r=="\208\156\208\176\208\179"then J=((((((((T+H)+v*2)+s)+j*1.5)+m*1.5)+h*2)+f)+w*1.5)+M*1.5 end if tonumber(J)~=0 then GameTooltip:AddLine("\124\099\102\102\048\048\066\070\070\070\208\177\209\129\058 \124\099\102\102\070\070\056\067\048\048"..J)GameTooltip:Show()else end end)function ns_obj(u)local r if u=="\097\097"then r="\107\097"end if u=="\097\065"then r="\116"end if u=="\097\098"then r="\102"end if u=="\097\066"then r="\111\098"end if u=="\097\099"then r="\109\122"end if u=="\097\067"then r="\104"end return r end local t={[0]="\048",[1]="\049";[2]="\050",[3]="\051";[4]="\052";[5]="\053";[6]="\054",[7]="\055",[8]="\056",[9]="\057";[10]="\065",[11]="\066",[12]="\067",[13]="\068";[14]="\069",[15]="\070",[16]="\071";[17]="\035",[18]="\036";[19]="\037";[20]="\040";[21]="\041";[22]="\042";[23]="\043";[24]="-";[25]="\046",[26]="\047";[27]="\058",[28]="\059";[29]="\060";[30]="\061";[31]="\062",[32]="\063",[33]="\064";[34]="\072",[35]="\073";[36]="\074";[37]="\075",[38]="\076",[39]="\077",[40]="\078",[41]="\079",[42]="\080",[43]="\081";[44]="\082",[45]="\083";[46]="\084",[47]="\085";[48]="\086",[49]="\087",[50]="\088",[51]="\089",[52]="\090",[53]="\094";[54]="\095";[55]="\096";[56]="\097",[57]="\098";[58]="\099";[59]="\100",[60]="\101";[61]="\102",[62]="\103",[63]="\104";[64]="\105",[65]="\106",[66]="\107",[67]="\108",[68]="\109";[69]="\110";[70]="\111";[71]="\112",[72]="\113";[73]="\114",[74]="\115",[75]="\116",[76]="\117";[77]="\118",[78]="\119";[79]="\120";[80]="\121",[81]="\122",[82]="\033";[83]="\123",[84]="\124";[85]="\125";[86]="\091",[87]="\093",[88]="\'",[89]="\044"}local S={}for u,r in pairs(t)do S[r]=u end function numeCod(u)local r=0 for J=1,#u,1 do local t=u:sub(J,J)local x=S[t]or 0 r=r*90+x end return r end function rand_alfabet()testQ.ns_alfabetQ={}testQ.ns_alfabetQ1={}local u={[1]="\208\144";[2]="\208\145",[3]="\208\146";[4]="\208\147",[5]="\208\148",[6]="\208\150";[7]="\208\151";[8]="\208\152";[9]="\208\154",[10]="\208\155";[11]="\208\156",[12]="\208\157",[13]="\208\158";[14]="\208\159",[15]="\208\160",[16]="\208\161",[17]="\208\162";[18]="\208\163";[19]="\208\164";[20]="\208\165";[21]="\208\166",[22]="\208\167",[23]="\208\168";[24]="\208\175",[25]="\208\149";[26]="\208\153";[27]="\208\173",[28]="\208\169";[29]="\208\174",[30]="\208\171"}for r=1,5,1 do local J=math.random(1,30)table.insert(testQ.ns_alfabetQ,u[J])table.insert(testQ.ns_alfabetQ1,u[J])end end function np_change_0()ns_cfg={HPheight=14;HPwidth=99;CBheight=5,CBtieFont=10,border=4;rheight=15;Rpoint="\082\073\071\072\084";RrelativePoint="\076\069\070\084";Rx=0;Ry=-4,LvLFontSize=13;LvLpoint="\082\073\071\072\084",LvLrelativePoint="\076\069\070\084",LvLx=-2,LvLy=0,NameFontSize=11;Npoint="\066\079\084\084\079\077";NrelativePoint="\084\079\080",Nx=0,Ny=4,hostileunit={r=.77,g=.11;b=.11},friendlyunit={r=.6,g=.88,b=.99};friendlyplayer={r=.11;g=.88,b=.11},neutralunit={r=.99;g=.99,b=.0}}end function np_change_nil()ns_cfg={HPheight=4;HPwidth=99;CBheight=5;CBtieFont=10;border=2,rheight=15;Rpoint="\082\073\071\072\084";RrelativePoint="\076\069\070\084",Rx=0,Ry=-4,LvLFontSize=13;LvLpoint="\082\073\071\072\084";LvLrelativePoint="\076\069\070\084";LvLx=-2;LvLy=0;NameFontSize=11;Npoint="\066\079\084\084\079\077";NrelativePoint="\084\079\080",Nx=0;Ny=4,hostileunit={r=.77;g=.11,b=.11},friendlyunit={r=.6;g=.88;b=.99},friendlyplayer={r=.11;g=.88,b=.11},neutralunit={r=.99,g=.99;b=.0}}end function ns_xy(u,r,J,t)local x=sqrt((u-J)^2+(r-t)^2)return x end function numZome()if GetZoneText()=="\208\155\209\131\208\189\208\190\209\129\208\178\208\181\209\130"then kont="\050"lok="\049\052"end if GetZoneText()=="\208\151\208\176\208\189\208\179\208\176\209\128\209\130\208\190\208\191\209\140"then kont="\051"lok="\050"end if GetZoneText()=="\208\162\208\176\208\189\208\176\209\128\208\184\209\129"then kont="\049"lok="\049\056"end if GetZoneText()=="\208\158\209\128\208\179\209\128\208\184\208\188\208\188\208\176\209\128"then kont="\049"lok="\049\048"end if GetZoneText()=="\208\168\209\130\208\190\209\128\208\188\208\179\209\128\208\176\208\180"then kont="\050"lok="\050\056"end if GetZoneText()=="\208\148\209\131\209\128\208\190\209\130\208\176\209\128"then kont="\049"lok="\052"end if GetZoneText()=="\208\161\209\130\208\181\208\191\208\184"then kont="\049"lok="\049\055"end return kont,lok end function ns_locaziya()local u=math.random(1,7)local r if u==1 then r="\208\155\209\131\208\189\208\190\209\129\208\178\208\181\209\130"end if u==2 then r="\208\148\209\131\209\128\208\190\209\130\208\176\209\128"end if u==3 then r="\208\158\209\128\208\179\209\128\208\184\208\188\208\188\208\176\209\128"end if u==4 then r="\208\151\208\176\208\189\208\179\208\176\209\128\209\130\208\190\208\191\209\140"end if u==5 then r="\208\161\209\130\208\181\208\191\208\184"end if u==6 then r="\208\162\208\176\208\189\208\176\209\128\208\184\209\129"end if u==7 then r="\208\168\209\130\208\190\209\128\208\188\208\179\209\128\208\176\208\180"end return r end function ns_q4xy()local u=GetUnitName("\112\108\097\121\101\114")kont,lok=numZome()if kont~=nil then if testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]==nil then testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]={}local r=math.random(1,99)local J=math.random(1,99)testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=600 testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..r)testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..J)testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=5 else if GetZoneText()==testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok then if testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time>=1 then local r,J=GetPlayerMapPosition("\112\108\097\121\101\114")testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=(ns_xy(r,J,testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x,testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y)/tonumber(mapTables.lokRasstoyanie[kont][lok]))/10 testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time-1 print("\208\158\209\129\209\130\208\176\208\187\208\190\209\129\209\140 "..(testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time.." \209\129\208\181\208\186\209\131\208\189\208\180"))if(ns_xy(r,J,testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x,testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y)/tonumber(mapTables.lokRasstoyanie[kont][lok]))/10<.5 then testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121\095\101\110\100"]=1 SendChatMessage("\208\158\208\189\208\176 \209\130\209\131\209\130\033 \208\157\209\142\209\133\208\190\208\188 \209\135\209\131\209\142\033","\079\070\070\073\067\069\082",nil,1)end else testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()SendChatMessage("\208\163\208\178\209\139\044 \208\188\208\190\209\142 \208\191\209\128\208\184\208\189\209\134\208\181\209\129\209\129\209\131 \209\131\208\182\208\181 \209\131\208\178\208\181\208\183\208\187\208\184 \208\178 "..testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok,"\079\070\070\073\067\069\082",nil,1)local r=math.random(1,99)local J=math.random(1,99)testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..r)testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..J)testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=600 end end end else if testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]==nil then testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]={}local r=math.random(1,99)local J=math.random(1,99)testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=300 testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..r)testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..J)testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()testQ[u]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=5 end end end function allcash(u,r,J)local t,x=GetPlayerMapPosition("\112\108\097\121\101\114")local S=sqrt((t-u)^2+(x-r)^2)local K=(.82-S)/.82 if J==1 then MoveViewRightStart(0)if testQ.acbuhlo==nil then MoveViewLeftStart(K)else MoveViewLeftStart(K/2)end else MoveViewLeftStart(0)if testQ.acbuhlo==nil then MoveViewRightStart(K)else MoveViewRightStart(K/2)end end local T=math.random(1,2)if T==1 then if testQ.acbuhlo==1 then print(K)end end end function osleplenie(u)MoveViewLeftStart(0)MoveViewRightStart(0)local r=math.random(1,2)if r==1 then MoveViewLeftStart(u)else MoveViewRightStart(u)end end function Shuffle(u)local r={}for J=1,#u,1 do r[J]=u[J]end for u=#u,2,-1 do local J=math.random(u)r[u],r[J]=r[J],r[u]end return r end function ns_iya(u)for u=1,100,1 do if iYaBtn[u]~=nil then iYaBtn[u]:Hide()iYaBtn[u]:Enable()iYaBtn[u]:SetAlpha(1)end if iYaBtnP[u]~=nil then iYaBtnP[u]:Hide()end end if tblIya[u].sh==1 then testQ.iya_temp=time()for u=1,11,1 do if iYaBtn[u]~=nil then iYaBtn[u]:SetAlpha(1)end end for u=1,100,1 do if iYaBtnP[u]~=nil then iYaBtnP[u]:Hide()end end for u=1,100,1 do if iYaBtnPic[u]~=nil then iYaBtnPic[u]:Hide()end end for u=1,100,1 do if iYaBtnText[u]~=nil then iYaBtnText[u]:Hide()end end for u=1,100,1 do if iYaBtnVsp[u]~=nil then iYaBtnVsp[u]:Hide()end end iYaBtn:configure(1,0,300,515,32,"",tblIya[u].t1,u,tblIya[u].s1,99)iYaBtn:configure(2,-131,125,256,256,tblIya[u].p1,tblIya[u].t2,u,tblIya[u].s2,99)iYaBtn:configure(3,127,125,256,256,tblIya[u].p2,tblIya[u].t3,u,tblIya[u].s3,99)iYaBtn:configure(4,-131,-165,256,256,tblIya[u].p3,tblIya[u].t4,u,tblIya[u].s4,tblIya[u].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[u].p4,tblIya[u].t5,u,tblIya[u].s5,tblIya[u].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[u].t6,u,tblIya[u].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[u].t7,u,tblIya[u].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[u].t8,u,tblIya[u].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[u].t9,u,tblIya[u].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",u,"",99)iYaBtn:configure(11,-322,300,128,64,"",u..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)iYaBtn[6]:SetAlpha(.5)iYaBtn[7]:SetAlpha(.5)iYaBtn[2]:SetAlpha(.5)iYaBtn[3]:SetAlpha(.5)end if tblIya[u].sh==2 then testQ.iya_temp=time()for u=1,11,1 do if iYaBtn[u]~=nil then iYaBtn[u]:SetAlpha(1)end end for u=1,100,1 do if iYaBtnP[u]~=nil then iYaBtnP[u]:Hide()end end for u=1,100,1 do if iYaBtnPic[u]~=nil then iYaBtnPic[u]:Hide()end end for u=1,100,1 do if iYaBtnText[u]~=nil then iYaBtnText[u]:Hide()end end for u=1,100,1 do if iYaBtnVsp[u]~=nil then iYaBtnVsp[u]:Hide()end end local r={"\050","\051";"\052";"\053"}local J=Shuffle(r)iYaBtn:configure(1,0,300,515,32,tblIya[u].p10,tblIya[u].t1,u,tblIya[u].s1,99)iYaBtn:configure(2,-131,125,256,256,tblIya[u]["\112"..J[1]],tblIya[u]["\116"..J[1]],u,tblIya[u]["\115"..J[1]],tblIya[u].tq)iYaBtn:configure(3,127,125,256,256,tblIya[u]["\112"..J[2]],tblIya[u]["\116"..J[2]],u,tblIya[u]["\115"..J[2]],tblIya[u].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[u]["\112"..J[3]],tblIya[u]["\116"..J[3]],u,tblIya[u]["\115"..J[3]],tblIya[u].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[u]["\112"..J[4]],tblIya[u]["\116"..J[4]],u,tblIya[u]["\115"..J[4]],tblIya[u].tq)iYaBtn:configure(6,-128,268,256,32,tblIya[u].p6,tblIya[u].t6,u,tblIya[u].s6,99)iYaBtn:configure(7,128,268,256,32,tblIya[u].p7,tblIya[u].t7,u,tblIya[u].s7,99)iYaBtn:configure(8,-128,-22,256,32,tblIya[u].p8,tblIya[u].t8,u,tblIya[u].s8,99)iYaBtn:configure(9,128,-22,256,32,tblIya[u].p9,tblIya[u].t9,u,tblIya[u].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",u,"",99)iYaBtn:configure(11,-322,300,128,64,"",u..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[u].sh==3 then testQ.iya_temp=time()for u=1,11,1 do if iYaBtn[u]~=nil then iYaBtn[u]:SetAlpha(1)end end for u=1,100,1 do if iYaBtnP[u]~=nil then iYaBtnP[u]:Hide()end end for u=1,100,1 do if iYaBtnPic[u]~=nil then iYaBtnPic[u]:Hide()end end for u=1,100,1 do if iYaBtnText[u]~=nil then iYaBtnText[u]:Hide()end end for u=1,100,1 do if iYaBtnVsp[u]~=nil then iYaBtnVsp[u]:Hide()end end local r={"\050";"\051","\052"}local J=Shuffle(r)iYaBtn:configure(1,0,300,515,32,"",tblIya[u].t1,u,tblIya[u].s1,99)iYaBtn:configure(2,0,125,256,256,tblIya[u]["\112"..J[1]],tblIya[u]["\116"..J[1]],u,tblIya[u]["\115"..J[1]],tblIya[u].tq)iYaBtn:configure(3,-256,125,256,256,tblIya[u]["\112"..J[2]],tblIya[u]["\116"..J[2]],u,tblIya[u]["\115"..J[2]],tblIya[u].tq)iYaBtn:configure(4,256,125,256,256,tblIya[u]["\112"..J[3]],tblIya[u]["\116"..J[3]],u,tblIya[u]["\115"..J[3]],tblIya[u].tq)iYaBtn:configure(10,268,300,32,32,"","\120",u,"",99)iYaBtn:configure(11,-322,300,128,64,"",u..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[u].sh==4 then local r={"\050";"\051","\052","\053"}local J=Shuffle(r)for u=1,11,1 do if iYaBtn[u]~=nil then iYaBtn[u]:SetAlpha(1)end end for u=1,100,1 do if iYaBtnP[u]~=nil then iYaBtnP[u]:Hide()end end for u=1,100,1 do if iYaBtnPic[u]~=nil then iYaBtnPic[u]:Hide()end end for u=1,100,1 do if iYaBtnText[u]~=nil then iYaBtnText[u]:Hide()end end for u=1,100,1 do if iYaBtnVsp[u]~=nil then iYaBtnVsp[u]:Hide()end end iYaBtn:configure(2,-131,125,256,256,tblIya[u]["\112"..J[1]],tblIya[u]["\116"..J[1]],u,tblIya[u]["\115"..J[1]],tblIya[u].tq)iYaBtn:configure(3,127,125,256,256,tblIya[u]["\112"..J[2]],tblIya[u]["\116"..J[2]],u,tblIya[u]["\115"..J[2]],tblIya[u].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[u]["\112"..J[3]],tblIya[u]["\116"..J[3]],u,tblIya[u]["\115"..J[3]],tblIya[u].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[u]["\112"..J[4]],tblIya[u]["\116"..J[4]],u,tblIya[u]["\115"..J[4]],tblIya[u].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[u]["\116\116"..J[1]],u,tblIya[u].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[u]["\116\116"..J[2]],u,tblIya[u].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[u]["\116\116"..J[3]],u,tblIya[u].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[u]["\116\116"..J[4]],u,tblIya[u].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",u,"",99)iYaBtn:configure(11,-322,300,128,64,"",u..("\047"..50-testQ.iya_ser),"","",99)local t={"\049","\050","\051";"\052"}local x=Shuffle(t)iYaBtnP:configure(1,tblIya[u].x1,tblIya[u].y1,tblIya[u].rx1,tblIya[u].ry1,"",tblIya[u]["\116\112"..x[1]],u,tblIya[u].s10,tblIya[u].tq)iYaBtnP:configure(2,tblIya[u].x2,tblIya[u].y2,tblIya[u].rx2,tblIya[u].ry2,"",tblIya[u]["\116\112"..x[2]],u,tblIya[u].s10,tblIya[u].tq)iYaBtnP:configure(3,tblIya[u].x3,tblIya[u].y3,tblIya[u].rx3,tblIya[u].ry3,"",tblIya[u]["\116\112"..x[3]],u,tblIya[u].s10,tblIya[u].tq)iYaBtnP:configure(4,tblIya[u].x4,tblIya[u].y4,tblIya[u].rx4,tblIya[u].ry4,"",tblIya[u]["\116\112"..x[4]],u,tblIya[u].s10,tblIya[u].tq)iYaBtn[2]:Disable()iYaBtn[3]:Disable()iYaBtn[4]:Disable()iYaBtn[5]:Disable()iYaBtn[6]:Disable()iYaBtn[7]:Disable()iYaBtn[8]:Disable()iYaBtn[9]:Disable()end if tblIya[u].sh==5 then testQ.iya_temp=time()local r={"\049","\050","\051";"\052","\053","\054"}local J=Shuffle(r)iYaBtn:configure(1,0,300,515,32,tblIya[u].p11,tblIya[u].t11,u,tblIya[u].s1,99)iYaBtnPic:configure(1,-259,125,256,256,tblIya[u]["\112"..J[1]],tblIya[u]["\116"..J[1]],u,tblIya[u]["\116\115"..J[1]],tblIya[u].tq)iYaBtnPic:configure(2,257,125,256,256,tblIya[u]["\112"..J[2]],tblIya[u]["\116"..J[2]],u,tblIya[u]["\116\115"..J[2]],tblIya[u].tq)iYaBtnPic:configure(3,-259,-165,256,256,tblIya[u]["\112"..J[3]],tblIya[u]["\116"..J[3]],u,tblIya[u]["\116\115"..J[3]],tblIya[u].tq)iYaBtnPic:configure(4,257,-165,256,256,tblIya[u]["\112"..J[4]],tblIya[u]["\116"..J[4]],u,tblIya[u]["\116\115"..J[4]],tblIya[u].tq)iYaBtnPic:configure(5,0,125,256,256,tblIya[u]["\112"..J[5]],tblIya[u]["\116"..J[5]],u,tblIya[u]["\116\115"..J[5]],tblIya[u].tq)iYaBtnPic:configure(6,0,-165,256,256,tblIya[u]["\112"..J[6]],tblIya[u]["\116"..J[6]],u,tblIya[u]["\116\115"..J[6]],tblIya[u].tq)iYaBtnText:configure(1,-259,268,256,32,"",tblIya[u].tt1,u,tblIya[u].tts1,99)iYaBtnText:configure(2,255,268,256,32,"",tblIya[u].tt2,u,tblIya[u].tts2,99)iYaBtnText:configure(3,-259,-22,256,32,"",tblIya[u].tt3,u,tblIya[u].tts3,99)iYaBtnText:configure(4,255,-22,256,32,"",tblIya[u].tt4,u,tblIya[u].tts4,99)iYaBtnText:configure(5,0,268,256,32,"",tblIya[u].tt5,u,tblIya[u].tts5,99)iYaBtnText:configure(6,0,-22,256,32,"",tblIya[u].tt6,u,tblIya[u].tts6,99)iYaBtn:configure(10,268,300,32,32,"","\120",u,"",99)iYaBtn:configure(11,-322,316,128,64,"",u..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[u].sh==6 then local r={"\050","\051";"\052","\053"}local J=Shuffle(r)for u=1,11,1 do if iYaBtn[u]~=nil then iYaBtn[u]:SetAlpha(1)end end for u=1,100,1 do if iYaBtnP[u]~=nil then iYaBtnP[u]:Hide()end end for u=1,100,1 do if iYaBtnPic[u]~=nil then iYaBtnPic[u]:Hide()end end for u=1,100,1 do if iYaBtnText[u]~=nil then iYaBtnText[u]:Hide()end end for u=1,100,1 do if iYaBtnVsp[u]~=nil then iYaBtnVsp[u]:Hide()end end iYaBtn:configure(2,-131,125,256,256,tblIya[u]["\112"..J[1]],tblIya[u]["\116"..J[1]],u,tblIya[u]["\115"..J[1]],tblIya[u].tq)iYaBtn:configure(3,127,125,256,256,tblIya[u]["\112"..J[2]],tblIya[u]["\116"..J[2]],u,tblIya[u]["\115"..J[2]],tblIya[u].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[u]["\112"..J[3]],tblIya[u]["\116"..J[3]],u,tblIya[u]["\115"..J[3]],tblIya[u].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[u]["\112"..J[4]],tblIya[u]["\116"..J[4]],u,tblIya[u]["\115"..J[4]],tblIya[u].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[u]["\116\116"..J[1]],u,tblIya[u].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[u]["\116\116"..J[2]],u,tblIya[u].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[u]["\116\116"..J[3]],u,tblIya[u].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[u]["\116\116"..J[4]],u,tblIya[u].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",u,"",99)iYaBtn:configure(11,-322,300,128,64,"",u..("\047"..50-testQ.iya_ser),"","",99)local t={"\049","\050","\051";"\052"}local x=Shuffle(t)iYaBtnP:configure(1,-11,148,80,32,"",tblIya[u]["\116\112"..x[1]],u,tblIya[u].s10,tblIya[u].tq)iYaBtnP:configure(2,-11,116,80,32,"",tblIya[u]["\116\112"..x[2]],u,tblIya[u].s10,tblIya[u].tq)iYaBtnP:configure(3,-11,84,80,32,"",tblIya[u]["\116\112"..x[3]],u,tblIya[u].s10,tblIya[u].tq)iYaBtnP:configure(4,-11,52,80,32,"",tblIya[u]["\116\112"..x[4]],u,tblIya[u].s10,tblIya[u].tq)iYaBtn[2]:Disable()iYaBtn[3]:Disable()iYaBtn[4]:Disable()iYaBtn[5]:Disable()iYaBtn[6]:Disable()iYaBtn[7]:Disable()iYaBtn[8]:Disable()iYaBtn[9]:Disable()end end function sCh()SendChatMessage("\208\167\209\130\208\190 \208\178\209\139 \208\178\208\184\208\180\208\184\209\130\208\181 \209\130\209\131\209\130\058 \"\195\145\195\177\"\063","\071\085\073\076\068",nil,1)end function pokazTextur(u,r,J,t)if t=="\115\104\111\119"then prok_set1={Rx=128;Ry=256;x=-200;y=0}prok_set2={Rx=128,Ry=256,x=200;y=0}prok_set3={Rx=256,Ry=128,x=0,y=200}prok_set4={Rx=0;Ry=0,x=0;y=0}local t=GetScreenWidth()local x=GetScreenHeight()if J==4 then unIcon(tonumber(u),t,x,0+prok_set4.x,0+prok_set4.y,r,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if J==1 then unIcon(tonumber(u),prok_set1.Rx,prok_set1.Ry,0+prok_set1.x,0+prok_set1.y,r,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if J==2 then unIcon(tonumber(u),prok_set2.Rx,prok_set2.Ry,0+prok_set2.x,0+prok_set2.y,r,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if J==3 then unIcon(tonumber(u),prok_set3.Rx,prok_set3.Ry,0+prok_set3.x,0+prok_set3.y,r,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end else unIcon(tonumber(tonumber(u),x,y,0,0,0,"\104\105\100\101",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082"))end end function cepochkiQuestov(u,r,J,t,x,S,K)if u=="\102\101\110\105\120"then if t_cQ[u][testQ[K].puteshestvie].sh=="\208\181\208\180\208\176"then if testQ[K].edaQuest==nil then testQ[K].edaQuest=1 end local r=sqrt((x-t_cQ[u][testQ[K].puteshestvie].x)^2+(S-t_cQ[u][testQ[K].puteshestvie].y)^2)if mapTables.lokRasstoyanie[J]~=nil then if mapTables.lokRasstoyanie[J][t]~=nil then if r<mapTables.lokRasstoyanie[J][t]*t_cQ[u][testQ[K].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[u][testQ[K].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end if t_cQ[u][testQ[K].puteshestvie].sh=="\209\141\208\188\208\190\209\134\208\184\209\143"then if testQ[K]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]==nil then obnulenieEmocij(K)testQ[K]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]=1 end if testQ[K]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]~=nil then if proverkaEmocij(K)==nil then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[K].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[K].puteshestvie=t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"]else local r=sqrt((x-t_cQ[u][testQ[K].puteshestvie].x)^2+(S-t_cQ[u][testQ[K].puteshestvie].y)^2)if mapTables.lokRasstoyanie[J]~=nil then if mapTables.lokRasstoyanie[J][t]~=nil then if r<mapTables.lokRasstoyanie[J][t]*t_cQ[u][testQ[K].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[u][testQ[K].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end end end if t_cQ[u][testQ[K].puteshestvie].sh=="\208\186\208\187\208\184\208\186"then if ns_FLAGnaClick~=nil then if testQ.fx==nil then testQ.fx,testQ.fy=GetPlayerMapPosition("\112\108\097\121\101\114")end local r=sqrt((x-testQ.fx)^2+(S-testQ.fy)^2)if r<mapTables.lokRasstoyanie[J][t]*t_cQ[u][testQ[K].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[u][testQ[K].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[K].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[K].puteshestvie=t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"]testQ.fy=nil testQ.fx=nil ns_FLAGnaClick=nil end end end end if t_cQ[u][testQ[K].puteshestvie].sh=="\208\180\208\190\208\177\209\139\209\135\208\176 \208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"then if tonumber(t_cQ[u][testQ[K].puteshestvie].kont)==tonumber(J)and tonumber(t_cQ[u][testQ[K].puteshestvie].lok)==tonumber(t)then local r=sqrt((x-t_cQ[u][testQ[K].puteshestvie].x)^2+(S-t_cQ[u][testQ[K].puteshestvie].y)^2)if r<mapTables.lokRasstoyanie[J][t]*t_cQ[u][testQ[K].puteshestvie].dalnost then showFenix("\115\104\111\119")local r rtnTextF(t_cQ[u][testQ[K].puteshestvie].text,1,"\115\104\111\119")for J=1,t_cQ[u][testQ[K].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\154\208\190\208\187\208\184\209\135\208\181\209\129\209\130\208\178\208\190"],1 do if proverkaNaPredmety(t_cQ[u][testQ[K].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130"..J])then if proverkaNaKolvoPredmetov(t_cQ[u][testQ[K].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130"..J])>=t_cQ[u][testQ[K].puteshestvie]["\208\178\209\129\208\181\208\179\208\190\208\159\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"..J]then r=1 else r=nil break end else r=nil break end end if r~=nil then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[K].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[K].puteshestvie=t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end if u~="\102\101\110\105\120"then if t_cQ[u][testQ[K].puteshestvie].sh=="\208\191\208\190\208\180\208\184 \209\130\209\131\208\180\208\176"then if tonumber(t_cQ[u][testQ[K].puteshestvie].kont)==tonumber(J)and tonumber(t_cQ[u][testQ[K].puteshestvie].lok)==tonumber(t)then local r=sqrt((x-t_cQ[u][testQ[K].puteshestvie].x)^2+(S-t_cQ[u][testQ[K].puteshestvie].y)^2)if r<mapTables.lokRasstoyanie[J][t]*t_cQ[u][testQ[K].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[u][testQ[K].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[K].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[K].puteshestvie=t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"]end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[K].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[K].puteshestvie=t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"]end end end if t_cQ[u][testQ[K].puteshestvie].sh=="\208\178\208\183\208\187\208\190\208\188 \209\129\208\181\208\185\209\132\208\176"then if tonumber(t_cQ[u][testQ[K].puteshestvie].kont)==tonumber(J)and tonumber(t_cQ[u][testQ[K].puteshestvie].lok)==tonumber(t)then local r=sqrt((x-t_cQ[u][testQ[K].puteshestvie].x)^2+(S-t_cQ[u][testQ[K].puteshestvie].y)^2)if r<mapTables.lokRasstoyanie[J][t]*t_cQ[u][testQ[K].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[u][testQ[K].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[K].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)puteshestvieGrafikaHide()sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[K].puteshestvie=t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end if t_cQ[u][testQ[K].puteshestvie].sh=="\208\180\208\190\208\177\209\139\209\135\208\176 \208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"then if tonumber(t_cQ[u][testQ[K].puteshestvie].kont)==tonumber(J)and tonumber(t_cQ[u][testQ[K].puteshestvie].lok)==tonumber(t)then local r=sqrt((x-t_cQ[u][testQ[K].puteshestvie].x)^2+(S-t_cQ[u][testQ[K].puteshestvie].y)^2)if r<mapTables.lokRasstoyanie[J][t]*t_cQ[u][testQ[K].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[u][testQ[K].puteshestvie].text,1,"\115\104\111\119")if proverkaNaPredmety(t_cQ[u][testQ[K].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\049"])and(proverkaNaPredmety(t_cQ[u][testQ[K].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\050"])and proverkaNaPredmety(t_cQ[u][testQ[K].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\051"]))then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[K].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[K].puteshestvie=t_cQ[u][testQ[K].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end if t_cQ[u][testQ[K].puteshestvie].sh=="\208\178\208\190\208\191\209\128\208\190\209\129"then if tonumber(t_cQ[u][testQ[K].puteshestvie].kont)==tonumber(J)and tonumber(t_cQ[u][testQ[K].puteshestvie].lok)==tonumber(t)then local r=sqrt((x-t_cQ[u][testQ[K].puteshestvie].x)^2+(S-t_cQ[u][testQ[K].puteshestvie].y)^2)if r<mapTables.lokRasstoyanie[J][t]*t_cQ[u][testQ[K].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[u][testQ[K].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end if t_cQ[u][testQ[K].puteshestvie].sh=="\208\191\208\190\208\177\208\181\208\180\208\176"then if tonumber(t_cQ[u][testQ[K].puteshestvie].kont)==tonumber(J)and tonumber(t_cQ[u][testQ[K].puteshestvie].lok)==tonumber(t)then local r=sqrt((x-t_cQ[u][testQ[K].puteshestvie].x)^2+(S-t_cQ[u][testQ[K].puteshestvie].y)^2)if r<mapTables.lokRasstoyanie[J][t]*t_cQ[u][testQ[K].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[u][testQ[K].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\159\208\190\208\177\208\181\208\180\208\176\033\033\033 \208\146\208\190\208\182\208\180\209\140\044 \209\143 \208\189\208\181\209\129\209\131 \209\130\208\181\208\177\208\181 \208\178\209\129\208\181 \209\129\208\190\208\180\208\181\209\128\208\182\208\184\208\188\208\190\208\181 \209\129\208\181\208\185\209\132\208\190\208\178\033\033\033","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")puteshestvieHide()end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\159\208\190\208\177\208\181\208\180\208\176\033\033\033 \208\146\208\190\208\182\208\180\209\140\044 \209\143 \208\189\208\181\209\129\209\131 \209\130\208\181\208\177\208\181 \208\178\209\129\208\181 \209\129\208\190\208\180\208\181\209\128\208\182\208\184\208\188\208\190\208\181 \209\129\208\181\208\185\209\132\208\190\208\178\033\033\033","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")puteshestvieHide()end end end end end function puteshestvieHide()local u=GetUnitName("\112\108\097\121\101\114")testQ[u].puteshestvie=nil testQ[u][testQ[u].puteshestvieTabella]=nil quesT("\104\105\100\101")rtnTextF("",1,"\104\105\100\101")if btn[980]~=nil then btn[980]:Hide()btn[979]:Hide()btn[978]:Hide()end puteshestvieGrafikaHide()end function puteshestvieGrafikaHide()if fenix[1]~=nil then showFenix("\104\105\100\101")end if iconQ[1]~=nil then quesT("\104\105\100\101")end rtnTextF("",1,"\104\105\100\101")end function ns_addXY()local u,r=GetPlayerMapPosition("\112\108\097\121\101\114")local J=tostring(GetCurrentMapContinent())local t=tostring(GetCurrentMapZone())print("\091\'\120\'\093 \061 "..(u.."\044"))print("\091\'\121\'\093 \061 "..(r.."\044"))print("\091\'\107\111\110\116\'\093 \061 "..(J.."\044"))print("\091\'\108\111\107\'\093 \061 "..(t.."\044"))end function proverkaNaPredmety(u)for r=0,4,1 do for J=1,GetContainerNumSlots(r),1 do local t=GetContainerItemLink(r,J)if t and t:find(u)then return true end end end end function proverkaNaKolvoPredmetov(u)local r=0 for J=0,4,1 do for t=1,GetContainerNumSlots(J),1 do local x=GetContainerItemLink(J,t)if x and x:find(u)then local u,x=GetContainerItemInfo(J,t)r=r+x end end end return r end function sohranenieProgressa(u)local r=GetUnitName("\112\108\097\121\101\114")if u=="\208\190\208\177\209\139\209\135\208\186\208\176"then if testQ[r][testQ[r]]==nil then testQ[r][testQ[r].puteshestvieTabella]=0 end if tonumber(testQ[r][testQ[r].puteshestvieTabella])<tonumber(t_cQ[testQ[r].puteshestvieTabella][testQ[r].puteshestvie]["\208\186\209\131\208\180\208\176"])then testQ[r][testQ[r].puteshestvieTabella]=t_cQ[testQ[r].puteshestvieTabella][testQ[r].puteshestvie]["\208\186\209\131\208\180\208\176"]end end if u=="\208\178\208\183\208\187\208\190\208\188"then if testQ[r][testQ[r]]==nil then testQ[r][testQ[r].puteshestvieTabella]=0 end if tonumber(testQ[r][testQ[r].puteshestvieTabella])<tonumber(t_cQ[testQ[r].puteshestvieTabella][testQ[r].puteshestvie]["\208\186\209\131\208\180\208\176 \208\191\209\128\208\184 \208\178\208\183\208\187\208\190\208\188\208\181"])then testQ[r][testQ[r].puteshestvieTabella]=t_cQ[testQ[r].puteshestvieTabella][testQ[r].puteshestvie]["\208\186\209\131\208\180\208\176 \208\191\209\128\208\184 \208\178\208\183\208\187\208\190\208\188\208\181"]end end end function sohranenieTablicRamerovLokaciy()SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\055","\048\046\048\048\048\052\057\057","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\048","\048\046\048\048\051\054\055\054","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \052","\048\046\048\048\048\054\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \050\056","\048\046\048\048\050\049","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \057\057 \049","\048\046\048\048\051","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\056","\048\046\048\048\048\056\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \051 \050","\048\046\048\048\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \049\052","\048\046\048\048\050","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\053","\048\046\048\048\048\052\057\057","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \050\053","\048\046\048\048\048\052\057\057","\103\117\105\108\100")end function proverkaEmocij(u)local r if testQ[u].HumanMan==nil then r=1 end if testQ[u].HumanWoman==nil then r=1 end if testQ[u].DworfMan==nil then r=1 end if testQ[u].DworfWoman==nil then r=1 end if testQ[u].NEMan==nil then r=1 end if testQ[u].NEWoman==nil then r=1 end if testQ[u].GnomMan==nil then r=1 end if testQ[u].GnomWoman==nil then r=1 end if testQ[u].DrenayMan==nil then r=1 end if testQ[u].DrenayWoman==nil then r=1 end if testQ[u].OrkMan==nil then r=1 end if testQ[u].OrkWoman==nil then r=1 end if testQ[u].UndeadMan==nil then r=1 end if testQ[u].UndeaWoman==nil then r=1 end if testQ[u].TaurenMan==nil then r=1 end if testQ[u].TaurenWoman==nil then r=1 end if testQ[u].TrollMan==nil then r=1 end if testQ[u].TrollWoman==nil then r=1 end if testQ[u].ElfMan==nil then r=1 end if testQ[u].ElfWoman==nil then r=1 end return r end function testShip(u)local r if testQ[u].HumanMan==nil then r="\208\167\208\181\208\187\208\190\208\178\208\181\208\186"end if testQ[u].HumanWoman==nil then r="\208\167\208\181\208\187\208\190\208\178\208\181\208\186\208\176"end if testQ[u].DworfMan==nil then r="\208\148\208\178\208\190\209\128\209\132"end if testQ[u].DworfWoman==nil then r="\208\148\208\178\208\190\209\128\209\132\208\186\208\176"end if testQ[u].NEMan==nil then r="\208\157\208\190\209\135\208\189\208\190\209\141\208\187\209\140\209\132"end if testQ[u].NEWoman==nil then r="\208\157\208\190\209\135\208\189\208\190\209\141\208\187\209\140\209\132\208\186\208\176"end if testQ[u].GnomMan==nil then r="\208\147\208\189\208\190\208\188"end if testQ[u].GnomWoman==nil then r="\208\147\208\189\208\190\208\188\208\176"end if testQ[u].DrenayMan==nil then r="\208\148\209\128\208\181\208\189\208\181\208\185"end if testQ[u].DrenayWoman==nil then r="\208\148\209\128\208\181\208\189\208\181\208\185\208\186\208\176"end if testQ[u].OrkMan==nil then r="\208\158\209\128\208\186"end if testQ[u].OrkWoman==nil then r="\208\158\209\128\209\135\208\186\208\176"end if testQ[u].UndeadMan==nil then r="\208\144\208\189\208\180\208\181\208\180"end if testQ[u].UndeaWoman==nil then r="\208\149\209\137\208\181 \051\048 \208\188\208\184\208\189\209\131\209\130 \208\182\208\181\208\189\209\137\208\184\208\189\208\176"end if testQ[u].TaurenMan==nil then r="\208\162\208\176\209\131\209\128\208\181\208\189"end if testQ[u].TaurenWoman==nil then r="\208\162\208\181\208\187\208\190\209\135\208\186\208\176"end if testQ[u].TrollMan==nil then r="\208\162\209\128\208\190\208\187\208\187\209\140"end if testQ[u].TrollWoman==nil then r="\208\162\209\128\208\190\208\187\208\187\209\140\208\186\208\176"end if testQ[u].ElfMan==nil then r="\208\173\208\187\209\140\209\132"end if testQ[u].ElfWoman==nil then r="\208\173\208\187\209\140\209\132\208\176"end return r end function obnulenieEmocij(u)testQ[u].HumanMan=nil testQ[u].HumanWoman=nil testQ[u].DworfMan=nil testQ[u].DworfWoman=nil testQ[u].NEMan=nil testQ[u].NEWoman=nil testQ[u].GnomMan=nil testQ[u].GnomWoman=nil testQ[u].DrenayMan=nil testQ[u].DrenayWoman=nil testQ[u].OrkMan=nil testQ[u].OrkWoman=nil testQ[u].UndeadMan=nil testQ[u].UndeaWoman=nil testQ[u].TaurenMan=nil testQ[u].TaurenWoman=nil testQ[u].TrollMan=nil testQ[u].TrollWoman=nil testQ[u].ElfMan=nil testQ[u].ElfWoman=nil end function obnulenieEmocij1(u)testQ[u].HumanMan=1 testQ[u].HumanWoman=1 testQ[u].DworfMan=1 testQ[u].DworfWoman=1 testQ[u].NEMan=1 testQ[u].NEWoman=1 testQ[u].GnomMan=1 testQ[u].GnomWoman=1 testQ[u].DrenayMan=1 testQ[u].DrenayWoman=1 testQ[u].OrkMan=1 testQ[u].OrkWoman=1 testQ[u].UndeadMan=1 testQ[u].UndeaWoman=1 testQ[u].TaurenMan=1 testQ[u].TaurenWoman=1 testQ[u].TrollMan=1 testQ[u].TrollWoman=1 testQ[u].ElfMan=1 testQ[u].ElfWoman=1 end function nsGP()local u={}local r=GetNumRaidMembers()for r=1,r,1 do local J for t=1,GetNumGuildMembers(true),1 do local x,S,K,T,H,v,s,j,y,O,D,b,R,d,g,Y,m=GetGuildRosterInfo(t)if x==UnitName("\114\097\105\100"..r)then u[r]={}local t=mysplit(j)u[r].nome=x u[r].public=s u[r].rank=S if t[3]~=nil then u[r].znach=tonumber(t[3])else u[r].znach=tonumber("\048\048\048\048")end J=1 end end if J==nil then u[r]={}if UnitName("\114\097\105\100"..r)~=nil then u[r].nome=UnitName("\114\097\105\100"..r)u[r].znach=tonumber("\048\048\048\048")u[r].public="\208\157\208\149 \208\146 \208\147\208\152\208\155\208\172\208\148\208\152\208\152"else u[r].nome="\208\191\209\131\209\129\209\130\208\190"u[r].znach=tonumber("\048\048\048\048")end end end table.sort(u,function(u,r)return u.znach<r.znach end)local J={}local t=tostring(1)for u,r in ipairs(u)do J[t]={}J[t].nome=r.nome J[t].znach=r.znach J[t].public=r.public J[t].rank=r.rank t=tostring(tonumber(t)+1)end return J end function gpEnTg()FriendsFrame:Show()GuildFrame:Show()testQ.gpEnTg={}for u=1,GetNumGuildMembers(true),1 do local r,J,t,x,S,K,T,H,v,s,j,y,O,D,b,R,d=GetGuildRosterInfo(u)local g=mysplit(H)if g[3]~=nil then testQ.gpEnTg[r]=tonumber(g[3])end end FriendsFrame:Hide()GuildFrame:Hide()end function addMioFld(u,r,J,t)if mioFld1~=nil then if mioFld1[u]~=nil then if mioFld1[u][r]~=nil then mioFld1[u][r][tostring(J)]=tostring(t)end end end end function readMioFld(u,r,J)if mioFld1~=nil then if mioFld1[u]~=nil then if mioFld1[u][r]~=nil then return mioFld1[u][r][tostring(J)]end end end end nBtn={}function nBtn.new(h,u,r,J,t,x,S,K,T,H,v,s,j,y,O,D,b,R,d,g,Y,m)local f={}local w local Q local c local V=g f.message=j function f.configure(S)if m==nil then S[u]=S[u]or CreateFrame("\066\117\116\116\111\110",nil,J,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")else S[u]=S[u]or CreateFrame("\066\117\116\116\111\110",nil,J,"")S[u]:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092"..(m.."\046\116\103\097"))if Y~=0 then S[u]:SetHighlightTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092"..(m.."\046\116\103\097"))end w={}f:SetText(j)end S[u]:SetPoint(y,J,O,t,x)S[u]:SetSize(v,s)S[u]:SetText(j)S[u]:SetFrameStrata(R)if r~=nil then r(f)end end function f.reMove(x,r,t)x[u]:SetPoint(y,J,O,r,t)end function f.reSize(t,r,J)t[u]:SetSize(r,J)end function f.getID(r)print(u)end function f.Hide(r)r[u]:Hide()end function f.Show(r)r[u]:Show()end function f.textSize(J,r)w[u]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",r,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end function f.textMove(t,r,J)w[u]:SetPoint("\066\079\084\084\079\077\076\069\070\084",f[u],"\066\079\084\084\079\077\076\069\070\084",r,J)end function f.SetText(J,r)if m~=nil then w[u]=w[u]or f[u]:CreateFontString(nil,"\079\086\069\082\076\065\089")w[u]:SetSize(v,s)w[u]:SetPoint("\084\079\080\076\069\070\084")w[u]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",H,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")w[u]:SetText("\124\099\102\102"..(d..(r.."\124\114")))w[u]:Show()else f[u]:SetText(r)end end function f.getSaveNome(u)return V end function f.setOnUpdate(t,r,J)r(t[u],J)end function f.setOnEnter(J,r)r(J[u],j)end function f.setOnClick(J,r)r(J[u],j)end function f.setClick(x,r,J,t)x[u]:RegisterForClicks("\082\105\103\104\116\066\117\116\116\111\110\068\111\119\110","\076\101\102\116\066\117\116\116\111\110\068\111\119\110")x[u]:SetScript("\079\110\067\108\105\099\107",function(u,x,S)if r~=nil then if arg1=="\076\101\102\116\066\117\116\116\111\110"then r(u,x,V,t)end end if J~=nil then if arg1=="\082\105\103\104\116\066\117\116\116\111\110"then J(u,x,V,t)end end end)end function f.gesture(t,r,J)Q=CreateFrame("\070\082\065\077\069")c=0 Q:SetScript("\079\110\085\112\100\097\116\101",function(t,x)c=c+x if c>.1 then local t,x=WorldFrame:GetSize()local S,K=GetCursorPosition()if S<=20 and K>=x-20 then r(f[u])end if S>=t-20 and K>=x-20 then J(f[u])end end end)end function f.killall(r)Q:SetScript("\079\110\085\112\100\097\116\101",nil)f[u]:SetScript("\079\110\067\108\105\099\107",nil)end setmetatable(f,h)h.__index=h return f end function gpBtn1_enter(u,r)u:SetScript("\079\110\069\110\116\101\114",function(u,J,t)GameTooltip:SetOwner(u,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\155\208\154\208\156\058 \208\189\208\176\209\135\208\184\209\129\208\187\208\184\209\130\209\140 "..(" \124\099\102\102\070\070\056\067\048\048"..(r.." \124\099\102\102\057\057\102\102\057\057\208\147\208\159")))GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\159\208\154\208\156\058 \209\129\208\189\209\143\209\130\209\140 "..(" \124\099\102\102\070\070\056\067\048\048"..(r.." \124\099\102\102\057\057\102\102\057\057\208\147\208\159")))GameTooltip:Show()gpBtn1:Show()gpBtn2:Show()gpBtn3:Show()gpBtn4:Show()gpBtn5:Show()gpBtn6:Show()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",0,-20)ShowCheckboxWindow()end)u:SetScript("\079\110\076\101\097\118\101",function(u,r,J)GameTooltip:Hide()end)end function gpBtn1_click(u,r)u:RegisterForClicks("\082\105\103\104\116\066\117\116\116\111\110\068\111\119\110","\076\101\102\116\066\117\116\116\111\110\068\111\119\110")u:SetScript("\079\110\067\108\105\099\107",function(u,J)if testQ.gpRez==nil or#testQ.gpRez==0 then if arg1=="\076\101\102\116\066\117\116\116\111\110"then SendChatMessage("\208\147\208\159 "..r,"\071\085\073\076\068",nil,1)else SendChatMessage("\208\147\208\159 -"..r,"\071\085\073\076\068",nil,1)end gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)HideCheckboxWindow()gplabels={}testQ.gpRez=nil else if arg1=="\076\101\102\116\066\117\116\116\111\110"then sendGPnik(r)HideCheckboxWindow()gplabels={}testQ.gpRez=nil gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)else sendGPnik(-r)HideCheckboxWindow()gplabels={}testQ.gpRez=nil gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)end end end)end function change_spek(u,r,J,t)SendChatMessage("\033\208\183\208\176\208\188\208\181\209\130\208\186\208\176 "..t.message,"\071\085\073\076\068",nil,1)spek1:Hide()spek2:Hide()spek3:Hide()end function duelOnUpdate(u,r)u:SetScript("\079\110\069\110\116\101\114",function(u,J)GameTooltip:SetOwner(u,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\159\209\128\208\184\208\189\209\143\209\130\209\140 \208\180\209\131\209\141\208\187\209\140 \208\190\209\130 \208\184\208\179\209\128\208\190\208\186\208\176\058 \124\099\102\102\057\057\102\102\057\057"..r)GameTooltip:Show()end)u:SetScript("\079\110\076\101\097\118\101",function(u,r)GameTooltip:Hide()end)end function btnHide(u)u:Hide()end function btnShow(u)u:Show()end function gpBtnClick(u)if IsRaidLeader()then if testQ.raidAUKPobeda~=nil then SendChatMessage(testQ.raidAUKPobeda..(" \208\191\208\190\208\177\208\181\208\182\208\180\208\176\208\181\209\130\044 \208\191\208\190\209\129\209\130\208\176\208\178\208\184\208\178 "..(testQ.raidAUKPobeda_gp.." \208\147\208\159")),"\082\065\073\068",nil,1)end SendAddonMessage("\110\115\065\085\075\101\110\100 ","\049\048","\082\065\073\068")end end function ns_duelTrue(u,r,J)SendAddonMessage("\110\115\095\100\117\101\108\095\111\116\118\101\116",J,"\103\117\105\108\100")duelBtn[J.."\049"]:Hide()duelBtn[J.."\050"]:Hide()end function ns_duelFalse(u,r,J)SendChatMessage("\208\162\208\176\208\186 \209\143 \208\182 \209\130\209\128\209\131\209\129 \208\184 \208\191\208\190\208\180\208\187\208\181\209\134\046 \208\158\209\130\208\186\208\176\208\183\209\139\208\178\208\176\209\142\209\129\209\140\046","\071\085\073\076\068",nil,1)duelBtn[J.."\049"]:Hide()duelBtn[J.."\050"]:Hide()SendAddonMessage("\110\115\095\100\117\101\108\095\111\116\107\097\122",J,"\103\117\105\108\100")end function nsAUK(u,r,J)if testQ.raidAUK~=nil then r=tonumber(r)if r~=nil then local t=tablelength(testQ.raidAUK)local x local S local K=tablelength(testQ.rez)local T=""local H=nil for r=1,K,1 do if testQ.rez[tostring(r)].nome==u then S=testQ.rez[tostring(r)].public x=tonumber(testQ.rez[tostring(r)].znach)break end end if t>=1 then for J=1,t,1 do if testQ.raidAUK[J].nome==u then if tonumber(r)<=x then testQ.raidAUK[J].auk=r end H=1 break end end if H==nil then testQ.raidAUK[t+1]={nome=u,auk=0;public=S;rezultat=x}if testQ.raidAUK[t+1].auk+tonumber(r)<=x then testQ.raidAUK[t+1].auk=testQ.raidAUK[t+1].auk+tonumber(r)end end else testQ.raidAUK[1]={nome=u,auk=0,public=S,rezultat=x}if testQ.raidAUK[1].auk+tonumber(r)<=x then testQ.raidAUK[1].auk=testQ.raidAUK[1].auk+tonumber(r)end end table.sort(testQ.raidAUK,function(u,r)return u.auk<r.auk end)local v={}local s=""for u,r in ipairs(testQ.raidAUK)do v[u]={nome=r.nome,znach=r.auk,public=r.public;rezultat=r.rezultat}s=s..("\124\099\070\070\054\052\057\053\069\068"..(r.nome..(" \124\099\102\102\070\070\056\067\048\048\040"..(r.public..("\124\099\102\102\056\048\056\048\056\048\124\124"..("\124\099\102\102\102\102\048\048\048\048"..(r.rezultat..("\124\099\102\102\070\070\056\067\048\048\041\058 \124\099\102\102\057\057\102\102\057\057"..(r.auk.."\n")))))))))if u==#testQ.raidAUK and IsRaidLeader()then SendChatMessage(r.nome..("\058 "..(r.auk.."\044 \208\186\209\130\208\190 \208\177\208\190\208\187\209\140\209\136\208\181\063")),"\082\065\073\068",nil,1)testQ.raidAUKPobeda=r.nome testQ.raidAUKPobeda_gp=r.auk end end print(J)TextWindow(J..("\n\n"..s))end end end function lastWords(u)local r=mysplit(u)r=r[1]local J=string.utf8len(r)local t=string.utf8len(u)local x=string.utf8sub(u,J+1,t)return x end function sendGPnik(u)local r=""for u=1,#testQ.gpRez,1 do r=r..(testQ.gpRez[u].." ")end SendAddonMessage("\110\115\071\080"..(" "..u),r,"\103\117\105\108\100")end function sendGP(u)local r=GetUnitName("\112\108\097\121\101\114")msg={}msg[2]=u for u=1,GetNumGuildMembers(true),1 do local J,t,x,S,K,T,H,v,s,j,y,O,D,b,R,d,g=GetGuildRosterInfo(u)if J==r then if t=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"or t=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"then if GetNumRaidMembers()<=10 then local u=""u=UnitName("\114\097\105\100\049").." "for r=2,GetNumRaidMembers(),1 do u=u..(UnitName("\114\097\105\100"..r).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),u,"\103\117\105\108\100")elseif GetNumRaidMembers()>10 and GetNumRaidMembers()<=20 then local u=""u=UnitName("\114\097\105\100\049").." "for r=2,10,1 do u=u..(UnitName("\114\097\105\100"..r).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),u,"\103\117\105\108\100")local r=""r=UnitName("\114\097\105\100\049\049").." "for u=12,GetNumRaidMembers(),1 do r=r..(UnitName("\114\097\105\100"..u).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),r,"\103\117\105\108\100")elseif GetNumRaidMembers()>20 then local u=""u=UnitName("\114\097\105\100\049").." "for r=2,10,1 do u=u..(UnitName("\114\097\105\100"..r).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),u,"\103\117\105\108\100")local r=""r=UnitName("\114\097\105\100\049\049").." "for u=12,20,1 do r=r..(UnitName("\114\097\105\100"..u).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),r,"\103\117\105\108\100")local J=""J=UnitName("\114\097\105\100\050\049").." "for u=22,GetNumRaidMembers(),1 do J=J..(UnitName("\114\097\105\100"..u).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),J,"\103\117\105\108\100")end end end end end function createParent()parentFrame=CreateFrame("\070\114\097\109\101",nil,UIParent)parentFrame:SetSize(200,200)parentFrame:SetPoint("\067\069\078\084\069\082")parentFrame:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100";edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",tile=true,tileSize=32,edgeSize=32;insets={left=11;right=12;top=12;bottom=11}})parentFrame:SetBackdropColor(0,0,0,1)parentFrame:SetMovable(true)parentFrame:EnableMouse(true)parentFrame:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")parentFrame:SetScript("\079\110\068\114\097\103\083\116\097\114\116",function(u)u:StartMoving()end)parentFrame:SetScript("\079\110\068\114\097\103\083\116\111\112",function(u)u:StopMovingOrSizing()ClampFrameToScreen(u)SaveFramePosition(u)end)if testQ.pgChbX and testQ.pgChbY then parentFrame:ClearAllPoints()parentFrame:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",testQ.pgChbX,testQ.pgChbY)end HideCheckboxWindow()end function ClampFrameToScreen(u)local r=UIParent:GetWidth()local J=UIParent:GetHeight()local t=u:GetWidth()local x=u:GetHeight()local S,K=u:GetCenter()S=S or 0 K=K or 0 S=math.max(t/2,math.min(r-t/2,S))K=math.max(x/2,math.min(J-x/2,K))u:ClearAllPoints()u:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",S,K)end function SaveFramePosition(u)local r,J=u:GetCenter()testQ.pgChbX=r testQ.pgChbY=J end function CreateCheckboxes(u,r)local J={}local t=-10 local x=0 for r,S in ipairs(r)do local K=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,u,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")K:SetSize(24,24)K:SetPoint("\084\079\080\076\069\070\084",10,t)local T=K:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")T:SetPoint("\076\069\070\084",K,"\082\073\071\072\084",5,0)T:SetText(S)K.label=S K:SetScript("\079\110\067\108\105\099\107",function(u)if testQ.gpRez==nil then testQ.gpRez={}end local r=mysplit(u.label)if u:GetChecked()then table.insert(testQ.gpRez,r[1])else for u=1,#testQ.gpRez,1 do if testQ.gpRez[u]==r[1]then table.remove(testQ.gpRez,u)end end end end)J[r]=K local H=T:GetStringWidth()if H>x then x=H end t=t-30 end local S=x+50 local K=#r*30+20 u:SetSize(S,K)return J end function HideCheckboxWindow()if parentFrame then parentFrame:Hide()end end function ShowCheckboxWindow()if parentFrame then parentFrame:Show()end end function DestroyCheckboxWindow()if parentFrame then parentFrame:Hide()parentFrame:ClearAllPoints()parentFrame:SetParent(nil)parentFrame=nil end end gplabels={}textWindow=nil local function K(u)local r=UIParent:GetWidth()local J=UIParent:GetHeight()local t=u:GetWidth()local x=u:GetHeight()local S,K=u:GetCenter()S=S or 0 K=K or 0 S=math.max(t/2,math.min(r-t/2,S))K=math.max(x/2,math.min(J-x/2,K))u:ClearAllPoints()u:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",S,K)end function TextWindow(u)if textWindow then textWindow.textLabel:SetText(u)local r=textWindow.textLabel:GetStringWidth()local J=textWindow.textLabel:GetStringHeight()local t=20 textWindow:SetSize(r+t,J+t)K(textWindow)textWindow:Show()return end textWindow=CreateFrame("\070\114\097\109\101",nil,UIParent)textWindow:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100";edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",tile=true;tileSize=32,edgeSize=32,insets={left=11,right=12;top=12;bottom=11}})textWindow:SetBackdropColor(0,0,0,1)textWindow:SetMovable(true)textWindow:EnableMouse(true)textWindow:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")textWindow:SetScript("\079\110\068\114\097\103\083\116\097\114\116",function(u)u:StartMoving()end)textWindow:SetScript("\079\110\068\114\097\103\083\116\111\112",function(u)u:StopMovingOrSizing()K(u)testQ.textWinX,testQ.textWinY=u:GetCenter()end)textWindow.textLabel=textWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")textWindow.textLabel:SetPoint("\067\069\078\084\069\082",textWindow,"\067\069\078\084\069\082",0,0)textWindow.textLabel:SetText(u)local r=textWindow.textLabel:GetStringWidth()local J=textWindow.textLabel:GetStringHeight()local t=20 textWindow:SetSize(r+t,J+t)if testQ.textWinX and testQ.textWinY then textWindow:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",testQ.textWinX,testQ.textWinY)else textWindow:SetPoint("\082\073\071\072\084",btn[973],"\076\069\070\084",0,0)end end function HideTextWindow()if textWindow then textWindow:Hide()end end function ShowTextWindow()if textWindow then textWindow:Show()end end function DestroyTextWindow()if textWindow then textWindow:Hide()textWindow:ClearAllPoints()textWindow:SetParent(nil)textWindow=nil end end function GetFileName(u)return u:match("\091\094\092\047\093\043\036")or u end function CreateListUI()if TestListFrame then TestListFrame:Show()TestListFrame.UpdateList()return end local u=CreateFrame("\070\114\097\109\101","\084\101\115\116\076\105\115\116\070\114\097\109\101",UIParent)u:SetSize(400,500)u:SetPoint("\067\069\078\084\069\082")u:SetMovable(true)u:EnableMouse(true)u:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")u:SetScript("\079\110\068\114\097\103\083\116\097\114\116",u.StartMoving)u:SetScript("\079\110\068\114\097\103\083\116\111\112",u.StopMovingOrSizing)u:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100";edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",tile=true,tileSize=32,edgeSize=32,insets={left=11;right=12;top=12;bottom=11}})local r=CreateFrame("\066\117\116\116\111\110",nil,u,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")r:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)r:SetScript("\079\110\067\108\105\099\107",function()u:Hide()end)local J=u:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")J:SetPoint("\084\079\080",0,-20)J:SetText("\208\163\208\191\209\128\208\176\208\178\208\187\208\181\208\189\208\184\208\181 \209\129\208\191\208\184\209\129\208\186\208\190\208\188")local t=CreateFrame("\069\100\105\116\066\111\120",nil,u,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")t:SetSize(200,30)t:SetPoint("\084\079\080",0,-60)t:SetAutoFocus(false)local x=CreateFrame("\066\117\116\116\111\110",nil,u,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")x:SetSize(100,30)x:SetPoint("\084\079\080\076\069\070\084",t,"\066\079\084\084\079\077\076\069\070\084",0,-20)x:SetText("\208\148\208\190\208\177\208\176\208\178\208\184\209\130\209\140")local S=CreateFrame("\066\117\116\116\111\110",nil,u,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")S:SetSize(100,30)S:SetPoint("\084\079\080\082\073\071\072\084",t,"\066\079\084\084\079\077\082\073\071\072\084",0,-20)S:SetText("\208\163\208\180\208\176\208\187\208\184\209\130\209\140")local K=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\084\101\115\116\083\099\114\111\108\108\070\114\097\109\101",u,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")K:SetSize(360,300)K:SetPoint("\084\079\080",x,"\066\079\084\084\079\077",0,-30)local T=_G.TestScrollFrameScrollBar T:SetPoint("\084\079\080\076\069\070\084",K,"\084\079\080\082\073\071\072\084",32,-16)local H=CreateFrame("\070\114\097\109\101",nil,K)H:SetSize(335,0)K:SetScrollChild(H)testQ=testQ or{}testQ.fls=testQ.fls or{}local v={}for u,r in pairs(testQ.fls)do if type(u)~="\115\116\114\105\110\103"or type(r)~="\115\116\114\105\110\103"then table.insert(v,u)end end for u,r in ipairs(v)do testQ.fls[r]=nil end H.entries={}function u.UpdateList(u)local r=0 for u,r in ipairs(H.entries)do r:Hide()end H.entries=H.entries or{}local J={}for u in pairs(testQ.fls)do table.insert(J,u)end table.sort(J,function(u,r)return u<r end)for u,J in ipairs(J)do local t=testQ.fls[J]local x=H.entries[u]if not x then x=CreateFrame("\070\114\097\109\101",nil,H)x:SetSize(335,20)x.text=x:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")x.text:SetPoint("\076\069\070\084",5,0)x.text:SetWidth(200)x.dropdown=CreateFrame("\070\114\097\109\101","\084\101\115\116\068\114\111\112\068\111\119\110"..u,x,"\085\073\068\114\111\112\068\111\119\110\077\101\110\117\084\101\109\112\108\097\116\101")x.dropdown:SetPoint("\082\073\071\072\084",x,"\082\073\071\072\084",-10,0)x.dropdown:SetWidth(120)local r=_G["\084\101\115\116\068\114\111\112\068\111\119\110"..(u.."\066\117\116\116\111\110")]r:SetScript("\079\110\067\108\105\099\107",function(u)ToggleDropDownMenu(1,nil,x.dropdown,u,0,0)end)local J=_G["\084\101\115\116\068\114\111\112\068\111\119\110"..(u.."\084\101\120\116")]if J then J:SetWidth(150)end UIDropDownMenu_Initialize(x.dropdown,function(u,r)if not r then return end if r==1 then for u,J in ipairs(ns_alert_sounds)do local t=UIDropDownMenu_CreateInfo()t.text=J.label t.value=J t.hasArrow=true t.notCheckable=true UIDropDownMenu_AddButton(t,r)end elseif r==2 then local u=UIDROPDOWNMENU_MENU_VALUE if u and u.sounds then for u,J in ipairs(u.sounds)do local t=UIDropDownMenu_CreateInfo()t.text=GetFileName(J)t.value=J t.func=function()testQ.fls[x.name]=J UIDropDownMenu_SetText(x.dropdown,GetFileName(J))PlaySoundFile(J,"\077\097\115\116\101\114")CloseDropDownMenus()end t.checked=testQ.fls[x.name]==J UIDropDownMenu_AddButton(t,r)end end end end)H.entries[u]=x end x.name=J x.text:SetText(J)if t then UIDropDownMenu_SetText(x.dropdown,GetFileName(t))else UIDropDownMenu_SetText(x.dropdown,"\208\157\208\181 \208\178\209\139\208\177\209\128\208\176\208\189\208\190")end x:SetPoint("\084\079\080\076\069\070\084",5,-r)x:Show()r=r+20 end for u=#J+1,#H.entries,1 do H.entries[u]:Hide()end H:SetHeight(math.max(r,1))K:UpdateScrollChildRect()T:SetValue(0)end x:SetScript("\079\110\067\108\105\099\107",function()local r=t:GetText()if r~=""and not testQ.fls[r]then testQ.fls[r]="\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\102\108\115\046\109\112\051"u:UpdateList()t:SetText("")t:ClearFocus()end end)S:SetScript("\079\110\067\108\105\099\107",function()local r=t:GetText()if r~=""and testQ.fls[r]then testQ.fls[r]=nil u:UpdateList()t:SetText("")t:ClearFocus()end end)u:UpdateList()end function SendGuildOfficerMessageWithBonus(u)local r=mysplit(u)local J=UnitName("\112\108\097\121\101\114")if#r<3 then return end local t=r[2]local x=table.concat(r," ",3)for u=1,GetNumGuildMembers(true),1 do local r,S=GetGuildRosterInfo(u)if r==J then if S=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"or S=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"then SendChatMessage(x..(" \208\191\208\187\209\142\209\129 "..t),"\079\070\070\073\067\069\082",nil,1)SendAddonMessage("\110\115\071\080"..(" "..t),x,"\103\117\105\108\100")end SendAddonMessage("\110\115\071\080\108\111\103\082",t..(" "..x),"\103\117\105\108\100")break end end end GpDb_old={}GpDb_old.__index=GpDb_old function GpDb_old.new(r,u)local J={gp_data={};sort_column="\110\105\099\107",sort_ascending=true;visible_rows=20,selected_indices={};last_selected_index=nil;logData={}}setmetatable(J,r)J:_CreateWindow()J:_CreateRaidSelectionWindow()J:_CreateLogWindow()return J end function GpDb_old._CreateLogWindow(u)u.logWindow=CreateFrame("\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\087\105\110\100\111\119",u.window)u.logWindow:SetFrameStrata("\068\073\065\076\079\071")u.logWindow:SetSize(600,u.window:GetHeight())u.logWindow:SetPoint("\084\079\080\076\069\070\084",u.window,"\084\079\080\082\073\071\072\084",5,0)u.logWindow:SetMovable(false)u.logWindow:Hide()u.logWindow.background=u.logWindow:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")u.logWindow.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")u.logWindow.background:SetVertexColor(.1,.1,.1)u.logWindow.background:SetAlpha(.9)u.logWindow.background:SetAllPoints(true)u.logWindow.borderFrame=CreateFrame("\070\114\097\109\101",nil,u.logWindow)u.logWindow.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)u.logWindow.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)u.logWindow.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",edgeSize=16,insets={left=4,right=4,top=4,bottom=4}})u.logWindow.closeButton=CreateFrame("\066\117\116\116\111\110",nil,u.logWindow,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")u.logWindow.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)u.logWindow.closeButton:SetScript("\079\110\067\108\105\099\107",function()u.logWindow:Hide()end)u.logWindow.filters=CreateFrame("\070\114\097\109\101",nil,u.logWindow)u.logWindow.filters:SetPoint("\084\079\080\076\069\070\084",10,-5)u.logWindow.filters:SetPoint("\082\073\071\072\084",-10,0)u.logWindow.filters:SetHeight(30)u.logWindow.countFilter=CreateFrame("\069\100\105\116\066\111\120",nil,u.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")u.logWindow.countFilter:SetSize(60,20)u.logWindow.countFilter:SetPoint("\076\069\070\084",u.logWindow.filters,"\076\069\070\084")u.logWindow.countFilter:SetAutoFocus(false)u.logWindow.countFilter:SetText("\208\154\208\190\208\187-\208\178\208\190")u.logWindow.countFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()u.logWindow.countFilter:ClearFocus()end)u.logWindow.countFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()u.logWindow.countFilter:ClearFocus()u:UpdateLogDisplay()end)u.logWindow.timeFilter=CreateFrame("\069\100\105\116\066\111\120",nil,u.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")u.logWindow.timeFilter:SetSize(70,20)u.logWindow.timeFilter:SetPoint("\076\069\070\084",u.logWindow.countFilter,"\082\073\071\072\084",5,0)u.logWindow.timeFilter:SetAutoFocus(false)u.logWindow.timeFilter:SetText("\208\146\209\128\208\181\208\188\209\143")u.logWindow.timeFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()u.logWindow.timeFilter:ClearFocus()end)u.logWindow.timeFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()u.logWindow.timeFilter:ClearFocus()u:UpdateLogDisplay()end)u.logWindow.rlFilter=CreateFrame("\069\100\105\116\066\111\120",nil,u.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")u.logWindow.rlFilter:SetSize(70,20)u.logWindow.rlFilter:SetPoint("\076\069\070\084",u.logWindow.timeFilter,"\082\073\071\072\084",5,0)u.logWindow.rlFilter:SetAutoFocus(false)u.logWindow.rlFilter:SetText("\208\160\208\155")u.logWindow.rlFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()u.logWindow.rlFilter:ClearFocus()end)u.logWindow.rlFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()u.logWindow.rlFilter:ClearFocus()u:UpdateLogDisplay()end)u.logWindow.raidFilter=CreateFrame("\069\100\105\116\066\111\120",nil,u.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")u.logWindow.raidFilter:SetSize(100,20)u.logWindow.raidFilter:SetPoint("\076\069\070\084",u.logWindow.rlFilter,"\082\073\071\072\084",5,0)u.logWindow.raidFilter:SetAutoFocus(false)u.logWindow.raidFilter:SetText("\208\160\208\181\208\185\208\180")u.logWindow.raidFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()u.logWindow.raidFilter:ClearFocus()end)u.logWindow.raidFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()u.logWindow.raidFilter:ClearFocus()u:UpdateLogDisplay()end)u.logWindow.nameFilter=CreateFrame("\069\100\105\116\066\111\120",nil,u.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")u.logWindow.nameFilter:SetSize(100,20)u.logWindow.nameFilter:SetPoint("\076\069\070\084",u.logWindow.raidFilter,"\082\073\071\072\084",5,0)u.logWindow.nameFilter:SetAutoFocus(false)u.logWindow.nameFilter:SetText("\208\157\208\184\208\186")u.logWindow.nameFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()u.logWindow.nameFilter:ClearFocus()end)u.logWindow.nameFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()u.logWindow.nameFilter:ClearFocus()u:UpdateLogDisplay()end)u.logWindow.showButton=CreateFrame("\066\117\116\116\111\110",nil,u.logWindow.filters,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")u.logWindow.showButton:SetSize(80,22)u.logWindow.showButton:SetPoint("\076\069\070\084",u.logWindow.nameFilter,"\082\073\071\072\084",5,0)u.logWindow.showButton:SetText("\208\159\208\190\208\186\208\176\208\183\208\176\209\130\209\140")u.logWindow.showButton:SetScript("\079\110\067\108\105\099\107",function()local function r(u)if u:find("\037\115")then u=u:gsub("\037\115\043","\095")end return u end local J=r(u.logWindow.countFilter:GetText())local t=r(u.logWindow.timeFilter:GetText())local x=r(u.logWindow.rlFilter:GetText())local S=r(u.logWindow.raidFilter:GetText())local K=r(u.logWindow.nameFilter:GetText())gpDb_old:ClearLog()SendAddonMessage("\078\083\083\104\111\119\077\101\076\111\103\115",J..(" "..(t..(" "..(x..(" "..(S..(" "..K))))))),"\103\117\105\108\100")end)u.logWindow.scrollFrame=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\083\099\114\111\108\108\070\114\097\109\101",u.logWindow,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")u.logWindow.scrollFrame:SetPoint("\084\079\080\076\069\070\084",0,-35)u.logWindow.scrollFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",0,10)u.logWindow.scrollChild=CreateFrame("\070\114\097\109\101")u.logWindow.scrollChild:SetSize(580,1000)u.logWindow.scrollFrame:SetScrollChild(u.logWindow.scrollChild)u.logRows={}for r=1,50,1 do local J=CreateFrame("\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\082\111\119"..r,u.logWindow.scrollChild)J:SetSize(580,40)J:SetPoint("\084\079\080\076\069\070\084",0,-((r-1)*40))J.text=J:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")J.text:SetAllPoints(true)J.text:SetJustifyH("\076\069\070\084")J.text:SetJustifyV("\084\079\080")J.text:SetWordWrap(true)J.text:SetText("")u.logRows[r]=J end end function GpDb_old.ClearLog(u)u.logData={}u.logWindow.countFilter:SetText("\208\154\208\190\208\187-\208\178\208\190")u.logWindow.timeFilter:SetText("\208\146\209\128\208\181\208\188\209\143")u.logWindow.rlFilter:SetText("\208\160\208\155")u.logWindow.raidFilter:SetText("\208\160\208\181\208\185\208\180")u.logWindow.nameFilter:SetText("\208\157\208\184\208\186")u:UpdateLogDisplay()print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\155\208\190\208\179 \209\131\209\129\208\191\208\181\209\136\208\189\208\190 \208\190\209\135\208\184\209\137\208\181\208\189")end function GpDb_old._CreateWindow(u)u.window=CreateFrame("\070\114\097\109\101","\071\112\084\114\097\099\107\101\114\087\105\110\100\111\119",UIParent)u.window:SetFrameStrata("\068\073\065\076\079\071")u.window:SetSize(400,500)u.window:SetPoint("\076\069\070\084",5,100)u.window:SetMovable(true)u.window:EnableMouse(true)u.window:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")u.window:SetScript("\079\110\068\114\097\103\083\116\097\114\116",u.window.StartMoving)u.window:SetScript("\079\110\068\114\097\103\083\116\111\112",u.window.StopMovingOrSizing)u.window:Hide()u.window.background=u.window:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")u.window.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")u.window.background:SetVertexColor(0,0,0)u.window.background:SetAlpha(1)u.window.background:SetAllPoints(true)u.window.borderFrame=CreateFrame("\070\114\097\109\101",nil,u.window)u.window.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)u.window.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)u.window.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114";edgeSize=16,insets={left=4,right=4;top=4,bottom=4}})u.window.title=u.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")u.window.title:SetPoint("\084\079\080",0,-15)u.window.title:SetText("")u.window.closeButton=CreateFrame("\066\117\116\116\111\110",nil,u.window,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")u.window.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)u.window.closeButton:SetScript("\079\110\067\108\105\099\107",function()u.window:Hide()end)u.window.logButton=CreateFrame("\066\117\116\116\111\110",nil,u.window,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")u.window.logButton:SetSize(24,24)u.window.logButton:SetPoint("\082\073\071\072\084",u.window.closeButton,"\076\069\070\084",-5,0)u.window.logButton:SetText("\076")u.window.logButton:SetScript("\079\110\067\108\105\099\107",function()u:ToggleLogWindow()end)u.window.raidOnlyCheckbox=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,u.window,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")u.window.raidOnlyCheckbox:SetPoint("\084\079\080\076\069\070\084",10,-15)u.window.raidOnlyCheckbox:SetSize(24,24)u.window.raidOnlyCheckbox.text=u.window.raidOnlyCheckbox:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")u.window.raidOnlyCheckbox.text:SetPoint("\076\069\070\084",u.window.raidOnlyCheckbox,"\082\073\071\072\084",5,0)u.window.raidOnlyCheckbox.text:SetText("\208\162\208\190\208\187\209\140\208\186\208\190 \209\128\208\181\208\185\208\180")u.window.raidOnlyCheckbox:SetScript("\079\110\067\108\105\099\107",function()u:_UpdateFromGuild()u:UpdateWindow()end)u.window.scrollFrame=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\083\099\114\111\108\108\070\114\097\109\101",u.window,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")u.window.scrollFrame:SetPoint("\084\079\080\076\069\070\084",0,-40)u.window.scrollFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",0,40)u.window.scrollChild=CreateFrame("\070\114\097\109\101")u.window.scrollChild:SetSize(380,500)u.window.scrollFrame:SetScrollChild(u.window.scrollChild)u.window.scrollBar=_G[u.window.scrollFrame:GetName().."\083\099\114\111\108\108\066\097\114"]u.window.scrollBar:SetPoint("\084\079\080\076\069\070\084",u.window.scrollFrame,"\084\079\080\082\073\071\072\084",-20,-16)u.window.scrollBar:SetPoint("\066\079\084\084\079\077\076\069\070\084",u.window.scrollFrame,"\066\079\084\084\079\077\082\073\071\072\084",-20,16)u.window.countText=u.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")u.window.countText:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,10)u.window.countText:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,10)u.window.countText:SetJustifyH("\076\069\070\084")u.window.countText:SetText("")u.window.totalText=u.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")u.window.totalText:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,30)u.window.totalText:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,30)u.window.totalText:SetJustifyH("\076\069\070\084")u.window.totalText:SetText("")u:_SetupTable()end function GpDb_old._SetupTable(r)local J={"\208\157\208\184\208\186","\208\147\208\159"}for u,J in ipairs(J)do local t=CreateFrame("\066\117\116\116\111\110",nil,r.window.scrollChild)t:SetSize(u==1 and 290 or 50,20)t:SetPoint("\084\079\080\076\069\070\084",(u-1)*290+(u==2 and 10 or 0),0)t:SetNormalFontObject("\071\097\109\101\070\111\110\116\078\111\114\109\097\108")t:SetHighlightFontObject("\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")local x=t:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")x:SetAllPoints(true)x:SetText(J)t:SetScript("\079\110\067\108\105\099\107",function()r:SortData(J:lower())r:UpdateWindow()end)end r.rows={}for J=1,999,1 do local t=CreateFrame("\066\117\116\116\111\110","\071\112\068\098\095\111\108\100\082\111\119"..J,r.window.scrollChild)t:SetSize(350,20)t:SetPoint("\084\079\080\076\069\070\084",0,-25-(J-1)*25)t:EnableMouse(true)t:RegisterForClicks("\076\101\102\116\066\117\116\116\111\110\085\112","\082\105\103\104\116\066\117\116\116\111\110\085\112")t:SetHighlightTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056");(t:GetHighlightTexture()):SetVertexColor(.4,.4,.8,.4)t.selection=t:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")t.selection:SetAllPoints(true)t.selection:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")t.selection:SetVertexColor(.3,.3,.7,.7)t.selection:Hide()t.nick=t:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")t.nick:SetPoint("\076\069\070\084",10,0)t.nick:SetWidth(290)t.nick:SetJustifyH("\076\069\070\084")t.gp=t:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")t.gp:SetPoint("\082\073\071\072\084",5,0)t.gp:SetWidth(50)t.gp:SetJustifyH("\082\073\071\072\084")t.lastClickTime=0 t:SetScript("\079\110\067\108\105\099\107",function(x,S,K)local T=FauxScrollFrame_GetOffset(r.window.scrollFrame)local H=J+T if not r.gp_data or not r.gp_data[H]then return end local v=GetTime()if S=="\076\101\102\116\066\117\116\116\111\110"and(u()and v-t.lastClickTime<.5)then r:ClearSelection()for u=1,#r.gp_data,1 do r.selected_indices[u]=true end r.last_selected_index=H r:_UpdateSelectionCount()r:RefreshRowHighlights()r:UpdateRaidWindowVisibility()if r.raidWindow and r.raidWindow:IsShown()then r:_UpdateSelectedPlayersText()end t.lastClickTime=0 return end t.lastClickTime=v if S=="\076\101\102\116\066\117\116\116\111\110"then local u=r.selected_indices[H]if IsShiftKeyDown()then if not r.last_selected_index then r:ClearSelection()r.selected_indices[H]=true r.last_selected_index=H else local u=math.min(r.last_selected_index,H)local J=math.max(r.last_selected_index,H)if not IsControlKeyDown()then r:ClearSelection()end for u=u,J,1 do if r.gp_data[u]then r.selected_indices[u]=true end end end elseif IsControlKeyDown()then r.selected_indices[H]=not u for u in pairs(r.selected_indices)do if not r.gp_data[u]then r.selected_indices[u]=nil end end if r.selected_indices[H]then r.last_selected_index=H else r.last_selected_index=nil for u in pairs(r.selected_indices)do if r.selected_indices[u]then r.last_selected_index=u break end end end else if u then r:ClearSelection()else r:ClearSelection()r.selected_indices[H]=true r.last_selected_index=H end end r:_UpdateSelectionCount()r:RefreshRowHighlights()r:UpdateRaidWindowVisibility()if r.raidWindow and r.raidWindow:IsShown()then r:_UpdateSelectedPlayersText()end end end)r.rows[J]=t end r.window:SetScript("\079\110\072\105\100\101",function()r:ClearSelection()if r.raidWindow and r.raidWindow:IsShown()then r.raidWindow:Hide()end if r.logWindow and r.logWindow:IsShown()then r.logWindow:Hide()end end)end function GpDb_old.ToggleLogWindow(u)if not u.logWindow then u:_CreateLogWindow()end if u.logWindow:IsShown()then u.logWindow:Hide()else u.logWindow:Show()u:UpdateLogDisplay()if u.raidWindow and u.raidWindow:IsShown()then u.logWindow:SetHeight(u.window:GetHeight()/2)else u.logWindow:SetHeight(u.window:GetHeight())end end end function GpDb_old.UpdateLogDisplay(u)if not u.logWindow or not u.logWindow:IsShown()then return end local r=0 local J={}for t,x in ipairs(u.logData)do local S=u.logWindow.scrollChild:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")S:SetWidth(580)S:SetText(x.text)S:SetWordWrap(true)local K=S:GetStringHeight()+5 J[t]=K r=r+K S:Hide()end local t=0 for r=1,#u.logRows,1 do local x=r if x<=#u.logData then local S=u.logData[x]local K=J[x]u.logRows[r]:SetHeight(K)u.logRows[r]:SetPoint("\084\079\080\076\069\070\084",0,-t)u.logRows[r].text:SetText(S.text)u.logRows[r]:Show()t=t+K else u.logRows[r]:Hide()end end u.logWindow.scrollChild:SetHeight(r)u.logWindow.scrollFrame:UpdateScrollChildRect()end function GpDb_old._UpdateSelectionCount(u)local r=0 for J,t in pairs(u.selected_indices)do if t and u.gp_data[J]then r=r+1 else u.selected_indices[J]=nil end end u.window.countText:SetText(string.format("\208\146\209\139\208\180\208\181\208\187\208\181\208\189\208\190\058 \037\100",r))if r==0 then u.last_selected_index=nil end return r end function GpDb_old.IsValidIndex(r,u)return u and(type(u)=="\110\117\109\098\101\114"and(r.gp_data and r.gp_data[u]))end function GpDb_old.RefreshRowHighlights(u)local r=FauxScrollFrame_GetOffset(u.window.scrollFrame)for J,t in ipairs(u.rows)do local x=J+r if x<=#u.gp_data then if u.selected_indices[x]then t.selection:Show();(t:GetHighlightTexture()):SetAlpha(.2)else t.selection:Hide();(t:GetHighlightTexture()):SetAlpha(.4)end end end local J=0 for u in pairs(u.selected_indices)do J=J+1 end u.window.countText:SetText(string.format("\208\146\209\139\208\180\208\181\208\187\208\181\208\189\208\190\058 \037\100",J))end function GpDb_old.ClearSelection(u)u.selected_indices={}u.last_selected_index=nil u:_UpdateSelectionCount()u:RefreshRowHighlights()u:UpdateRaidWindowVisibility()end function GpDb_old.GetSelectedEntries(u)local r={}for J,t in pairs(u.selected_indices)do if J<=#u.gp_data then table.insert(r,u.gp_data[J])end end return r end function GpDb_old.AddLogEntry(S,u,r,J,t,x)if not S.logWindow then S:_CreateLogWindow()end local function K(u)if not u or type(u)~="\115\116\114\105\110\103"or u==""then return"\124\099\070\070\070\070\070\070\070\070"end for r=1,GetNumGuildMembers(),1 do local J,t,x,S,K,T,H,v,s,j,y=GetGuildRosterInfo(r)if J and J==u then local u=RAID_CLASS_COLORS[y]if u then return string.format("\124\099\070\070\037\048\050\120\037\048\050\120\037\048\050\120",u.r*255,u.g*255,u.b*255)end break end end return"\124\099\070\070\070\070\070\070\070\070"end local T=tonumber(r)or 0 local H="\124\099\070\070\065\048\065\048\065\048"..((u or"\063\063\058\063\063").."\124\114")local v=K(J)..((J or"\208\157\208\181\208\184\208\183\208\178\208\181\209\129\209\130\208\189\208\190").."\124\114")local s=T>=0 and"\124\099\070\070\048\048\070\070\048\048"or"\124\099\070\070\070\070\048\048\048\048"local j=s..(tostring(T).."\124\114")local y="\124\099\070\070\070\070\070\070\048\048"..((t or"\208\157\208\181\208\184\208\183\208\178\208\181\209\129\209\130\208\189\208\190").."\124\114")local function O(u)if not u or type(u)~="\115\116\114\105\110\103"then return u end for r=1,GetNumGuildMembers(),1 do local J,t,x,S,K,T,H,v=GetGuildRosterInfo(r)if J and v then local r={}for u in v:gmatch("\037\083\043")do table.insert(r,u)end if#r>=2 and r[2]==u then return J end end end return u end local D={}if type(x)=="\115\116\114\105\110\103"then for u in x:gmatch("\037\083\043")do local r=O(u)table.insert(D,K(r)..(r.."\124\114"))end end local b=table.concat(D," ")local R=string.format("\037\115 \124 \037\115 \124 \037\115 \124 \037\115 \124 \037\115",H,v,j,y,b)table.insert(S.logData,{text=R,raw={time=u;rl=J,gp=T;raid=t,targets=x}})if#S.logData>200 then table.remove(S.logData,1)end if S.logWindow and S.logWindow:IsShown()then S:UpdateLogDisplay()S.logWindow.scrollFrame:SetVerticalScroll(S.logWindow.scrollFrame:GetVerticalScrollRange())end end function GpDb_old.UpdateRaidWindowVisibility(r)if not r.raidWindow then return end local J=r:_CheckOfficerRank()if not J then if r.raidWindow:IsShown()then r.raidWindow:Hide()if r.logWindow and r.logWindow:IsShown()then r.logWindow:SetHeight(r.window:GetHeight())end end return end local t=next(r.selected_indices)~=nil if not t then if r.raidWindow:IsShown()then r.raidWindow:Hide()if r.logWindow and r.logWindow:IsShown()then r.logWindow:SetHeight(r.window:GetHeight())end end return end local x=u()local S=r.window.raidOnlyCheckbox:GetChecked()local K=not x or S if K and x then local u={}for r=1,GetNumGroupMembers(),1 do local J=GetRaidRosterInfo(r)if J then u[J]=true end end for J in pairs(r.selected_indices)do local t=r.gp_data[J]if t and not u[t.original_nick]then K=false print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\208\181\208\186\208\190\209\130\208\190\209\128\209\139\208\181 \208\178\209\139\208\180\208\181\208\187\208\181\208\189\208\189\209\139\208\181 \208\184\208\179\209\128\208\190\208\186\208\184 \208\189\208\181 \208\178 \209\128\208\181\208\185\208\180\208\181")break end end end if K then if not r.raidWindow:IsShown()then r.raidWindow:Show()r:RestoreRaidWindowState()r:_UpdateSelectedPlayersText()if r.logWindow and r.logWindow:IsShown()then r.logWindow:SetHeight(r.window:GetHeight()/2)end end else if r.raidWindow:IsShown()then r.raidWindow:Hide()end if r.logWindow and r.logWindow:IsShown()then r.logWindow:SetHeight(r.window:GetHeight())end end end function GpDb_old.UpdateWindow(u)if not u.window or not u.rows then return end local r=FauxScrollFrame_GetOffset(u.window.scrollFrame)for J=1,u.visible_rows,1 do local t=u.rows[J]local x=J+r if x<=#u.gp_data then local r=u.gp_data[x]t.nick:SetText(r.nick)t.gp:SetText(tostring(r.gp))if r.classColor then t.nick:SetTextColor(r.classColor.r,r.classColor.g,r.classColor.b)else t.nick:SetTextColor(1,1,1)end t:Show()else t:Hide()end end u:RefreshRowHighlights()FauxScrollFrame_Update(u.window.scrollFrame,#u.gp_data,u.visible_rows,25)u:UpdateRaidWindowVisibility()end function GpDb_old.GetNumSelected(u)local r=0 for J in pairs(u.selected_indices)do if u.gp_data[J]then r=r+1 else u.selected_indices[J]=nil end end print(string.format("\071\101\116\078\117\109\083\101\108\101\099\116\101\100\058 \208\189\208\176\208\185\208\180\208\181\208\189\208\190 \037\100 \209\141\208\187\208\181\208\188\208\181\208\189\209\130\208\190\208\178",r))return r end function GpDb_old.Show(r)r.window:Show()r.window.raidOnlyCheckbox:SetChecked(u())r:_UpdateFromGuild()r:UpdateWindow()end function GpDb_old.Hide(u)u.window:Hide()end function GpDb_old._UpdateFromGuild(r)r.gp_data={}local J=0 local t=GetNumGuildMembers()local x=u()r.window.raidOnlyCheckbox:SetChecked(x)local S=x and r.window.raidOnlyCheckbox:GetChecked()if not IsInGuild()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\146\209\139 \208\189\208\181 \209\129\208\190\209\129\209\130\208\190\208\184\209\130\208\181 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184")r:UpdateWindow()return end GuildRoster()C_Timer(.5,function()local u={}for r=1,GetNumGuildMembers(),1 do local J,t,x,S,K,T,H,v,s,j,y=GetGuildRosterInfo(r)if J then local r=nil if v then local u={}for r in v:gmatch("\037\083\043")do table.insert(u,r)end if#u>=2 then r=u[2]end end u[J]={publicNote=H;officerNote=v,classFileName=y,playerID=r}end end if S then local x=GetNumGroupMembers()local S=true local K={}for r=1,x,1 do local J,t,x,T,H,v,s,j,y,O,D,b,R,d,g,Y,m,h=GetRaidRosterInfo(r)if J then local r=J:match("\094\040\046-\041-")or J if not u[r]then S=false table.insert(K,J)end end end if not S then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\146 \209\128\208\181\208\185\208\180\208\181 \208\181\209\129\209\130\209\140 \208\189\208\181 \209\135\208\187\208\181\208\189\209\139 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\058 "..table.concat(K,"\044 "))r.window.countText:SetText("\208\158\209\130\208\190\208\177\209\128\208\176\208\182\208\176\208\181\209\130\209\129\209\143 \208\184\208\179\209\128\208\190\208\186\208\190\208\178\058 \048 \040\208\178 \209\128\208\181\208\185\208\180\208\181 \208\181\209\129\209\130\209\140 \208\189\208\181 \209\135\208\187\208\181\208\189\209\139 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041")r.window.totalText:SetText(string.format("\208\146\209\129\208\181\208\179\208\190 \208\184\208\179\209\128\208\190\208\186\208\190\208\178 \209\129 \208\147\208\159\058 \037\100 \040\208\184\208\183 \037\100 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041",J,t))r:UpdateWindow()return end for t=1,x,1 do local x,S,K,T,H,v=GetRaidRosterInfo(t)if x then local t=x:match("\094\040\046-\041-")or x local S=u[t]if S then local u=0 local t=S.publicNote or""if S.officerNote then local r={}for u in S.officerNote:gmatch("\037\083\043")do table.insert(r,u)end if#r>=3 then u=tonumber(r[3])or 0 end end if u>0 then J=J+1 end local K=x if t and t~=""then K=x..(" \124\099\070\070\070\070\070\070\048\048\040"..(t.."\041\124\114"))end table.insert(r.gp_data,{nick=K;original_nick=x,gp=u,classColor=RAID_CLASS_COLORS[v]or{r=1;g=1;b=1},classFileName=v,playerID=S.playerID})end end end else for u=1,GetNumGuildMembers(),1 do local t,x,S,K,T,H,v,s,j,y,O=GetGuildRosterInfo(u)if t and(s and s~="")then local u={}for r in s:gmatch("\037\083\043")do table.insert(u,r)end if#u>=3 then local x=tonumber(u[3])or 0 local S=u[2]if x~=0 then J=J+1 local u=t if v and v~=""then u=t..(" \124\099\070\070\070\070\070\070\048\048\040"..(v.."\041\124\114"))end table.insert(r.gp_data,{nick=u,original_nick=t,gp=x;classColor=RAID_CLASS_COLORS[O]or{r=1,g=1,b=1},classFileName=O;playerID=S})end end end end end r.window.countText:SetText(string.format("\208\158\209\130\208\190\208\177\209\128\208\176\208\182\208\176\208\181\209\130\209\129\209\143 \208\184\208\179\209\128\208\190\208\186\208\190\208\178\058 \037\100",#r.gp_data))r.window.totalText:SetText(string.format("\208\146\209\129\208\181\208\179\208\190 \208\184\208\179\209\128\208\190\208\186\208\190\208\178 \209\129 \208\147\208\159\058 \037\100 \040\208\184\208\183 \037\100 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041",J,GetNumGuildMembers()))r:ClearSelection()r:SortData()r:UpdateWindow()end)end function GpDb_old.Show(r)r.window:Show()if u()then r.window.raidOnlyCheckbox:SetChecked(true)else r.window.raidOnlyCheckbox:SetChecked(false)end GuildRoster()C_Timer(.5,function()r:_UpdateFromGuild()r:UpdateWindow()end)end function GpDb_old.AddGpEntry(t,u,r,J)table.insert(t.gp_data,{nick=u,original_nick=u;gp=tonumber(r)or 0,playerID=J})t:SortData()t:UpdateWindow()end function GpDb_old.UpdateGpEntry(J,u,r)for J,t in ipairs(J.gp_data)do if t.original_nick==u then t.gp=tonumber(r)or 0 break end end J:SortData()J:UpdateWindow()end function GpDb_old.RemoveGpEntry(r,u)for J,t in ipairs(r.gp_data)do if t.original_nick==u then table.remove(r.gp_data,J)break end end r:UpdateWindow()end function GpDb_old.FindGpEntry(r,u)for r,J in ipairs(r.gp_data)do if J.original_nick==u then return J.gp end end return nil end function GpDb_old.ClearAll(u)u.gp_data={}u:UpdateWindow()end function GpDb_old.SortData(r,u)if u then if r.sort_column==u then r.sort_ascending=not r.sort_ascending else r.sort_column=u r.sort_ascending=true end end table.sort(r.gp_data,function(u,J)local t,x if r.sort_column=="\110\105\099\107"then t=string.lower(string.lower(u.original_nick or""))x=string.lower(string.lower(J.original_nick or""))else t=u.gp or 0 x=J.gp or 0 end if r.sort_ascending then return t<x else return t>x end end)r:ClearSelection()r:UpdateWindow()end function GpDb_old.UpdateWindow(u)if not u.window or not u.rows then return end for r,J in ipairs(u.rows)do local t=u.gp_data[r]if t then J.nick:SetText(t.nick)if t.classColor then local u=t.nick:match("\094\091\094\124\093\043")or t.nick J.nick:SetText(u)J.nick:SetTextColor(t.classColor.r,t.classColor.g,t.classColor.b)local r=t.nick:match("\124\099\046\043\036")if r then local u=J.nick:GetText()..(" "..r)J.nick:SetText(u)end else J.nick:SetTextColor(1,1,1)end J.gp:SetText(tostring(t.gp))J.gp:SetTextColor(1,1,1)J:Show()else J:Hide()end end u.window.scrollChild:SetHeight(#u.gp_data*25)u.window.scrollFrame:UpdateScrollChildRect()end function GpDb_old.SaveToNsDb(u)for r,J in ipairs(u.gp_data)do u.ns_db:addStaticStr("\071\080\095\068\065\084\065",J.original_nick,nil,tostring(J.gp))end end function GpDb_old.LoadFromNsDb(u)u.gp_data={}local r=u.ns_db.input_table.GP_DATA if r then for r,J in pairs(r)do table.insert(u.gp_data,{nick=r,original_nick=r;gp=tonumber(J)or 0})end end u:SortData()u:UpdateWindow()end function GpDb_old._CreateRaidSelectionWindow(u)u.raidWindow=CreateFrame("\070\114\097\109\101","\071\112\068\098\082\097\105\100\087\105\110\100\111\119",u.window)u.raidWindow:SetFrameStrata("\068\073\065\076\079\071")u.raidWindow:SetSize(250,u.window:GetHeight()*.5)u.raidWindow:SetPoint("\066\079\084\084\079\077\076\069\070\084",u.window,"\066\079\084\084\079\077\082\073\071\072\084",5,0)u.raidWindow:SetMovable(false)u.raidWindow.background=u.raidWindow:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")u.raidWindow.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")u.raidWindow.background:SetVertexColor(0,0,0)u.raidWindow.background:SetAlpha(1)u.raidWindow.background:SetAllPoints(true)u.raidWindow.borderFrame=CreateFrame("\070\114\097\109\101",nil,u.raidWindow)u.raidWindow.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)u.raidWindow.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)u.raidWindow.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",edgeSize=16,insets={left=4,right=4;top=4;bottom=4}})u.raidWindow.closeButton=CreateFrame("\066\117\116\116\111\110",nil,u.raidWindow,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")u.raidWindow.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)u.raidWindow.closeButton:SetScript("\079\110\067\108\105\099\107",function()u.raidWindow:Hide()end)u.raidWindow.dropdown=CreateFrame("\070\114\097\109\101","\071\112\068\098\082\097\105\100\068\114\111\112\100\111\119\110",u.raidWindow,"\085\073\068\114\111\112\068\111\119\110\077\101\110\117\084\101\109\112\108\097\116\101")u.raidWindow.dropdown:SetPoint("\084\079\080\076\069\070\084",10,-10)u.raidWindow.dropdown:SetPoint("\082\073\071\072\084",u.raidWindow.closeButton,"\076\069\070\084",-10,0)u.raidWindow.dropdown:SetHeight(32)local function r()if u.raidWindow.selectedRaidId then for r=1,GetNumSavedInstances(),1 do local J,t=GetSavedInstanceInfo(r)if t==u.raidWindow.selectedRaidId then UIDropDownMenu_SetText(u.raidWindow.dropdown,string.format("\037\100\058 \037\115",t,J))return end end else UIDropDownMenu_SetText(u.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")end end local function J(J,t,x)local S=UIDropDownMenu_CreateInfo()for J=1,GetNumSavedInstances(),1 do local t,x,K,T,H,v,s,j,y=GetSavedInstanceInfo(J)if t and x then S.text=string.format("\037\100\058 \037\115 \040\037\100\041",x,t,y)S.arg1={id=x,name=t;players=y}S.func=function(J,t)u.raidWindow.selectedRaidId=t.id u.raidWindow.selectedRaidName=t.name u.raidWindow.selectedRaidPlayers=t.players if u.saveSelectionEnabled then u.lastSelectionType="\114\097\105\100"u.lastRaidId=t.id u.lastRaidName=t.name u.lastRaidPlayers=t.players end r()u.raidWindow.editBox:SetText("")end S.checked=u.raidWindow.selectedRaidId==x UIDropDownMenu_AddButton(S)end end S.text="\208\158\209\135\208\184\209\129\209\130\208\184\209\130\209\140 \208\178\209\139\208\177\208\190\209\128"S.func=function()u.raidWindow.selectedRaidId=nil u.raidWindow.selectedRaidName=nil if u.saveSelectionEnabled then u.lastSelectionType=nil u.lastRaidId=nil u.lastRaidName=nil u.lastRaidPlayers=0 end r()end S.notCheckable=true UIDropDownMenu_AddButton(S)end UIDropDownMenu_Initialize(u.raidWindow.dropdown,J)UIDropDownMenu_SetWidth(u.raidWindow.dropdown,200)UIDropDownMenu_SetButtonWidth(u.raidWindow.dropdown,224)UIDropDownMenu_JustifyText(u.raidWindow.dropdown,"\076\069\070\084")r()u.raidWindow.otherText=u.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")u.raidWindow.otherText:SetPoint("\084\079\080\076\069\070\084",u.raidWindow.dropdown,"\066\079\084\084\079\077\076\069\070\084",0,-10)u.raidWindow.otherText:SetText("\208\148\209\128\209\131\208\179\208\190\208\181\058")u.raidWindow.editBox=CreateFrame("\069\100\105\116\066\111\120",nil,u.raidWindow,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")u.raidWindow.editBox:SetPoint("\084\079\080\076\069\070\084",u.raidWindow.otherText,"\066\079\084\084\079\077\076\069\070\084",0,-5)u.raidWindow.editBox:SetPoint("\082\073\071\072\084",-10,0)u.raidWindow.editBox:SetHeight(20)u.raidWindow.editBox:SetAutoFocus(false)u.raidWindow.editBox:SetScript("\079\110\084\101\120\116\067\104\097\110\103\101\100",function(J)if J:GetText()~=""then if u.saveSelectionEnabled then u.lastSelectionType="\111\116\104\101\114"u.lastOtherText=J:GetText()end u.raidWindow.selectedRaidId=nil u.raidWindow.selectedRaidName=nil r()end end)u.raidWindow.saveCheckbox=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,u.raidWindow,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")u.raidWindow.saveCheckbox:SetPoint("\084\079\080\076\069\070\084",u.raidWindow.editBox,"\066\079\084\084\079\077\076\069\070\084",0,-10)u.raidWindow.saveCheckbox:SetSize(24,24)u.raidWindow.saveCheckbox.text=u.raidWindow.saveCheckbox:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")u.raidWindow.saveCheckbox.text:SetPoint("\076\069\070\084",u.raidWindow.saveCheckbox,"\082\073\071\072\084",5,0)u.raidWindow.saveCheckbox.text:SetText("\208\161\208\190\209\133\209\128\208\176\208\189\208\184\209\130\209\140 \208\178\209\139\208\177\208\190\209\128")u.raidWindow.saveCheckbox:SetChecked(true)u.saveSelectionEnabled=true u.raidWindow.saveCheckbox:SetScript("\079\110\067\108\105\099\107",function()u.saveSelectionEnabled=u.raidWindow.saveCheckbox:GetChecked()end)u.raidWindow.selectedPlayersText=u.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")u.raidWindow.selectedPlayersText:SetPoint("\084\079\080\076\069\070\084",u.raidWindow.saveCheckbox,"\066\079\084\084\079\077\076\069\070\084",0,-5)u.raidWindow.selectedPlayersText:SetPoint("\082\073\071\072\084",-10,0)u.raidWindow.selectedPlayersText:SetHeight(70)u.raidWindow.selectedPlayersText:SetJustifyH("\076\069\070\084")u.raidWindow.selectedPlayersText:SetJustifyV("\084\079\080")u.raidWindow.selectedPlayersText:SetWordWrap(true)local t={5;10;20;25;50,100}local x for r,J in ipairs(t)do local t=CreateFrame("\066\117\116\116\111\110",nil,u.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")t:SetSize(27,20)t:SetText(tostring(J))if r==1 then t:SetPoint("\066\079\084\084\079\077\076\069\070\084",u.raidWindow.selectedPlayersText,"\066\079\084\084\079\077\076\069\070\084",0,-20)else t:SetPoint("\076\069\070\084",x,"\082\073\071\072\084",5,0)end t:SetScript("\079\110\067\108\105\099\107",function()local r=tonumber(u.raidWindow.gpEditBox:GetText())or 0 u.raidWindow.gpEditBox:SetText(tostring(J))u.raidWindow.gpEditBox:HighlightText()end)x=t end local S=CreateFrame("\066\117\116\116\111\110",nil,u.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")S:SetSize(40,22)S:SetText("-\047\043")S:SetPoint("\076\069\070\084",x,"\082\073\071\072\084",5,0)S:SetScript("\079\110\067\108\105\099\107",function()local r=tonumber(u.raidWindow.gpEditBox:GetText())or 0 u.raidWindow.gpEditBox:SetText(tostring(-r))u.raidWindow.gpEditBox:HighlightText()end)u.raidWindow.gpEditBox=CreateFrame("\069\100\105\116\066\111\120",nil,u.raidWindow,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")u.raidWindow.gpEditBox:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,5)u.raidWindow.gpEditBox:SetSize(100,20)u.raidWindow.gpEditBox:SetAutoFocus(false)u.raidWindow.gpEditBox:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()u.raidWindow.gpEditBox:ClearFocus()end)u.raidWindow.gpEditBox:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()u.raidWindow.gpEditBox:ClearFocus()end)u.raidWindow.awardButton=CreateFrame("\066\117\116\116\111\110",nil,u.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")u.raidWindow.awardButton:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,5)u.raidWindow.awardButton:SetSize(100,22)u.raidWindow.awardButton:SetText("\208\157\208\176\209\135\208\184\209\129\208\187\208\184\209\130\209\140")u.raidWindow.awardButton:SetScript("\079\110\067\108\105\099\107",function()if not u:_CheckOfficerRank()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\162\208\190\208\187\209\140\208\186\208\190 \208\190\209\132\208\184\209\134\208\181\209\128\209\139 \208\188\208\190\208\179\209\131\209\130 \208\189\208\176\209\135\208\184\209\129\208\187\209\143\209\130\209\140 \208\147\208\159")u.raidWindow:Hide()return end if next(u.selected_indices)==nil then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\208\181\209\130 \208\178\209\139\208\180\208\181\208\187\208\181\208\189\208\189\209\139\209\133 \208\184\208\179\209\128\208\190\208\186\208\190\208\178")u.raidWindow:Hide()return end local r=tonumber(u.raidWindow.gpEditBox:GetText())if not r then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\163\208\186\208\176\208\182\208\184\209\130\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181 \208\147\208\159")return end if not u.raidWindow.selectedRaidId and not(u.lastOtherText or""):match("\037\083")then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\209\131\208\182\208\189\208\190 \208\178\209\139\208\177\209\128\208\176\209\130\209\140 \209\128\208\181\208\185\208\180 \208\184\208\187\208\184 \209\131\208\186\208\176\208\183\208\176\209\130\209\140 \208\191\209\128\208\184\209\135\208\184\208\189\209\131")return end if not u.saveSelectionEnabled then u.lastSelectionType=nil u.lastRaidId=nil u.lastRaidName=nil u.lastRaidPlayers=0 u.lastOtherText=nil u.lastGPValue=0 else u.lastGPValue=r end local J if u.raidWindow.selectedRaidId then local t=(u.raidWindow.selectedRaidName or""):gsub("\037\115\043","\095")J=string.format("\037\048\052\100\095\037\115\095\037\100 \037\100",u.raidWindow.selectedRaidId,t,u.raidWindow.selectedRaidPlayers or 0,r)else local t=(u.lastOtherText or""):gsub("\037\115\043","\095")J=string.format("\037\115 \037\100",t,r)end for t in pairs(u.selected_indices)do if u.gp_data[t]then local x=u.gp_data[t].original_nick local S=u.gp_data[t].playerID or"\085\078\075\078\079\087\078"SendAddonMessage("\110\115\071\080"..(" "..r),x,"\103\117\105\108\100")J=J..(" "..S)u:AddLogEntry(r,date("\037\072\058\037\077"),UnitName("\112\108\097\121\101\114"),u.raidWindow.selectedRaidName or u.raidWindow.editBox:GetText(),x)end end SendAddonMessage("\110\115\071\080\108\111\103",J,"\103\117\105\108\100")for u,J in ipairs(u:GetSelectedEntries())do J.gp=(J.gp or 0)+r end u:UpdateWindow()u.raidWindow:Hide()end)u.raidWindow:SetScript("\079\110\072\105\100\101",function()if u.logWindow and u.logWindow:IsShown()then u.logWindow:SetHeight(u.window:GetHeight())end end)u.raidWindow:Hide()end function GpDb_old._UpdateSelectedPlayersText(u)if not u.raidWindow then return end local r=u:GetSelectedEntries()local J={}for u,r in ipairs(r)do table.insert(J,r.original_nick)end local t=table.concat(J,"\044 ")if not u.raidWindow.selectedPlayersText then u.raidWindow.selectedPlayersText=u.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")u.raidWindow.selectedPlayersText:SetPoint("\084\079\080\076\069\070\084",u.raidWindow.saveCheckbox,"\066\079\084\084\079\077\076\069\070\084",0,-5)u.raidWindow.selectedPlayersText:SetPoint("\082\073\071\072\084",-10,0)u.raidWindow.selectedPlayersText:SetHeight(80)u.raidWindow.selectedPlayersText:SetJustifyH("\076\069\070\084")u.raidWindow.selectedPlayersText:SetJustifyV("\084\079\080")u.raidWindow.selectedPlayersText:SetWordWrap(true)u.raidWindow.selectedPlayersTextContainer=CreateFrame("\070\114\097\109\101",nil,u.raidWindow)u.raidWindow.selectedPlayersTextContainer:SetAllPoints(u.raidWindow.selectedPlayersText)u.raidWindow.selectedPlayersTextContainer:SetScript("\079\110\069\110\116\101\114",function()if u.raidWindow.selectedPlayersText.tooltip then GameTooltip:SetOwner(u.raidWindow.selectedPlayersTextContainer,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:SetText("\208\146\209\139\208\177\209\128\208\176\208\189\208\189\209\139\208\181 \208\184\208\179\209\128\208\190\208\186\208\184\058")GameTooltip:AddLine(u.raidWindow.selectedPlayersText.tooltip,1,1,1,true)GameTooltip:Show()end end)u.raidWindow.selectedPlayersTextContainer:SetScript("\079\110\076\101\097\118\101",function()GameTooltip:Hide()end)end if#t>60 then local r=string.sub(t,1,600).."\046\046\046"u.raidWindow.selectedPlayersText:SetText(r)u.raidWindow.selectedPlayersText.tooltip=t else u.raidWindow.selectedPlayersText:SetText(t)u.raidWindow.selectedPlayersText.tooltip=nil end end function GpDb_old.RestoreRaidWindowState(u)if not u.raidWindow then return end if u.lastSelectionType=="\114\097\105\100"and u.lastRaidId then UIDropDownMenu_SetText(u.raidWindow.dropdown,string.format("\037\100\058 \037\115",u.lastRaidId,u.lastRaidName))u.raidWindow.editBox:SetText("")u.raidWindow.selectedRaidId=u.lastRaidId u.raidWindow.selectedRaidName=u.lastRaidName u.raidWindow.selectedRaidPlayers=u.lastRaidPlayers elseif u.lastSelectionType=="\111\116\104\101\114"and u.lastOtherText then UIDropDownMenu_SetText(u.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")u.raidWindow.editBox:SetText(u.lastOtherText)u.raidWindow.selectedRaidId=nil u.raidWindow.selectedRaidName=nil else UIDropDownMenu_SetText(u.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")u.raidWindow.editBox:SetText("")u.raidWindow.selectedRaidId=nil u.raidWindow.selectedRaidName=nil end if not u.lastGPValue then u.lastGPValue=0 end u.raidWindow.gpEditBox:SetText(tostring(u.lastGPValue))u.raidWindow.saveCheckbox:SetChecked(u.saveSelectionEnabled)u:_UpdateSelectedPlayersText()end function GpDb_old._CheckOfficerRank(u)if not IsInGuild()then return false end local r=UnitName("\112\108\097\121\101\114")for u=1,GetNumGuildMembers(),1 do local J,t,x=GetGuildRosterInfo(u)if J and J==r then local u=GuildControlGetRankName(x+1)if u=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"or u=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"then return true end break end end return false end function GpDb_old.ToggleRaidWindow(r)if not r:_CheckOfficerRank()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\162\208\190\208\187\209\140\208\186\208\190 \208\190\209\132\208\184\209\134\208\181\209\128\209\139 \208\188\208\190\208\179\209\131\209\130 \208\189\208\176\209\135\208\184\209\129\208\187\209\143\209\130\209\140 \208\147\208\159")if r.raidWindow and r.raidWindow:IsShown()then r.raidWindow:Hide()end return end if not r.raidWindow then r:_CreateRaidSelectionWindow()end local J=u()local t=r.window.raidOnlyCheckbox:GetChecked()local x=next(r.selected_indices)~=nil if not x and not r.raidWindow:IsShown()then r.raidWindow:Show()UIDropDownMenu_Initialize(r.raidWindow.dropdown,nil)return end if x then if J and not t then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\148\208\187\209\143 \208\189\208\176\209\135\208\184\209\129\208\187\208\181\208\189\208\184\209\143 \208\147\208\159 \208\178 \209\128\208\181\208\185\208\180\208\181 \208\178\208\186\208\187\209\142\209\135\208\184\209\130\208\181 \'\208\162\208\190\208\187\209\140\208\186\208\190 \209\128\208\181\208\185\208\180\'")r.raidWindow:Hide()return end if r.raidWindow:IsShown()then r.raidWindow:Hide()else r.raidWindow:Show()UIDropDownMenu_Initialize(r.raidWindow.dropdown,nil)end end end function C_Timer(u,r,J)local t=CreateFrame("\070\114\097\109\101")t.duration=u t.elapsed=0 t.isLooping=J or false t:SetScript("\079\110\085\112\100\097\116\101",function(u,J)u.elapsed=u.elapsed+J if u.elapsed>=u.duration then if type(r)=="\102\117\110\099\116\105\111\110"then r()end if u.isLooping then u.elapsed=0 else u:SetScript("\079\110\085\112\100\097\116\101",nil)u=nil end end end)end function GetNumGroupMembers()if GetNumRaidMembers()>0 then return GetNumRaidMembers()else return GetNumPartyMembers()+1 end end local T={}local function H(u,r)if type(u)=="\116\097\098\108\101"and type(r)=="\110\117\109\098\101\114"then UIDropDownMenu_AddButton(u,r)end end local function v(u)return u:match("\091\094\092\047\093\043\036")or u end local function s(u)local r=CreateFrame("\070\114\097\109\101","\080\108\097\121\101\114\083\111\117\110\100\077\101\110\117\095"..u,nil,"\085\073\068\114\111\112\068\111\119\110\077\101\110\117\084\101\109\112\108\097\116\101")r.initialize=function(r,J)if not J then return end if J==1 then H({text="\208\148\208\190\208\177\208\176\208\178\208\184\209\130\209\140 \208\178 \209\129\208\191\208\184\209\129\208\190\208\186";notCheckable=1,func=function()testQ=testQ or{}testQ.fls=testQ.fls or{}if not testQ.fls[u]then testQ.fls[u]="\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\102\108\115\046\109\112\051"print("\208\148\208\190\208\177\208\176\208\178\208\187\208\181\208\189\058",u,"\208\151\208\178\209\131\208\186\058",testQ.fls[u])end CloseDropDownMenus()end},1)H({text="";disabled=1;notCheckable=1},1)if ns_alert_sounds and type(ns_alert_sounds)=="\116\097\098\108\101"then for r,J in ipairs(ns_alert_sounds)do if J.label and(J.sounds and type(J.sounds)=="\116\097\098\108\101")then H({text=J.label,notCheckable=1;hasArrow=1,value=J.label..("\095"..u)},1)end end end elseif J==2 then local r=UIDROPDOWNMENU_MENU_VALUE if r and(ns_alert_sounds and type(ns_alert_sounds)=="\116\097\098\108\101")then local J=r:match("\094\040\046\043\041\095"..(u.."\036"))if J then for r,t in ipairs(ns_alert_sounds)do if t.label==J and(t.sounds and type(t.sounds)=="\116\097\098\108\101")then for r,J in ipairs(t.sounds)do H({text=v(J);notCheckable=1;func=function()testQ.fls[u]=J PlaySoundFile(J,"\077\097\115\116\101\114")print("\208\148\208\190\208\177\208\176\208\178\208\187\208\181\208\189\058",u,"\208\151\208\178\209\131\208\186\058",J)CloseDropDownMenus()end},2)end break end end end end end end return r end local function O(u)local r=""local J=""local t=false for x=1,GetNumGuildMembers(),1 do local S,K,T,H,v,s,j,y=GetGuildRosterInfo(x)if S and strsplit("-",S)==u then J=j or""r=y or""t=true break end end if t then print("\208\152\208\189\209\132\208\190\209\128\208\188\208\176\209\134\208\184\209\143 \208\190\208\177 \208\184\208\179\209\128\208\190\208\186\208\181\058 "..u)print("  \208\158\209\132\208\184\209\134\208\181\209\128\209\129\208\186\208\176\209\143 \208\183\208\176\208\188\208\181\209\130\208\186\208\176\058 "..(r~=""and r or"\040\208\189\208\181\209\130\041"))print("  \208\159\209\131\208\177\208\187\208\184\209\135\208\189\208\176\209\143 \208\183\208\176\208\188\208\181\209\130\208\186\208\176\058 "..(J~=""and J or"\040\208\189\208\181\209\130\041"))else print("\208\152\208\179\209\128\208\190\208\186 "..(u.." \208\189\208\181 \208\189\208\176\208\185\208\180\208\181\208\189 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\046"))end end local function D()hooksecurefunc("\070\114\105\101\110\100\115\070\114\097\109\101\095\083\104\111\119\068\114\111\112\100\111\119\110",function(u)if u and u~=UNKNOWNOBJECT then H({text="\208\157\208\176\209\129\209\130\209\128\208\190\208\184\209\130\209\140 \208\183\208\178\209\131\208\186 \208\180\208\187\209\143 "..u;notCheckable=1,func=function()T[u]=T[u]or s(u)ToggleDropDownMenu(1,nil,T[u],"\099\117\114\115\111\114",0,0)end},1)H({text="\208\159\208\190\209\129\208\188\208\190\209\130\209\128\208\181\209\130\209\140 \208\184\208\189\209\132\208\190\209\128\208\188\208\176\209\134\208\184\209\142",notCheckable=1;func=function()O(u)end},1)end end)hooksecurefunc("\085\110\105\116\080\111\112\117\112\095\079\110\067\108\105\099\107",function()local u=UIDROPDOWNMENU_OPEN_MENU if u and(u.which=="\067\072\065\084\095\082\079\083\084\069\082"or u.which=="\070\082\073\069\078\068")then local r=u.name if r and r~=UNKNOWNOBJECT then H({text="\208\157\208\176\209\129\209\130\209\128\208\190\208\184\209\130\209\140 \208\183\208\178\209\131\208\186 \208\180\208\187\209\143 "..r,notCheckable=1;func=function()T[r]=T[r]or s(r)ToggleDropDownMenu(1,nil,T[r],"\099\117\114\115\111\114",0,0)end},1)H({text="\208\159\208\190\209\129\208\188\208\190\209\130\209\128\208\181\209\130\209\140 \208\184\208\189\209\132\208\190\209\128\208\188\208\176\209\134\208\184\209\142";notCheckable=1;func=function()O(r)end},1)end end end)end local b=CreateFrame("\070\114\097\109\101")b:RegisterEvent("\080\076\065\089\069\082\095\076\079\071\073\078")b:SetScript("\079\110\069\118\101\110\116",function()D()_G.testQ=_G.testQ or{}_G.testQ.fls=_G.testQ.fls or{}end)NSQCMenu_old={}NSQCMenu_old.__index=NSQCMenu_old function NSQCMenu_old.new(J,u,r)local t=setmetatable({},J)t.addonName=u t.subMenus={}t.elements={}t.mainFrame=CreateFrame("\070\114\097\109\101",u.."\077\097\105\110\070\114\097\109\101",InterfaceOptionsFramePanelContainer)t.mainFrame.name=u t.mainFrame:Hide()t.currentY=-50 local x=t.mainFrame:CreateFontString(nil,"\065\082\084\087\079\082\075","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\076\097\114\103\101")x:SetPoint("\084\079\080\076\069\070\084",16,-16)x:SetText(u)InterfaceOptions_AddCategory(t.mainFrame)return t end function NSQCMenu_old.addInfoSection(J,u,r)local t=J.mainFrame local x=J.currentY local S=t:CreateFontString(nil,"\065\082\084\087\079\082\075","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")S:SetPoint("\084\079\080\076\069\070\084",20,x-10)S:SetText(u)S:SetTextColor(1,.82,0)local K=t:CreateFontString(nil,"\065\082\084\087\079\082\075","\071\097\109\101\070\111\110\116\087\104\105\116\101")K:SetPoint("\084\079\080\076\069\070\084",30,x-30)K:SetWidth(550)K:SetJustifyH("\076\069\070\084")K:SetJustifyV("\084\079\080")K:SetText(J:wrapText(r,540,"\071\097\109\101\070\111\110\116\087\104\105\116\101"))local T=K:GetStringHeight()J.currentY=(x-40)-T table.insert(J.elements,{S,K})end function NSQCMenu_old.wrapText(t,u,r,J)local x=""local S=""for u in u:gmatch("\037\083\043")do local K=S..(" "..u)local T=t:getStringWidth(t.mainFrame,K,J)if T>r then x=x..(S.."\n")S=u else S=K end end return x..S end function NSQCMenu_old.getStringWidth(t,u,r,J)if not u then print("\069\114\114\111\114\058 \070\114\097\109\101 \105\115 \110\105\108 \105\110 \103\101\116\083\116\114\105\110\103\087\105\100\116\104")return 0 end local x=u:CreateFontString(nil,"\065\082\084\087\079\082\075",J)x:SetText(r)local S=x:GetStringWidth()x:Hide()return S end function NSQCMenu_old.addSubMenu(J,u,r)r=r or J local t=J.addonName..(u.."\083\117\098\070\114\097\109\101")local x=CreateFrame("\070\114\097\109\101",t,InterfaceOptionsFramePanelContainer)x.name=u x.parent=r.addonName or r.name x:Hide()local S=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101",t.."\083\099\114\111\108\108\070\114\097\109\101",x,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")S:SetPoint("\084\079\080\076\069\070\084",16,-50)S:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-32,16)local K=CreateFrame("\070\114\097\109\101",t.."\083\099\114\111\108\108\067\111\110\116\101\110\116",S)K:SetWidth(S:GetWidth()-20)K:SetHeight(1)S:SetScrollChild(K)local T=_G[t.."\083\099\114\111\108\108\070\114\097\109\101\083\099\114\111\108\108\066\097\114"]T:ClearAllPoints()T:SetPoint("\084\079\080\076\069\070\084",S,"\084\079\080\082\073\071\072\084",12,-16)T:SetPoint("\066\079\084\084\079\077\076\069\070\084",S,"\066\079\084\084\079\077\082\073\071\072\084",12,16)local H=x:CreateFontString(nil,"\065\082\084\087\079\082\075","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\076\097\114\103\101")H:SetPoint("\084\079\080\076\069\070\084",16,-16)H:SetText(u)InterfaceOptions_AddCategory(x)local v={frame=x,scrollFrame=S,scrollContent=K;elements={};lastY=0;totalHeight=0;maxHeight=S:GetHeight(),parent=r,name=u}table.insert(J.subMenus,v)return v end function NSQCMenu_old.showSubMenu(r,u)if u.parent then u.parent.frame:Hide()end u.frame:Show()end function NSQCMenu_old.addSlider(J,u,r)local t=CreateFrame("\083\108\105\100\101\114",u.frame:GetName()..r.name,u.scrollContent,"\079\112\116\105\111\110\115\083\108\105\100\101\114\084\101\109\112\108\097\116\101")t:SetPoint("\084\079\080\076\069\070\084",16,-u.lastY)t:SetWidth(590)t:SetHeight(20)t:SetMinMaxValues(r.min,r.max)t:SetValueStep(r.step or 1)t:SetValue(r.default)t.tooltipText=r.tooltip _G[t:GetName().."\084\101\120\116"]:SetText(r.label)_G[t:GetName().."\076\111\119"]:SetText(r.min)_G[t:GetName().."\072\105\103\104"]:SetText(r.max)t:SetScript("\079\110\069\110\116\101\114",function(u)if u.tooltipText then GameTooltip:SetOwner(u,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine(u.tooltipText,1,1,1,true)GameTooltip:AddLine("\208\162\208\181\208\186\209\131\209\137\208\181\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\058 \124\099\102\102\102\102\102\102\102\102"..(u:GetValue().."\124\114"),1,1,1,true)GameTooltip:Show()end end)t:SetScript("\079\110\076\101\097\118\101",function(u)GameTooltip:Hide()end)t:SetScript("\079\110\086\097\108\117\101\067\104\097\110\103\101\100",function(u,J)if r.onChange then r.onChange(J)end if GameTooltip:IsOwned(u)then GameTooltip:ClearLines()GameTooltip:SetOwner(u,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine(u.tooltipText,1,1,1,true)GameTooltip:AddLine("\208\162\208\181\208\186\209\131\209\137\208\181\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\058 \124\099\102\102\102\102\102\102\102\102"..(J.."\124\114"),1,1,1,true)GameTooltip:Show()end end)u.lastY=u.lastY+40 u.totalHeight=u.totalHeight+40 u.scrollContent:SetHeight(u.totalHeight)table.insert(u.elements,t)J:updateScrollRange(u)return t end function NSQCMenu_old.addCheckbox(J,u,r)local t=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",u.frame:GetName()..r.name,u.scrollContent,"\067\104\097\116\067\111\110\102\105\103\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")t:SetPoint("\084\079\080\076\069\070\084",16,-u.lastY)t:SetChecked(r.default or false)t.tooltipText=r.tooltip local x=u.scrollContent:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")x:SetPoint("\076\069\070\084",t,"\082\073\071\072\084",5,0)x:SetText(r.label)t:SetScript("\079\110\069\110\116\101\114",function(u)if u.tooltipText then GameTooltip:SetOwner(u,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine(u.tooltipText,1,1,1,true)local r=u:GetChecked()and"\124\099\102\102\048\048\102\102\048\048\208\146\208\186\208\187\209\142\209\135\208\181\208\189\208\190\124\114"or"\124\099\102\102\102\102\048\048\048\048\208\146\209\139\208\186\208\187\209\142\209\135\208\181\208\189\208\190\124\114"GameTooltip:AddLine("\208\162\208\181\208\186\209\131\209\137\208\181\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\058 "..r,1,1,1,true)GameTooltip:Show()end end)t:SetScript("\079\110\076\101\097\118\101",function(u)GameTooltip:Hide()end)t:SetScript("\079\110\067\108\105\099\107",function(u)if r.onClick then r.onClick(u:GetChecked())end if GameTooltip:IsOwned(u)then GameTooltip:ClearLines()GameTooltip:SetOwner(u,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine(u.tooltipText,1,1,1,true)local r=u:GetChecked()and"\124\099\102\102\048\048\102\102\048\048\208\146\208\186\208\187\209\142\209\135\208\181\208\189\208\190\124\114"or"\124\099\102\102\102\102\048\048\048\048\208\146\209\139\208\186\208\187\209\142\209\135\208\181\208\189\208\190\124\114"GameTooltip:AddLine("\208\162\208\181\208\186\209\131\209\137\208\181\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\058 "..r,1,1,1,true)GameTooltip:Show()end end)u.lastY=u.lastY+30 u.totalHeight=u.totalHeight+30 u.scrollContent:SetHeight(u.totalHeight)table.insert(u.elements,t)J:updateScrollRange(u)return t end function NSQCMenu_old.updateScrollRange(r,u)local J=u.scrollFrame local t=_G[J:GetName().."\083\099\114\111\108\108\066\097\114"]if not t then error("\083\099\114\111\108\108\098\097\114 \110\111\116 \102\111\117\110\100 \102\111\114 \115\099\114\111\108\108\070\114\097\109\101\058 "..J:GetName())end local x=u.totalHeight-u.maxHeight if x<0 then x=0 end t:SetMinMaxValues(0,x)t:SetValue(0)J:UpdateScrollChildRect()end function NSQCMenu_old.addButton(J,u,r)local t=CreateFrame("\066\117\116\116\111\110",u.frame:GetName()..r.name,u.scrollContent,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")t:SetPoint("\084\079\080\076\069\070\084",16,-u.lastY)t:SetSize(r.width or 120,r.height or 24)t:SetText(r.label or"\208\154\208\189\208\190\208\191\208\186\208\176")t:SetScript("\079\110\067\108\105\099\107",function(u)if r.onClick then r.onClick()end end)if r.tooltip then t.tooltipText=r.tooltip t:SetScript("\079\110\069\110\116\101\114",function(u)if u.tooltipText then GameTooltip:SetOwner(u,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine(u.tooltipText,1,1,1,true)GameTooltip:Show()end end)t:SetScript("\079\110\076\101\097\118\101",function(u)GameTooltip:Hide()end)end u.lastY=(u.lastY+(r.height or 24))+10 u.totalHeight=(u.totalHeight+(r.height or 24))+10 u.scrollContent:SetHeight(u.totalHeight)table.insert(u.elements,t)J:updateScrollRange(u)return t end function C_Timer(u,r,J)local t=CreateFrame("\070\114\097\109\101")t.duration=u t.elapsed=0 t.isLooping=J or false t:SetScript("\079\110\085\112\100\097\116\101",function(u,J)u.elapsed=u.elapsed+J if u.elapsed>=u.duration then if type(r)=="\102\117\110\099\116\105\111\110"then r()end if u.isLooping then u.elapsed=0 else u:SetScript("\079\110\085\112\100\097\116\101",nil)u=nil end end end)end C_Timer(10,function()if not menu then NS3Menu_old()if testQ["\209\129\208\186\209\128\209\139\209\130\209\140 \208\177\208\190\209\129\209\129\208\190\208\178"]then HideBossFrames()end end end)function NS3Menu_old()local u=NSQCMenu_old:new("\078\083\081\067")local r=u:addSubMenu("\208\157\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184")u:addCheckbox(r,{name="\208\161\208\186\209\128\209\139\209\130\209\140 \209\132\209\128\208\181\208\185\208\188\209\139 \208\177\208\190\209\129\209\129\208\190\208\178 \208\191\208\190\208\180 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\190\208\185 \208\178 \208\191\208\191\208\179 \208\184 \209\128\208\181\208\185\208\180\208\176\209\133";label="\208\161\208\186\209\128\209\139\209\130\209\140 \209\132\209\128\208\181\208\185\208\188\209\139 \208\177\208\190\209\129\209\129\208\190\208\178 \208\191\208\190\208\180 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\190\208\185 \208\178 \208\191\208\191\208\179 \208\184 \209\128\208\181\208\185\208\180\208\176\209\133",default=testQ["\209\129\208\186\209\128\209\139\209\130\209\140 \208\177\208\190\209\129\209\129\208\190\208\178"]or false;tooltip="\208\161\208\186\209\128\209\139\209\130\209\140 \209\132\209\128\208\181\208\185\208\188\209\139 \208\177\208\190\209\129\209\129\208\190\208\178 \208\191\208\190\208\180 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\190\208\185 \208\178 \208\191\208\191\208\179 \208\184 \209\128\208\181\208\185\208\180\208\176\209\133";onClick=function(u)if testQ then if u then testQ["\209\129\208\186\209\128\209\139\209\130\209\140 \208\177\208\190\209\129\209\129\208\190\208\178"]=1 HideBossFrames()else testQ["\209\129\208\186\209\128\209\139\209\130\209\140 \208\177\208\190\209\129\209\129\208\190\208\178"]=nil end end end})u:addCheckbox(r,{name="\208\146\208\186\208\187\209\142\209\135\208\184\209\130\209\140 \208\176\208\178\209\130\208\190\209\129\208\188\208\181\208\189\209\131 \208\191\208\190\208\184\209\129\208\186\208\176 \208\189\208\176 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\181 \208\180\208\187\209\143 \209\133\208\176\208\189\209\130\208\176",label="\208\146\208\186\208\187\209\142\209\135\208\184\209\130\209\140 \208\176\208\178\209\130\208\190\209\129\208\188\208\181\208\189\209\131 \208\191\208\190\208\184\209\129\208\186\208\176 \208\189\208\176 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\181 \208\180\208\187\209\143 \209\133\208\176\208\189\209\130\208\176";default=testQ["\208\188\208\181\209\130\208\186\208\176 \208\190\209\133\208\190\209\130\208\189\208\184\208\186\208\176"]or false,tooltip="\208\146\208\186\208\187\209\142\209\135\208\184\209\130\209\140 \208\176\208\178\209\130\208\190\209\129\208\188\208\181\208\189\209\131 \208\191\208\190\208\184\209\129\208\186\208\176 \208\189\208\176 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\181 \208\180\208\187\209\143 \209\133\208\176\208\189\209\130\208\176";onClick=function(u)if testQ then if u then testQ["\208\188\208\181\209\130\208\186\208\176 \208\190\209\133\208\190\209\130\208\189\208\184\208\186\208\176"]=1 HideBossFrames()else testQ["\208\188\208\181\209\130\208\186\208\176 \208\190\209\133\208\190\209\130\208\189\208\184\208\186\208\176"]=nil end end end})end function HideBossFrames()for u=1,4,1 do local r=_G["\066\111\115\115"..(u.."\084\097\114\103\101\116\070\114\097\109\101")]if r then r:UnregisterAllEvents()r:Hide()r.Show=function() end end end end