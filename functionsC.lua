function mysplit(y,E)if E==nil then E="\037\115"end local u={}for y in string.gmatch(y,"\040\091\094"..(E.."\093\043\041"))do table.insert(u,y)end return u end local function E()return GetNumRaidMembers()>0 end function round(y)if(y-y%.1)-(y-y%1)<.5 then y=y-y%1 else y=(y-y%1)+1 end return y end function nsplit(y)lines={}for y in y:gmatch("\091\094\r\n\093\043")do table.insert(lines,y)end return lines end function all_trim(y)return y:match("\094\037\115\042\040\046-\041\037\115\042\036")end function kirTest(y,E)test1=y:sub(E,E)testN=y:byte(7)testN=tonumber(testN)if testN==208 then r=y:sub(E*2-1,E*2)else r=test1 end return r end function alfabet(y)shablon="\208\176\208\177\208\178\208\179\208\180\208\181\209\145\208\182\208\183\208\184\208\185\208\186\208\187\208\188\208\189\208\190\208\191\209\128\209\129\209\130\209\131\209\132\209\133\209\134\209\135\209\136\209\137\209\138\209\139\209\140\209\141\209\142\209\143\208\144\208\145\208\146\208\147\208\148\208\149\208\129\208\150\208\151\208\152\208\153\208\154\208\155\208\156\208\157\208\158\208\159\208\160\208\161\208\162\208\163\208\164\208\165\208\166\208\167\208\168\208\169\208\170\208\171\208\172\208\173\208\174\208\175\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"myB=string.find(shablon,y,1,true)return myB end function alfabetC(y,E)shablon="\208\176\208\177\208\178\208\179\208\180\208\181\209\145\208\182\208\183\208\184\208\185\208\186\208\187\208\188\208\189\208\190\208\191\209\128\209\129\209\130\209\131\209\132\209\133\209\134\209\135\209\136\209\137\209\138\209\139\209\140\209\141\209\142\209\143\208\144\208\145\208\146\208\147\208\148\208\149\208\129\208\150\208\151\208\152\208\153\208\154\208\155\208\156\208\157\208\158\208\159\208\160\208\161\208\162\208\163\208\164\208\165\208\166\208\167\208\168\208\169\208\170\208\171\208\172\208\173\208\174\208\175\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"local u if E==0 then u=string.find(shablon,y,1,true)end if E==1 then if y<133 then u=string.utf8sub(shablon,y/2+.5,y/2+.5)else u=string.sub(shablon,y,y)end end return u end function hashStr(y)local E=time()E=E%10000 E=tostring(E)E=string.utf8sub(E,2,3)E=string.format("\037\048\051\100",E)nomeLen=string.utf8len(y)nome1={}for E=1,nomeLen,1 do nome1[E]=string.utf8sub(y,E,E)tmNome=nome1[E]nome1[E]=alfabet(tmNome)end nome11=0 for y=1,nomeLen,1 do nome11=nome11+nome1[y]end nome11=nome11%1000 hNome=string.format("\037\048\051\100",nome11)iN=tostring(E)r1=string.utf8sub(iN,1,1)r2=string.utf8sub(hNome,1,1)r3=string.utf8sub(iN,2,2)r4=string.utf8sub(hNome,2,2)r5=string.utf8sub(iN,3,3)r6=string.utf8sub(hNome,3,3)r=r1 ..(r2 ..(r3 ..(r4 ..(r5 ..r6))))return r end function tablelength(y)local E=0 for y in pairs(y)do E=E+1 end return E end function getPOS(y,E)local u=(1-E)*668 local g=y*1002 return g,u end function hshStrNuovo(y,E)nomeLen=string.utf8len(E)nome1={}for y=1,nomeLen,1 do nome1[y]=string.utf8sub(E,y,y)tmNome=nome1[y]nome1[y]=alfabet(tmNome)end nome11=0 for y=1,nomeLen,1 do nome11=nome11+nome1[y]end nome11=nome11%1000 hNome=string.format("\037\048\051\100",nome11)local u=string.sub(y,2,2)local g=string.sub(y,4,4)local W=string.sub(y,6,6)local L=math.random(0,9)local l=math.random(0,9)local o=math.random(0,9)local x=u..(g..W)local K=hashStr(E)local m=string.utf8sub(nome11,2,2)local j=string.utf8sub(nome11,4,4)local b=string.utf8sub(nome11,6,6)local J=m..(j..b)local I=L..(j..(l..(m..(o..b))))return x,J,I end function hshStrNuovo(y,E)local u local g local W local L local l local o local x local K local m local j local b local J local I u=string.utf8len(E)local O={}for y=1,u,1 do O[y]=string.utf8sub(E,y,y)g=O[y]O[y]=alfabet(g)end W=0 for y=1,u,1 do W=W+O[y]end W=W%1000 L=string.format("\037\048\051\100",W)l=string.sub(L,1,1)o=string.sub(L,2,2)x=string.sub(L,3,3)K=string.sub(y,2,2)K=tonumber(K)if K==0 then m=string.sub(y,3,3)j=string.sub(y,4,4)b=string.sub(y,6,6)elseif K==1 then m=string.sub(y,4,4)j=string.sub(y,3,3)b=string.sub(y,6,6)elseif K==2 then m=string.sub(y,4,4)j=string.sub(y,6,6)b=string.sub(y,3,3)elseif K==3 then m=string.sub(y,3,3)j=string.sub(y,6,6)b=string.sub(y,4,4)elseif K==4 then m=string.sub(y,1,1)j=string.sub(y,6,6)b=string.sub(y,4,4)elseif K==5 then m=string.sub(y,1,1)j=string.sub(y,6,6)b=string.sub(y,3,3)elseif K==6 then m=string.sub(y,6,6)j=string.sub(y,1,1)b=string.sub(y,3,3)elseif K==7 then m=string.sub(y,6,6)j=string.sub(y,3,3)b=string.sub(y,1,1)elseif K==8 then m=string.sub(y,4,4)j=string.sub(y,5,5)b=string.sub(y,6,6)elseif K==9 then m=string.sub(y,5,5)j=string.sub(y,1,1)b=string.sub(y,3,3)end J=m..(j..b)I=l..(o..x)return J,I end function hshSenderNomeC(y)local E local u local g local W local L local l local o local x local K local m local j E=string.utf8len(y)u={}for E=1,E,1 do u[E]=string.utf8sub(y,E,E)tmNome=u[E]u[E]=alfabet(tmNome)end g=0 for y=1,E,1 do g=g+u[y]end g=g%1000 W=string.format("\037\048\051\100",g)L=string.sub(W,1,1)l=string.sub(W,2,2)o=string.sub(W,3,3)x=math.random(0,9)K=math.random(0,9)m=math.random(0,9)if K==0 then j=x..(K..(L..(l..(m..o))))elseif K==1 then j=x..(K..(l..(L..(m..o))))elseif K==2 then j=x..(K..(o..(L..(m..l))))elseif K==3 then j=x..(K..(L..(o..(m..l))))elseif K==4 then j=L..(K..(x..(o..(m..l))))elseif K==5 then j=L..(K..(o..(x..(m..l))))elseif K==6 then j=l..(K..(o..(x..(m..L))))elseif K==7 then j=o..(K..(l..(m..(x..L))))elseif K==8 then j=x..(K..(m..(L..(l..o))))elseif K==8 then j=L..(K..(o..(x..(l..m))))elseif K==9 then j=l..(K..(o..(x..(L..m))))end if testQ~=nil then if testQ[y]~=nil then if testQ[y].rarHSH1==nil then testQ[y].rarHSH1={}end if testQ[y].rarHSH==nil then testQ[y].rarHSH={}end testDate=date("\037\100")testDate=tonumber(testDate)if testDate%2==0 then tableHSH="\114\097\114\072\083\072"testQ[y].rarHSH1=nil else tableHSH="\114\097\114\072\083\072\049"testQ[y].rarHSH=nil end if j==testQ[y][tableHSH]then j=hshSenderNomeC(y)end table.insert(testQ[y][tableHSH],j)return j end end end function gmTest(y)local E for u=1,#gmList,1 do if y==gmList[u]then E="\208\179\208\188"break end u=u+1 end return E end function proverkaVypolneniyaKvestySachivkoj(y,E)local u=testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]if E=="\050"then E="\208\186\208\178\208\181\209\129\209\130\095\208\187\208\178\208\187\050"elseif E=="\051"then E="\208\186\208\178\208\181\209\129\209\130\095\208\187\208\178\208\187\051"end local g=testQ[y][E][u]g=tonumber(g)local W=GetAchievementNumCriteria(u)j=0 k=0 for y=1,W,1 do local E,g,W,L,l,o,x,K,m,b=GetAchievementCriteriaInfo(u,y)prov=W if prov==true then j=j+1 else k=k+1 end y=y+1 end local L=g-j if L<0 then L=0 end SendChatMessage("\208\158\209\129\209\130\208\176\208\187\208\190\209\129\209\140 \208\178\209\139\208\191\208\190\208\187\208\189\208\184\209\130\209\140 "..(L..(" \208\191\209\131\208\189\208\186\209\130\208\190\208\178 \208\176\209\135\208\184\208\178\208\186\208\184 "..(u..(" "..(GetAchievementLink(u)..(" \208\184\208\183 "..g)))))),"\071\085\073\076\068",nil,1)end function npcXY(y,E,u,g,W)local L=nil local l=y local o=E l=tostring(l)o=tostring(o)if npcScan[l]==nil then npcScan[l]={}end if npcScan[l][o]==nil then npcScan[l][o]={}end local x=W if x~=nil then local y=u local E=g y=tostring(y)E=tostring(E)if npcScan[l][o][x]==nil then npcCount=1 npcCount=tostring(npcCount)npcScan[l][o][x]={}npcScan[l][o][x][npcCount]={}npcScan[l][o][x][npcCount].x=y npcScan[l][o][x][npcCount].y=E else local u={}local g={}npcCount=tablelength(npcScan[l][o][x])+1 npcCount=tostring(npcCount)y=tostring(y)E=tostring(E)npcScan[l][o][x][npcCount]={}npcScan[l][o][x][npcCount].x=y npcScan[l][o][x][npcCount].y=E end else print("\208\146\209\139\208\177\208\181\209\128\208\184 \209\134\208\181\208\187\209\140")end end function testNpc(y)local E CreateFrame("\071\097\109\101\084\111\111\108\116\105\112","\077\121\083\099\097\110\110\105\110\103\084\111\111\108\116\105\112",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\109\112\108\097\116\101")MyScanningTooltip:SetOwner(WorldFrame,"\065\078\067\072\079\082\095\078\079\078\069")MyScanningTooltip:AddFontStrings(MyScanningTooltip:CreateFontString("\036\112\097\114\101\110\116\084\101\120\116\076\101\102\116\049",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116"),MyScanningTooltip:CreateFontString("\036\112\097\114\101\110\116\084\101\120\116\082\105\103\104\116\049",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116"))MyScanningTooltip:SetHyperlink("\117\110\105\116\058"..y)E=EnumerateTooltipLines(MyScanningTooltip)return E end local function u(...)local y for E=1,select("\035",...),1 do local u=select(E,...)if u and u:GetObjectType()=="\070\111\110\116\083\116\114\105\110\103"then local E=u:GetText()if E~=nil then print(E)if string.find(E,"\208\163\209\128\208\190\208\178\208\181\208\189\209\140")then testLvlNpc=mysplit(E)end if string.find(E,"\209\131\209\128\208\190\208\178\208\189\209\143")then testLvlNpc=mysplit(E)if string.find(testLvlNpc[3],"\037\063\037\063")then else y="\049"end if string.find(testLvlNpc[2],"\037\063\037\063")then SendAddonMessage("\078\083\071\097\100\100","\035\110\112\099\079\102\102","\103\117\105\108\100")end if string.find(testLvlNpc[1],"\208\162\209\128\209\131\208\191")then SendAddonMessage("\078\083\071\097\100\100","\035\110\112\099\068\105\101","\103\117\105\108\100")end end end end end return y end function EnumerateTooltipLines(y)local E E=u(y:GetRegions())return E end function pLid()if UnitIsPartyLeader("\112\097\114\116\121\049")then pL=1 elseif UnitIsPartyLeader("\112\097\114\116\121\050")then pL=2 elseif UnitIsPartyLeader("\112\097\114\116\121\051")then pL=3 elseif UnitIsPartyLeader("\112\097\114\116\121\052")then pL=4 else pL=0 end return pL end function pM(y)if y==UnitName("\112\097\114\116\121\049")then r=1 elseif y==UnitName("\112\097\114\116\121\050")then r=1 elseif y==UnitName("\112\097\114\116\121\051")then r=1 elseif y==UnitName("\112\097\114\116\121\052")then r=1 else r=0 end return r end function testN()testNpc(UnitGUID("\116\097\114\103\101\116"))end function tblAllFail(y,E)if mmList[y]~=nil then for u=1,mmList[y]["\208\186\208\190\208\187\208\184\209\135\208\181\209\129\209\130\208\178\208\190\095\208\177\208\190\209\129\209\129\208\190\208\178"],1 do if E==mmList[y][u]then r=u break else r=0 end end end return r end function testMarsh(y,E)trovMarsh(y,E)local u=0 for E,u in pairs(mapTables[y])do if type(E)=="\115\116\114\105\110\103"then tKont=E end for y,E in pairs(mapTables[y][E])do if type(y)=="\115\116\114\105\110\103"then tLok=y end end end if testQ.schet1~=nil then for E=testQ.schet1-10,testQ.schet1+10,1 do if testQ.schet[E]~=nil then marshrut(E,tablelength(mapTables[y][tKont][tLok]))u=u+testQ.schet[E]if u>0 then break end end end end return u end function trovMarsh(y,E)if testKontLok(y)~=nil then local u,g=GetPlayerMapPosition("\112\108\097\121\101\114")local W=GetCurrentMapContinent()W=tostring(W)local L=GetCurrentMapZone()L=tostring(L)local l=GetMapInfo()if l=="\082\097\103\101\102\105\114\101"then W="\057\057"L="\049"end local o=tablelength(mapTables[y][W][L])testQ.schet={}testQ.numPunti={}if testQ.num==nil then if testKontLok(y)<E then testQ.num=1 testQ.schet1=1 end end for l=testQ.num-10,testQ.num+10,1 do testQ.schet1=l j=tostring(l)if testQ["\209\129\209\130\208\176\209\128\209\130"]~=nil then if mapTables[y][W][L][j]~=nil then mioCel=sqrt((u-mapTables[y][W][L][j].x)^2+(g-mapTables[y][W][L][j].y)^2)if mioCel<E then testQ.schet[l]=1 j=testQ.num j=tostring(j)mioCel1=sqrt((u-mapTables[y][W][L][j].x)^2+(g-mapTables[y][W][L][j].y)^2)if mioCel1>mioCel then testQ.num=l testQ.marshF[l]=l if testQ.marshF[l]==math.modf(o/4)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \209\135\208\181\209\130\208\178\208\181\209\128\209\130\209\140 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if testQ.marshF[l]==math.modf(o/2)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \208\191\208\190\208\187\208\190\208\178\208\184\208\189\209\131 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if testQ.marshF[l]==math.modf((o/4)*3)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \209\130\209\128\208\184 \209\135\208\181\209\130\208\178\208\181\209\128\209\130\208\184 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if tonumber(o)==tonumber(l)then SendChatMessage("\208\156\208\176\209\128\209\136\209\128\209\131\209\130 \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")if marshruT~=nil then for y=1,9999,1 do if marshruT[y]~=nil then marshruT[y]:Hide()end end end marshruT=nil testQ["\209\129\209\130\208\176\209\128\209\130"]=nil testQ.num=nil testQ.marshF=nil if y=="\101\118\079\048\049\048\050"then testQ.evO0102=true testQ.startChern=nil end if y=="\101\118\079\048\050\048\051"then testQ.evO0203=true testQ.startChern=nil end if y=="\101\118\079\048\051\048\052"then testQ.evO0304=true testQ.startChern=nil end if y=="\101\118\079\048\052\048\053"then testQ.evO0405=true testQ.startChern=nil end if y=="\101\118\079\048\053\048\054"then testQ.evO0506=true testQ.startChern=nil end if y=="\101\118\079\048\054\048\055"then testQ.evO0607=true testQ.startChern=nil end if y=="\101\118\079\048\055\048\056"then testQ.evO0708=true testQ.startChern=nil end if y=="\101\118\079\048\056\048\057"then testQ.evO0809=true testQ.startChern=nil end if y=="\101\118\079\048\057\049\048"then testQ.evO0910=true testQ.startChern=nil end if y=="\101\118\079\049\048\049\049"then testQ.evO1011=true testQ.startChern=nil end if y=="\101\118\079\049\049"then testQ.evO11=true testQ.startChern=nil end if y=="\101\118\079\049\050"then testQ.evO12=true testQ.startChern=nil end if y=="\101\118\079\049\051"then testQ.evO13=true testQ.startChern=nil end if y=="\101\118\079\049\052"then testQ.evO14=true testQ.startChern=nil end testQ.start=nil end end else testQ.schet[l]=0 end end end end end end function testKontLok(y)local E=GetCurrentMapContinent()E=tostring(E)local u=GetCurrentMapZone()u=tostring(u)local g local W,L=GetPlayerMapPosition("\112\108\097\121\101\114")local l,o local x=GetMapInfo()if x=="\082\097\103\101\102\105\114\101"then E="\057\057"u="\049"end if mapTables~=nil then if mapTables[y]~=nil then for E,u in pairs(mapTables[y])do if type(E)=="\115\116\114\105\110\103"then l=E end for y,E in pairs(mapTables[y][E])do if type(y)=="\115\116\114\105\110\103"then o=y end end end if tostring(u)==tostring(o)then if y~=nil then if mapTables[y]~=nil then if l==E then if mapTables[y][E][u]~=nil then if o==u then g=sqrt((W-mapTables[y][E][u]["\049"].x)^2+(L-mapTables[y][E][u]["\049"].y)^2)return g end end end end end end end end end function startFchern(y,E,u)E=tostring(E)u=tostring(u)if krt[E]==true and krt[u]==true then testQ.start=y testQ["\209\129\209\130\208\176\209\128\209\130"]=0 testQ[y]="\209\129\209\130\208\176\209\128\209\130"marshruT={}end end function testFchern(y,E,u)E=tostring(E)u=tostring(u)local g,W if testQ[y]==nil then for E,u in pairs(mapTables[y])do if type(E)=="\115\116\114\105\110\103"then g=E end for y,E in pairs(mapTables[y][g])do if type(y)=="\115\116\114\105\110\103"then W=y end end end if mapTables.lokRasstoyanie[tostring(g)]~=nil then if mapTables.lokRasstoyanie[tostring(g)][tostring(W)]~=nil then if testKontLok(y)~=nil then if tonumber(testKontLok(y))<=tonumber(mapTables.lokRasstoyanie[tostring(g)][tostring(W)])*3 then startFchern(y,E,u)testQ.startChern=y end end end end end end function printPar(y)local E={}local u for y,u in pairs(y)do if y~=nil then table.insert(E,y)end end u=table.concat(E," ")return u end function otladka(E,u,g,W,L,l,o)local x numF=tonumber(E)if numF==1 then if u=="\116\101\115\116\081"then x=testQ end end if numF==2 then if u=="\116\101\115\116\081"then x=testQ[g]end end if numF==3 then if u=="\116\101\115\116\081"then x=testQ[g][W]end end if numF==4 then if u=="\116\101\115\116\081"then x=testQ[g][W][L]end end if numF==5 then if u=="\116\101\115\116\081"then x=testQ[g][W][L][l]end end if numF==6 then if u=="\116\101\115\116\081"then x=testQ[g][W][L][l][o]end end x=type(x)y=x return x,y end function tabellaFind(y,E)local u=1 while y[u]do print(E)print(y[u])if E==y[u]then return 1 end u=u+1 end return nil end function krtChernGetXY(E)E=tostring(E)for y,E in pairs(krt.chernila[E])do kont=y end for y,E in pairs(krt.chernila[E][kont])do lok=y end for E,u in pairs(krt.chernila[E][kont][lok])do if E=="\120"then x=u end if E=="\121"then y=u end if E=="\109\115\103"then m=u end end return kont,lok,x,y,m end function mapQuest(E)E=tostring(E)for y,E in pairs(testQ.mapQuest[E])do kont=y end for y,E in pairs(testQ.mapQuest[E][kont])do lok=y end for E,u in pairs(testQ.mapQuest[E][kont][lok])do if E=="\120"then x=u end if E=="\121"then y=u end if E=="\109\115\103"then m=u end if E=="\099\101\108"then c=u end end return kont,lok,x,y,m,c end function mapQuestP(y)y=tostring(y)testQ.mapQuest.podskazkiRez={}for y,E in pairs(testQ.mapQuest[y])do kont=y end for y,E in pairs(testQ.mapQuest[y][kont])do lok=y end for E,u in pairs(testQ.mapQuest[y][kont][lok])do if E=="\112\111\100\115\107\097\122\107\105"then for y,E in pairs(testQ.mapQuest[y][kont][lok].podskazki)do testQ.mapQuest.podskazkiRez[y]=E end end end end function chern1P(y)y=tostring(y)krt.chernila.podskazkiRez={}for y,E in pairs(krt.chernila[y])do kont=y end for y,E in pairs(krt.chernila[y][kont])do lok=y end for E,u in pairs(krt.chernila[y][kont][lok])do if E=="\112\111\100\115\107\097\122\107\105"then for y,E in pairs(krt.chernila[y][kont][lok].podskazki)do krt.chernila.podskazkiRez[y]=E end end end end function tabellaEnStr(y,E)local u,g,W,L,l,o y=tostring(y)E=tostring(E)if testQ.chD==nil then testQ.chD={}end if testQ.chD[tostring(y)]==nil then W="\048"for y,E in pairs(krt.chernila[y])do l=y end for y,E in pairs(krt.chernila[y][l])do o=y end u=tablelength(krt.chernila[y][l][o].podskazki)for u=1,u,1 do L=tostring(u)if g==nil then g=L..(" "..(txtXor(krt.chernila[y][l][o].podskazki[L]).."\n"))else g=g..(L..(" "..(txtXor(krt.chernila[y][l][o].podskazki[L]).."\n")))end W=tonumber(W)W=W+1 W=tostring(W)if W==E then break end end else for y,E in pairs(krt.chernila[y])do l=y end for y,E in pairs(krt.chernila[y][l])do o=y end g=y.." \208\178\209\139\208\191\208\190\208\187\208\189\208\181\208\189\208\190\n"W=tablelength(krt.chernila[y][l][o].podskazki)end return g,W end function txtXor(y)local E=y:utf8sub(1,3)local u local g if E~="\035\035\035"then u=string.utf8len(y)g="\035\035\035"for E=1,u,1 do g=g..string.format("\037\048\051\100",alfabet(string.utf8sub(y,E,E)))end end if E=="\035\035\035"then g=alfabetC(tonumber(string.sub(y,4,6)),1)for E=7,#y,3 do g=g..alfabetC(tonumber(string.sub(y,E,E+2)),1)end end return g end bcsQuickFrame={}function createQuickHtmlFrame(y,E,u)local g=GetTime()bcsQuickFrame[u]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)bcsQuickFrame[u]:SetSize(222,222)bcsQuickFrame[u]:SetFrameStrata("\072\073\071\072")bcsQuickFrame[u]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",33,E)bcsQuickFrame[u]:SetBackdropColor(0,103,51,1)bcsQuickFrame[u]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",32)bcsQuickFrame[u]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\057\048\101\101\057\048"..(y.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))end dmG={}function dmgText(y,E,u,g,W)if dmG[u]==nil then dmG[u]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",E)else dmG[u]:Show()end dmG[u]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG[u]:ClearAllPoints()dmG[u]:SetBackdropColor(0,103,51,1)dmG[u]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")if y~=""then if tonumber(y)<=9999 then dmG[u]:SetSize(48,48)end if tonumber(y)>9999 then dmG[u]:SetSize(54,48)end if tonumber(y)<=9999 then dmG[u]:SetPoint("\067\069\078\084\069\082",E,"\067\069\078\084\069\082",5,-10)end if tonumber(y)>9999 then dmG[u]:SetPoint("\067\069\078\084\069\082",E,"\067\069\078\084\069\082",1,-10)end end dmG[u]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(W..(y.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end dmG1={}function dmgText1(y,E,u,g,W)if dmG1[u]==nil then dmG1[u]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",E)dmG1[u]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG1[u]:ClearAllPoints()dmG1[u]:SetBackdropColor(0,103,51,1)dmG1[u]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end if y~=""then if tonumber(y)<=9999 then dmG1[u]:SetSize(48,48)end if tonumber(y)>9999 then dmG1[u]:SetSize(54,48)end if tonumber(y)<=9999 then dmG1[u]:SetPoint("\067\069\078\084\069\082",E,"\067\069\078\084\069\082",5,-10)end if tonumber(y)>9999 then dmG1[u]:SetPoint("\067\069\078\084\069\082",E,"\067\069\078\084\069\082",1,-10)end end dmG1[u]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(W..(y.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end dmG2={}function dmgText2(y,E,u,g,W)if dmG2[u]==nil then dmG2[u]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",E)dmG2[u]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG2[u]:ClearAllPoints()dmG2[u]:SetBackdropColor(0,103,51,1)dmG2[u]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end if y~=nil and y~=""then if tonumber(y)<=9999 then dmG2[u]:SetSize(48,48)end if tonumber(y)>9999 then dmG2[u]:SetSize(54,48)end if tonumber(y)<=9999 then dmG2[u]:SetPoint("\067\069\078\084\069\082",E,"\067\069\078\084\069\082",5,-10)end if tonumber(y)>9999 then dmG2[u]:SetPoint("\067\069\078\084\069\082",E,"\067\069\078\084\069\082",1,-10)end end if y~=nil then dmG2[u]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(W..(y.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end end rtnText={}function rtnTextF(y,E,u)if u=="\115\104\111\119"then if rtnText[E]==nil then rtnText[E]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)rtnText[E]:SetSize(415,396)rtnText[E]:SetFrameStrata("\084\079\079\076\084\073\080")rtnText[E]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",5,-55)rtnText[E]:SetBackdropColor(0,0,0,0)if tonumber(string.utf8len(y))<200 then rtnText[E]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",33)elseif tonumber(string.utf8len(y))>200 and tonumber(string.utf8len(y))<300 then rtnText[E]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",27)elseif tonumber(string.utf8len(y))>=400 then rtnText[E]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",16)end end rtnText[E]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\048\048\048\048\048\048"..(y.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))rtnText[E]:Show()else if rtnText[E]~=nil then rtnText[E]:Hide()end end end function versFail(y)if VerF==nil then VerF=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)end VerF:SetSize(1111,888)VerF:SetFrameStrata("\072\073\071\072")if testQ.VerF==nil then testQ.VerF=600 end VerF:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",testQ.VerF,-355)VerF:SetBackdropColor(0,103,51,1)VerF:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",y+10)VerF:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\102\102\048\048\048\048\208\158\208\145\208\157\208\158\208\146\208\152 \208\144\208\148\208\148\208\158\208\157\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")end function marshrut(y,E)local u=y-1 local g=y+1 local W=y+2 local L=y-2 local l=y+3 local o=y-3 if testQ.start~="\101\118\079\051"then if marshruT~=nil then if marshruT[y]==nil then marshruT[y]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\109\097\114\115\104\114\117\116",UIParent)marshruT[y]:SetSize(222,222)marshruT[y]:SetFrameStrata("\072\073\071\072")marshruT[y]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",333,111)marshruT[y]:SetBackdropColor(0,103,51,1)marshruT[y]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",32)marshruT[y]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\057\048\101\101\057\048"..(y..(" \208\184\208\183 "..(tostring(E).."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))))end if marshruT[u]~=nil then marshruT[u]:Hide()marshruT[u]=nil end if marshruT[g]~=nil then marshruT[g]:Hide()marshruT[g]=nil end if marshruT[W]~=nil then marshruT[W]:Hide()marshruT[W]=nil end if marshruT[L]~=nil then marshruT[L]:Hide()marshruT[L]=nil end if marshruT[l]~=nil then marshruT[l]:Hide()marshruT[l]=nil end if marshruT[o]~=nil then marshruT[o]:Hide()marshruT[o]=nil end end end end function showRB(y)if debuffChkB==nil then debuffChkB={}end if pokazat==1 and btn[1]~=nil then for y=1,15,1 do if btn[y]~=nil then btn[y]:Hide()end end btn[991]:Show()if tonumber(testQ.mioFldLvl)~=.5 and(tonumber(testQ.mioFldLvl)~=.9 and tonumber(testQ.mioFldLvl)~=nil)then btn[14]:Show()end myCheckButton1:Show()myCheckButton2:Show()myCheckButton3:Show()myCheckButton4:Show()myCheckButton5:Show()myCheckButton6:Show()myCheckButton7:Show()btn[998]:Show()btn[997]:Show()for E=1,20,1 do local u,g,W,L,l,o,x,K=UnitDebuff("\112\108\097\121\101\114",E)if u~=nil then debuffChkB[u]=createCheckbutton(UIParent,150,-20*E+230,u)debuffChkB[u].tooltip="\208\161\208\186\209\128\209\139\208\178\208\176\209\130\209\140 \208\184\208\186\208\190\208\189\208\186\209\131 "..u debuffChkB[u]:SetScript("\079\110\067\108\105\099\107",function()if testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB==nil then testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB={}end if testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[u]=="\068\105\115\097\098\108\101"or testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[u]==nil then testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[u]="\069\110\097\098\108\101"debuffChkB[u]:SetChecked(true)elseif testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[u]=="\069\110\097\098\108\101"then testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[u]="\068\105\115\097\098\108\101"debuffChkB[u]:SetChecked(false)end end)end end pokazat=0 pokazatChk=1 elseif pokazat==0 then btn[991]:Hide()if tonumber(testQ.mioFldLvl)~=.5 and(tonumber(testQ.mioFldLvl)~=.9 and tonumber(testQ.mioFldLvl)~=nil)then for y=1,15,1 do if btn[y]~=nil then btn[y]:Show()end end if btn[ii]~=nil then if testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]=="\057\057\057\057"then btn[1]:Show()btn[2]:Hide()end if testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]~="\057\057\057\057"then btn[1]:Hide()btn[2]:Show()end end end testQ.lvlProv=nil myCheckButton1:Hide()myCheckButton2:Hide()myCheckButton3:Hide()myCheckButton4:Hide()myCheckButton5:Hide()myCheckButton6:Hide()myCheckButton7:Show()for y,E in pairs(debuffChkB)do if debuffChkB[y]~=nil then debuffChkB[y]:Hide()end end btn[998]:Hide()btn[997]:Hide()pokazat=1 pokazatChk=0 end end function marSh()local y=GetCurrentMapContinent()local E=GetCurrentMapZone()local u,g=GetPlayerMapPosition("\112\108\097\121\101\114")local W y=tostring(y)E=tostring(E)local L=GetMapInfo()if L=="\082\097\103\101\102\105\114\101"then y="\057\057"E="\049"end if marsh==nil then marsh={}end if marsh[y]==nil then marsh[y]={}end if marsh[y][E]==nil then marsh[y][E]={}end local l=tablelength(marsh[y][E])l=tostring(l+1)marsh[y][E][l]={}testQ.marshK=y testQ.marshL=E testQ.marshN=l marsh[y][E][l].x=string.format("\037\046\051\102",u)marsh[y][E][l].y=string.format("\037\046\051\102",g)print(l)end function resObj1(y,E,u)if krt==nil then krt={}end if krt.podskazki==nil then krt.podskazki=1 end if testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]==nil then testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]={}testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=0 end if E==u then if mioFld~=nil then if mioFld[E]~=nil then if mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"]~=nil then if tonumber(testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"])<=tonumber(krt.podskazki)then if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\104\115"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\115"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\120"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\115\120"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\099"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\097\115"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\099"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\115"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\120"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\099"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\112"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\122"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\118"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\109\102"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\109\048"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\108\120"and mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\108\112")))))))))))))))then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\102"then SendAddonMessage("\116\114\101\101 "..tostring(y),E,"\103\117\105\108\100")end mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\109\048"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\104\115"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<9999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=9999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\116\122"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\108\120"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\122\099"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<9999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=9999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\097\115"or mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\098\099"or mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\098\115"or mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\098\120"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<14999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=14999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\122\115"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\116\099"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<4999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=4999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\122\120"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\115\120"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end else if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\104\115"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\115"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\120"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\115\120"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\099"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\097\115"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\120"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\099"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\115"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\099"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\112"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\122"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\118"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\109\102"and(mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\109\048"and mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\108\120"))))))))))))))then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+5 else if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\102"then SendAddonMessage("\116\114\101\101 "..tostring(y),E,"\103\117\105\108\100")end mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\104\115"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<9999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+5 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=9999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\108\120"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+5 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\116\122"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+5 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\109\048"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+5 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\122\099"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<9999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+5 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=9999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\097\115"or mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\098\099"or mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\098\115"or mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\098\120"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<14999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+5 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=14999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\122\115"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+5 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\116\099"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<4999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+5 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=4999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\122\120"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+5 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[E]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\115\120"then if tonumber(mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]+5 else mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end end SendAddonMessage("\114\101\115\079\098\106 "..(y..(" "..mioFld[E]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])),u,"\103\117\105\108\100")end end end else if mioFld~=nil then if mioFld[u]~=nil then if mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"]~=nil then if tonumber(testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"])<=tonumber(krt.podskazki)then if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\104\115"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\115"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\120"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\115\120"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\099"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\097\115"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\099"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\115"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\120"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\099"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\112"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\122"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\118"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\109\048"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\109\102"and mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\108\120"))))))))))))))then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\104\115"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<9999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=9999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\108\120"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\116\122"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\109\048"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\122\099"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<9999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=9999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\097\115"or mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\098\099"or mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\098\115"or mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\098\120"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<14999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=14999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\122\115"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\122\120"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\116\099"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<4999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=4999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\115\120"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end else if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\104\115"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\115"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\120"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\115\120"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\099"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\097\115"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\099"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\115"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\098\120"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\099"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\122\112"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\122"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\116\118"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\109\048"and(mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\109\102"and mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]~="\108\120"))))))))))))))then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\104\115"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<9999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=9999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\108\120"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\116\122"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\109\048"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\116\099"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<4999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=4999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\097\115"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<14999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=14999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\122\115"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\122\120"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=19999 end end if mioFld[u]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(y)]=="\115\120"then if tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local E=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if E==9 then mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=tonumber(mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)]=29999 end end end SendAddonMessage("\114\101\115\079\098\106 "..(y..(" "..mioFld[u]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(y)])),u,"\103\117\105\108\100")end end end end end function gKam(y,E)local u=nil if tonumber(E)==500 then for E=1,100,1 do if mioFld1[y]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(E)]=="\115\107"then if u==nil then u=1 else u=u+1 end end end if u==nil then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\048","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif u==1 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\049","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif u==2 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\050","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif u==3 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\051","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif u==4 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\052","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif u==5 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\053","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")end end end function bdf(y)if testQ==nil then testQ={}end if testQ.myNome==nil then testQ.myNome={}end if testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"]==nil then testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"]={}end if testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB==nil then testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB={}end if DebuffButton1~=nil then if tonumber(testQ.buffX)~=nil and tonumber(testQ.buffX)~=0 then local E,u,g,W=DebuffButton1:GetPoint()local L,l,o,x=btn[991]:GetPoint()if W~=x then local E,u=DebuffButton1:GetSize()local g=UIParent:GetSize()/2 j=1 for u=1,DEBUFF_MAX_DISPLAY,1 do if AuraButton_Update("\068\101\098\117\102\102\066\117\116\116\111\110",u,"\072\065\082\077\070\085\076")then local W,L,l,o,x,K,m,b=UnitDebuff("\112\108\097\121\101\114",u)local J=_G["\068\101\098\117\102\102\066\117\116\116\111\110"..u]if J~=nil and(testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[W]==nil or testQ[y]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[W]=="\068\105\115\097\098\108\101")then J:ClearAllPoints()if tonumber(testQ.buffX)<g then J:SetPoint("\066\079\084\084\079\077\076\069\070\084",UIParent,"\066\079\084\084\079\077\076\069\070\084",tonumber(testQ.buffX)+E*j,testQ.buffY)j=j+1 else J:SetPoint("\066\079\084\084\079\077\076\069\070\084",UIParent,"\066\079\084\084\079\077\076\069\070\084",tonumber(testQ.buffX)-E*j,testQ.buffY)j=j+1 end else if J~=nil and J:IsVisible()then J:Hide()end end end end end if testQ.buffX==0 then testQ.buffX=nil end end end end function gtest()gTest=nil gTest={}for y=1,50,1 do local E,u,g,W,L,l,o=GetWhoInfo(y)if u==""then if W~="\208\148\209\128\208\181\208\189\208\181\208\185"and(W~="\208\157\208\190\209\135\208\189\208\176\209\143 \209\141\208\187\209\140\209\132\208\184\208\185\208\186\208\176"and(W~="\208\167\208\181\208\187\208\190\208\178\208\181\208\186"and(W~="\208\157\208\190\209\135\208\189\208\190\208\185 \209\141\208\187\209\140\209\132"and(W~="\208\147\208\189\208\190\208\188"and W~="\208\148\208\178\208\190\209\128\209\132"))))then table.insert(gTest,E)end end end end function ns_q5()ns_q5Test=nil ns_q5Test={}for y=1,50,1 do local E,u,g,W,L,l,o=GetWhoInfo(y)if u==""then table.insert(ns_q5Test,E)end end end function closeFld()for y=1,100,1 do fBtn[y]:Hide()end for y=1,100,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[y]~=nil then if y==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[y]:Hide()end end end end btn[989]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end function hX()quesT("\104\105\100\101")okNo:configure(1,"\104\105\100\101")rtnTextF("\102\100\115\097",1,"\104\105\100\101")for y=1,100,1 do fBtn[y]:Hide()end if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end if okNo~=nil then okNo[1]:Hide()okNo[2]:Hide()end btn[989]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end function showFld(y,E)local u local g local W local L if mBtn[1]~=nil then if mBtn[1]:IsVisible()then L=1 end end if dBtn[1]~=nil then if dBtn[1]:IsVisible()then L=1 end end if not fBtn[1]:IsVisible()and L~=1 then if not GuildFrameLFGButton:GetChecked()or y=="\049"then if y=="\048"then u=GuildFrame.selectedName else u=E end btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",fBtn[10],"\084\079\080\082\073\071\072\084",1,1)for y=1,GetNumGuildMembers(true),1 do local L,l,o,x,K,m,j,b,J,I,O,G,d,R,T,r,D=GetGuildRosterInfo(y)if u~=E then if L==u then g=string.sub(b,1,1)W=string.sub(b,2,2)if b~=""and(g~="\049"and g~="\048")then testQ.fldLvl=tonumber(g)testQ.qNum=string.sub(b,8,8)testQ.qDay=string.sub(b,6,7)elseif g=="\049"then testQ.fldLvl=.9 testQ.qNum=string.sub(b,8,8)testQ.qDay=string.sub(b,6,7)elseif g=="\048"then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 elseif g==""then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 end if W==nil then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 end end if L==E then g=string.sub(b,1,1)if b~=""and(g~="\049"and g~="\048")then testQ.mioFldLvl=string.sub(b,1,1)elseif g=="\049"then testQ.mioFldLvl=.9 elseif g=="\048"then testQ.mioFldLvl=.5 elseif g==""then testQ.mioFldLvl=.5 end end else if L==E then g=string.sub(b,1,1)W=string.sub(b,2,2)if b~=""and(g~="\049"and g~="\048")then testQ.mioFldLvl=string.sub(b,1,1)testQ.fldLvl=testQ.mioFldLvl testQ.qNum=string.sub(b,8,8)testQ.qDay=string.sub(b,6,7)elseif g=="\049"then testQ.mioFldLvl=.9 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=string.sub(b,8,8)testQ.qDay=string.sub(b,6,7)elseif g=="\048"then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 elseif g==""then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 end if W==nil then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 end end end if tonumber(testQ.mioFldLvl)==0 then testQ.mioFldLvl=.5 end if tonumber(testQ.fldLvl)==0 then testQ.fldLvl=.5 end end testQ.fRand1=math.random(1,1000000)testQ.sign=y SendAddonMessage("\115\104\077\070\108\100 "..testQ.fRand1,u..(" "..E),"\103\117\105\108\100")FriendsFrame:Hide()else local y=tablelength(risPet)for y=1,100,1 do if risPet[y]~=nil then risPetShow(y,"\104\105\100\101","")end end for y=1,100,1 do fBtn[y]:Hide()end btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end for y=1,100,1 do if dmG[y]~=nil and dmG[y]:IsVisible()then dmG[y]:Hide()end end for y=1,3,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[y]~=nil then if y==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[y]:Hide()end end end end for y=101,103,1 do if dmG[y]~=nil then dmG[y]:Hide()end end if tonumber(testQ.sign)==0 then FriendsFrame:Show()end testQ.sign=nil testQ.fRandD1nome=nil end else local y=tablelength(risPet)for y=1,100,1 do if risPet[y]~=nil then risPetShow(y,"\104\105\100\101","")end end for y=1,100,1 do fBtn[y]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end for y=1,100,1 do if dmG[y]~=nil and dmG[y]:IsVisible()then dmG[y]:Hide()end end for y=1,100,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[y]~=nil then if y==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[y]:Hide()end end end end for y=101,103,1 do if dmG[y]~=nil then dmG[y]:Hide()end end if tonumber(testQ.sign)==0 then FriendsFrame:Show()end if tostring(testQ.sign)=="\049"then btn[989]:Hide()end testQ.sign=nil end end function qLvl33c1()local y local E local u local g local W local L local l W=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(W)L=eMotC[W]["\208\191\208\190\208\184\209\129\208\186"]l=eMotC[W]["\208\190\209\130\208\178\208\181\209\130"]y=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]E=npcListC1[y]["\208\184\208\188\209\143"]y=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]u=npcListC1[y]["\208\184\208\188\209\143"]while true do if E==u then y=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]u=npcListC1[y]["\208\184\208\188\209\143"]else break end end y=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]g=npcListC1[y]["\208\184\208\188\209\143"]while true do if g==u or g==E then y=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]g=npcListC1[y]["\208\184\208\188\209\143"]else break end end return W,E,u,g,L,l end function qLvl33c2()local y local E local u local g local W local L local l W=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(W)L=eMotC[W]["\208\191\208\190\208\184\209\129\208\186"]l=eMotC[W]["\208\190\209\130\208\178\208\181\209\130"]y=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]E=npcListC2[y]["\208\184\208\188\209\143"]y=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]u=npcListC2[y]["\208\184\208\188\209\143"]while true do if E==u then y=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]u=npcListC2[y]["\208\184\208\188\209\143"]else break end end y=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]g=npcListC2[y]["\208\184\208\188\209\143"]while true do if g==u or g==E then y=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]g=npcListC2[y]["\208\184\208\188\209\143"]else break end end return W,E,u,g,L,l end function qLvl33c3()local y local E local u local g local W local L local l W=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(W)L=eMotC[W]["\208\191\208\190\208\184\209\129\208\186"]l=eMotC[W]["\208\190\209\130\208\178\208\181\209\130"]y=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]E=npcListC3[y]["\208\184\208\188\209\143"]y=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]u=npcListC3[y]["\208\184\208\188\209\143"]while true do if E==u then y=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]u=npcListC3[y]["\208\184\208\188\209\143"]else break end end y=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]g=npcListC3[y]["\208\184\208\188\209\143"]while true do if g==u or g==E then y=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]g=npcListC3[y]["\208\184\208\188\209\143"]else break end end return W,E,u,g,L,l end function rndTblc(y)local E={}for y in pairs(y)do table.insert(E,y)end return y[E[math.random(#E)]]end function htimer(y)local E=0 for u=1,100,1 do if mioFld1[y]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(u)]=="\116\111"then E="\116\111"end end if testQ[y].dTimer[30]==nil then testQ[y].dTimer[30]=26000 end if testQ[y].dTimer[tonumber(date("\037\100"))-1]==nil then testQ[y].dTimer[tonumber(date("\037\100"))-1]=26000 end if tonumber(testQ.mioFldLvl)==.5 or tonumber(testQ.mioFldLvl)==.9 then if testQ[y].hTimer==nil then if testQ[y].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[y].dTimer[30]==nil then if E~="\116\111"then testQ[y].hTimer=50400 else testQ[y].hTimer=26000 end else if tonumber(date("\037\100"))~=1 then if testQ[y].dTimer[tonumber(date("\037\100"))-1]>10800 then if E~="\116\111"then testQ[y].hTimer=testQ[y].dTimer[tonumber(date("\037\100"))-1]else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(testQ[y].dTimer[tonumber(date("\037\100"))-1])/1.5))end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end else if testQ[y].dTimer[30]~=nil and testQ[y].dTimer[30]>10800 then if E~="\116\111"then testQ[y].hTimer=testQ[y].dTimer[30]else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(testQ[y].dTimer[30])/1.5))end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==2 then if testQ[y].hTimer==nil then if testQ[y].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[y].dTimer[30]==nil then if E~="\116\111"then testQ[y].hTimer=25200 else testQ[y].hTimer=16000 end else if tonumber(date("\037\100"))~=1 then if testQ[y].dTimer[tonumber(date("\037\100"))-1]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/2))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/2))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end else if testQ[y].dTimer[30]~=nil and testQ[y].dTimer[30]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/2))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/2))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==3 then if testQ[y].hTimer==nil then if testQ[y].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[y].dTimer[30]==nil then if E~="\116\111"then testQ[y].hTimer=14500 else testQ[y].hTimer=10000 end else if tonumber(date("\037\100"))~=1 then if testQ[y].dTimer[tonumber(date("\037\100"))-1]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/3))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/3))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end else if testQ[y].dTimer[30]~=nil and testQ[y].dTimer[30]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/3))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/3))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==4 then if testQ[y].hTimer==nil then if testQ[y].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[y].dTimer[30]==nil then if E~="\116\111"then testQ[y].hTimer=11000 else testQ[y].hTimer=8000 end else if tonumber(date("\037\100"))~=1 then if testQ[y].dTimer[tonumber(date("\037\100"))-1]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/4))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/4))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end else if testQ[y].dTimer[30]~=nil and testQ[y].dTimer[30]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/4))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/4))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==5 then if testQ[y].hTimer==nil then if testQ[y].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[y].dTimer[30]==nil then if E~="\116\111"then testQ[y].hTimer=10500 else testQ[y].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[y].dTimer[tonumber(date("\037\100"))-1]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/5))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/5))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end else if testQ[y].dTimer[30]~=nil and testQ[y].dTimer[30]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/5))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/5))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==6 then if testQ[y].hTimer==nil then if testQ[y].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[y].dTimer[30]==nil then if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[y].dTimer[tonumber(date("\037\100"))-1]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/6))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/6))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end else if testQ[y].dTimer[30]~=nil and testQ[y].dTimer[30]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/6))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/6))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==7 then if testQ[y].hTimer==nil then if testQ[y].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[y].dTimer[30]==nil then if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[y].dTimer[tonumber(date("\037\100"))-1]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/7))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/7))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end else if testQ[y].dTimer[30]~=nil and testQ[y].dTimer[30]>10800 then if E~="\116\111"then testQ[y].hTimer=tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/7))if testQ[y].hTimer<10800 then testQ[y].hTimer=10800 end else testQ[y].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[y].dTimer[tonumber(date("\037\100"))-1]/7))/1.5))if testQ[y].hTimer<7000 then testQ[y].hTimer=7000 end end else if E~="\116\111"then testQ[y].hTimer=10800 else testQ[y].hTimer=7000 end end end end end end SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..y,testQ[y].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..y,testQ[y].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..y,testQ[y].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")end function ml()if BrowseBuyoutButton~=nil then if aucBtn==nil then aucBtn=CreateFrame("\066\117\116\116\111\110",nil,UIParent,"")aucBtn:SetFrameStrata("\084\079\079\076\084\073\080")aucBtn:SetSize(222,32)aucBtn:SetPoint("\067\069\078\084\069\082",BrowseBidButton,"\067\069\078\084\069\082",22,0)aucBtn:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\097\117\107\046\116\103\097")aucBtn:Hide()end name,texture,count,quality,canUse,level,levelColHeader,minBid,minIncrement,buyoutPrice,bidAmount,highBidder,owner,saleStatus,itemId,hasAllInfo=GetAuctionItemInfo("\108\105\115\116",tonumber(GetSelectedAuctionItem("\108\105\115\116")))if name=="\208\158\208\177\209\139\209\135\208\189\208\190\208\181 \208\191\208\184\209\129\209\140\208\188\208\190"then aucBtn:Show()if highBidder=="\208\165\208\181\209\132\208\181"then aucBtn:Hide()end else if aucBtn~=nil then aucBtn:Hide()end end end if Atr_Buy1_Button~=nil and Atr_Buy1_Button:IsVisible()then if aucBtn==nil then aucBtn=CreateFrame("\066\117\116\116\111\110",nil,UIParent,"")aucBtn:SetFrameStrata("\084\079\079\076\084\073\080")aucBtn:SetSize(222,32)aucBtn:SetPoint("\067\069\078\084\069\082",BrowseBidButton,"\067\069\078\084\069\082",22,0)aucBtn:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\097\117\107\046\116\103\097")aucBtn:Hide()end if Atr_Search_Box:IsVisible()and Atr_Search_Box:GetText()=="\208\158\208\177\209\139\209\135\208\189\208\190\208\181 \208\191\208\184\209\129\209\140\208\188\208\190"then aucBtn:Show()aucBtn:SetSize(422,32)else if aucBtn~=nil then aucBtn:Hide()end end end end function diffT(y,E)for u=1,100,1 do if y[u]~=E[u]then return false end end return true end function antc(y)shablon="\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"myB=string.find(shablon,(tostring(y)):sub(1,1),1,true)if tonumber(#tostring(y))>=2 then for E=2,#tostring(y),1 do myB=myB..string.find(shablon,(tostring(y)):sub(E,E),1,true)end end return myB end function ochered(y,E,u,g,W,L,l,o,x,K)if y~="\208\156\208\190\209\128"then local m=UnitClass("\112\108\097\121\101\114")local j=0 local b,J,I,O for E=1,24,1 do if u==1 then b,__,__,__,__,J,I,O=UnitDebuff("\116\097\114\103\101\116",E)if O=="\112\108\097\121\101\114"then if b=="\208\158\208\183\208\189\208\190\208\177"then if I~=nil and tonumber(I)-tonumber(GetTime())<=5 then testQ.o=1 else testQ.o=nil end end if b=="\208\154\209\128\208\190\208\178\208\176\208\178\208\176\209\143 \209\135\209\131\208\188\208\176"then if I~=nil and tonumber(I)-tonumber(GetTime())<=5 then testQ.c=1 else testQ.c=nil end end end end if g==1 then b=UnitBuff("\112\108\097\121\101\114",E)end if b~=nil then if b==y then j=1 end end end local G=UnitClass("\112\108\097\121\101\114")if G=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then if testQ.o==1 and testQ.c==1 then local y for E,u in pairs(testQ.skills)do if testQ.skills[E]~=nil then if testQ.skills[E]=="\208\156\208\190\209\128"then y=1 end end end if y~=1 then table.insert(testQ.skills,E,"\208\156\208\190\209\128")end end end for E,u in pairs(testQ.skills)do if testQ.skills[E]==y then j=1 end end local d=0 if o~=nil then d=d+1 end if x~=nil then d=d+1 end if K~=nil then d=d+1 end local R,T,r,D=GetSpellInfo(y)if D==nil then D=0 end if G=="\208\148\209\128\209\131\208\184\208\180"then D=30 end if L=="\109"then if UnitPower("\112\108\097\121\101\114")<D and(IsUsableSpell(y)and GetSpellCooldown(y)==0)then if j~=1 then if E==0 then table.insert(testQ.skills,E,y)end if E==1 then table.insert(testQ.skills,y)end end else for E,u in pairs(testQ.skills)do if testQ.skills[E]~=nil then if testQ.skills[E]==y then testQ.skills[E]=nil end end end end end local X,h,Q,Z=GetSpellInfo(y)if Z==nil then Z=0 end if L=="\098"then if UnitPower("\112\108\097\121\101\114")>=Z and(IsUsableSpell(y)and GetSpellCooldown(y)==0)then if j~=1 then if E==0 then table.insert(testQ.skills,1,y)end if E==1 then table.insert(testQ.skills,y)end else end else for E,u in pairs(testQ.skills)do if testQ.skills[E]~=nil then if testQ.skills[E]==y then testQ.skills[E]=nil end end end end end if W~=nil and(IsUsableSpell(y)and(GetSpellCooldown(y)==0 and l==nil))then if G=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then if y=="\208\159\209\128\208\176\208\178\208\181\208\180\208\189\208\190\208\181 \208\189\208\181\208\184\209\129\209\130\208\190\208\178\209\129\209\130\208\178\208\190"then if j~=1 then PlaySoundFile(W)end end else if y~="\208\146\208\187\208\176\209\129\209\130\209\140 \208\187\209\140\208\180\208\176"then PlaySoundFile(W)end end if G=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then if y=="\208\146\208\187\208\176\209\129\209\130\209\140 \208\187\209\140\208\180\208\176"then if j~=1 then end end else if y~="\208\159\209\128\208\176\208\178\208\181\208\180\208\189\208\190\208\181 \208\189\208\181\208\184\209\129\209\130\208\190\208\178\209\129\209\130\208\178\208\190"then PlaySoundFile(W)end end end if y=="\208\156\209\143\209\129\208\190\209\128\209\131\208\177\208\186\208\176"then if tonumber(GetComboPoints("\112\108\097\121\101\114",target))==1 and j~=1 then end end if l==1 then if UnitHealth("\112\108\097\121\101\114")<=tonumber(UnitHealthMax("\112\108\097\121\101\114"))/2 and GetSpellCooldown(y)==0 then table.insert(testQ.skills,E,y)if W~=nil then end else for E,u in pairs(testQ.skills)do if testQ.skills[E]~=nil then if testQ.skills[E]==y then testQ.skills[E]=nil end end end end end end end function partyFrameHide()for y=1,25,1 do local E=_G["\080\097\114\116\121\077\101\109\098\101\114\070\114\097\109\101"..y]if E~=nil and E:IsVisible()then E:Hide()end end end function bs(y)local E local u=UnitClass("\112\108\097\121\101\114")local g=UnitStat("\112\108\097\121\101\114",1)local W=UnitStat("\112\108\097\121\101\114",2)local L=UnitStat("\112\108\097\121\101\114",3)local l=UnitStat("\112\108\097\121\101\114",4)local o=UnitStat("\112\108\097\121\101\114",5)local x=GetSpellBonusHealing()local K=GetCombatRating(6)local m=GetCombatRating(9)local j=GetCombatRating(24)local b=GetCombatRating(2)local J=GetCombatRating(3)local I=GetCombatRating(4)local O=GetCombatRating(5)local G=GetManaRegen()local d=GetCombatRating(25)local R,T=UnitAttackPower("\112\108\097\121\101\114")local r=GetCombatRating(18)local D=R+T local X local h=0 if u=="\208\150\209\128\208\181\209\134"or u=="\208\150\209\128\208\184\209\134\208\176"then local y,u,g,W,L=GetTalentInfo(3,27)if L>=1 then E=(((((l+o*.5)+x*2)+K)+m*2)+G*.5)+r h=K.."\047\050\056\057\047\052\052\054"else E=((((l+o*1.5)+x*2)+m)+G*1.5)+r h=K.."\047\048"end end if u=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then local y,u,d,R,T=GetTalentInfo(1,26)local X,Q,Z,t,i=GetTalentInfo(2,26)local e,z,w,A,N=GetTalentInfo(3,26)if T>=1 then E=((((l*2+o)+x*1.5)+m)+G)+r*1.5 h=K.."\047\048"end if i>=1 then E=(((((((g+W)+L*2)+K)+j)+b*1.5)+J*1.5)+I*1.5)+O*1.5 h=K..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j.."\047\049\056\053"))))end if N>=1 then E=(((((g*2+W)+K)+m)+D)+r)+j h=K..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j.."\047\049\052\056"))))end end if u=="\208\146\208\190\208\184\208\189"then local y,u,l,o,x=GetTalentInfo(3,7)if x>=1 then E=(((((((g+W)+L*2)+K)+j)+b*1.5)+J*1.5)+I*1.5)+O*1.5 h=K..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j.."\047\049\054\052"))))else E=((((((g*2+W)+K)+m*1.5)+j)+d*2)+D)+r h=K..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j..("\047\050\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\049\052\048\048")))))))end end if u=="\208\148\209\128\209\131\208\184\208\180"then local u,I,O,R,T=GetTalentInfo(3,27)local X,Q,Z,t,i=GetTalentInfo(2,5)local e,z,w,A,N=GetTalentInfo(1,13)local c,q,Y,s,P=GetTalentInfo(2,9)if T>=1 or y=="\209\133\208\184\208\187"then E=((((l+o*1.5)+x*2)+r*1.5)+m)+G*1.5 h=K.."\047\048"end if i>=1 or y=="\208\188\208\181\208\180\208\178\208\181\208\180\209\140"then E=((((((((g+W*2)+L*2)+K)+m)+r*1.5)+j)+b*1.5)+J*2)+d h=K..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j..("\047\049\051\050\047\050\056\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\063\063")))))))end if N>=1 or y=="\209\129\208\190\208\178\208\176"then E=(((((l+o*.5)+x*2)+K)+m*2)+G*.5)+r h=K.."\047\050\054\051"end if P>=1 or y=="\208\186\208\190\209\130"then E=((((((g+W*2)+K)+m*1.5)+j)+d*2)+D)+r h=K..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j..("\047\049\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\049\052\048\048")))))))end end if u=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\208\186"or u=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\209\134\208\176"then E=((((((g+W*2)+K)+m)+d*2)+j)+D)+r h=K..("\047"..("\050\054\051"..("\047"..("\055\050\050"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j..("\047\049\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\049\052\048\048")))))))))end if u=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\208\186"or u=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\209\134\208\176"then E=(((((l+o*1.5)+x*2)+K)+m*1.5)+G*.5)+r*1.5 h=K..("\047"..("\050\056\057\047\052\052\054 "..("\208\165\208\176\209\129\209\130\058 "..(r.." \049\049\048\048\047\049\052\048\048"))))end if u=="\208\168\208\176\208\188\208\176\208\189"or u=="\208\168\208\176\208\188\208\176\208\189\208\186\208\176"then local y,u,L,b,J=GetTalentInfo(1,3)local I,O,R,T,X=GetTalentInfo(2,9)local Q,Z,t,i,e=GetTalentInfo(3,1)if J>=3 and X>=1 then i,i,i,i,J=GetTalentInfo(1,7)i,i,i,i,X=GetTalentInfo(2,11)end if J>=1 then E=(((l+x*2)+m)+K)+r*1.5 h=K.."\047\051\054\056"end if X>=1 then E=(((((((g+W*2)+K)+m*1.5)+d)+D)+r*1.5)+j)+x*.5 h=K..("\047"..("\050\051\050"..("\047"..("\051\054\056"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j.."\047\049\052\048"))))))end if e>=1 then E=((((l+o)+x*2)+m)+G*2)+r*2 h=K..("\047"..("\048"..(" \099\046\047\208\186\208\176\208\191\058 "..(r.."\047\049\050\054\057\047\050\049\048\048"))))end end if u=="\208\158\209\133\208\190\209\130\208\189\208\184\208\186"or u=="\208\158\209\133\208\190\209\130\208\189\208\184\209\134\208\176"then E=((((W*2+K)+m)+d*2)+D)+r h=K..("\047"..("\050\054\051"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\049\052\048\048"))))end if u=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then local y,u,l,o,x=GetTalentInfo(1,7)local I,O,G,R,T=GetTalentInfo(2,3)local r,X,Q,Z,t=GetTalentInfo(3,3)if x>=1 or T>=1 or t>=1 then E=(((((g+W)+L*2)+K)+j)+b*1.5)+J*1.5 h=K..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j.."\047\049\055\048\047\052\048\057"))))else E=(((((g*2+W)+K)+m)+j)+d)+D h=K..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(j..("\047\049\055\048"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(d.."\047\049\052\048\048")))))))end end if u=="\208\156\208\176\208\179"then E=((((l+o)+x*2)+K)+m*1.5)+r*1.5 h=K..("\047"..("\051\055\054 \209\133\208\176\209\129\209\130\047\208\186\208\176\208\191\058 "..(r..("\047\049\049\051\048 \208\154\209\128\208\184\209\130\047\208\186\208\176\208\191\058 "..(m.."\047\049\049\053\048\063\040\052\053\037\041")))))end if E~=nil then return string.format("\037\100",E)..(" \209\133\208\184\209\130\047\208\186\208\176\208\191\058 "..h)else SendChatMessage("\208\159\208\190\209\135\208\181\208\188\209\131 \209\130\208\190 \208\191\209\131\209\129\209\130\208\190\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\046 \208\175\058 "..u,"\079\070\070\073\067\069\082",nil,1)end end GameTooltip:HookScript("\079\110\083\104\111\119",function(y)local E=UnitClass("\112\108\097\121\101\114")local u=0 local g local W=0 local L=0 local l=0 local o=0 local x=0 local K=0 local m=0 local j=0 local b=0 local J=0 local I=0 local O=0 local G=0 local d=0 local R=0 local T=0 local r=0 local D=0 local X=0 local h=0 local Q=0 local Z=0 local t=0 local i=0 local e=0 local z=0 local w=0 local A=0 local N=0 local c local q=GetUnitName("\112\108\097\121\101\114")if testQ then if testQ[q]then if testQ[q].edaQuest~=nil then if testQ[q].edaQuest~=2 then if testQ.edaNum==nil then testQ.edaNome=_G.GameTooltipTextLeft1:GetText()testQ.edaNum=proverkaNaKolvoPredmetov(_G.GameTooltipTextLeft1:GetText())if testQ.edaNomeRez==nil then testQ.edaNomeRez={}end else if testQ.edaNome~=_G.GameTooltipTextLeft1:GetText()then testQ.edaNome=nil testQ.edaNum=nil else if testQ.edaNomeRez~=nil then if testQ.edaNum>proverkaNaKolvoPredmetov(_G.GameTooltipTextLeft1:GetText())then if testQ.edaNomeRez[_G.GameTooltipTextLeft1:GetText()]==nil then local y=math.random(1,10)if y~=1 then print("\208\164\209\131\044 \208\189\208\181\208\178\208\186\209\131\209\129\208\189\208\190\033")testQ.edaNomeRez[_G.GameTooltipTextLeft1:GetText()]=_G.GameTooltipTextLeft1:GetText()else local y=math.random(1,20)if y==100 then testQ[q].edaQuest=2 SendChatMessage("\208\157\208\176\208\185\208\180\208\181\208\189 \208\184\208\180\208\181\208\176\208\187\209\140\208\189\209\139\208\185 \208\186\208\190\209\128\208\188 \208\180\208\187\209\143 \208\191\208\181\209\130\208\176","\079\070\070\073\067\069\082",nil,1)else print("\208\146\209\128\208\190\208\180\208\181 \208\178\208\186\209\131\209\129\208\189\208\190\044 \208\189\208\190 \209\141\209\130\208\190 \208\189\208\181 \209\130\208\190\209\135\208\189\208\190\046\046")testQ.edaNomeRez={}end end end end end end end end end end end for y=1,y:NumLines(),1 do if _G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText()~=nil then if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,1)=="\043"or string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,1)=="\124"then g=mysplit(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText())if g[3]~=nil and string.utf8sub(g[3],1,3)=="\208\178\209\139\208\189"then if l==0 then l=tonumber(string.utf8sub(g[1],2))end if l==nil then l=tonumber(string.utf8sub(g[1],11))c=y end if l~=0 and c~=y then if tonumber(g[1]:sub(2))~=nil then else l=l+tonumber(g[1]:sub(11))end end end if g[3]~=nil and string.utf8sub(g[3],1,3)=="\208\187\208\190\208\178"then if L==0 then L=tonumber(string.utf8sub(g[1],2))end if L==nil then L=tonumber(string.utf8sub(g[1],11))c=y end if L~=0 and c~=y then if tonumber(g[1]:sub(2))~=nil then else L=L+tonumber(g[1]:sub(11))end end end if g[3]~=nil and string.utf8sub(g[3],1,3)=="\209\129\208\184\208\187"then if g[4]==nil then if W==0 then W=tonumber(string.utf8sub(g[1],2))end if W==nil then W=tonumber(string.utf8sub(g[1],11))c=y end if W~=0 and c~=y then if tonumber(g[1]:sub(2))~=nil then else W=W+tonumber(g[1]:sub(11))end end end end if g[3]~=nil and string.utf8sub(g[3],1,3)=="\208\184\208\189\209\130"then if o==0 then o=tonumber(string.utf8sub(g[1],2))end if o==nil then o=tonumber(string.utf8sub(g[1],11))c=y end if o~=0 and c~=y then if tonumber(g[1]:sub(2))~=nil then else o=o+tonumber(g[1]:sub(11))end end end if g[3]~=nil and string.utf8sub(g[3],1,3)=="\208\180\209\131\209\133"then if x==0 then x=tonumber(string.utf8sub(g[1],2))end if x==nil then x=tonumber(string.utf8sub(g[1],11))c=y end if x~=0 and c~=y then if tonumber(g[1]:sub(2))~=nil then else x=x+tonumber(g[1]:sub(11))end end end if g[4]~=nil and string.utf8sub(g[4],1,3)=="\208\176\209\130\208\176"then T=tonumber(g[1]:sub(2))if T==nil then T=tonumber(g[1]:sub(11))end end if g[4]~=nil and string.utf8sub(g[4],1,3)=="\208\186\209\128\208\184"then j=tonumber(g[1]:sub(2))if j==nil then j=tonumber(g[1]:sub(11))end end if g[4]~=nil and string.utf8sub(g[4],1,3)=="\208\188\208\176\209\129"then b=tonumber(g[1]:sub(2))if b==nil then b=tonumber(g[1]:sub(11))end end if g[4]~=nil and string.utf8sub(g[4],1,3)=="\208\183\208\176\208\186"then K=tonumber(g[1]:sub(2))if K==nil then K=tonumber(g[1]:sub(11))end end if g[4]~=nil and string.utf8sub(g[4],1,3)=="\208\188\208\181\209\130"then m=tonumber(g[1]:sub(2))if m==nil then m=tonumber(g[1]:sub(11))end end if g[4]~=nil and string.utf8sub(g[4],1,3)=="\209\129\208\186\208\190"then m=tonumber(g[1]:sub(2))if m==nil then m=tonumber(g[1]:sub(11))end end if g[4]~=nil and string.utf8sub(g[4],1,3)=="\208\183\208\176\209\137"then J=tonumber(g[1]:sub(2))if J==nil then J=tonumber(g[1]:sub(11))end end if g[4]~=nil and string.utf8sub(g[4],1,3)=="\209\131\208\186\208\187"then I=tonumber(g[1]:sub(2))if I==nil then I=tonumber(g[1]:sub(11))end end if g[4]~=nil and string.utf8sub(g[4],1,3)=="\208\191\208\176\209\128"then O=tonumber(g[1]:sub(2))if O==nil then O=tonumber(g[1]:sub(11))end end if g[4]~=nil and string.utf8sub(g[4],1,3)=="\208\177\208\187\208\190"then G=tonumber(g[1]:sub(2))if G==nil then G=tonumber(g[1]:sub(11))end end if g[4]~=nil and string.utf8sub(g[4],1,3)=="\208\191\209\128\208\190"then R=tonumber(g[1]:sub(2))if R==nil then R=tonumber(g[1]:sub(11))end end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\208\176\209\130\208\176\208\186\208\184")then A=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\208\186\209\128\208\184\209\130\208\184\209\135\208\181\209\129\208\186\208\190\208\179\208\190")then h=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\208\188\208\176\209\129\209\130\208\181\209\128\209\129\209\130\208\178\208\176")then Q=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\208\183\208\176\208\186\208\187\208\184\208\189\208\176\208\189\208\184\208\185")then D=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\208\188\208\181\209\130\208\186\208\190\209\129\209\130\208\184")then X=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\209\129\208\186\208\190\209\128\208\190\209\129\209\130\208\184")then N=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\208\183\208\176\209\137\208\184\209\130\209\139")then Z=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\209\131\208\186\208\187\208\190\208\189\208\181\208\189\208\184\209\143")then t=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\208\191\208\176\209\128\208\184\209\128\208\190\208\178\208\176\208\189\208\184\209\143")then i=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\208\177\208\187\208\190\208\186\208\184\209\128\208\190\208\178\208\176\208\189\208\184\209\143")then e=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\208\146\208\190\209\129\208\191\208\190\208\187\208\189\208\181\208\189\208\184\208\181")then z=mysplit(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText())z=tonumber(z[5])end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\208\191\209\128\208\190\208\177\208\184\208\178\208\176\208\189\208\184\209\143")then w=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..y]:GetText(),"\037\083\043\036"))end end end end if T==nil then T=0 end if W==nil then W=0 end if L==nil then L=0 end if l==nil then l=0 end if o==nil then o=0 end if x==nil then x=0 end if K==nil then K=0 end if m==nil then m=0 end if j==nil then j=0 end if b==nil then b=0 end if J==nil then J=0 end if I==nil then I=0 end if O==nil then O=0 end if G==nil then G=0 end if d==nil then d=0 end if R==nil then R=0 end if A==nil then A=0 end if D==nil then D=0 end if X==nil then X=0 end if h==nil then h=0 end if Q==nil then Q=0 end if Z==nil then Z=0 end if t==nil then t=0 end if i==nil then i=0 end if e==nil then e=0 end if z==nil then z=0 end if w==nil then w=0 end if N==nil then N=0 end if r==nil then r=0 end if E=="\208\150\209\128\208\181\209\134"or E=="\208\150\209\128\208\184\209\134\208\176"then local y,E,g,W,L=GetTalentInfo(3,27)if L>=1 then u=((((((((((o+x*.5)+K*2)+D*2)+m)+X)+j*2)+h*2)+d*.5)+z*.5)+r)+N else u=((((((((o+x*1.5)+K*2)+j)+d*1.5)+r)+D*2)+h)+z*1.5)+N end end if E=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then local y,E,g,R,w=GetTalentInfo(1,26)local c,q,Y,s,P=GetTalentInfo(2,26)local p,n,v,V,f=GetTalentInfo(3,26)if w>=1 then u=((((((((o*2+x)+K*1.5)+j)+d)+r*1.5)+D*1.5)+h)+z)+N*1.5 end if P>=1 then u=(((((((((((((W+L)+l*2)+m)+b)+J*1.5)+I*1.5)+O*1.5)+G*1.5)+X)+Q)+Z*1.5)+t*1.5)+i*1.5)+e*1.5 end if f>=1 then u=((((((((((W*2+L)+m)+j)+T)+r)+b)+X)+h)+A)+N)+Q end end if E=="\208\146\208\190\208\184\208\189"then local y,E,g,o,x=GetTalentInfo(3,7)if x>=1 then u=(((((((((((((W+L)+l*2)+m)+b)+J*1.5)+I*1.5)+O*1.5)+G*1.5)+X)+Q)+Z*1.5)+t*1.5)+i*1.5)+e*1.5 else u=((((((((((((W*2+L)+m)+j*1.5)+b)+R*2)+T)+r)+X)+h*1.5)+Q)+w*2)+A)+N end end if E=="\208\148\209\128\209\131\208\184\208\180"then local y,E,g,O,G=GetTalentInfo(3,27)local i,e,c,q,Y=GetTalentInfo(2,5)local s,P,p,n,v=GetTalentInfo(1,13)local V,f,F,a,H=GetTalentInfo(2,9)if G>=1 then u=((((((((o+x*1.5)+K*2)+r*1.5)+j)+d*1.5)+D*2)+N*1.5)+h)+z*1.5 end if Y>=1 then u=(((((((((((((((W+L*2)+l*2)+m)+j)+r*1.5)+b)+J*1.5)+I*2)+R)+X)+h)+N*1.5)+Q)+Z*1.5)+t*2)+w end if v>=1 then u=((((((((((o+x*.5)+K*2)+m)+j*2)+d*.5)+r)+D*2)+X)+h*2)+z*.5)+N end if H>=1 then u=((((((((((((W+L*2)+m)+j*1.5)+b)+R*2)+T)+r)+X)+h*1.5)+Q)+w*2)+A)+N end end if E=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\208\186"or E=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\209\134\208\176"then u=((((((((((((W+L*2)+m)+j)+R*2)+b)+T)+r)+X)+h)+w*2)+Q)+A)+N end if E=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\208\186"or E=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\209\134\208\176"then u=((((((((((o+x*1.5)+K*2)+m)+j*1.5)+d*.5)+r*1.5)+D*2)+X)+h*1.5)+z*.5)+N*1.5 end if E=="\208\168\208\176\208\188\208\176\208\189"then local y,E,g,l,J=GetTalentInfo(1,3)local I,O,G,Z,t=GetTalentInfo(2,9)local i,e,c,q,Y=GetTalentInfo(3,1)if J>=3 and t>=1 then q,q,q,q,J=GetTalentInfo(1,7)q,q,q,q,t=GetTalentInfo(2,11)end if J>=1 then u=(((((((o+K*2)+j)+m)+r*1.5)+D*2)+h)+X)+N*1.5 end if t>=1 then u=((((((((((((((W+L*2)+m)+j*1.5)+R)+T)+r*1.5)+b)+K)+X)+h*1.5)+w)+A)+N*1.5)+Q)+D end if Y>=1 then u=((((((((o+x)+K*2)+j)+d*2)+r*2)+D*2)+h)+z*2)+N*2 end end if E=="\208\158\209\133\208\190\209\130\208\189\208\184\208\186"or E=="\208\158\209\133\208\190\209\130\208\189\208\184\209\134\208\176"then u=(((((((((L*2+m)+j)+R*2)+T)+r)+X)+h)+w*2)+A)+N end if E=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then local y,E,g,o,x=GetTalentInfo(1,7)local K,O,G,d,r=GetTalentInfo(2,3)local D,i,e,z,N=GetTalentInfo(3,3)if x>=1 or r>=1 or N>=1 then u=(((((((((W+L)+l*2)+m)+b)+J*1.5)+I*1.5)+X)+Q)+Z*1.5)+t*1.5 else u=((((((((((W*2+L)+m)+j)+b)+R)+T)+X)+h)+Q)+w)+A end end if E=="\208\156\208\176\208\179"then u=((((((((o+x)+K*2)+m)+j*1.5)+r*1.5)+D*2)+X)+h*1.5)+N*1.5 end if tonumber(u)~=0 then GameTooltip:AddLine("\124\099\102\102\048\048\066\070\070\070\208\177\209\129\058 \124\099\102\102\070\070\056\067\048\048"..u)GameTooltip:Show()else end end)function ns_obj(y)local E if y=="\097\097"then E="\107\097"end if y=="\097\065"then E="\116"end if y=="\097\098"then E="\102"end if y=="\097\066"then E="\111\098"end if y=="\097\099"then E="\109\122"end if y=="\097\067"then E="\104"end return E end local g={[0]="\048",[1]="\049",[2]="\050",[3]="\051",[4]="\052",[5]="\053",[6]="\054";[7]="\055";[8]="\056",[9]="\057";[10]="\065",[11]="\066";[12]="\067",[13]="\068";[14]="\069";[15]="\070",[16]="\071",[17]="\035";[18]="\036",[19]="\037";[20]="\040";[21]="\041",[22]="\042";[23]="\043",[24]="-";[25]="\046";[26]="\047";[27]="\058";[28]="\059";[29]="\060",[30]="\061";[31]="\062";[32]="\063",[33]="\064",[34]="\072";[35]="\073",[36]="\074";[37]="\075",[38]="\076";[39]="\077";[40]="\078",[41]="\079",[42]="\080",[43]="\081";[44]="\082";[45]="\083",[46]="\084";[47]="\085";[48]="\086";[49]="\087",[50]="\088";[51]="\089";[52]="\090",[53]="\094",[54]="\095";[55]="\096";[56]="\097";[57]="\098";[58]="\099";[59]="\100",[60]="\101",[61]="\102";[62]="\103",[63]="\104",[64]="\105";[65]="\106";[66]="\107",[67]="\108",[68]="\109",[69]="\110",[70]="\111";[71]="\112",[72]="\113";[73]="\114";[74]="\115";[75]="\116",[76]="\117",[77]="\118";[78]="\119",[79]="\120",[80]="\121",[81]="\122";[82]="\033";[83]="\123";[84]="\124",[85]="\125";[86]="\091",[87]="\093";[88]="\'",[89]="\044"}local W={}for y,E in pairs(g)do W[E]=y end function numeCod(y)local E=0 for u=1,#y,1 do local g=y:sub(u,u)local L=W[g]or 0 E=E*90+L end return E end function rand_alfabet()testQ.ns_alfabetQ={}testQ.ns_alfabetQ1={}local y={[1]="\208\144",[2]="\208\145";[3]="\208\146";[4]="\208\147",[5]="\208\148",[6]="\208\150";[7]="\208\151",[8]="\208\152",[9]="\208\154",[10]="\208\155";[11]="\208\156";[12]="\208\157";[13]="\208\158",[14]="\208\159",[15]="\208\160",[16]="\208\161";[17]="\208\162",[18]="\208\163";[19]="\208\164";[20]="\208\165";[21]="\208\166",[22]="\208\167";[23]="\208\168",[24]="\208\175";[25]="\208\149";[26]="\208\153",[27]="\208\173",[28]="\208\169",[29]="\208\174",[30]="\208\171"}for E=1,5,1 do local u=math.random(1,30)table.insert(testQ.ns_alfabetQ,y[u])table.insert(testQ.ns_alfabetQ1,y[u])end end function np_change_0()ns_cfg={HPheight=14;HPwidth=99,CBheight=5;CBtieFont=10,border=4,rheight=15;Rpoint="\082\073\071\072\084",RrelativePoint="\076\069\070\084",Rx=0,Ry=-4;LvLFontSize=13;LvLpoint="\082\073\071\072\084";LvLrelativePoint="\076\069\070\084";LvLx=-2,LvLy=0,NameFontSize=11;Npoint="\066\079\084\084\079\077",NrelativePoint="\084\079\080",Nx=0,Ny=4,hostileunit={r=.77;g=.11;b=.11};friendlyunit={r=.6;g=.88,b=.99},friendlyplayer={r=.11;g=.88;b=.11},neutralunit={r=.99,g=.99,b=.0}}end function np_change_nil()ns_cfg={HPheight=4,HPwidth=99,CBheight=5;CBtieFont=10;border=2;rheight=15,Rpoint="\082\073\071\072\084",RrelativePoint="\076\069\070\084";Rx=0;Ry=-4,LvLFontSize=13,LvLpoint="\082\073\071\072\084",LvLrelativePoint="\076\069\070\084";LvLx=-2,LvLy=0;NameFontSize=11;Npoint="\066\079\084\084\079\077",NrelativePoint="\084\079\080";Nx=0;Ny=4,hostileunit={r=.77,g=.11,b=.11},friendlyunit={r=.6;g=.88;b=.99};friendlyplayer={r=.11;g=.88;b=.11},neutralunit={r=.99,g=.99;b=.0}}end function ns_xy(y,E,u,g)local W=sqrt((y-u)^2+(E-g)^2)return W end function numZome()if GetZoneText()=="\208\155\209\131\208\189\208\190\209\129\208\178\208\181\209\130"then kont="\050"lok="\049\052"end if GetZoneText()=="\208\151\208\176\208\189\208\179\208\176\209\128\209\130\208\190\208\191\209\140"then kont="\051"lok="\050"end if GetZoneText()=="\208\162\208\176\208\189\208\176\209\128\208\184\209\129"then kont="\049"lok="\049\056"end if GetZoneText()=="\208\158\209\128\208\179\209\128\208\184\208\188\208\188\208\176\209\128"then kont="\049"lok="\049\048"end if GetZoneText()=="\208\168\209\130\208\190\209\128\208\188\208\179\209\128\208\176\208\180"then kont="\050"lok="\050\056"end if GetZoneText()=="\208\148\209\131\209\128\208\190\209\130\208\176\209\128"then kont="\049"lok="\052"end if GetZoneText()=="\208\161\209\130\208\181\208\191\208\184"then kont="\049"lok="\049\055"end return kont,lok end function ns_locaziya()local y=math.random(1,7)local E if y==1 then E="\208\155\209\131\208\189\208\190\209\129\208\178\208\181\209\130"end if y==2 then E="\208\148\209\131\209\128\208\190\209\130\208\176\209\128"end if y==3 then E="\208\158\209\128\208\179\209\128\208\184\208\188\208\188\208\176\209\128"end if y==4 then E="\208\151\208\176\208\189\208\179\208\176\209\128\209\130\208\190\208\191\209\140"end if y==5 then E="\208\161\209\130\208\181\208\191\208\184"end if y==6 then E="\208\162\208\176\208\189\208\176\209\128\208\184\209\129"end if y==7 then E="\208\168\209\130\208\190\209\128\208\188\208\179\209\128\208\176\208\180"end return E end function ns_q4xy()local y=GetUnitName("\112\108\097\121\101\114")kont,lok=numZome()if kont~=nil then if testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]==nil then testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]={}local E=math.random(1,99)local u=math.random(1,99)testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=600 testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..E)testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..u)testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=5 else if GetZoneText()==testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok then if testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time>=1 then local E,u=GetPlayerMapPosition("\112\108\097\121\101\114")testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=(ns_xy(E,u,testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x,testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y)/tonumber(mapTables.lokRasstoyanie[kont][lok]))/10 testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time-1 print("\208\158\209\129\209\130\208\176\208\187\208\190\209\129\209\140 "..(testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time.." \209\129\208\181\208\186\209\131\208\189\208\180"))if(ns_xy(E,u,testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x,testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y)/tonumber(mapTables.lokRasstoyanie[kont][lok]))/10<.5 then testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121\095\101\110\100"]=1 SendChatMessage("\208\158\208\189\208\176 \209\130\209\131\209\130\033 \208\157\209\142\209\133\208\190\208\188 \209\135\209\131\209\142\033","\079\070\070\073\067\069\082",nil,1)end else testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()SendChatMessage("\208\163\208\178\209\139\044 \208\188\208\190\209\142 \208\191\209\128\208\184\208\189\209\134\208\181\209\129\209\129\209\131 \209\131\208\182\208\181 \209\131\208\178\208\181\208\183\208\187\208\184 \208\178 "..testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok,"\079\070\070\073\067\069\082",nil,1)local E=math.random(1,99)local u=math.random(1,99)testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..E)testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..u)testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=600 end end end else if testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]==nil then testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]={}local E=math.random(1,99)local u=math.random(1,99)testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=300 testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..E)testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..u)testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()testQ[y]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=5 end end end function allcash(y,E,u)local g,W=GetPlayerMapPosition("\112\108\097\121\101\114")local L=sqrt((g-y)^2+(W-E)^2)local l=(.82-L)/.82 if u==1 then MoveViewRightStart(0)if testQ.acbuhlo==nil then MoveViewLeftStart(l)else MoveViewLeftStart(l/2)end else MoveViewLeftStart(0)if testQ.acbuhlo==nil then MoveViewRightStart(l)else MoveViewRightStart(l/2)end end local o=math.random(1,2)if o==1 then if testQ.acbuhlo==1 then print(l)end end end function osleplenie(y)MoveViewLeftStart(0)MoveViewRightStart(0)local E=math.random(1,2)if E==1 then MoveViewLeftStart(y)else MoveViewRightStart(y)end end function Shuffle(y)local E={}for u=1,#y,1 do E[u]=y[u]end for y=#y,2,-1 do local u=math.random(y)E[y],E[u]=E[u],E[y]end return E end function ns_iya(y)for y=1,100,1 do if iYaBtn[y]~=nil then iYaBtn[y]:Hide()iYaBtn[y]:Enable()iYaBtn[y]:SetAlpha(1)end if iYaBtnP[y]~=nil then iYaBtnP[y]:Hide()end end if tblIya[y].sh==1 then testQ.iya_temp=time()for y=1,11,1 do if iYaBtn[y]~=nil then iYaBtn[y]:SetAlpha(1)end end for y=1,100,1 do if iYaBtnP[y]~=nil then iYaBtnP[y]:Hide()end end for y=1,100,1 do if iYaBtnPic[y]~=nil then iYaBtnPic[y]:Hide()end end for y=1,100,1 do if iYaBtnText[y]~=nil then iYaBtnText[y]:Hide()end end for y=1,100,1 do if iYaBtnVsp[y]~=nil then iYaBtnVsp[y]:Hide()end end iYaBtn:configure(1,0,300,515,32,"",tblIya[y].t1,y,tblIya[y].s1,99)iYaBtn:configure(2,-131,125,256,256,tblIya[y].p1,tblIya[y].t2,y,tblIya[y].s2,99)iYaBtn:configure(3,127,125,256,256,tblIya[y].p2,tblIya[y].t3,y,tblIya[y].s3,99)iYaBtn:configure(4,-131,-165,256,256,tblIya[y].p3,tblIya[y].t4,y,tblIya[y].s4,tblIya[y].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[y].p4,tblIya[y].t5,y,tblIya[y].s5,tblIya[y].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[y].t6,y,tblIya[y].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[y].t7,y,tblIya[y].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[y].t8,y,tblIya[y].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[y].t9,y,tblIya[y].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",y,"",99)iYaBtn:configure(11,-322,300,128,64,"",y..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)iYaBtn[6]:SetAlpha(.5)iYaBtn[7]:SetAlpha(.5)iYaBtn[2]:SetAlpha(.5)iYaBtn[3]:SetAlpha(.5)end if tblIya[y].sh==2 then testQ.iya_temp=time()for y=1,11,1 do if iYaBtn[y]~=nil then iYaBtn[y]:SetAlpha(1)end end for y=1,100,1 do if iYaBtnP[y]~=nil then iYaBtnP[y]:Hide()end end for y=1,100,1 do if iYaBtnPic[y]~=nil then iYaBtnPic[y]:Hide()end end for y=1,100,1 do if iYaBtnText[y]~=nil then iYaBtnText[y]:Hide()end end for y=1,100,1 do if iYaBtnVsp[y]~=nil then iYaBtnVsp[y]:Hide()end end local E={"\050","\051","\052","\053"}local u=Shuffle(E)iYaBtn:configure(1,0,300,515,32,tblIya[y].p10,tblIya[y].t1,y,tblIya[y].s1,99)iYaBtn:configure(2,-131,125,256,256,tblIya[y]["\112"..u[1]],tblIya[y]["\116"..u[1]],y,tblIya[y]["\115"..u[1]],tblIya[y].tq)iYaBtn:configure(3,127,125,256,256,tblIya[y]["\112"..u[2]],tblIya[y]["\116"..u[2]],y,tblIya[y]["\115"..u[2]],tblIya[y].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[y]["\112"..u[3]],tblIya[y]["\116"..u[3]],y,tblIya[y]["\115"..u[3]],tblIya[y].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[y]["\112"..u[4]],tblIya[y]["\116"..u[4]],y,tblIya[y]["\115"..u[4]],tblIya[y].tq)iYaBtn:configure(6,-128,268,256,32,tblIya[y].p6,tblIya[y].t6,y,tblIya[y].s6,99)iYaBtn:configure(7,128,268,256,32,tblIya[y].p7,tblIya[y].t7,y,tblIya[y].s7,99)iYaBtn:configure(8,-128,-22,256,32,tblIya[y].p8,tblIya[y].t8,y,tblIya[y].s8,99)iYaBtn:configure(9,128,-22,256,32,tblIya[y].p9,tblIya[y].t9,y,tblIya[y].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",y,"",99)iYaBtn:configure(11,-322,300,128,64,"",y..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[y].sh==3 then testQ.iya_temp=time()for y=1,11,1 do if iYaBtn[y]~=nil then iYaBtn[y]:SetAlpha(1)end end for y=1,100,1 do if iYaBtnP[y]~=nil then iYaBtnP[y]:Hide()end end for y=1,100,1 do if iYaBtnPic[y]~=nil then iYaBtnPic[y]:Hide()end end for y=1,100,1 do if iYaBtnText[y]~=nil then iYaBtnText[y]:Hide()end end for y=1,100,1 do if iYaBtnVsp[y]~=nil then iYaBtnVsp[y]:Hide()end end local E={"\050";"\051","\052"}local u=Shuffle(E)iYaBtn:configure(1,0,300,515,32,"",tblIya[y].t1,y,tblIya[y].s1,99)iYaBtn:configure(2,0,125,256,256,tblIya[y]["\112"..u[1]],tblIya[y]["\116"..u[1]],y,tblIya[y]["\115"..u[1]],tblIya[y].tq)iYaBtn:configure(3,-256,125,256,256,tblIya[y]["\112"..u[2]],tblIya[y]["\116"..u[2]],y,tblIya[y]["\115"..u[2]],tblIya[y].tq)iYaBtn:configure(4,256,125,256,256,tblIya[y]["\112"..u[3]],tblIya[y]["\116"..u[3]],y,tblIya[y]["\115"..u[3]],tblIya[y].tq)iYaBtn:configure(10,268,300,32,32,"","\120",y,"",99)iYaBtn:configure(11,-322,300,128,64,"",y..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[y].sh==4 then local E={"\050","\051","\052","\053"}local u=Shuffle(E)for y=1,11,1 do if iYaBtn[y]~=nil then iYaBtn[y]:SetAlpha(1)end end for y=1,100,1 do if iYaBtnP[y]~=nil then iYaBtnP[y]:Hide()end end for y=1,100,1 do if iYaBtnPic[y]~=nil then iYaBtnPic[y]:Hide()end end for y=1,100,1 do if iYaBtnText[y]~=nil then iYaBtnText[y]:Hide()end end for y=1,100,1 do if iYaBtnVsp[y]~=nil then iYaBtnVsp[y]:Hide()end end iYaBtn:configure(2,-131,125,256,256,tblIya[y]["\112"..u[1]],tblIya[y]["\116"..u[1]],y,tblIya[y]["\115"..u[1]],tblIya[y].tq)iYaBtn:configure(3,127,125,256,256,tblIya[y]["\112"..u[2]],tblIya[y]["\116"..u[2]],y,tblIya[y]["\115"..u[2]],tblIya[y].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[y]["\112"..u[3]],tblIya[y]["\116"..u[3]],y,tblIya[y]["\115"..u[3]],tblIya[y].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[y]["\112"..u[4]],tblIya[y]["\116"..u[4]],y,tblIya[y]["\115"..u[4]],tblIya[y].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[y]["\116\116"..u[1]],y,tblIya[y].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[y]["\116\116"..u[2]],y,tblIya[y].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[y]["\116\116"..u[3]],y,tblIya[y].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[y]["\116\116"..u[4]],y,tblIya[y].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",y,"",99)iYaBtn:configure(11,-322,300,128,64,"",y..("\047"..50-testQ.iya_ser),"","",99)local g={"\049","\050";"\051";"\052"}local W=Shuffle(g)iYaBtnP:configure(1,tblIya[y].x1,tblIya[y].y1,tblIya[y].rx1,tblIya[y].ry1,"",tblIya[y]["\116\112"..W[1]],y,tblIya[y].s10,tblIya[y].tq)iYaBtnP:configure(2,tblIya[y].x2,tblIya[y].y2,tblIya[y].rx2,tblIya[y].ry2,"",tblIya[y]["\116\112"..W[2]],y,tblIya[y].s10,tblIya[y].tq)iYaBtnP:configure(3,tblIya[y].x3,tblIya[y].y3,tblIya[y].rx3,tblIya[y].ry3,"",tblIya[y]["\116\112"..W[3]],y,tblIya[y].s10,tblIya[y].tq)iYaBtnP:configure(4,tblIya[y].x4,tblIya[y].y4,tblIya[y].rx4,tblIya[y].ry4,"",tblIya[y]["\116\112"..W[4]],y,tblIya[y].s10,tblIya[y].tq)iYaBtn[2]:Disable()iYaBtn[3]:Disable()iYaBtn[4]:Disable()iYaBtn[5]:Disable()iYaBtn[6]:Disable()iYaBtn[7]:Disable()iYaBtn[8]:Disable()iYaBtn[9]:Disable()end if tblIya[y].sh==5 then testQ.iya_temp=time()local E={"\049","\050";"\051","\052";"\053";"\054"}local u=Shuffle(E)iYaBtn:configure(1,0,300,515,32,tblIya[y].p11,tblIya[y].t11,y,tblIya[y].s1,99)iYaBtnPic:configure(1,-259,125,256,256,tblIya[y]["\112"..u[1]],tblIya[y]["\116"..u[1]],y,tblIya[y]["\116\115"..u[1]],tblIya[y].tq)iYaBtnPic:configure(2,257,125,256,256,tblIya[y]["\112"..u[2]],tblIya[y]["\116"..u[2]],y,tblIya[y]["\116\115"..u[2]],tblIya[y].tq)iYaBtnPic:configure(3,-259,-165,256,256,tblIya[y]["\112"..u[3]],tblIya[y]["\116"..u[3]],y,tblIya[y]["\116\115"..u[3]],tblIya[y].tq)iYaBtnPic:configure(4,257,-165,256,256,tblIya[y]["\112"..u[4]],tblIya[y]["\116"..u[4]],y,tblIya[y]["\116\115"..u[4]],tblIya[y].tq)iYaBtnPic:configure(5,0,125,256,256,tblIya[y]["\112"..u[5]],tblIya[y]["\116"..u[5]],y,tblIya[y]["\116\115"..u[5]],tblIya[y].tq)iYaBtnPic:configure(6,0,-165,256,256,tblIya[y]["\112"..u[6]],tblIya[y]["\116"..u[6]],y,tblIya[y]["\116\115"..u[6]],tblIya[y].tq)iYaBtnText:configure(1,-259,268,256,32,"",tblIya[y].tt1,y,tblIya[y].tts1,99)iYaBtnText:configure(2,255,268,256,32,"",tblIya[y].tt2,y,tblIya[y].tts2,99)iYaBtnText:configure(3,-259,-22,256,32,"",tblIya[y].tt3,y,tblIya[y].tts3,99)iYaBtnText:configure(4,255,-22,256,32,"",tblIya[y].tt4,y,tblIya[y].tts4,99)iYaBtnText:configure(5,0,268,256,32,"",tblIya[y].tt5,y,tblIya[y].tts5,99)iYaBtnText:configure(6,0,-22,256,32,"",tblIya[y].tt6,y,tblIya[y].tts6,99)iYaBtn:configure(10,268,300,32,32,"","\120",y,"",99)iYaBtn:configure(11,-322,316,128,64,"",y..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[y].sh==6 then local E={"\050";"\051";"\052";"\053"}local u=Shuffle(E)for y=1,11,1 do if iYaBtn[y]~=nil then iYaBtn[y]:SetAlpha(1)end end for y=1,100,1 do if iYaBtnP[y]~=nil then iYaBtnP[y]:Hide()end end for y=1,100,1 do if iYaBtnPic[y]~=nil then iYaBtnPic[y]:Hide()end end for y=1,100,1 do if iYaBtnText[y]~=nil then iYaBtnText[y]:Hide()end end for y=1,100,1 do if iYaBtnVsp[y]~=nil then iYaBtnVsp[y]:Hide()end end iYaBtn:configure(2,-131,125,256,256,tblIya[y]["\112"..u[1]],tblIya[y]["\116"..u[1]],y,tblIya[y]["\115"..u[1]],tblIya[y].tq)iYaBtn:configure(3,127,125,256,256,tblIya[y]["\112"..u[2]],tblIya[y]["\116"..u[2]],y,tblIya[y]["\115"..u[2]],tblIya[y].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[y]["\112"..u[3]],tblIya[y]["\116"..u[3]],y,tblIya[y]["\115"..u[3]],tblIya[y].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[y]["\112"..u[4]],tblIya[y]["\116"..u[4]],y,tblIya[y]["\115"..u[4]],tblIya[y].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[y]["\116\116"..u[1]],y,tblIya[y].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[y]["\116\116"..u[2]],y,tblIya[y].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[y]["\116\116"..u[3]],y,tblIya[y].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[y]["\116\116"..u[4]],y,tblIya[y].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",y,"",99)iYaBtn:configure(11,-322,300,128,64,"",y..("\047"..50-testQ.iya_ser),"","",99)local g={"\049","\050";"\051";"\052"}local W=Shuffle(g)iYaBtnP:configure(1,-11,148,80,32,"",tblIya[y]["\116\112"..W[1]],y,tblIya[y].s10,tblIya[y].tq)iYaBtnP:configure(2,-11,116,80,32,"",tblIya[y]["\116\112"..W[2]],y,tblIya[y].s10,tblIya[y].tq)iYaBtnP:configure(3,-11,84,80,32,"",tblIya[y]["\116\112"..W[3]],y,tblIya[y].s10,tblIya[y].tq)iYaBtnP:configure(4,-11,52,80,32,"",tblIya[y]["\116\112"..W[4]],y,tblIya[y].s10,tblIya[y].tq)iYaBtn[2]:Disable()iYaBtn[3]:Disable()iYaBtn[4]:Disable()iYaBtn[5]:Disable()iYaBtn[6]:Disable()iYaBtn[7]:Disable()iYaBtn[8]:Disable()iYaBtn[9]:Disable()end end function sCh()SendChatMessage("\208\167\209\130\208\190 \208\178\209\139 \208\178\208\184\208\180\208\184\209\130\208\181 \209\130\209\131\209\130\058 \"\195\145\195\177\"\063","\071\085\073\076\068",nil,1)end function pokazTextur(E,u,g,W)if W=="\115\104\111\119"then prok_set1={Rx=128,Ry=256,x=-200,y=0}prok_set2={Rx=128;Ry=256;x=200;y=0}prok_set3={Rx=256,Ry=128,x=0;y=200}prok_set4={Rx=0;Ry=0;x=0,y=0}local y=GetScreenWidth()local W=GetScreenHeight()if g==4 then unIcon(tonumber(E),y,W,0+prok_set4.x,0+prok_set4.y,u,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if g==1 then unIcon(tonumber(E),prok_set1.Rx,prok_set1.Ry,0+prok_set1.x,0+prok_set1.y,u,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if g==2 then unIcon(tonumber(E),prok_set2.Rx,prok_set2.Ry,0+prok_set2.x,0+prok_set2.y,u,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if g==3 then unIcon(tonumber(E),prok_set3.Rx,prok_set3.Ry,0+prok_set3.x,0+prok_set3.y,u,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end else unIcon(tonumber(tonumber(E),x,y,0,0,0,"\104\105\100\101",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082"))end end function cepochkiQuestov(y,E,u,g,W,L,l)if y=="\102\101\110\105\120"then if t_cQ[y][testQ[l].puteshestvie].sh=="\208\181\208\180\208\176"then if testQ[l].edaQuest==nil then testQ[l].edaQuest=1 end local E=sqrt((W-t_cQ[y][testQ[l].puteshestvie].x)^2+(L-t_cQ[y][testQ[l].puteshestvie].y)^2)if mapTables.lokRasstoyanie[u]~=nil then if mapTables.lokRasstoyanie[u][g]~=nil then if E<mapTables.lokRasstoyanie[u][g]*t_cQ[y][testQ[l].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[y][testQ[l].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end if t_cQ[y][testQ[l].puteshestvie].sh=="\209\141\208\188\208\190\209\134\208\184\209\143"then if testQ[l]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]==nil then obnulenieEmocij(l)testQ[l]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]=1 end if testQ[l]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]~=nil then if proverkaEmocij(l)==nil then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[l].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[l].puteshestvie=t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"]else local E=sqrt((W-t_cQ[y][testQ[l].puteshestvie].x)^2+(L-t_cQ[y][testQ[l].puteshestvie].y)^2)if mapTables.lokRasstoyanie[u]~=nil then if mapTables.lokRasstoyanie[u][g]~=nil then if E<mapTables.lokRasstoyanie[u][g]*t_cQ[y][testQ[l].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[y][testQ[l].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end end end if t_cQ[y][testQ[l].puteshestvie].sh=="\208\186\208\187\208\184\208\186"then if ns_FLAGnaClick~=nil then if testQ.fx==nil then testQ.fx,testQ.fy=GetPlayerMapPosition("\112\108\097\121\101\114")end local E=sqrt((W-testQ.fx)^2+(L-testQ.fy)^2)if E<mapTables.lokRasstoyanie[u][g]*t_cQ[y][testQ[l].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[y][testQ[l].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[l].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[l].puteshestvie=t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"]testQ.fy=nil testQ.fx=nil ns_FLAGnaClick=nil end end end end if t_cQ[y][testQ[l].puteshestvie].sh=="\208\180\208\190\208\177\209\139\209\135\208\176 \208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"then if tonumber(t_cQ[y][testQ[l].puteshestvie].kont)==tonumber(u)and tonumber(t_cQ[y][testQ[l].puteshestvie].lok)==tonumber(g)then local E=sqrt((W-t_cQ[y][testQ[l].puteshestvie].x)^2+(L-t_cQ[y][testQ[l].puteshestvie].y)^2)if E<mapTables.lokRasstoyanie[u][g]*t_cQ[y][testQ[l].puteshestvie].dalnost then showFenix("\115\104\111\119")local E rtnTextF(t_cQ[y][testQ[l].puteshestvie].text,1,"\115\104\111\119")for u=1,t_cQ[y][testQ[l].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\154\208\190\208\187\208\184\209\135\208\181\209\129\209\130\208\178\208\190"],1 do if proverkaNaPredmety(t_cQ[y][testQ[l].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130"..u])then if proverkaNaKolvoPredmetov(t_cQ[y][testQ[l].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130"..u])>=t_cQ[y][testQ[l].puteshestvie]["\208\178\209\129\208\181\208\179\208\190\208\159\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"..u]then E=1 else E=nil break end else E=nil break end end if E~=nil then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[l].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[l].puteshestvie=t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end if y~="\102\101\110\105\120"then if t_cQ[y][testQ[l].puteshestvie].sh=="\208\191\208\190\208\180\208\184 \209\130\209\131\208\180\208\176"then if tonumber(t_cQ[y][testQ[l].puteshestvie].kont)==tonumber(u)and tonumber(t_cQ[y][testQ[l].puteshestvie].lok)==tonumber(g)then local E=sqrt((W-t_cQ[y][testQ[l].puteshestvie].x)^2+(L-t_cQ[y][testQ[l].puteshestvie].y)^2)if E<mapTables.lokRasstoyanie[u][g]*t_cQ[y][testQ[l].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[y][testQ[l].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[l].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[l].puteshestvie=t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"]end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[l].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[l].puteshestvie=t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"]end end end if t_cQ[y][testQ[l].puteshestvie].sh=="\208\178\208\183\208\187\208\190\208\188 \209\129\208\181\208\185\209\132\208\176"then if tonumber(t_cQ[y][testQ[l].puteshestvie].kont)==tonumber(u)and tonumber(t_cQ[y][testQ[l].puteshestvie].lok)==tonumber(g)then local E=sqrt((W-t_cQ[y][testQ[l].puteshestvie].x)^2+(L-t_cQ[y][testQ[l].puteshestvie].y)^2)if E<mapTables.lokRasstoyanie[u][g]*t_cQ[y][testQ[l].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[y][testQ[l].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[l].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)puteshestvieGrafikaHide()sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[l].puteshestvie=t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end if t_cQ[y][testQ[l].puteshestvie].sh=="\208\180\208\190\208\177\209\139\209\135\208\176 \208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"then if tonumber(t_cQ[y][testQ[l].puteshestvie].kont)==tonumber(u)and tonumber(t_cQ[y][testQ[l].puteshestvie].lok)==tonumber(g)then local E=sqrt((W-t_cQ[y][testQ[l].puteshestvie].x)^2+(L-t_cQ[y][testQ[l].puteshestvie].y)^2)if E<mapTables.lokRasstoyanie[u][g]*t_cQ[y][testQ[l].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[y][testQ[l].puteshestvie].text,1,"\115\104\111\119")if proverkaNaPredmety(t_cQ[y][testQ[l].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\049"])and(proverkaNaPredmety(t_cQ[y][testQ[l].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\050"])and proverkaNaPredmety(t_cQ[y][testQ[l].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\051"]))then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[l].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[l].puteshestvie=t_cQ[y][testQ[l].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end if t_cQ[y][testQ[l].puteshestvie].sh=="\208\178\208\190\208\191\209\128\208\190\209\129"then if tonumber(t_cQ[y][testQ[l].puteshestvie].kont)==tonumber(u)and tonumber(t_cQ[y][testQ[l].puteshestvie].lok)==tonumber(g)then local E=sqrt((W-t_cQ[y][testQ[l].puteshestvie].x)^2+(L-t_cQ[y][testQ[l].puteshestvie].y)^2)if E<mapTables.lokRasstoyanie[u][g]*t_cQ[y][testQ[l].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[y][testQ[l].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end if t_cQ[y][testQ[l].puteshestvie].sh=="\208\191\208\190\208\177\208\181\208\180\208\176"then if tonumber(t_cQ[y][testQ[l].puteshestvie].kont)==tonumber(u)and tonumber(t_cQ[y][testQ[l].puteshestvie].lok)==tonumber(g)then local E=sqrt((W-t_cQ[y][testQ[l].puteshestvie].x)^2+(L-t_cQ[y][testQ[l].puteshestvie].y)^2)if E<mapTables.lokRasstoyanie[u][g]*t_cQ[y][testQ[l].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[y][testQ[l].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\159\208\190\208\177\208\181\208\180\208\176\033\033\033 \208\146\208\190\208\182\208\180\209\140\044 \209\143 \208\189\208\181\209\129\209\131 \209\130\208\181\208\177\208\181 \208\178\209\129\208\181 \209\129\208\190\208\180\208\181\209\128\208\182\208\184\208\188\208\190\208\181 \209\129\208\181\208\185\209\132\208\190\208\178\033\033\033","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")puteshestvieHide()end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\159\208\190\208\177\208\181\208\180\208\176\033\033\033 \208\146\208\190\208\182\208\180\209\140\044 \209\143 \208\189\208\181\209\129\209\131 \209\130\208\181\208\177\208\181 \208\178\209\129\208\181 \209\129\208\190\208\180\208\181\209\128\208\182\208\184\208\188\208\190\208\181 \209\129\208\181\208\185\209\132\208\190\208\178\033\033\033","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")puteshestvieHide()end end end end end function puteshestvieHide()local y=GetUnitName("\112\108\097\121\101\114")testQ[y].puteshestvie=nil testQ[y][testQ[y].puteshestvieTabella]=nil quesT("\104\105\100\101")rtnTextF("",1,"\104\105\100\101")if btn[980]~=nil then btn[980]:Hide()btn[979]:Hide()btn[978]:Hide()end puteshestvieGrafikaHide()end function puteshestvieGrafikaHide()if fenix[1]~=nil then showFenix("\104\105\100\101")end if iconQ[1]~=nil then quesT("\104\105\100\101")end rtnTextF("",1,"\104\105\100\101")end function ns_addXY()local y,E=GetPlayerMapPosition("\112\108\097\121\101\114")local u=tostring(GetCurrentMapContinent())local g=tostring(GetCurrentMapZone())print("\091\'\120\'\093 \061 "..(y.."\044"))print("\091\'\121\'\093 \061 "..(E.."\044"))print("\091\'\107\111\110\116\'\093 \061 "..(u.."\044"))print("\091\'\108\111\107\'\093 \061 "..(g.."\044"))end function proverkaNaPredmety(y)for E=0,4,1 do for u=1,GetContainerNumSlots(E),1 do local g=GetContainerItemLink(E,u)if g and g:find(y)then return true end end end end function proverkaNaKolvoPredmetov(y)local E=0 for u=0,4,1 do for g=1,GetContainerNumSlots(u),1 do local W=GetContainerItemLink(u,g)if W and W:find(y)then local y,W=GetContainerItemInfo(u,g)E=E+W end end end return E end function sohranenieProgressa(y)local E=GetUnitName("\112\108\097\121\101\114")if y=="\208\190\208\177\209\139\209\135\208\186\208\176"then if testQ[E][testQ[E]]==nil then testQ[E][testQ[E].puteshestvieTabella]=0 end if tonumber(testQ[E][testQ[E].puteshestvieTabella])<tonumber(t_cQ[testQ[E].puteshestvieTabella][testQ[E].puteshestvie]["\208\186\209\131\208\180\208\176"])then testQ[E][testQ[E].puteshestvieTabella]=t_cQ[testQ[E].puteshestvieTabella][testQ[E].puteshestvie]["\208\186\209\131\208\180\208\176"]end end if y=="\208\178\208\183\208\187\208\190\208\188"then if testQ[E][testQ[E]]==nil then testQ[E][testQ[E].puteshestvieTabella]=0 end if tonumber(testQ[E][testQ[E].puteshestvieTabella])<tonumber(t_cQ[testQ[E].puteshestvieTabella][testQ[E].puteshestvie]["\208\186\209\131\208\180\208\176 \208\191\209\128\208\184 \208\178\208\183\208\187\208\190\208\188\208\181"])then testQ[E][testQ[E].puteshestvieTabella]=t_cQ[testQ[E].puteshestvieTabella][testQ[E].puteshestvie]["\208\186\209\131\208\180\208\176 \208\191\209\128\208\184 \208\178\208\183\208\187\208\190\208\188\208\181"]end end end function sohranenieTablicRamerovLokaciy()SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\055","\048\046\048\048\048\052\057\057","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\048","\048\046\048\048\051\054\055\054","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \052","\048\046\048\048\048\054\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \050\056","\048\046\048\048\050\049","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \057\057 \049","\048\046\048\048\051","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\056","\048\046\048\048\048\056\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \051 \050","\048\046\048\048\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \049\052","\048\046\048\048\050","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\053","\048\046\048\048\048\052\057\057","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \050\053","\048\046\048\048\048\052\057\057","\103\117\105\108\100")end function proverkaEmocij(y)local E if testQ[y].HumanMan==nil then E=1 end if testQ[y].HumanWoman==nil then E=1 end if testQ[y].DworfMan==nil then E=1 end if testQ[y].DworfWoman==nil then E=1 end if testQ[y].NEMan==nil then E=1 end if testQ[y].NEWoman==nil then E=1 end if testQ[y].GnomMan==nil then E=1 end if testQ[y].GnomWoman==nil then E=1 end if testQ[y].DrenayMan==nil then E=1 end if testQ[y].DrenayWoman==nil then E=1 end if testQ[y].OrkMan==nil then E=1 end if testQ[y].OrkWoman==nil then E=1 end if testQ[y].UndeadMan==nil then E=1 end if testQ[y].UndeaWoman==nil then E=1 end if testQ[y].TaurenMan==nil then E=1 end if testQ[y].TaurenWoman==nil then E=1 end if testQ[y].TrollMan==nil then E=1 end if testQ[y].TrollWoman==nil then E=1 end if testQ[y].ElfMan==nil then E=1 end if testQ[y].ElfWoman==nil then E=1 end return E end function testShip(y)local E if testQ[y].HumanMan==nil then E="\208\167\208\181\208\187\208\190\208\178\208\181\208\186"end if testQ[y].HumanWoman==nil then E="\208\167\208\181\208\187\208\190\208\178\208\181\208\186\208\176"end if testQ[y].DworfMan==nil then E="\208\148\208\178\208\190\209\128\209\132"end if testQ[y].DworfWoman==nil then E="\208\148\208\178\208\190\209\128\209\132\208\186\208\176"end if testQ[y].NEMan==nil then E="\208\157\208\190\209\135\208\189\208\190\209\141\208\187\209\140\209\132"end if testQ[y].NEWoman==nil then E="\208\157\208\190\209\135\208\189\208\190\209\141\208\187\209\140\209\132\208\186\208\176"end if testQ[y].GnomMan==nil then E="\208\147\208\189\208\190\208\188"end if testQ[y].GnomWoman==nil then E="\208\147\208\189\208\190\208\188\208\176"end if testQ[y].DrenayMan==nil then E="\208\148\209\128\208\181\208\189\208\181\208\185"end if testQ[y].DrenayWoman==nil then E="\208\148\209\128\208\181\208\189\208\181\208\185\208\186\208\176"end if testQ[y].OrkMan==nil then E="\208\158\209\128\208\186"end if testQ[y].OrkWoman==nil then E="\208\158\209\128\209\135\208\186\208\176"end if testQ[y].UndeadMan==nil then E="\208\144\208\189\208\180\208\181\208\180"end if testQ[y].UndeaWoman==nil then E="\208\149\209\137\208\181 \051\048 \208\188\208\184\208\189\209\131\209\130 \208\182\208\181\208\189\209\137\208\184\208\189\208\176"end if testQ[y].TaurenMan==nil then E="\208\162\208\176\209\131\209\128\208\181\208\189"end if testQ[y].TaurenWoman==nil then E="\208\162\208\181\208\187\208\190\209\135\208\186\208\176"end if testQ[y].TrollMan==nil then E="\208\162\209\128\208\190\208\187\208\187\209\140"end if testQ[y].TrollWoman==nil then E="\208\162\209\128\208\190\208\187\208\187\209\140\208\186\208\176"end if testQ[y].ElfMan==nil then E="\208\173\208\187\209\140\209\132"end if testQ[y].ElfWoman==nil then E="\208\173\208\187\209\140\209\132\208\176"end return E end function obnulenieEmocij(y)testQ[y].HumanMan=nil testQ[y].HumanWoman=nil testQ[y].DworfMan=nil testQ[y].DworfWoman=nil testQ[y].NEMan=nil testQ[y].NEWoman=nil testQ[y].GnomMan=nil testQ[y].GnomWoman=nil testQ[y].DrenayMan=nil testQ[y].DrenayWoman=nil testQ[y].OrkMan=nil testQ[y].OrkWoman=nil testQ[y].UndeadMan=nil testQ[y].UndeaWoman=nil testQ[y].TaurenMan=nil testQ[y].TaurenWoman=nil testQ[y].TrollMan=nil testQ[y].TrollWoman=nil testQ[y].ElfMan=nil testQ[y].ElfWoman=nil end function obnulenieEmocij1(y)testQ[y].HumanMan=1 testQ[y].HumanWoman=1 testQ[y].DworfMan=1 testQ[y].DworfWoman=1 testQ[y].NEMan=1 testQ[y].NEWoman=1 testQ[y].GnomMan=1 testQ[y].GnomWoman=1 testQ[y].DrenayMan=1 testQ[y].DrenayWoman=1 testQ[y].OrkMan=1 testQ[y].OrkWoman=1 testQ[y].UndeadMan=1 testQ[y].UndeaWoman=1 testQ[y].TaurenMan=1 testQ[y].TaurenWoman=1 testQ[y].TrollMan=1 testQ[y].TrollWoman=1 testQ[y].ElfMan=1 testQ[y].ElfWoman=1 end function nsGP()local y={}local E=GetNumRaidMembers()for E=1,E,1 do local u for g=1,GetNumGuildMembers(true),1 do local W,L,l,o,x,K,m,j,b,J,I,O,G,d,R,T,r=GetGuildRosterInfo(g)if W==UnitName("\114\097\105\100"..E)then y[E]={}local g=mysplit(j)y[E].nome=W y[E].public=m y[E].rank=L if g[3]~=nil then y[E].znach=tonumber(g[3])else y[E].znach=tonumber("\048\048\048\048")end u=1 end end if u==nil then y[E]={}if UnitName("\114\097\105\100"..E)~=nil then y[E].nome=UnitName("\114\097\105\100"..E)y[E].znach=tonumber("\048\048\048\048")y[E].public="\208\157\208\149 \208\146 \208\147\208\152\208\155\208\172\208\148\208\152\208\152"else y[E].nome="\208\191\209\131\209\129\209\130\208\190"y[E].znach=tonumber("\048\048\048\048")end end end table.sort(y,function(y,E)return y.znach<E.znach end)local u={}local g=tostring(1)for y,E in ipairs(y)do u[g]={}u[g].nome=E.nome u[g].znach=E.znach u[g].public=E.public u[g].rank=E.rank g=tostring(tonumber(g)+1)end return u end function gpEnTg()FriendsFrame:Show()GuildFrame:Show()testQ.gpEnTg={}for y=1,GetNumGuildMembers(true),1 do local E,u,g,W,L,l,o,x,K,m,j,b,J,I,O,G,d=GetGuildRosterInfo(y)local R=mysplit(x)if R[3]~=nil then testQ.gpEnTg[E]=tonumber(R[3])end end FriendsFrame:Hide()GuildFrame:Hide()end function addMioFld(y,E,u,g)if mioFld1~=nil then if mioFld1[y]~=nil then if mioFld1[y][E]~=nil then mioFld1[y][E][tostring(u)]=tostring(g)end end end end function readMioFld(y,E,u)if mioFld1~=nil then if mioFld1[y]~=nil then if mioFld1[y][E]~=nil then return mioFld1[y][E][tostring(u)]end end end end nBtn={}function nBtn.new(D,y,E,u,g,W,L,l,o,x,K,m,j,b,J,I,O,G,d,R,T,r)local X={}local h local Q local Z local t=R X.message=j function X.configure(L)if r==nil then L[y]=L[y]or CreateFrame("\066\117\116\116\111\110",nil,u,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")else L[y]=L[y]or CreateFrame("\066\117\116\116\111\110",nil,u,"")L[y]:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092"..(r.."\046\116\103\097"))if T~=0 then L[y]:SetHighlightTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092"..(r.."\046\116\103\097"))end h={}X:SetText(j)end L[y]:SetPoint(b,u,J,g,W)L[y]:SetSize(K,m)L[y]:SetText(j)L[y]:SetFrameStrata(G)if E~=nil then E(X)end end function X.reMove(W,E,g)W[y]:SetPoint(b,u,J,E,g)end function X.reSize(g,E,u)g[y]:SetSize(E,u)end function X.getID(E)print(y)end function X.Hide(E)E[y]:Hide()end function X.Show(E)E[y]:Show()end function X.textSize(u,E)h[y]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",E,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end function X.textMove(g,E,u)h[y]:SetPoint("\066\079\084\084\079\077\076\069\070\084",X[y],"\066\079\084\084\079\077\076\069\070\084",E,u)end function X.SetText(u,E)if r~=nil then h[y]=h[y]or X[y]:CreateFontString(nil,"\079\086\069\082\076\065\089")h[y]:SetSize(K,m)h[y]:SetPoint("\084\079\080\076\069\070\084")h[y]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",x,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")h[y]:SetText("\124\099\102\102"..(d..(E.."\124\114")))h[y]:Show()else X[y]:SetText(E)end end function X.getSaveNome(y)return t end function X.setOnUpdate(g,E,u)E(g[y],u)end function X.setOnEnter(u,E)E(u[y],j)end function X.setOnClick(u,E)E(u[y],j)end function X.setClick(W,E,u,g)W[y]:RegisterForClicks("\082\105\103\104\116\066\117\116\116\111\110\068\111\119\110","\076\101\102\116\066\117\116\116\111\110\068\111\119\110")W[y]:SetScript("\079\110\067\108\105\099\107",function(y,W,L)if E~=nil then if arg1=="\076\101\102\116\066\117\116\116\111\110"then E(y,W,t,g)end end if u~=nil then if arg1=="\082\105\103\104\116\066\117\116\116\111\110"then u(y,W,t,g)end end end)end function X.gesture(g,E,u)Q=CreateFrame("\070\082\065\077\069")Z=0 Q:SetScript("\079\110\085\112\100\097\116\101",function(g,W)Z=Z+W if Z>.1 then local g,W=WorldFrame:GetSize()local L,l=GetCursorPosition()if L<=20 and l>=W-20 then E(X[y])end if L>=g-20 and l>=W-20 then u(X[y])end end end)end function X.killall(E)Q:SetScript("\079\110\085\112\100\097\116\101",nil)X[y]:SetScript("\079\110\067\108\105\099\107",nil)end setmetatable(X,D)D.__index=D return X end function gpBtn1_enter(y,E)y:SetScript("\079\110\069\110\116\101\114",function(y,u,g)GameTooltip:SetOwner(y,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\155\208\154\208\156\058 \208\189\208\176\209\135\208\184\209\129\208\187\208\184\209\130\209\140 "..(" \124\099\102\102\070\070\056\067\048\048"..(E.." \124\099\102\102\057\057\102\102\057\057\208\147\208\159")))GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\159\208\154\208\156\058 \209\129\208\189\209\143\209\130\209\140 "..(" \124\099\102\102\070\070\056\067\048\048"..(E.." \124\099\102\102\057\057\102\102\057\057\208\147\208\159")))GameTooltip:Show()gpBtn1:Show()gpBtn2:Show()gpBtn3:Show()gpBtn4:Show()gpBtn5:Show()gpBtn6:Show()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",0,-20)ShowCheckboxWindow()end)y:SetScript("\079\110\076\101\097\118\101",function(y,E,u)GameTooltip:Hide()end)end function gpBtn1_click(y,E)y:RegisterForClicks("\082\105\103\104\116\066\117\116\116\111\110\068\111\119\110","\076\101\102\116\066\117\116\116\111\110\068\111\119\110")y:SetScript("\079\110\067\108\105\099\107",function(y,u)if testQ.gpRez==nil or#testQ.gpRez==0 then if arg1=="\076\101\102\116\066\117\116\116\111\110"then SendChatMessage("\208\147\208\159 "..E,"\071\085\073\076\068",nil,1)else SendChatMessage("\208\147\208\159 -"..E,"\071\085\073\076\068",nil,1)end gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)HideCheckboxWindow()gplabels={}testQ.gpRez=nil else if arg1=="\076\101\102\116\066\117\116\116\111\110"then sendGPnik(E)HideCheckboxWindow()gplabels={}testQ.gpRez=nil gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)else sendGPnik(-E)HideCheckboxWindow()gplabels={}testQ.gpRez=nil gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)end end end)end function change_spek(y,E,u,g)SendChatMessage("\033\208\183\208\176\208\188\208\181\209\130\208\186\208\176 "..g.message,"\071\085\073\076\068",nil,1)spek1:Hide()spek2:Hide()spek3:Hide()end function duelOnUpdate(y,E)y:SetScript("\079\110\069\110\116\101\114",function(y,u)GameTooltip:SetOwner(y,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\159\209\128\208\184\208\189\209\143\209\130\209\140 \208\180\209\131\209\141\208\187\209\140 \208\190\209\130 \208\184\208\179\209\128\208\190\208\186\208\176\058 \124\099\102\102\057\057\102\102\057\057"..E)GameTooltip:Show()end)y:SetScript("\079\110\076\101\097\118\101",function(y,E)GameTooltip:Hide()end)end function btnHide(y)y:Hide()end function btnShow(y)y:Show()end function gpBtnClick(y)if IsRaidLeader()then if testQ.raidAUKPobeda~=nil then SendChatMessage(testQ.raidAUKPobeda..(" \208\191\208\190\208\177\208\181\208\182\208\180\208\176\208\181\209\130\044 \208\191\208\190\209\129\209\130\208\176\208\178\208\184\208\178 "..(testQ.raidAUKPobeda_gp.." \208\147\208\159")),"\082\065\073\068",nil,1)end SendAddonMessage("\110\115\065\085\075\101\110\100 ","\049\048","\082\065\073\068")end end function ns_duelTrue(y,E,u)SendAddonMessage("\110\115\095\100\117\101\108\095\111\116\118\101\116",u,"\103\117\105\108\100")duelBtn[u.."\049"]:Hide()duelBtn[u.."\050"]:Hide()end function ns_duelFalse(y,E,u)SendChatMessage("\208\162\208\176\208\186 \209\143 \208\182 \209\130\209\128\209\131\209\129 \208\184 \208\191\208\190\208\180\208\187\208\181\209\134\046 \208\158\209\130\208\186\208\176\208\183\209\139\208\178\208\176\209\142\209\129\209\140\046","\071\085\073\076\068",nil,1)duelBtn[u.."\049"]:Hide()duelBtn[u.."\050"]:Hide()SendAddonMessage("\110\115\095\100\117\101\108\095\111\116\107\097\122",u,"\103\117\105\108\100")end function nsAUK(y,E,u)if testQ.raidAUK~=nil then E=tonumber(E)if E~=nil then local g=tablelength(testQ.raidAUK)local W local L local l=tablelength(testQ.rez)local o=""local x=nil for E=1,l,1 do if testQ.rez[tostring(E)].nome==y then L=testQ.rez[tostring(E)].public W=tonumber(testQ.rez[tostring(E)].znach)break end end if g>=1 then for u=1,g,1 do if testQ.raidAUK[u].nome==y then if tonumber(E)<=W then testQ.raidAUK[u].auk=E end x=1 break end end if x==nil then testQ.raidAUK[g+1]={nome=y,auk=0;public=L;rezultat=W}if testQ.raidAUK[g+1].auk+tonumber(E)<=W then testQ.raidAUK[g+1].auk=testQ.raidAUK[g+1].auk+tonumber(E)end end else testQ.raidAUK[1]={nome=y;auk=0;public=L,rezultat=W}if testQ.raidAUK[1].auk+tonumber(E)<=W then testQ.raidAUK[1].auk=testQ.raidAUK[1].auk+tonumber(E)end end table.sort(testQ.raidAUK,function(y,E)return y.auk<E.auk end)local K={}local m=""for y,E in ipairs(testQ.raidAUK)do K[y]={nome=E.nome,znach=E.auk;public=E.public;rezultat=E.rezultat}m=m..("\124\099\070\070\054\052\057\053\069\068"..(E.nome..(" \124\099\102\102\070\070\056\067\048\048\040"..(E.public..("\124\099\102\102\056\048\056\048\056\048\124\124"..("\124\099\102\102\102\102\048\048\048\048"..(E.rezultat..("\124\099\102\102\070\070\056\067\048\048\041\058 \124\099\102\102\057\057\102\102\057\057"..(E.auk.."\n")))))))))if y==#testQ.raidAUK and IsRaidLeader()then SendChatMessage(E.nome..("\058 "..(E.auk.."\044 \208\186\209\130\208\190 \208\177\208\190\208\187\209\140\209\136\208\181\063")),"\082\065\073\068",nil,1)testQ.raidAUKPobeda=E.nome testQ.raidAUKPobeda_gp=E.auk end end print(u)TextWindow(u..("\n\n"..m))end end end function lastWords(y)local E=mysplit(y)E=E[1]local u=string.utf8len(E)local g=string.utf8len(y)local W=string.utf8sub(y,u+1,g)return W end function sendGPnik(y)local E=""for y=1,#testQ.gpRez,1 do E=E..(testQ.gpRez[y].." ")end SendAddonMessage("\110\115\071\080"..(" "..y),E,"\103\117\105\108\100")end function sendGP(y)local E=GetUnitName("\112\108\097\121\101\114")msg={}msg[2]=y for y=1,GetNumGuildMembers(true),1 do local u,g,W,L,l,o,x,K,m,j,b,J,I,O,G,d,R=GetGuildRosterInfo(y)if u==E then if g=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"or g=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"then if GetNumRaidMembers()<=10 then local y=""y=UnitName("\114\097\105\100\049").." "for E=2,GetNumRaidMembers(),1 do y=y..(UnitName("\114\097\105\100"..E).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),y,"\103\117\105\108\100")elseif GetNumRaidMembers()>10 and GetNumRaidMembers()<=20 then local y=""y=UnitName("\114\097\105\100\049").." "for E=2,10,1 do y=y..(UnitName("\114\097\105\100"..E).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),y,"\103\117\105\108\100")local E=""E=UnitName("\114\097\105\100\049\049").." "for y=12,GetNumRaidMembers(),1 do E=E..(UnitName("\114\097\105\100"..y).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),E,"\103\117\105\108\100")elseif GetNumRaidMembers()>20 then local y=""y=UnitName("\114\097\105\100\049").." "for E=2,10,1 do y=y..(UnitName("\114\097\105\100"..E).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),y,"\103\117\105\108\100")local E=""E=UnitName("\114\097\105\100\049\049").." "for y=12,20,1 do E=E..(UnitName("\114\097\105\100"..y).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),E,"\103\117\105\108\100")local u=""u=UnitName("\114\097\105\100\050\049").." "for y=22,GetNumRaidMembers(),1 do u=u..(UnitName("\114\097\105\100"..y).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),u,"\103\117\105\108\100")end end end end end function createParent()parentFrame=CreateFrame("\070\114\097\109\101",nil,UIParent)parentFrame:SetSize(200,200)parentFrame:SetPoint("\067\069\078\084\069\082")parentFrame:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100";edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114";tile=true;tileSize=32;edgeSize=32,insets={left=11,right=12,top=12;bottom=11}})parentFrame:SetBackdropColor(0,0,0,1)parentFrame:SetMovable(true)parentFrame:EnableMouse(true)parentFrame:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")parentFrame:SetScript("\079\110\068\114\097\103\083\116\097\114\116",function(y)y:StartMoving()end)parentFrame:SetScript("\079\110\068\114\097\103\083\116\111\112",function(y)y:StopMovingOrSizing()ClampFrameToScreen(y)SaveFramePosition(y)end)if testQ.pgChbX and testQ.pgChbY then parentFrame:ClearAllPoints()parentFrame:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",testQ.pgChbX,testQ.pgChbY)end HideCheckboxWindow()end function ClampFrameToScreen(y)local E=UIParent:GetWidth()local u=UIParent:GetHeight()local g=y:GetWidth()local W=y:GetHeight()local L,l=y:GetCenter()L=L or 0 l=l or 0 L=math.max(g/2,math.min(E-g/2,L))l=math.max(W/2,math.min(u-W/2,l))y:ClearAllPoints()y:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",L,l)end function SaveFramePosition(y)local E,u=y:GetCenter()testQ.pgChbX=E testQ.pgChbY=u end function CreateCheckboxes(y,E)local u={}local g=-10 local W=0 for E,L in ipairs(E)do local l=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,y,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")l:SetSize(24,24)l:SetPoint("\084\079\080\076\069\070\084",10,g)local o=l:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")o:SetPoint("\076\069\070\084",l,"\082\073\071\072\084",5,0)o:SetText(L)l.label=L l:SetScript("\079\110\067\108\105\099\107",function(y)if testQ.gpRez==nil then testQ.gpRez={}end local E=mysplit(y.label)if y:GetChecked()then table.insert(testQ.gpRez,E[1])else for y=1,#testQ.gpRez,1 do if testQ.gpRez[y]==E[1]then table.remove(testQ.gpRez,y)end end end end)u[E]=l local x=o:GetStringWidth()if x>W then W=x end g=g-30 end local L=W+50 local l=#E*30+20 y:SetSize(L,l)return u end function HideCheckboxWindow()if parentFrame then parentFrame:Hide()end end function ShowCheckboxWindow()if parentFrame then parentFrame:Show()end end function DestroyCheckboxWindow()if parentFrame then parentFrame:Hide()parentFrame:ClearAllPoints()parentFrame:SetParent(nil)parentFrame=nil end end gplabels={}textWindow=nil local function L(y)local E=UIParent:GetWidth()local u=UIParent:GetHeight()local g=y:GetWidth()local W=y:GetHeight()local L,l=y:GetCenter()L=L or 0 l=l or 0 L=math.max(g/2,math.min(E-g/2,L))l=math.max(W/2,math.min(u-W/2,l))y:ClearAllPoints()y:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",L,l)end function TextWindow(y)if textWindow then textWindow.textLabel:SetText(y)local E=textWindow.textLabel:GetStringWidth()local u=textWindow.textLabel:GetStringHeight()local g=20 textWindow:SetSize(E+g,u+g)L(textWindow)textWindow:Show()return end textWindow=CreateFrame("\070\114\097\109\101",nil,UIParent)textWindow:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100",edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114";tile=true,tileSize=32;edgeSize=32;insets={left=11,right=12;top=12;bottom=11}})textWindow:SetBackdropColor(0,0,0,1)textWindow:SetMovable(true)textWindow:EnableMouse(true)textWindow:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")textWindow:SetScript("\079\110\068\114\097\103\083\116\097\114\116",function(y)y:StartMoving()end)textWindow:SetScript("\079\110\068\114\097\103\083\116\111\112",function(y)y:StopMovingOrSizing()L(y)testQ.textWinX,testQ.textWinY=y:GetCenter()end)textWindow.textLabel=textWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")textWindow.textLabel:SetPoint("\067\069\078\084\069\082",textWindow,"\067\069\078\084\069\082",0,0)textWindow.textLabel:SetText(y)local E=textWindow.textLabel:GetStringWidth()local u=textWindow.textLabel:GetStringHeight()local g=20 textWindow:SetSize(E+g,u+g)if testQ.textWinX and testQ.textWinY then textWindow:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",testQ.textWinX,testQ.textWinY)else textWindow:SetPoint("\082\073\071\072\084",btn[973],"\076\069\070\084",0,0)end end function HideTextWindow()if textWindow then textWindow:Hide()end end function ShowTextWindow()if textWindow then textWindow:Show()end end function DestroyTextWindow()if textWindow then textWindow:Hide()textWindow:ClearAllPoints()textWindow:SetParent(nil)textWindow=nil end end local function l(y)return y:match("\091\094\092\047\093\043\036")or y end function CreateListUI()if TestListFrame then TestListFrame:Show()return end local y=CreateFrame("\070\114\097\109\101","\084\101\115\116\076\105\115\116\070\114\097\109\101",UIParent)y:SetSize(400,500)y:SetPoint("\067\069\078\084\069\082")y:SetMovable(true)y:EnableMouse(true)y:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")y:SetScript("\079\110\068\114\097\103\083\116\097\114\116",y.StartMoving)y:SetScript("\079\110\068\114\097\103\083\116\111\112",y.StopMovingOrSizing)y:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100";edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",tile=true,tileSize=32,edgeSize=32,insets={left=11,right=12,top=12;bottom=11}})local E=CreateFrame("\066\117\116\116\111\110",nil,y,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")E:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)E:SetScript("\079\110\067\108\105\099\107",function()y:Hide()end)local u=y:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")u:SetPoint("\084\079\080",0,-20)u:SetText("\208\163\208\191\209\128\208\176\208\178\208\187\208\181\208\189\208\184\208\181 \209\129\208\191\208\184\209\129\208\186\208\190\208\188")local g=CreateFrame("\069\100\105\116\066\111\120",nil,y,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")g:SetSize(200,30)g:SetPoint("\084\079\080",0,-60)g:SetAutoFocus(false)local W=CreateFrame("\066\117\116\116\111\110",nil,y,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")W:SetSize(100,30)W:SetPoint("\084\079\080\076\069\070\084",g,"\066\079\084\084\079\077\076\069\070\084",0,-20)W:SetText("\208\148\208\190\208\177\208\176\208\178\208\184\209\130\209\140")local L=CreateFrame("\066\117\116\116\111\110",nil,y,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")L:SetSize(100,30)L:SetPoint("\084\079\080\082\073\071\072\084",g,"\066\079\084\084\079\077\082\073\071\072\084",0,-20)L:SetText("\208\163\208\180\208\176\208\187\208\184\209\130\209\140")local o=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\084\101\115\116\083\099\114\111\108\108\070\114\097\109\101",y,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")o:SetSize(360,300)o:SetPoint("\084\079\080",W,"\066\079\084\084\079\077",0,-30)local x=_G.TestScrollFrameScrollBar x:SetPoint("\084\079\080\076\069\070\084",o,"\084\079\080\082\073\071\072\084",32,-16)local K=CreateFrame("\070\114\097\109\101",nil,o)K:SetSize(335,0)o:SetScrollChild(K)testQ=testQ or{}testQ.fls=testQ.fls or{}local m={}for y,E in pairs(testQ.fls)do if type(y)~="\115\116\114\105\110\103"or type(E)~="\115\116\114\105\110\103"then table.insert(m,y)end end for y,E in ipairs(m)do testQ.fls[E]=nil end K.entries={}local function j()local y=0 for y,E in ipairs(K.entries)do E:Hide()end K.entries=K.entries or{}local E={}for y in pairs(testQ.fls)do table.insert(E,y)end table.sort(E,function(y,E)return y<E end)for E,u in ipairs(E)do local g=testQ.fls[u]local W=K.entries[E]if not W then W=CreateFrame("\070\114\097\109\101",nil,K)W:SetSize(335,20)W.text=W:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")W.text:SetPoint("\076\069\070\084",5,0)W.text:SetWidth(200)W.dropdown=CreateFrame("\070\114\097\109\101","\084\101\115\116\068\114\111\112\068\111\119\110"..E,W,"\085\073\068\114\111\112\068\111\119\110\077\101\110\117\084\101\109\112\108\097\116\101")W.dropdown:SetPoint("\082\073\071\072\084",W,"\082\073\071\072\084",-10,0)W.dropdown:SetWidth(120)local y=_G["\084\101\115\116\068\114\111\112\068\111\119\110"..(E.."\066\117\116\116\111\110")]y:SetScript("\079\110\067\108\105\099\107",function(y)ToggleDropDownMenu(1,nil,W.dropdown,y,0,0)end)local L=_G["\084\101\115\116\068\114\111\112\068\111\119\110"..(E.."\084\101\120\116")]if L then L:SetWidth(150)end UIDropDownMenu_Initialize(W.dropdown,function(y,E)if not E then return end if E==1 then for y,u in ipairs(ns_alert_sounds)do local g=UIDropDownMenu_CreateInfo()g.text=u.label g.value=u g.hasArrow=true g.notCheckable=true UIDropDownMenu_AddButton(g,E)end elseif E==2 then local y=UIDROPDOWNMENU_MENU_VALUE if y and y.sounds then for y,L in ipairs(y.sounds)do local o=UIDropDownMenu_CreateInfo()o.text=l(L)o.value=L o.func=function()testQ.fls[u]=L UIDropDownMenu_SetText(W.dropdown,l(L))PlaySoundFile(L,"\077\097\115\116\101\114")CloseDropDownMenus()end o.checked=g==L UIDropDownMenu_AddButton(o,E)end end end end)K.entries[E]=W end W.name=u W.text:SetText(u)if g then UIDropDownMenu_SetText(W.dropdown,l(g))else UIDropDownMenu_SetText(W.dropdown,"\208\157\208\181 \208\178\209\139\208\177\209\128\208\176\208\189\208\190")end W:SetPoint("\084\079\080\076\069\070\084",5,-y)W:Show()y=y+20 end for y=#E+1,#K.entries,1 do K.entries[y]:Hide()end K:SetHeight(math.max(y,1))o:UpdateScrollChildRect()x:SetValue(0)end W:SetScript("\079\110\067\108\105\099\107",function()local y=g:GetText()if y~=""and not testQ.fls[y]then testQ.fls[y]="\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\102\108\115\046\109\112\051"j()g:SetText("")g:ClearFocus()end end)L:SetScript("\079\110\067\108\105\099\107",function()local y=g:GetText()if y~=""and testQ.fls[y]then testQ.fls[y]=nil j()g:SetText("")g:ClearFocus()end end)j()end function SendGuildOfficerMessageWithBonus(y)local E=mysplit(y)local u=UnitName("\112\108\097\121\101\114")if#E<3 then return end local g=E[2]local W=table.concat(E," ",3)for y=1,GetNumGuildMembers(true),1 do local E,L=GetGuildRosterInfo(y)if E==u then if L=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"or L=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"then SendChatMessage(W..(" \208\191\208\187\209\142\209\129 "..g),"\079\070\070\073\067\069\082",nil,1)SendAddonMessage("\110\115\071\080"..(" "..g),W,"\103\117\105\108\100")end SendAddonMessage("\110\115\071\080\108\111\103\082",g..(" "..W),"\103\117\105\108\100")break end end end GpDb_old={}GpDb_old.__index=GpDb_old function GpDb_old.new(E,y)local u={gp_data={};sort_column="\110\105\099\107";sort_ascending=true;visible_rows=20,selected_indices={};last_selected_index=nil,logData={}}setmetatable(u,E)u:_CreateWindow()u:_CreateRaidSelectionWindow()u:_CreateLogWindow()return u end function GpDb_old._CreateLogWindow(y)y.logWindow=CreateFrame("\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\087\105\110\100\111\119",y.window)y.logWindow:SetFrameStrata("\068\073\065\076\079\071")y.logWindow:SetSize(600,y.window:GetHeight())y.logWindow:SetPoint("\084\079\080\076\069\070\084",y.window,"\084\079\080\082\073\071\072\084",5,0)y.logWindow:SetMovable(false)y.logWindow:Hide()y.logWindow.background=y.logWindow:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")y.logWindow.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")y.logWindow.background:SetVertexColor(.1,.1,.1)y.logWindow.background:SetAlpha(.9)y.logWindow.background:SetAllPoints(true)y.logWindow.borderFrame=CreateFrame("\070\114\097\109\101",nil,y.logWindow)y.logWindow.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)y.logWindow.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)y.logWindow.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",edgeSize=16;insets={left=4;right=4,top=4;bottom=4}})y.logWindow.closeButton=CreateFrame("\066\117\116\116\111\110",nil,y.logWindow,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")y.logWindow.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)y.logWindow.closeButton:SetScript("\079\110\067\108\105\099\107",function()y.logWindow:Hide()end)y.logWindow.filters=CreateFrame("\070\114\097\109\101",nil,y.logWindow)y.logWindow.filters:SetPoint("\084\079\080\076\069\070\084",10,-5)y.logWindow.filters:SetPoint("\082\073\071\072\084",-10,0)y.logWindow.filters:SetHeight(30)y.logWindow.countFilter=CreateFrame("\069\100\105\116\066\111\120",nil,y.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")y.logWindow.countFilter:SetSize(60,20)y.logWindow.countFilter:SetPoint("\076\069\070\084",y.logWindow.filters,"\076\069\070\084")y.logWindow.countFilter:SetAutoFocus(false)y.logWindow.countFilter:SetText("\208\154\208\190\208\187-\208\178\208\190")y.logWindow.countFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()y.logWindow.countFilter:ClearFocus()end)y.logWindow.countFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()y.logWindow.countFilter:ClearFocus()y:UpdateLogDisplay()end)y.logWindow.timeFilter=CreateFrame("\069\100\105\116\066\111\120",nil,y.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")y.logWindow.timeFilter:SetSize(70,20)y.logWindow.timeFilter:SetPoint("\076\069\070\084",y.logWindow.countFilter,"\082\073\071\072\084",5,0)y.logWindow.timeFilter:SetAutoFocus(false)y.logWindow.timeFilter:SetText("\208\146\209\128\208\181\208\188\209\143")y.logWindow.timeFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()y.logWindow.timeFilter:ClearFocus()end)y.logWindow.timeFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()y.logWindow.timeFilter:ClearFocus()y:UpdateLogDisplay()end)y.logWindow.rlFilter=CreateFrame("\069\100\105\116\066\111\120",nil,y.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")y.logWindow.rlFilter:SetSize(70,20)y.logWindow.rlFilter:SetPoint("\076\069\070\084",y.logWindow.timeFilter,"\082\073\071\072\084",5,0)y.logWindow.rlFilter:SetAutoFocus(false)y.logWindow.rlFilter:SetText("\208\160\208\155")y.logWindow.rlFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()y.logWindow.rlFilter:ClearFocus()end)y.logWindow.rlFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()y.logWindow.rlFilter:ClearFocus()y:UpdateLogDisplay()end)y.logWindow.raidFilter=CreateFrame("\069\100\105\116\066\111\120",nil,y.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")y.logWindow.raidFilter:SetSize(100,20)y.logWindow.raidFilter:SetPoint("\076\069\070\084",y.logWindow.rlFilter,"\082\073\071\072\084",5,0)y.logWindow.raidFilter:SetAutoFocus(false)y.logWindow.raidFilter:SetText("\208\160\208\181\208\185\208\180")y.logWindow.raidFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()y.logWindow.raidFilter:ClearFocus()end)y.logWindow.raidFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()y.logWindow.raidFilter:ClearFocus()y:UpdateLogDisplay()end)y.logWindow.nameFilter=CreateFrame("\069\100\105\116\066\111\120",nil,y.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")y.logWindow.nameFilter:SetSize(100,20)y.logWindow.nameFilter:SetPoint("\076\069\070\084",y.logWindow.raidFilter,"\082\073\071\072\084",5,0)y.logWindow.nameFilter:SetAutoFocus(false)y.logWindow.nameFilter:SetText("\208\157\208\184\208\186")y.logWindow.nameFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()y.logWindow.nameFilter:ClearFocus()end)y.logWindow.nameFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()y.logWindow.nameFilter:ClearFocus()y:UpdateLogDisplay()end)y.logWindow.showButton=CreateFrame("\066\117\116\116\111\110",nil,y.logWindow.filters,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")y.logWindow.showButton:SetSize(80,22)y.logWindow.showButton:SetPoint("\076\069\070\084",y.logWindow.nameFilter,"\082\073\071\072\084",5,0)y.logWindow.showButton:SetText("\208\159\208\190\208\186\208\176\208\183\208\176\209\130\209\140")y.logWindow.showButton:SetScript("\079\110\067\108\105\099\107",function()local function E(y)if y:find("\037\115")then y=y:gsub("\037\115\043","\095")end return y end local u=E(y.logWindow.countFilter:GetText())local g=E(y.logWindow.timeFilter:GetText())local W=E(y.logWindow.rlFilter:GetText())local L=E(y.logWindow.raidFilter:GetText())local l=E(y.logWindow.nameFilter:GetText())gpDb_old:ClearLog()SendAddonMessage("\078\083\083\104\111\119\077\101\076\111\103\115",u..(" "..(g..(" "..(W..(" "..(L..(" "..l))))))),"\103\117\105\108\100")end)y.logWindow.scrollFrame=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\083\099\114\111\108\108\070\114\097\109\101",y.logWindow,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")y.logWindow.scrollFrame:SetPoint("\084\079\080\076\069\070\084",0,-35)y.logWindow.scrollFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",0,10)y.logWindow.scrollChild=CreateFrame("\070\114\097\109\101")y.logWindow.scrollChild:SetSize(580,1000)y.logWindow.scrollFrame:SetScrollChild(y.logWindow.scrollChild)y.logRows={}for E=1,50,1 do local u=CreateFrame("\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\082\111\119"..E,y.logWindow.scrollChild)u:SetSize(580,40)u:SetPoint("\084\079\080\076\069\070\084",0,-((E-1)*40))u.text=u:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")u.text:SetAllPoints(true)u.text:SetJustifyH("\076\069\070\084")u.text:SetJustifyV("\084\079\080")u.text:SetWordWrap(true)u.text:SetText("")y.logRows[E]=u end end function GpDb_old.ClearLog(y)y.logData={}y.logWindow.countFilter:SetText("\208\154\208\190\208\187-\208\178\208\190")y.logWindow.timeFilter:SetText("\208\146\209\128\208\181\208\188\209\143")y.logWindow.rlFilter:SetText("\208\160\208\155")y.logWindow.raidFilter:SetText("\208\160\208\181\208\185\208\180")y.logWindow.nameFilter:SetText("\208\157\208\184\208\186")y:UpdateLogDisplay()print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\155\208\190\208\179 \209\131\209\129\208\191\208\181\209\136\208\189\208\190 \208\190\209\135\208\184\209\137\208\181\208\189")end function GpDb_old._CreateWindow(y)y.window=CreateFrame("\070\114\097\109\101","\071\112\084\114\097\099\107\101\114\087\105\110\100\111\119",UIParent)y.window:SetFrameStrata("\068\073\065\076\079\071")y.window:SetSize(400,500)y.window:SetPoint("\076\069\070\084",5,100)y.window:SetMovable(true)y.window:EnableMouse(true)y.window:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")y.window:SetScript("\079\110\068\114\097\103\083\116\097\114\116",y.window.StartMoving)y.window:SetScript("\079\110\068\114\097\103\083\116\111\112",y.window.StopMovingOrSizing)y.window:Hide()y.window.background=y.window:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")y.window.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")y.window.background:SetVertexColor(0,0,0)y.window.background:SetAlpha(1)y.window.background:SetAllPoints(true)y.window.borderFrame=CreateFrame("\070\114\097\109\101",nil,y.window)y.window.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)y.window.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)y.window.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114";edgeSize=16,insets={left=4,right=4;top=4,bottom=4}})y.window.title=y.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")y.window.title:SetPoint("\084\079\080",0,-15)y.window.title:SetText("")y.window.closeButton=CreateFrame("\066\117\116\116\111\110",nil,y.window,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")y.window.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)y.window.closeButton:SetScript("\079\110\067\108\105\099\107",function()y.window:Hide()end)y.window.logButton=CreateFrame("\066\117\116\116\111\110",nil,y.window,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")y.window.logButton:SetSize(24,24)y.window.logButton:SetPoint("\082\073\071\072\084",y.window.closeButton,"\076\069\070\084",-5,0)y.window.logButton:SetText("\076")y.window.logButton:SetScript("\079\110\067\108\105\099\107",function()y:ToggleLogWindow()end)y.window.raidOnlyCheckbox=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,y.window,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")y.window.raidOnlyCheckbox:SetPoint("\084\079\080\076\069\070\084",10,-15)y.window.raidOnlyCheckbox:SetSize(24,24)y.window.raidOnlyCheckbox.text=y.window.raidOnlyCheckbox:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")y.window.raidOnlyCheckbox.text:SetPoint("\076\069\070\084",y.window.raidOnlyCheckbox,"\082\073\071\072\084",5,0)y.window.raidOnlyCheckbox.text:SetText("\208\162\208\190\208\187\209\140\208\186\208\190 \209\128\208\181\208\185\208\180")y.window.raidOnlyCheckbox:SetScript("\079\110\067\108\105\099\107",function()y:_UpdateFromGuild()y:UpdateWindow()end)y.window.scrollFrame=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\083\099\114\111\108\108\070\114\097\109\101",y.window,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")y.window.scrollFrame:SetPoint("\084\079\080\076\069\070\084",0,-40)y.window.scrollFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",0,40)y.window.scrollChild=CreateFrame("\070\114\097\109\101")y.window.scrollChild:SetSize(380,500)y.window.scrollFrame:SetScrollChild(y.window.scrollChild)y.window.scrollBar=_G[y.window.scrollFrame:GetName().."\083\099\114\111\108\108\066\097\114"]y.window.scrollBar:SetPoint("\084\079\080\076\069\070\084",y.window.scrollFrame,"\084\079\080\082\073\071\072\084",-20,-16)y.window.scrollBar:SetPoint("\066\079\084\084\079\077\076\069\070\084",y.window.scrollFrame,"\066\079\084\084\079\077\082\073\071\072\084",-20,16)y.window.countText=y.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")y.window.countText:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,10)y.window.countText:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,10)y.window.countText:SetJustifyH("\076\069\070\084")y.window.countText:SetText("")y.window.totalText=y.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")y.window.totalText:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,30)y.window.totalText:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,30)y.window.totalText:SetJustifyH("\076\069\070\084")y.window.totalText:SetText("")y:_SetupTable()end function GpDb_old._SetupTable(y)local u={"\208\157\208\184\208\186","\208\147\208\159"}for E,u in ipairs(u)do local g=CreateFrame("\066\117\116\116\111\110",nil,y.window.scrollChild)g:SetSize(E==1 and 290 or 50,20)g:SetPoint("\084\079\080\076\069\070\084",(E-1)*290+(E==2 and 10 or 0),0)g:SetNormalFontObject("\071\097\109\101\070\111\110\116\078\111\114\109\097\108")g:SetHighlightFontObject("\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")local W=g:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")W:SetAllPoints(true)W:SetText(u)g:SetScript("\079\110\067\108\105\099\107",function()y:SortData(u:lower())y:UpdateWindow()end)end y.rows={}for u=1,999,1 do local g=CreateFrame("\066\117\116\116\111\110","\071\112\068\098\095\111\108\100\082\111\119"..u,y.window.scrollChild)g:SetSize(350,20)g:SetPoint("\084\079\080\076\069\070\084",0,-25-(u-1)*25)g:EnableMouse(true)g:RegisterForClicks("\076\101\102\116\066\117\116\116\111\110\085\112","\082\105\103\104\116\066\117\116\116\111\110\085\112")g:SetHighlightTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056");(g:GetHighlightTexture()):SetVertexColor(.4,.4,.8,.4)g.selection=g:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")g.selection:SetAllPoints(true)g.selection:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")g.selection:SetVertexColor(.3,.3,.7,.7)g.selection:Hide()g.nick=g:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")g.nick:SetPoint("\076\069\070\084",10,0)g.nick:SetWidth(290)g.nick:SetJustifyH("\076\069\070\084")g.gp=g:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")g.gp:SetPoint("\082\073\071\072\084",5,0)g.gp:SetWidth(50)g.gp:SetJustifyH("\082\073\071\072\084")g.lastClickTime=0 g:SetScript("\079\110\067\108\105\099\107",function(W,L,l)local o=FauxScrollFrame_GetOffset(y.window.scrollFrame)local x=u+o if not y.gp_data or not y.gp_data[x]then return end local K=GetTime()if L=="\076\101\102\116\066\117\116\116\111\110"and(E()and K-g.lastClickTime<.5)then y:ClearSelection()for E=1,#y.gp_data,1 do y.selected_indices[E]=true end y.last_selected_index=x y:_UpdateSelectionCount()y:RefreshRowHighlights()y:UpdateRaidWindowVisibility()if y.raidWindow and y.raidWindow:IsShown()then y:_UpdateSelectedPlayersText()end g.lastClickTime=0 return end g.lastClickTime=K if L=="\076\101\102\116\066\117\116\116\111\110"then local E=y.selected_indices[x]if IsShiftKeyDown()then if not y.last_selected_index then y:ClearSelection()y.selected_indices[x]=true y.last_selected_index=x else local E=math.min(y.last_selected_index,x)local u=math.max(y.last_selected_index,x)if not IsControlKeyDown()then y:ClearSelection()end for E=E,u,1 do if y.gp_data[E]then y.selected_indices[E]=true end end end elseif IsControlKeyDown()then y.selected_indices[x]=not E for E in pairs(y.selected_indices)do if not y.gp_data[E]then y.selected_indices[E]=nil end end if y.selected_indices[x]then y.last_selected_index=x else y.last_selected_index=nil for E in pairs(y.selected_indices)do if y.selected_indices[E]then y.last_selected_index=E break end end end else if E then y:ClearSelection()else y:ClearSelection()y.selected_indices[x]=true y.last_selected_index=x end end y:_UpdateSelectionCount()y:RefreshRowHighlights()y:UpdateRaidWindowVisibility()if y.raidWindow and y.raidWindow:IsShown()then y:_UpdateSelectedPlayersText()end end end)y.rows[u]=g end y.window:SetScript("\079\110\072\105\100\101",function()y:ClearSelection()if y.raidWindow and y.raidWindow:IsShown()then y.raidWindow:Hide()end if y.logWindow and y.logWindow:IsShown()then y.logWindow:Hide()end end)end function GpDb_old.ToggleLogWindow(y)if not y.logWindow then y:_CreateLogWindow()end if y.logWindow:IsShown()then y.logWindow:Hide()else y.logWindow:Show()y:UpdateLogDisplay()if y.raidWindow and y.raidWindow:IsShown()then y.logWindow:SetHeight(y.window:GetHeight()/2)else y.logWindow:SetHeight(y.window:GetHeight())end end end function GpDb_old.UpdateLogDisplay(y)if not y.logWindow or not y.logWindow:IsShown()then return end local E=0 local u={}for g,W in ipairs(y.logData)do local L=y.logWindow.scrollChild:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")L:SetWidth(580)L:SetText(W.text)L:SetWordWrap(true)local l=L:GetStringHeight()+5 u[g]=l E=E+l L:Hide()end local g=0 for E=1,#y.logRows,1 do local W=E if W<=#y.logData then local L=y.logData[W]local l=u[W]y.logRows[E]:SetHeight(l)y.logRows[E]:SetPoint("\084\079\080\076\069\070\084",0,-g)y.logRows[E].text:SetText(L.text)y.logRows[E]:Show()g=g+l else y.logRows[E]:Hide()end end y.logWindow.scrollChild:SetHeight(E)y.logWindow.scrollFrame:UpdateScrollChildRect()end function GpDb_old._UpdateSelectionCount(y)local E=0 for u,g in pairs(y.selected_indices)do if g and y.gp_data[u]then E=E+1 else y.selected_indices[u]=nil end end y.window.countText:SetText(string.format("\208\146\209\139\208\180\208\181\208\187\208\181\208\189\208\190\058 \037\100",E))if E==0 then y.last_selected_index=nil end return E end function GpDb_old.IsValidIndex(E,y)return y and(type(y)=="\110\117\109\098\101\114"and(E.gp_data and E.gp_data[y]))end function GpDb_old.RefreshRowHighlights(y)local E=FauxScrollFrame_GetOffset(y.window.scrollFrame)for u,g in ipairs(y.rows)do local W=u+E if W<=#y.gp_data then if y.selected_indices[W]then g.selection:Show();(g:GetHighlightTexture()):SetAlpha(.2)else g.selection:Hide();(g:GetHighlightTexture()):SetAlpha(.4)end end end local u=0 for y in pairs(y.selected_indices)do u=u+1 end y.window.countText:SetText(string.format("\208\146\209\139\208\180\208\181\208\187\208\181\208\189\208\190\058 \037\100",u))end function GpDb_old.ClearSelection(y)y.selected_indices={}y.last_selected_index=nil y:_UpdateSelectionCount()y:RefreshRowHighlights()y:UpdateRaidWindowVisibility()end function GpDb_old.GetSelectedEntries(y)local E={}for u,g in pairs(y.selected_indices)do if u<=#y.gp_data then table.insert(E,y.gp_data[u])end end return E end function GpDb_old.AddLogEntry(L,y,E,u,g,W)if not L.logWindow then L:_CreateLogWindow()end local function l(y)if not y or type(y)~="\115\116\114\105\110\103"or y==""then return"\124\099\070\070\070\070\070\070\070\070"end for E=1,GetNumGuildMembers(),1 do local u,g,W,L,l,o,x,K,m,j,b=GetGuildRosterInfo(E)if u and u==y then local y=RAID_CLASS_COLORS[b]if y then return string.format("\124\099\070\070\037\048\050\120\037\048\050\120\037\048\050\120",y.r*255,y.g*255,y.b*255)end break end end return"\124\099\070\070\070\070\070\070\070\070"end local o=tonumber(E)or 0 local x="\124\099\070\070\065\048\065\048\065\048"..((y or"\063\063\058\063\063").."\124\114")local K=l(u)..((u or"\208\157\208\181\208\184\208\183\208\178\208\181\209\129\209\130\208\189\208\190").."\124\114")local m=o>=0 and"\124\099\070\070\048\048\070\070\048\048"or"\124\099\070\070\070\070\048\048\048\048"local j=m..(tostring(o).."\124\114")local b="\124\099\070\070\070\070\070\070\048\048"..((g or"\208\157\208\181\208\184\208\183\208\178\208\181\209\129\209\130\208\189\208\190").."\124\114")local function J(y)if not y or type(y)~="\115\116\114\105\110\103"then return y end for E=1,GetNumGuildMembers(),1 do local u,g,W,L,l,o,x,K=GetGuildRosterInfo(E)if u and K then local E={}for y in K:gmatch("\037\083\043")do table.insert(E,y)end if#E>=2 and E[2]==y then return u end end end return y end local I={}if type(W)=="\115\116\114\105\110\103"then for y in W:gmatch("\037\083\043")do local E=J(y)table.insert(I,l(E)..(E.."\124\114"))end end local O=table.concat(I," ")local G=string.format("\037\115 \124 \037\115 \124 \037\115 \124 \037\115 \124 \037\115",x,K,j,b,O)table.insert(L.logData,{text=G,raw={time=y,rl=u;gp=o,raid=g,targets=W}})if#L.logData>200 then table.remove(L.logData,1)end if L.logWindow and L.logWindow:IsShown()then L:UpdateLogDisplay()L.logWindow.scrollFrame:SetVerticalScroll(L.logWindow.scrollFrame:GetVerticalScrollRange())end end function GpDb_old.UpdateRaidWindowVisibility(y)if not y.raidWindow then return end local u=y:_CheckOfficerRank()if not u then if y.raidWindow:IsShown()then y.raidWindow:Hide()if y.logWindow and y.logWindow:IsShown()then y.logWindow:SetHeight(y.window:GetHeight())end end return end local g=next(y.selected_indices)~=nil if not g then if y.raidWindow:IsShown()then y.raidWindow:Hide()if y.logWindow and y.logWindow:IsShown()then y.logWindow:SetHeight(y.window:GetHeight())end end return end local W=E()local L=y.window.raidOnlyCheckbox:GetChecked()local l=not W or L if l and W then local E={}for y=1,GetNumGroupMembers(),1 do local u=GetRaidRosterInfo(y)if u then E[u]=true end end for u in pairs(y.selected_indices)do local g=y.gp_data[u]if g and not E[g.original_nick]then l=false print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\208\181\208\186\208\190\209\130\208\190\209\128\209\139\208\181 \208\178\209\139\208\180\208\181\208\187\208\181\208\189\208\189\209\139\208\181 \208\184\208\179\209\128\208\190\208\186\208\184 \208\189\208\181 \208\178 \209\128\208\181\208\185\208\180\208\181")break end end end if l then if not y.raidWindow:IsShown()then y.raidWindow:Show()y:RestoreRaidWindowState()y:_UpdateSelectedPlayersText()if y.logWindow and y.logWindow:IsShown()then y.logWindow:SetHeight(y.window:GetHeight()/2)end end else if y.raidWindow:IsShown()then y.raidWindow:Hide()end if y.logWindow and y.logWindow:IsShown()then y.logWindow:SetHeight(y.window:GetHeight())end end end function GpDb_old.UpdateWindow(y)if not y.window or not y.rows then return end local E=FauxScrollFrame_GetOffset(y.window.scrollFrame)for u=1,y.visible_rows,1 do local g=y.rows[u]local W=u+E if W<=#y.gp_data then local E=y.gp_data[W]g.nick:SetText(E.nick)g.gp:SetText(tostring(E.gp))if E.classColor then g.nick:SetTextColor(E.classColor.r,E.classColor.g,E.classColor.b)else g.nick:SetTextColor(1,1,1)end g:Show()else g:Hide()end end y:RefreshRowHighlights()FauxScrollFrame_Update(y.window.scrollFrame,#y.gp_data,y.visible_rows,25)y:UpdateRaidWindowVisibility()end function GpDb_old.GetNumSelected(y)local E=0 for u in pairs(y.selected_indices)do if y.gp_data[u]then E=E+1 else y.selected_indices[u]=nil end end print(string.format("\071\101\116\078\117\109\083\101\108\101\099\116\101\100\058 \208\189\208\176\208\185\208\180\208\181\208\189\208\190 \037\100 \209\141\208\187\208\181\208\188\208\181\208\189\209\130\208\190\208\178",E))return E end function GpDb_old.Show(y)y.window:Show()y.window.raidOnlyCheckbox:SetChecked(E())y:_UpdateFromGuild()y:UpdateWindow()end function GpDb_old.Hide(y)y.window:Hide()end function GpDb_old._UpdateFromGuild(y)y.gp_data={}local u=0 local g=GetNumGuildMembers()local W=E()y.window.raidOnlyCheckbox:SetChecked(W)local L=W and y.window.raidOnlyCheckbox:GetChecked()if not IsInGuild()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\146\209\139 \208\189\208\181 \209\129\208\190\209\129\209\130\208\190\208\184\209\130\208\181 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184")y:UpdateWindow()return end GuildRoster()C_Timer(.5,function()local E={}for y=1,GetNumGuildMembers(),1 do local u,g,W,L,l,o,x,K,m,j,b=GetGuildRosterInfo(y)if u then local y=nil if K then local E={}for y in K:gmatch("\037\083\043")do table.insert(E,y)end if#E>=2 then y=E[2]end end E[u]={publicNote=x;officerNote=K,classFileName=b,playerID=y}end end if L then local W=GetNumGroupMembers()local L=true local l={}for y=1,W,1 do local u,g,W,o,x,K,m,j,b,J,I,O,G,d,R,T,r,D=GetRaidRosterInfo(y)if u then local y=u:match("\094\040\046-\041-")or u if not E[y]then L=false table.insert(l,u)end end end if not L then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\146 \209\128\208\181\208\185\208\180\208\181 \208\181\209\129\209\130\209\140 \208\189\208\181 \209\135\208\187\208\181\208\189\209\139 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\058 "..table.concat(l,"\044 "))y.window.countText:SetText("\208\158\209\130\208\190\208\177\209\128\208\176\208\182\208\176\208\181\209\130\209\129\209\143 \208\184\208\179\209\128\208\190\208\186\208\190\208\178\058 \048 \040\208\178 \209\128\208\181\208\185\208\180\208\181 \208\181\209\129\209\130\209\140 \208\189\208\181 \209\135\208\187\208\181\208\189\209\139 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041")y.window.totalText:SetText(string.format("\208\146\209\129\208\181\208\179\208\190 \208\184\208\179\209\128\208\190\208\186\208\190\208\178 \209\129 \208\147\208\159\058 \037\100 \040\208\184\208\183 \037\100 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041",u,g))y:UpdateWindow()return end for g=1,W,1 do local W,L,l,o,x,K=GetRaidRosterInfo(g)if W then local g=W:match("\094\040\046-\041-")or W local L=E[g]if L then local E=0 local g=L.publicNote or""if L.officerNote then local y={}for E in L.officerNote:gmatch("\037\083\043")do table.insert(y,E)end if#y>=3 then E=tonumber(y[3])or 0 end end if E>0 then u=u+1 end local l=W if g and g~=""then l=W..(" \124\099\070\070\070\070\070\070\048\048\040"..(g.."\041\124\114"))end table.insert(y.gp_data,{nick=l,original_nick=W;gp=E,classColor=RAID_CLASS_COLORS[K]or{r=1;g=1,b=1};classFileName=K;playerID=L.playerID})end end end else for E=1,GetNumGuildMembers(),1 do local g,W,L,l,o,x,K,m,j,b,J=GetGuildRosterInfo(E)if g and(m and m~="")then local E={}for y in m:gmatch("\037\083\043")do table.insert(E,y)end if#E>=3 then local W=tonumber(E[3])or 0 local L=E[2]if W~=0 then u=u+1 local E=g if K and K~=""then E=g..(" \124\099\070\070\070\070\070\070\048\048\040"..(K.."\041\124\114"))end table.insert(y.gp_data,{nick=E;original_nick=g;gp=W;classColor=RAID_CLASS_COLORS[J]or{r=1,g=1,b=1};classFileName=J;playerID=L})end end end end end y.window.countText:SetText(string.format("\208\158\209\130\208\190\208\177\209\128\208\176\208\182\208\176\208\181\209\130\209\129\209\143 \208\184\208\179\209\128\208\190\208\186\208\190\208\178\058 \037\100",#y.gp_data))y.window.totalText:SetText(string.format("\208\146\209\129\208\181\208\179\208\190 \208\184\208\179\209\128\208\190\208\186\208\190\208\178 \209\129 \208\147\208\159\058 \037\100 \040\208\184\208\183 \037\100 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041",u,GetNumGuildMembers()))y:ClearSelection()y:SortData()y:UpdateWindow()end)end function GpDb_old.Show(y)y.window:Show()if E()then y.window.raidOnlyCheckbox:SetChecked(true)else y.window.raidOnlyCheckbox:SetChecked(false)end GuildRoster()C_Timer(.5,function()y:_UpdateFromGuild()y:UpdateWindow()end)end function GpDb_old.AddGpEntry(g,y,E,u)table.insert(g.gp_data,{nick=y;original_nick=y;gp=tonumber(E)or 0,playerID=u})g:SortData()g:UpdateWindow()end function GpDb_old.UpdateGpEntry(u,y,E)for u,g in ipairs(u.gp_data)do if g.original_nick==y then g.gp=tonumber(E)or 0 break end end u:SortData()u:UpdateWindow()end function GpDb_old.RemoveGpEntry(E,y)for u,g in ipairs(E.gp_data)do if g.original_nick==y then table.remove(E.gp_data,u)break end end E:UpdateWindow()end function GpDb_old.FindGpEntry(E,y)for E,u in ipairs(E.gp_data)do if u.original_nick==y then return u.gp end end return nil end function GpDb_old.ClearAll(y)y.gp_data={}y:UpdateWindow()end function GpDb_old.SortData(E,y)if y then if E.sort_column==y then E.sort_ascending=not E.sort_ascending else E.sort_column=y E.sort_ascending=true end end table.sort(E.gp_data,function(y,u)local g,W if E.sort_column=="\110\105\099\107"then g=string.lower(string.lower(y.original_nick or""))W=string.lower(string.lower(u.original_nick or""))else g=y.gp or 0 W=u.gp or 0 end if E.sort_ascending then return g<W else return g>W end end)E:ClearSelection()E:UpdateWindow()end function GpDb_old.UpdateWindow(y)if not y.window or not y.rows then return end for E,u in ipairs(y.rows)do local g=y.gp_data[E]if g then u.nick:SetText(g.nick)if g.classColor then local y=g.nick:match("\094\091\094\124\093\043")or g.nick u.nick:SetText(y)u.nick:SetTextColor(g.classColor.r,g.classColor.g,g.classColor.b)local E=g.nick:match("\124\099\046\043\036")if E then local y=u.nick:GetText()..(" "..E)u.nick:SetText(y)end else u.nick:SetTextColor(1,1,1)end u.gp:SetText(tostring(g.gp))u.gp:SetTextColor(1,1,1)u:Show()else u:Hide()end end y.window.scrollChild:SetHeight(#y.gp_data*25)y.window.scrollFrame:UpdateScrollChildRect()end function GpDb_old.SaveToNsDb(y)for E,u in ipairs(y.gp_data)do y.ns_db:addStaticStr("\071\080\095\068\065\084\065",u.original_nick,nil,tostring(u.gp))end end function GpDb_old.LoadFromNsDb(y)y.gp_data={}local E=y.ns_db.input_table.GP_DATA if E then for E,u in pairs(E)do table.insert(y.gp_data,{nick=E;original_nick=E;gp=tonumber(u)or 0})end end y:SortData()y:UpdateWindow()end function GpDb_old._CreateRaidSelectionWindow(y)y.raidWindow=CreateFrame("\070\114\097\109\101","\071\112\068\098\082\097\105\100\087\105\110\100\111\119",y.window)y.raidWindow:SetFrameStrata("\068\073\065\076\079\071")y.raidWindow:SetSize(250,y.window:GetHeight()*.5)y.raidWindow:SetPoint("\066\079\084\084\079\077\076\069\070\084",y.window,"\066\079\084\084\079\077\082\073\071\072\084",5,0)y.raidWindow:SetMovable(false)y.raidWindow.background=y.raidWindow:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")y.raidWindow.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")y.raidWindow.background:SetVertexColor(0,0,0)y.raidWindow.background:SetAlpha(1)y.raidWindow.background:SetAllPoints(true)y.raidWindow.borderFrame=CreateFrame("\070\114\097\109\101",nil,y.raidWindow)y.raidWindow.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)y.raidWindow.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)y.raidWindow.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",edgeSize=16,insets={left=4,right=4,top=4,bottom=4}})y.raidWindow.closeButton=CreateFrame("\066\117\116\116\111\110",nil,y.raidWindow,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")y.raidWindow.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)y.raidWindow.closeButton:SetScript("\079\110\067\108\105\099\107",function()y.raidWindow:Hide()end)y.raidWindow.dropdown=CreateFrame("\070\114\097\109\101","\071\112\068\098\082\097\105\100\068\114\111\112\100\111\119\110",y.raidWindow,"\085\073\068\114\111\112\068\111\119\110\077\101\110\117\084\101\109\112\108\097\116\101")y.raidWindow.dropdown:SetPoint("\084\079\080\076\069\070\084",10,-10)y.raidWindow.dropdown:SetPoint("\082\073\071\072\084",y.raidWindow.closeButton,"\076\069\070\084",-10,0)y.raidWindow.dropdown:SetHeight(32)local function E()if y.raidWindow.selectedRaidId then for E=1,GetNumSavedInstances(),1 do local u,g=GetSavedInstanceInfo(E)if g==y.raidWindow.selectedRaidId then UIDropDownMenu_SetText(y.raidWindow.dropdown,string.format("\037\100\058 \037\115",g,u))return end end else UIDropDownMenu_SetText(y.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")end end local function u(u,g,W)local L=UIDropDownMenu_CreateInfo()for u=1,GetNumSavedInstances(),1 do local g,W,l,o,x,K,m,j,b=GetSavedInstanceInfo(u)if g and W then L.text=string.format("\037\100\058 \037\115 \040\037\100\041",W,g,b)L.arg1={id=W,name=g,players=b}L.func=function(u,g)y.raidWindow.selectedRaidId=g.id y.raidWindow.selectedRaidName=g.name y.raidWindow.selectedRaidPlayers=g.players if y.saveSelectionEnabled then y.lastSelectionType="\114\097\105\100"y.lastRaidId=g.id y.lastRaidName=g.name y.lastRaidPlayers=g.players end E()y.raidWindow.editBox:SetText("")end L.checked=y.raidWindow.selectedRaidId==W UIDropDownMenu_AddButton(L)end end L.text="\208\158\209\135\208\184\209\129\209\130\208\184\209\130\209\140 \208\178\209\139\208\177\208\190\209\128"L.func=function()y.raidWindow.selectedRaidId=nil y.raidWindow.selectedRaidName=nil if y.saveSelectionEnabled then y.lastSelectionType=nil y.lastRaidId=nil y.lastRaidName=nil y.lastRaidPlayers=0 end E()end L.notCheckable=true UIDropDownMenu_AddButton(L)end UIDropDownMenu_Initialize(y.raidWindow.dropdown,u)UIDropDownMenu_SetWidth(y.raidWindow.dropdown,200)UIDropDownMenu_SetButtonWidth(y.raidWindow.dropdown,224)UIDropDownMenu_JustifyText(y.raidWindow.dropdown,"\076\069\070\084")E()y.raidWindow.otherText=y.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")y.raidWindow.otherText:SetPoint("\084\079\080\076\069\070\084",y.raidWindow.dropdown,"\066\079\084\084\079\077\076\069\070\084",0,-10)y.raidWindow.otherText:SetText("\208\148\209\128\209\131\208\179\208\190\208\181\058")y.raidWindow.editBox=CreateFrame("\069\100\105\116\066\111\120",nil,y.raidWindow,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")y.raidWindow.editBox:SetPoint("\084\079\080\076\069\070\084",y.raidWindow.otherText,"\066\079\084\084\079\077\076\069\070\084",0,-5)y.raidWindow.editBox:SetPoint("\082\073\071\072\084",-10,0)y.raidWindow.editBox:SetHeight(20)y.raidWindow.editBox:SetAutoFocus(false)y.raidWindow.editBox:SetScript("\079\110\084\101\120\116\067\104\097\110\103\101\100",function(u)if u:GetText()~=""then if y.saveSelectionEnabled then y.lastSelectionType="\111\116\104\101\114"y.lastOtherText=u:GetText()end y.raidWindow.selectedRaidId=nil y.raidWindow.selectedRaidName=nil E()end end)y.raidWindow.saveCheckbox=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,y.raidWindow,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")y.raidWindow.saveCheckbox:SetPoint("\084\079\080\076\069\070\084",y.raidWindow.editBox,"\066\079\084\084\079\077\076\069\070\084",0,-10)y.raidWindow.saveCheckbox:SetSize(24,24)y.raidWindow.saveCheckbox.text=y.raidWindow.saveCheckbox:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")y.raidWindow.saveCheckbox.text:SetPoint("\076\069\070\084",y.raidWindow.saveCheckbox,"\082\073\071\072\084",5,0)y.raidWindow.saveCheckbox.text:SetText("\208\161\208\190\209\133\209\128\208\176\208\189\208\184\209\130\209\140 \208\178\209\139\208\177\208\190\209\128")y.raidWindow.saveCheckbox:SetChecked(true)y.saveSelectionEnabled=true y.raidWindow.saveCheckbox:SetScript("\079\110\067\108\105\099\107",function()y.saveSelectionEnabled=y.raidWindow.saveCheckbox:GetChecked()end)y.raidWindow.selectedPlayersText=y.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")y.raidWindow.selectedPlayersText:SetPoint("\084\079\080\076\069\070\084",y.raidWindow.saveCheckbox,"\066\079\084\084\079\077\076\069\070\084",0,-5)y.raidWindow.selectedPlayersText:SetPoint("\082\073\071\072\084",-10,0)y.raidWindow.selectedPlayersText:SetHeight(70)y.raidWindow.selectedPlayersText:SetJustifyH("\076\069\070\084")y.raidWindow.selectedPlayersText:SetJustifyV("\084\079\080")y.raidWindow.selectedPlayersText:SetWordWrap(true)local g={5,10,20;25;50,100}local W for E,u in ipairs(g)do local g=CreateFrame("\066\117\116\116\111\110",nil,y.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")g:SetSize(27,20)g:SetText(tostring(u))if E==1 then g:SetPoint("\066\079\084\084\079\077\076\069\070\084",y.raidWindow.selectedPlayersText,"\066\079\084\084\079\077\076\069\070\084",0,-20)else g:SetPoint("\076\069\070\084",W,"\082\073\071\072\084",5,0)end g:SetScript("\079\110\067\108\105\099\107",function()local E=tonumber(y.raidWindow.gpEditBox:GetText())or 0 y.raidWindow.gpEditBox:SetText(tostring(u))y.raidWindow.gpEditBox:HighlightText()end)W=g end local L=CreateFrame("\066\117\116\116\111\110",nil,y.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")L:SetSize(40,22)L:SetText("-\047\043")L:SetPoint("\076\069\070\084",W,"\082\073\071\072\084",5,0)L:SetScript("\079\110\067\108\105\099\107",function()local E=tonumber(y.raidWindow.gpEditBox:GetText())or 0 y.raidWindow.gpEditBox:SetText(tostring(-E))y.raidWindow.gpEditBox:HighlightText()end)y.raidWindow.gpEditBox=CreateFrame("\069\100\105\116\066\111\120",nil,y.raidWindow,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")y.raidWindow.gpEditBox:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,5)y.raidWindow.gpEditBox:SetSize(100,20)y.raidWindow.gpEditBox:SetAutoFocus(false)y.raidWindow.gpEditBox:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()y.raidWindow.gpEditBox:ClearFocus()end)y.raidWindow.gpEditBox:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()y.raidWindow.gpEditBox:ClearFocus()end)y.raidWindow.awardButton=CreateFrame("\066\117\116\116\111\110",nil,y.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")y.raidWindow.awardButton:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,5)y.raidWindow.awardButton:SetSize(100,22)y.raidWindow.awardButton:SetText("\208\157\208\176\209\135\208\184\209\129\208\187\208\184\209\130\209\140")y.raidWindow.awardButton:SetScript("\079\110\067\108\105\099\107",function()if not y:_CheckOfficerRank()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\162\208\190\208\187\209\140\208\186\208\190 \208\190\209\132\208\184\209\134\208\181\209\128\209\139 \208\188\208\190\208\179\209\131\209\130 \208\189\208\176\209\135\208\184\209\129\208\187\209\143\209\130\209\140 \208\147\208\159")y.raidWindow:Hide()return end if next(y.selected_indices)==nil then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\208\181\209\130 \208\178\209\139\208\180\208\181\208\187\208\181\208\189\208\189\209\139\209\133 \208\184\208\179\209\128\208\190\208\186\208\190\208\178")y.raidWindow:Hide()return end local E=tonumber(y.raidWindow.gpEditBox:GetText())if not E then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\163\208\186\208\176\208\182\208\184\209\130\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181 \208\147\208\159")return end if not y.raidWindow.selectedRaidId and not(y.lastOtherText or""):match("\037\083")then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\209\131\208\182\208\189\208\190 \208\178\209\139\208\177\209\128\208\176\209\130\209\140 \209\128\208\181\208\185\208\180 \208\184\208\187\208\184 \209\131\208\186\208\176\208\183\208\176\209\130\209\140 \208\191\209\128\208\184\209\135\208\184\208\189\209\131")return end if not y.saveSelectionEnabled then y.lastSelectionType=nil y.lastRaidId=nil y.lastRaidName=nil y.lastRaidPlayers=0 y.lastOtherText=nil y.lastGPValue=0 else y.lastGPValue=E end local u if y.raidWindow.selectedRaidId then local g=(y.raidWindow.selectedRaidName or""):gsub("\037\115\043","\095")u=string.format("\037\048\052\100\095\037\115\095\037\100 \037\100",y.raidWindow.selectedRaidId,g,y.raidWindow.selectedRaidPlayers or 0,E)else local g=(y.lastOtherText or""):gsub("\037\115\043","\095")u=string.format("\037\115 \037\100",g,E)end for g in pairs(y.selected_indices)do if y.gp_data[g]then local W=y.gp_data[g].original_nick local L=y.gp_data[g].playerID or"\085\078\075\078\079\087\078"SendAddonMessage("\110\115\071\080"..(" "..E),W,"\103\117\105\108\100")u=u..(" "..L)y:AddLogEntry(E,date("\037\072\058\037\077"),UnitName("\112\108\097\121\101\114"),y.raidWindow.selectedRaidName or y.raidWindow.editBox:GetText(),W)end end SendAddonMessage("\110\115\071\080\108\111\103",u,"\103\117\105\108\100")for y,u in ipairs(y:GetSelectedEntries())do u.gp=(u.gp or 0)+E end y:UpdateWindow()y.raidWindow:Hide()end)y.raidWindow:SetScript("\079\110\072\105\100\101",function()if y.logWindow and y.logWindow:IsShown()then y.logWindow:SetHeight(y.window:GetHeight())end end)y.raidWindow:Hide()end function GpDb_old._UpdateSelectedPlayersText(y)if not y.raidWindow then return end local E=y:GetSelectedEntries()local u={}for y,E in ipairs(E)do table.insert(u,E.original_nick)end local g=table.concat(u,"\044 ")if not y.raidWindow.selectedPlayersText then y.raidWindow.selectedPlayersText=y.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")y.raidWindow.selectedPlayersText:SetPoint("\084\079\080\076\069\070\084",y.raidWindow.saveCheckbox,"\066\079\084\084\079\077\076\069\070\084",0,-5)y.raidWindow.selectedPlayersText:SetPoint("\082\073\071\072\084",-10,0)y.raidWindow.selectedPlayersText:SetHeight(80)y.raidWindow.selectedPlayersText:SetJustifyH("\076\069\070\084")y.raidWindow.selectedPlayersText:SetJustifyV("\084\079\080")y.raidWindow.selectedPlayersText:SetWordWrap(true)y.raidWindow.selectedPlayersTextContainer=CreateFrame("\070\114\097\109\101",nil,y.raidWindow)y.raidWindow.selectedPlayersTextContainer:SetAllPoints(y.raidWindow.selectedPlayersText)y.raidWindow.selectedPlayersTextContainer:SetScript("\079\110\069\110\116\101\114",function()if y.raidWindow.selectedPlayersText.tooltip then GameTooltip:SetOwner(y.raidWindow.selectedPlayersTextContainer,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:SetText("\208\146\209\139\208\177\209\128\208\176\208\189\208\189\209\139\208\181 \208\184\208\179\209\128\208\190\208\186\208\184\058")GameTooltip:AddLine(y.raidWindow.selectedPlayersText.tooltip,1,1,1,true)GameTooltip:Show()end end)y.raidWindow.selectedPlayersTextContainer:SetScript("\079\110\076\101\097\118\101",function()GameTooltip:Hide()end)end if#g>60 then local E=string.sub(g,1,600).."\046\046\046"y.raidWindow.selectedPlayersText:SetText(E)y.raidWindow.selectedPlayersText.tooltip=g else y.raidWindow.selectedPlayersText:SetText(g)y.raidWindow.selectedPlayersText.tooltip=nil end end function GpDb_old.RestoreRaidWindowState(y)if not y.raidWindow then return end if y.lastSelectionType=="\114\097\105\100"and y.lastRaidId then UIDropDownMenu_SetText(y.raidWindow.dropdown,string.format("\037\100\058 \037\115",y.lastRaidId,y.lastRaidName))y.raidWindow.editBox:SetText("")y.raidWindow.selectedRaidId=y.lastRaidId y.raidWindow.selectedRaidName=y.lastRaidName y.raidWindow.selectedRaidPlayers=y.lastRaidPlayers elseif y.lastSelectionType=="\111\116\104\101\114"and y.lastOtherText then UIDropDownMenu_SetText(y.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")y.raidWindow.editBox:SetText(y.lastOtherText)y.raidWindow.selectedRaidId=nil y.raidWindow.selectedRaidName=nil else UIDropDownMenu_SetText(y.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")y.raidWindow.editBox:SetText("")y.raidWindow.selectedRaidId=nil y.raidWindow.selectedRaidName=nil end if not y.lastGPValue then y.lastGPValue=0 end y.raidWindow.gpEditBox:SetText(tostring(y.lastGPValue))y.raidWindow.saveCheckbox:SetChecked(y.saveSelectionEnabled)y:_UpdateSelectedPlayersText()end function GpDb_old._CheckOfficerRank(y)if not IsInGuild()then return false end local E=UnitName("\112\108\097\121\101\114")for y=1,GetNumGuildMembers(),1 do local u,g,W=GetGuildRosterInfo(y)if u and u==E then local y=GuildControlGetRankName(W+1)if y=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"or y=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"then return true end break end end return false end function GpDb_old.ToggleRaidWindow(y)if not y:_CheckOfficerRank()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\162\208\190\208\187\209\140\208\186\208\190 \208\190\209\132\208\184\209\134\208\181\209\128\209\139 \208\188\208\190\208\179\209\131\209\130 \208\189\208\176\209\135\208\184\209\129\208\187\209\143\209\130\209\140 \208\147\208\159")if y.raidWindow and y.raidWindow:IsShown()then y.raidWindow:Hide()end return end if not y.raidWindow then y:_CreateRaidSelectionWindow()end local u=E()local g=y.window.raidOnlyCheckbox:GetChecked()local W=next(y.selected_indices)~=nil if not W and not y.raidWindow:IsShown()then y.raidWindow:Show()UIDropDownMenu_Initialize(y.raidWindow.dropdown,nil)return end if W then if u and not g then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\148\208\187\209\143 \208\189\208\176\209\135\208\184\209\129\208\187\208\181\208\189\208\184\209\143 \208\147\208\159 \208\178 \209\128\208\181\208\185\208\180\208\181 \208\178\208\186\208\187\209\142\209\135\208\184\209\130\208\181 \'\208\162\208\190\208\187\209\140\208\186\208\190 \209\128\208\181\208\185\208\180\'")y.raidWindow:Hide()return end if y.raidWindow:IsShown()then y.raidWindow:Hide()else y.raidWindow:Show()UIDropDownMenu_Initialize(y.raidWindow.dropdown,nil)end end end function C_Timer(y,E,u)local g=CreateFrame("\070\114\097\109\101")g.duration=y g.elapsed=0 g.isLooping=u or false g:SetScript("\079\110\085\112\100\097\116\101",function(y,u)y.elapsed=y.elapsed+u if y.elapsed>=y.duration then if type(E)=="\102\117\110\099\116\105\111\110"then E()end if y.isLooping then y.elapsed=0 else y:SetScript("\079\110\085\112\100\097\116\101",nil)y=nil end end end)end function GetNumGroupMembers()if GetNumRaidMembers()>0 then return GetNumRaidMembers()else return GetNumPartyMembers()+1 end end