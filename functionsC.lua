function mysplit(z,N)if N==nil then N="\037\115"end local c={}for z in string.gmatch(z,"\040\091\094"..(N.."\093\043\041"))do table.insert(c,z)end return c end local function z()return GetNumRaidMembers()>0 end function round(z)if(z-z%.1)-(z-z%1)<.5 then z=z-z%1 else z=(z-z%1)+1 end return z end function nsplit(z)lines={}for z in z:gmatch("\091\094\r\n\093\043")do table.insert(lines,z)end return lines end function all_trim(z)return z:match("\094\037\115\042\040\046-\041\037\115\042\036")end function kirTest(z,N)test1=z:sub(N,N)testN=z:byte(7)testN=tonumber(testN)if testN==208 then r=z:sub(N*2-1,N*2)else r=test1 end return r end function alfabet(z)shablon="\208\176\208\177\208\178\208\179\208\180\208\181\209\145\208\182\208\183\208\184\208\185\208\186\208\187\208\188\208\189\208\190\208\191\209\128\209\129\209\130\209\131\209\132\209\133\209\134\209\135\209\136\209\137\209\138\209\139\209\140\209\141\209\142\209\143\208\144\208\145\208\146\208\147\208\148\208\149\208\129\208\150\208\151\208\152\208\153\208\154\208\155\208\156\208\157\208\158\208\159\208\160\208\161\208\162\208\163\208\164\208\165\208\166\208\167\208\168\208\169\208\170\208\171\208\172\208\173\208\174\208\175\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"myB=string.find(shablon,z,1,true)return myB end function alfabetC(z,N)shablon="\208\176\208\177\208\178\208\179\208\180\208\181\209\145\208\182\208\183\208\184\208\185\208\186\208\187\208\188\208\189\208\190\208\191\209\128\209\129\209\130\209\131\209\132\209\133\209\134\209\135\209\136\209\137\209\138\209\139\209\140\209\141\209\142\209\143\208\144\208\145\208\146\208\147\208\148\208\149\208\129\208\150\208\151\208\152\208\153\208\154\208\155\208\156\208\157\208\158\208\159\208\160\208\161\208\162\208\163\208\164\208\165\208\166\208\167\208\168\208\169\208\170\208\171\208\172\208\173\208\174\208\175\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"local c if N==0 then c=string.find(shablon,z,1,true)end if N==1 then if z<133 then c=string.utf8sub(shablon,z/2+.5,z/2+.5)else c=string.sub(shablon,z,z)end end return c end function hashStr(z)local N=time()N=N%10000 N=tostring(N)N=string.utf8sub(N,2,3)N=string.format("\037\048\051\100",N)nomeLen=string.utf8len(z)nome1={}for N=1,nomeLen,1 do nome1[N]=string.utf8sub(z,N,N)tmNome=nome1[N]nome1[N]=alfabet(tmNome)end nome11=0 for z=1,nomeLen,1 do nome11=nome11+nome1[z]end nome11=nome11%1000 hNome=string.format("\037\048\051\100",nome11)iN=tostring(N)r1=string.utf8sub(iN,1,1)r2=string.utf8sub(hNome,1,1)r3=string.utf8sub(iN,2,2)r4=string.utf8sub(hNome,2,2)r5=string.utf8sub(iN,3,3)r6=string.utf8sub(hNome,3,3)r=r1 ..(r2 ..(r3 ..(r4 ..(r5 ..r6))))return r end function tablelength(z)local N=0 for z in pairs(z)do N=N+1 end return N end function getPOS(z,N)local c=(1-N)*668 local e=z*1002 return e,c end function hshStrNuovo(z,N)nomeLen=string.utf8len(N)nome1={}for z=1,nomeLen,1 do nome1[z]=string.utf8sub(N,z,z)tmNome=nome1[z]nome1[z]=alfabet(tmNome)end nome11=0 for z=1,nomeLen,1 do nome11=nome11+nome1[z]end nome11=nome11%1000 hNome=string.format("\037\048\051\100",nome11)local c=string.sub(z,2,2)local e=string.sub(z,4,4)local r=string.sub(z,6,6)local u=math.random(0,9)local C=math.random(0,9)local P=math.random(0,9)local s=c..(e..r)local h=hashStr(N)local d=string.utf8sub(nome11,2,2)local v=string.utf8sub(nome11,4,4)local y=string.utf8sub(nome11,6,6)local g=d..(v..y)local A=u..(v..(C..(d..(P..y))))return s,g,A end function hshStrNuovo(z,N)local c local e local r local u local C local P local s local h local d local v local y local g local A c=string.utf8len(N)local o={}for z=1,c,1 do o[z]=string.utf8sub(N,z,z)e=o[z]o[z]=alfabet(e)end r=0 for z=1,c,1 do r=r+o[z]end r=r%1000 u=string.format("\037\048\051\100",r)C=string.sub(u,1,1)P=string.sub(u,2,2)s=string.sub(u,3,3)h=string.sub(z,2,2)h=tonumber(h)if h==0 then d=string.sub(z,3,3)v=string.sub(z,4,4)y=string.sub(z,6,6)elseif h==1 then d=string.sub(z,4,4)v=string.sub(z,3,3)y=string.sub(z,6,6)elseif h==2 then d=string.sub(z,4,4)v=string.sub(z,6,6)y=string.sub(z,3,3)elseif h==3 then d=string.sub(z,3,3)v=string.sub(z,6,6)y=string.sub(z,4,4)elseif h==4 then d=string.sub(z,1,1)v=string.sub(z,6,6)y=string.sub(z,4,4)elseif h==5 then d=string.sub(z,1,1)v=string.sub(z,6,6)y=string.sub(z,3,3)elseif h==6 then d=string.sub(z,6,6)v=string.sub(z,1,1)y=string.sub(z,3,3)elseif h==7 then d=string.sub(z,6,6)v=string.sub(z,3,3)y=string.sub(z,1,1)elseif h==8 then d=string.sub(z,4,4)v=string.sub(z,5,5)y=string.sub(z,6,6)elseif h==9 then d=string.sub(z,5,5)v=string.sub(z,1,1)y=string.sub(z,3,3)end g=d..(v..y)A=C..(P..s)return g,A end function hshSenderNomeC(z)local N local c local e local r local u local C local P local s local h local d local v N=string.utf8len(z)c={}for N=1,N,1 do c[N]=string.utf8sub(z,N,N)tmNome=c[N]c[N]=alfabet(tmNome)end e=0 for z=1,N,1 do e=e+c[z]end e=e%1000 r=string.format("\037\048\051\100",e)u=string.sub(r,1,1)C=string.sub(r,2,2)P=string.sub(r,3,3)s=math.random(0,9)h=math.random(0,9)d=math.random(0,9)if h==0 then v=s..(h..(u..(C..(d..P))))elseif h==1 then v=s..(h..(C..(u..(d..P))))elseif h==2 then v=s..(h..(P..(u..(d..C))))elseif h==3 then v=s..(h..(u..(P..(d..C))))elseif h==4 then v=u..(h..(s..(P..(d..C))))elseif h==5 then v=u..(h..(P..(s..(d..C))))elseif h==6 then v=C..(h..(P..(s..(d..u))))elseif h==7 then v=P..(h..(C..(d..(s..u))))elseif h==8 then v=s..(h..(d..(u..(C..P))))elseif h==8 then v=u..(h..(P..(s..(C..d))))elseif h==9 then v=C..(h..(P..(s..(u..d))))end if testQ~=nil then if testQ[z]~=nil then if testQ[z].rarHSH1==nil then testQ[z].rarHSH1={}end if testQ[z].rarHSH==nil then testQ[z].rarHSH={}end testDate=date("\037\100")testDate=tonumber(testDate)if testDate%2==0 then tableHSH="\114\097\114\072\083\072"testQ[z].rarHSH1=nil else tableHSH="\114\097\114\072\083\072\049"testQ[z].rarHSH=nil end if v==testQ[z][tableHSH]then v=hshSenderNomeC(z)end table.insert(testQ[z][tableHSH],v)return v end end end function gmTest(z)local N for c=1,#gmList,1 do if z==gmList[c]then N="\208\179\208\188"break end c=c+1 end return N end function proverkaVypolneniyaKvestySachivkoj(z,N)local c=testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]if N=="\050"then N="\208\186\208\178\208\181\209\129\209\130\095\208\187\208\178\208\187\050"elseif N=="\051"then N="\208\186\208\178\208\181\209\129\209\130\095\208\187\208\178\208\187\051"end local e=testQ[z][N][c]e=tonumber(e)local r=GetAchievementNumCriteria(c)j=0 k=0 for z=1,r,1 do local N,e,r,u,C,P,s,h,d,v=GetAchievementCriteriaInfo(c,z)prov=r if prov==true then j=j+1 else k=k+1 end z=z+1 end local u=e-j if u<0 then u=0 end SendChatMessage("\208\158\209\129\209\130\208\176\208\187\208\190\209\129\209\140 \208\178\209\139\208\191\208\190\208\187\208\189\208\184\209\130\209\140 "..(u..(" \208\191\209\131\208\189\208\186\209\130\208\190\208\178 \208\176\209\135\208\184\208\178\208\186\208\184 "..(c..(" "..(GetAchievementLink(c)..(" \208\184\208\183 "..e)))))),"\071\085\073\076\068",nil,1)end function npcXY(z,N,c,e,r)local u=nil local C=z local P=N C=tostring(C)P=tostring(P)if npcScan[C]==nil then npcScan[C]={}end if npcScan[C][P]==nil then npcScan[C][P]={}end local s=r if s~=nil then local z=c local N=e z=tostring(z)N=tostring(N)if npcScan[C][P][s]==nil then npcCount=1 npcCount=tostring(npcCount)npcScan[C][P][s]={}npcScan[C][P][s][npcCount]={}npcScan[C][P][s][npcCount].x=z npcScan[C][P][s][npcCount].y=N else local c={}local e={}npcCount=tablelength(npcScan[C][P][s])+1 npcCount=tostring(npcCount)z=tostring(z)N=tostring(N)npcScan[C][P][s][npcCount]={}npcScan[C][P][s][npcCount].x=z npcScan[C][P][s][npcCount].y=N end else print("\208\146\209\139\208\177\208\181\209\128\208\184 \209\134\208\181\208\187\209\140")end end function testNpc(z)local N CreateFrame("\071\097\109\101\084\111\111\108\116\105\112","\077\121\083\099\097\110\110\105\110\103\084\111\111\108\116\105\112",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\109\112\108\097\116\101")MyScanningTooltip:SetOwner(WorldFrame,"\065\078\067\072\079\082\095\078\079\078\069")MyScanningTooltip:AddFontStrings(MyScanningTooltip:CreateFontString("\036\112\097\114\101\110\116\084\101\120\116\076\101\102\116\049",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116"),MyScanningTooltip:CreateFontString("\036\112\097\114\101\110\116\084\101\120\116\082\105\103\104\116\049",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116"))MyScanningTooltip:SetHyperlink("\117\110\105\116\058"..z)N=EnumerateTooltipLines(MyScanningTooltip)return N end local function N(...)local z for N=1,select("\035",...),1 do local c=select(N,...)if c and c:GetObjectType()=="\070\111\110\116\083\116\114\105\110\103"then local N=c:GetText()if N~=nil then print(N)if string.find(N,"\208\163\209\128\208\190\208\178\208\181\208\189\209\140")then testLvlNpc=mysplit(N)end if string.find(N,"\209\131\209\128\208\190\208\178\208\189\209\143")then testLvlNpc=mysplit(N)if string.find(testLvlNpc[3],"\037\063\037\063")then else z="\049"end if string.find(testLvlNpc[2],"\037\063\037\063")then SendAddonMessage("\078\083\071\097\100\100","\035\110\112\099\079\102\102","\103\117\105\108\100")end if string.find(testLvlNpc[1],"\208\162\209\128\209\131\208\191")then SendAddonMessage("\078\083\071\097\100\100","\035\110\112\099\068\105\101","\103\117\105\108\100")end end end end end return z end function EnumerateTooltipLines(z)local c c=N(z:GetRegions())return c end function pLid()if UnitIsPartyLeader("\112\097\114\116\121\049")then pL=1 elseif UnitIsPartyLeader("\112\097\114\116\121\050")then pL=2 elseif UnitIsPartyLeader("\112\097\114\116\121\051")then pL=3 elseif UnitIsPartyLeader("\112\097\114\116\121\052")then pL=4 else pL=0 end return pL end function pM(z)if z==UnitName("\112\097\114\116\121\049")then r=1 elseif z==UnitName("\112\097\114\116\121\050")then r=1 elseif z==UnitName("\112\097\114\116\121\051")then r=1 elseif z==UnitName("\112\097\114\116\121\052")then r=1 else r=0 end return r end function testN()testNpc(UnitGUID("\116\097\114\103\101\116"))end function tblAllFail(z,N)if mmList[z]~=nil then for c=1,mmList[z]["\208\186\208\190\208\187\208\184\209\135\208\181\209\129\209\130\208\178\208\190\095\208\177\208\190\209\129\209\129\208\190\208\178"],1 do if N==mmList[z][c]then r=c break else r=0 end end end return r end function testMarsh(z,N)trovMarsh(z,N)local c=0 for N,c in pairs(mapTables[z])do if type(N)=="\115\116\114\105\110\103"then tKont=N end for z,N in pairs(mapTables[z][N])do if type(z)=="\115\116\114\105\110\103"then tLok=z end end end if testQ.schet1~=nil then for N=testQ.schet1-10,testQ.schet1+10,1 do if testQ.schet[N]~=nil then marshrut(N,tablelength(mapTables[z][tKont][tLok]))c=c+testQ.schet[N]if c>0 then break end end end end return c end function trovMarsh(z,N)if testKontLok(z)~=nil then local c,e=GetPlayerMapPosition("\112\108\097\121\101\114")local r=GetCurrentMapContinent()r=tostring(r)local u=GetCurrentMapZone()u=tostring(u)local C=GetMapInfo()if C=="\082\097\103\101\102\105\114\101"then r="\057\057"u="\049"end local P=tablelength(mapTables[z][r][u])testQ.schet={}testQ.numPunti={}if testQ.num==nil then if testKontLok(z)<N then testQ.num=1 testQ.schet1=1 end end for C=testQ.num-10,testQ.num+10,1 do testQ.schet1=C j=tostring(C)if testQ["\209\129\209\130\208\176\209\128\209\130"]~=nil then if mapTables[z][r][u][j]~=nil then mioCel=sqrt((c-mapTables[z][r][u][j].x)^2+(e-mapTables[z][r][u][j].y)^2)if mioCel<N then testQ.schet[C]=1 j=testQ.num j=tostring(j)mioCel1=sqrt((c-mapTables[z][r][u][j].x)^2+(e-mapTables[z][r][u][j].y)^2)if mioCel1>mioCel then testQ.num=C testQ.marshF[C]=C if testQ.marshF[C]==math.modf(P/4)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \209\135\208\181\209\130\208\178\208\181\209\128\209\130\209\140 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if testQ.marshF[C]==math.modf(P/2)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \208\191\208\190\208\187\208\190\208\178\208\184\208\189\209\131 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if testQ.marshF[C]==math.modf((P/4)*3)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \209\130\209\128\208\184 \209\135\208\181\209\130\208\178\208\181\209\128\209\130\208\184 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if tonumber(P)==tonumber(C)then SendChatMessage("\208\156\208\176\209\128\209\136\209\128\209\131\209\130 \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")if marshruT~=nil then for z=1,9999,1 do if marshruT[z]~=nil then marshruT[z]:Hide()end end end marshruT=nil testQ["\209\129\209\130\208\176\209\128\209\130"]=nil testQ.num=nil testQ.marshF=nil if z=="\101\118\079\048\049\048\050"then testQ.evO0102=true testQ.startChern=nil end if z=="\101\118\079\048\050\048\051"then testQ.evO0203=true testQ.startChern=nil end if z=="\101\118\079\048\051\048\052"then testQ.evO0304=true testQ.startChern=nil end if z=="\101\118\079\048\052\048\053"then testQ.evO0405=true testQ.startChern=nil end if z=="\101\118\079\048\053\048\054"then testQ.evO0506=true testQ.startChern=nil end if z=="\101\118\079\048\054\048\055"then testQ.evO0607=true testQ.startChern=nil end if z=="\101\118\079\048\055\048\056"then testQ.evO0708=true testQ.startChern=nil end if z=="\101\118\079\048\056\048\057"then testQ.evO0809=true testQ.startChern=nil end if z=="\101\118\079\048\057\049\048"then testQ.evO0910=true testQ.startChern=nil end if z=="\101\118\079\049\048\049\049"then testQ.evO1011=true testQ.startChern=nil end if z=="\101\118\079\049\049"then testQ.evO11=true testQ.startChern=nil end if z=="\101\118\079\049\050"then testQ.evO12=true testQ.startChern=nil end if z=="\101\118\079\049\051"then testQ.evO13=true testQ.startChern=nil end if z=="\101\118\079\049\052"then testQ.evO14=true testQ.startChern=nil end testQ.start=nil end end else testQ.schet[C]=0 end end end end end end function testKontLok(z)local N=GetCurrentMapContinent()N=tostring(N)local c=GetCurrentMapZone()c=tostring(c)local e local r,u=GetPlayerMapPosition("\112\108\097\121\101\114")local C,P local s=GetMapInfo()if s=="\082\097\103\101\102\105\114\101"then N="\057\057"c="\049"end if mapTables~=nil then if mapTables[z]~=nil then for N,c in pairs(mapTables[z])do if type(N)=="\115\116\114\105\110\103"then C=N end for z,N in pairs(mapTables[z][N])do if type(z)=="\115\116\114\105\110\103"then P=z end end end if tostring(c)==tostring(P)then if z~=nil then if mapTables[z]~=nil then if C==N then if mapTables[z][N][c]~=nil then if P==c then e=sqrt((r-mapTables[z][N][c]["\049"].x)^2+(u-mapTables[z][N][c]["\049"].y)^2)return e end end end end end end end end end function startFchern(z,N,c)N=tostring(N)c=tostring(c)if krt[N]==true and krt[c]==true then testQ.start=z testQ["\209\129\209\130\208\176\209\128\209\130"]=0 testQ[z]="\209\129\209\130\208\176\209\128\209\130"marshruT={}end end function testFchern(z,N,c)N=tostring(N)c=tostring(c)local e,r if testQ[z]==nil then for N,c in pairs(mapTables[z])do if type(N)=="\115\116\114\105\110\103"then e=N end for z,N in pairs(mapTables[z][e])do if type(z)=="\115\116\114\105\110\103"then r=z end end end if mapTables.lokRasstoyanie[tostring(e)]~=nil then if mapTables.lokRasstoyanie[tostring(e)][tostring(r)]~=nil then if testKontLok(z)~=nil then if tonumber(testKontLok(z))<=tonumber(mapTables.lokRasstoyanie[tostring(e)][tostring(r)])*3 then startFchern(z,N,c)testQ.startChern=z end end end end end end function printPar(z)local N={}local c for z,c in pairs(z)do if z~=nil then table.insert(N,z)end end c=table.concat(N," ")return c end function otladka(z,N,c,e,r,u,C)local P numF=tonumber(z)if numF==1 then if N=="\116\101\115\116\081"then P=testQ end end if numF==2 then if N=="\116\101\115\116\081"then P=testQ[c]end end if numF==3 then if N=="\116\101\115\116\081"then P=testQ[c][e]end end if numF==4 then if N=="\116\101\115\116\081"then P=testQ[c][e][r]end end if numF==5 then if N=="\116\101\115\116\081"then P=testQ[c][e][r][u]end end if numF==6 then if N=="\116\101\115\116\081"then P=testQ[c][e][r][u][C]end end P=type(P)y=P return P,y end function tabellaFind(z,N)local c=1 while z[c]do print(N)print(z[c])if N==z[c]then return 1 end c=c+1 end return nil end function krtChernGetXY(z)z=tostring(z)for z,N in pairs(krt.chernila[z])do kont=z end for z,N in pairs(krt.chernila[z][kont])do lok=z end for z,N in pairs(krt.chernila[z][kont][lok])do if z=="\120"then x=N end if z=="\121"then y=N end if z=="\109\115\103"then m=N end end return kont,lok,x,y,m end function mapQuest(z)z=tostring(z)for z,N in pairs(testQ.mapQuest[z])do kont=z end for z,N in pairs(testQ.mapQuest[z][kont])do lok=z end for z,N in pairs(testQ.mapQuest[z][kont][lok])do if z=="\120"then x=N end if z=="\121"then y=N end if z=="\109\115\103"then m=N end if z=="\099\101\108"then c=N end end return kont,lok,x,y,m,c end function mapQuestP(z)z=tostring(z)testQ.mapQuest.podskazkiRez={}for z,N in pairs(testQ.mapQuest[z])do kont=z end for z,N in pairs(testQ.mapQuest[z][kont])do lok=z end for N,c in pairs(testQ.mapQuest[z][kont][lok])do if N=="\112\111\100\115\107\097\122\107\105"then for z,N in pairs(testQ.mapQuest[z][kont][lok].podskazki)do testQ.mapQuest.podskazkiRez[z]=N end end end end function chern1P(z)z=tostring(z)krt.chernila.podskazkiRez={}for z,N in pairs(krt.chernila[z])do kont=z end for z,N in pairs(krt.chernila[z][kont])do lok=z end for N,c in pairs(krt.chernila[z][kont][lok])do if N=="\112\111\100\115\107\097\122\107\105"then for z,N in pairs(krt.chernila[z][kont][lok].podskazki)do krt.chernila.podskazkiRez[z]=N end end end end function tabellaEnStr(z,N)local c,e,r,u,C,P z=tostring(z)N=tostring(N)if testQ.chD==nil then testQ.chD={}end if testQ.chD[tostring(z)]==nil then r="\048"for z,N in pairs(krt.chernila[z])do C=z end for z,N in pairs(krt.chernila[z][C])do P=z end c=tablelength(krt.chernila[z][C][P].podskazki)for c=1,c,1 do u=tostring(c)if e==nil then e=u..(" "..(txtXor(krt.chernila[z][C][P].podskazki[u]).."\n"))else e=e..(u..(" "..(txtXor(krt.chernila[z][C][P].podskazki[u]).."\n")))end r=tonumber(r)r=r+1 r=tostring(r)if r==N then break end end else for z,N in pairs(krt.chernila[z])do C=z end for z,N in pairs(krt.chernila[z][C])do P=z end e=z.." \208\178\209\139\208\191\208\190\208\187\208\189\208\181\208\189\208\190\n"r=tablelength(krt.chernila[z][C][P].podskazki)end return e,r end function txtXor(z)local N=z:utf8sub(1,3)local c local e if N~="\035\035\035"then c=string.utf8len(z)e="\035\035\035"for N=1,c,1 do e=e..string.format("\037\048\051\100",alfabet(string.utf8sub(z,N,N)))end end if N=="\035\035\035"then e=alfabetC(tonumber(string.sub(z,4,6)),1)for N=7,#z,3 do e=e..alfabetC(tonumber(string.sub(z,N,N+2)),1)end end return e end bcsQuickFrame={}function createQuickHtmlFrame(z,N,c)local e=GetTime()bcsQuickFrame[c]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)bcsQuickFrame[c]:SetSize(222,222)bcsQuickFrame[c]:SetFrameStrata("\072\073\071\072")bcsQuickFrame[c]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",33,N)bcsQuickFrame[c]:SetBackdropColor(0,103,51,1)bcsQuickFrame[c]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",32)bcsQuickFrame[c]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\057\048\101\101\057\048"..(z.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))end dmG={}function dmgText(z,N,c,e,r)if dmG[c]==nil then dmG[c]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",N)else dmG[c]:Show()end dmG[c]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG[c]:ClearAllPoints()dmG[c]:SetBackdropColor(0,103,51,1)dmG[c]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")if z~=""then if tonumber(z)<=9999 then dmG[c]:SetSize(48,48)end if tonumber(z)>9999 then dmG[c]:SetSize(54,48)end if tonumber(z)<=9999 then dmG[c]:SetPoint("\067\069\078\084\069\082",N,"\067\069\078\084\069\082",5,-10)end if tonumber(z)>9999 then dmG[c]:SetPoint("\067\069\078\084\069\082",N,"\067\069\078\084\069\082",1,-10)end end dmG[c]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(r..(z.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end dmG1={}function dmgText1(z,N,c,e,r)if dmG1[c]==nil then dmG1[c]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",N)dmG1[c]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG1[c]:ClearAllPoints()dmG1[c]:SetBackdropColor(0,103,51,1)dmG1[c]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end if z~=""then if tonumber(z)<=9999 then dmG1[c]:SetSize(48,48)end if tonumber(z)>9999 then dmG1[c]:SetSize(54,48)end if tonumber(z)<=9999 then dmG1[c]:SetPoint("\067\069\078\084\069\082",N,"\067\069\078\084\069\082",5,-10)end if tonumber(z)>9999 then dmG1[c]:SetPoint("\067\069\078\084\069\082",N,"\067\069\078\084\069\082",1,-10)end end dmG1[c]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(r..(z.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end dmG2={}function dmgText2(z,N,c,e,r)if dmG2[c]==nil then dmG2[c]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",N)dmG2[c]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG2[c]:ClearAllPoints()dmG2[c]:SetBackdropColor(0,103,51,1)dmG2[c]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end if z~=nil and z~=""then if tonumber(z)<=9999 then dmG2[c]:SetSize(48,48)end if tonumber(z)>9999 then dmG2[c]:SetSize(54,48)end if tonumber(z)<=9999 then dmG2[c]:SetPoint("\067\069\078\084\069\082",N,"\067\069\078\084\069\082",5,-10)end if tonumber(z)>9999 then dmG2[c]:SetPoint("\067\069\078\084\069\082",N,"\067\069\078\084\069\082",1,-10)end end if z~=nil then dmG2[c]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(r..(z.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end end rtnText={}function rtnTextF(z,N,c)if c=="\115\104\111\119"then if rtnText[N]==nil then rtnText[N]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)rtnText[N]:SetSize(415,396)rtnText[N]:SetFrameStrata("\084\079\079\076\084\073\080")rtnText[N]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",5,-55)rtnText[N]:SetBackdropColor(0,0,0,0)if tonumber(string.utf8len(z))<200 then rtnText[N]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",33)elseif tonumber(string.utf8len(z))>200 and tonumber(string.utf8len(z))<300 then rtnText[N]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",27)elseif tonumber(string.utf8len(z))>=400 then rtnText[N]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",16)end end rtnText[N]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\048\048\048\048\048\048"..(z.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))rtnText[N]:Show()else if rtnText[N]~=nil then rtnText[N]:Hide()end end end function versFail(z)if VerF==nil then VerF=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)end VerF:SetSize(1111,888)VerF:SetFrameStrata("\072\073\071\072")if testQ.VerF==nil then testQ.VerF=600 end VerF:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",testQ.VerF,-355)VerF:SetBackdropColor(0,103,51,1)VerF:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",z+10)VerF:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\102\102\048\048\048\048\208\158\208\145\208\157\208\158\208\146\208\152 \208\144\208\148\208\148\208\158\208\157\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")end function marshrut(z,N)local c=z-1 local e=z+1 local r=z+2 local u=z-2 local C=z+3 local P=z-3 if testQ.start~="\101\118\079\051"then if marshruT~=nil then if marshruT[z]==nil then marshruT[z]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\109\097\114\115\104\114\117\116",UIParent)marshruT[z]:SetSize(222,222)marshruT[z]:SetFrameStrata("\072\073\071\072")marshruT[z]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",333,111)marshruT[z]:SetBackdropColor(0,103,51,1)marshruT[z]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",32)marshruT[z]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\057\048\101\101\057\048"..(z..(" \208\184\208\183 "..(tostring(N).."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))))end if marshruT[c]~=nil then marshruT[c]:Hide()marshruT[c]=nil end if marshruT[e]~=nil then marshruT[e]:Hide()marshruT[e]=nil end if marshruT[r]~=nil then marshruT[r]:Hide()marshruT[r]=nil end if marshruT[u]~=nil then marshruT[u]:Hide()marshruT[u]=nil end if marshruT[C]~=nil then marshruT[C]:Hide()marshruT[C]=nil end if marshruT[P]~=nil then marshruT[P]:Hide()marshruT[P]=nil end end end end function showRB(z)if debuffChkB==nil then debuffChkB={}end if pokazat==1 and btn[1]~=nil then for z=1,15,1 do if btn[z]~=nil then btn[z]:Hide()end end btn[991]:Show()if tonumber(testQ.mioFldLvl)~=.5 and(tonumber(testQ.mioFldLvl)~=.9 and tonumber(testQ.mioFldLvl)~=nil)then btn[14]:Show()end myCheckButton1:Show()myCheckButton2:Show()myCheckButton3:Show()myCheckButton4:Show()myCheckButton5:Show()myCheckButton6:Show()myCheckButton7:Show()btn[998]:Show()btn[997]:Show()for N=1,20,1 do local c,e,r,u,C,P,s,h=UnitDebuff("\112\108\097\121\101\114",N)if c~=nil then debuffChkB[c]=createCheckbutton(UIParent,150,-20*N+230,c)debuffChkB[c].tooltip="\208\161\208\186\209\128\209\139\208\178\208\176\209\130\209\140 \208\184\208\186\208\190\208\189\208\186\209\131 "..c debuffChkB[c]:SetScript("\079\110\067\108\105\099\107",function()if testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB==nil then testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB={}end if testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[c]=="\068\105\115\097\098\108\101"or testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[c]==nil then testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[c]="\069\110\097\098\108\101"debuffChkB[c]:SetChecked(true)elseif testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[c]=="\069\110\097\098\108\101"then testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[c]="\068\105\115\097\098\108\101"debuffChkB[c]:SetChecked(false)end end)end end pokazat=0 pokazatChk=1 elseif pokazat==0 then btn[991]:Hide()if tonumber(testQ.mioFldLvl)~=.5 and(tonumber(testQ.mioFldLvl)~=.9 and tonumber(testQ.mioFldLvl)~=nil)then for z=1,15,1 do if btn[z]~=nil then btn[z]:Show()end end if btn[ii]~=nil then if testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]=="\057\057\057\057"then btn[1]:Show()btn[2]:Hide()end if testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]~="\057\057\057\057"then btn[1]:Hide()btn[2]:Show()end end end testQ.lvlProv=nil myCheckButton1:Hide()myCheckButton2:Hide()myCheckButton3:Hide()myCheckButton4:Hide()myCheckButton5:Hide()myCheckButton6:Hide()myCheckButton7:Show()for z,N in pairs(debuffChkB)do if debuffChkB[z]~=nil then debuffChkB[z]:Hide()end end btn[998]:Hide()btn[997]:Hide()pokazat=1 pokazatChk=0 end end function marSh()local z=GetCurrentMapContinent()local N=GetCurrentMapZone()local c,e=GetPlayerMapPosition("\112\108\097\121\101\114")local r z=tostring(z)N=tostring(N)local u=GetMapInfo()if u=="\082\097\103\101\102\105\114\101"then z="\057\057"N="\049"end if marsh==nil then marsh={}end if marsh[z]==nil then marsh[z]={}end if marsh[z][N]==nil then marsh[z][N]={}end local C=tablelength(marsh[z][N])C=tostring(C+1)marsh[z][N][C]={}testQ.marshK=z testQ.marshL=N testQ.marshN=C marsh[z][N][C].x=string.format("\037\046\051\102",c)marsh[z][N][C].y=string.format("\037\046\051\102",e)print(C)end function resObj1(z,N,c)if krt==nil then krt={}end if krt.podskazki==nil then krt.podskazki=1 end if testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]==nil then testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]={}testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=0 end if N==c then if mioFld~=nil then if mioFld[N]~=nil then if mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"]~=nil then if tonumber(testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"])<=tonumber(krt.podskazki)then if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\104\115"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\115"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\120"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\115\120"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\099"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\097\115"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\099"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\115"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\120"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\099"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\112"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\122"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\118"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\109\102"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\109\048"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\108\120"and mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\108\112")))))))))))))))then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\102"then SendAddonMessage("\116\114\101\101 "..tostring(z),N,"\103\117\105\108\100")end mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\109\048"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\104\115"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<9999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=9999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\116\122"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\108\120"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\122\099"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<9999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=9999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\097\115"or mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\098\099"or mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\098\115"or mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\098\120"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<14999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=14999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\122\115"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\116\099"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<4999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=4999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\122\120"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\115\120"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end else if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\104\115"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\115"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\120"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\115\120"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\099"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\097\115"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\120"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\099"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\115"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\099"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\112"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\122"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\118"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\109\102"and(mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\109\048"and mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\108\120"))))))))))))))then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+5 else if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\102"then SendAddonMessage("\116\114\101\101 "..tostring(z),N,"\103\117\105\108\100")end mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\104\115"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<9999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+5 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=9999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\108\120"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+5 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\116\122"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+5 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\109\048"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+5 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\122\099"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<9999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+5 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=9999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\097\115"or mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\098\099"or mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\098\115"or mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\098\120"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<14999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+5 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=14999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\122\115"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+5 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\116\099"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<4999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+5 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=4999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\122\120"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+5 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[N]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\115\120"then if tonumber(mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]+5 else mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end end SendAddonMessage("\114\101\115\079\098\106 "..(z..(" "..mioFld[N]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])),c,"\103\117\105\108\100")end end end else if mioFld~=nil then if mioFld[c]~=nil then if mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"]~=nil then if tonumber(testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"])<=tonumber(krt.podskazki)then if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\104\115"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\115"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\120"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\115\120"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\099"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\097\115"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\099"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\115"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\120"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\099"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\112"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\122"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\118"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\109\048"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\109\102"and mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\108\120"))))))))))))))then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\104\115"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<9999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=9999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\108\120"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\116\122"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\109\048"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\122\099"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<9999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=9999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\097\115"or mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\098\099"or mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\098\115"or mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\098\120"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<14999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=14999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\122\115"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\122\120"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\116\099"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<4999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=4999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\115\120"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end else if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\104\115"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\115"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\120"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\115\120"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\099"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\097\115"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\099"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\115"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\098\120"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\099"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\122\112"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\122"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\116\118"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\109\048"and(mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\109\102"and mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]~="\108\120"))))))))))))))then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\104\115"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<9999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=9999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\108\120"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\116\122"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\109\048"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\116\099"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<4999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=4999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\097\115"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<14999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=14999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\122\115"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\122\120"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=19999 end end if mioFld[c]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(z)]=="\115\120"then if tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local N=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if N==9 then mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=tonumber(mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)]=29999 end end end SendAddonMessage("\114\101\115\079\098\106 "..(z..(" "..mioFld[c]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(z)])),c,"\103\117\105\108\100")end end end end end function gKam(z,N)local c=nil if tonumber(N)==500 then for N=1,100,1 do if mioFld1[z]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(N)]=="\115\107"then if c==nil then c=1 else c=c+1 end end end if c==nil then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\048","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif c==1 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\049","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif c==2 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\050","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif c==3 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\051","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif c==4 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\052","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif c==5 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\053","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")end end end function bdf(z)if testQ==nil then testQ={}end if testQ.myNome==nil then testQ.myNome={}end if testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"]==nil then testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"]={}end if testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB==nil then testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB={}end if DebuffButton1~=nil then if tonumber(testQ.buffX)~=nil and tonumber(testQ.buffX)~=0 then local N,c,e,r=DebuffButton1:GetPoint()local u,C,P,s=btn[991]:GetPoint()if r~=s then local N,c=DebuffButton1:GetSize()local e=UIParent:GetSize()/2 j=1 for c=1,DEBUFF_MAX_DISPLAY,1 do if AuraButton_Update("\068\101\098\117\102\102\066\117\116\116\111\110",c,"\072\065\082\077\070\085\076")then local r,u,C,P,s,h,d,v=UnitDebuff("\112\108\097\121\101\114",c)local y=_G["\068\101\098\117\102\102\066\117\116\116\111\110"..c]if y~=nil and(testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[r]==nil or testQ[z]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[r]=="\068\105\115\097\098\108\101")then y:ClearAllPoints()if tonumber(testQ.buffX)<e then y:SetPoint("\066\079\084\084\079\077\076\069\070\084",UIParent,"\066\079\084\084\079\077\076\069\070\084",tonumber(testQ.buffX)+N*j,testQ.buffY)j=j+1 else y:SetPoint("\066\079\084\084\079\077\076\069\070\084",UIParent,"\066\079\084\084\079\077\076\069\070\084",tonumber(testQ.buffX)-N*j,testQ.buffY)j=j+1 end else if y~=nil and y:IsVisible()then y:Hide()end end end end end if testQ.buffX==0 then testQ.buffX=nil end end end end function gtest()gTest=nil gTest={}for z=1,50,1 do local N,c,e,r,u,C,P=GetWhoInfo(z)if c==""then if r~="\208\148\209\128\208\181\208\189\208\181\208\185"and(r~="\208\157\208\190\209\135\208\189\208\176\209\143 \209\141\208\187\209\140\209\132\208\184\208\185\208\186\208\176"and(r~="\208\167\208\181\208\187\208\190\208\178\208\181\208\186"and(r~="\208\157\208\190\209\135\208\189\208\190\208\185 \209\141\208\187\209\140\209\132"and(r~="\208\147\208\189\208\190\208\188"and r~="\208\148\208\178\208\190\209\128\209\132"))))then table.insert(gTest,N)end end end end function ns_q5()ns_q5Test=nil ns_q5Test={}for z=1,50,1 do local N,c,e,r,u,C,P=GetWhoInfo(z)if c==""then table.insert(ns_q5Test,N)end end end function closeFld()for z=1,100,1 do fBtn[z]:Hide()end for z=1,100,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[z]~=nil then if z==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[z]:Hide()end end end end btn[989]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end function hX()quesT("\104\105\100\101")okNo:configure(1,"\104\105\100\101")rtnTextF("\102\100\115\097",1,"\104\105\100\101")for z=1,100,1 do fBtn[z]:Hide()end if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end if okNo~=nil then okNo[1]:Hide()okNo[2]:Hide()end btn[989]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end function showFld(z,N)local c local e local r local u if mBtn[1]~=nil then if mBtn[1]:IsVisible()then u=1 end end if dBtn[1]~=nil then if dBtn[1]:IsVisible()then u=1 end end if not fBtn[1]:IsVisible()and u~=1 then if not GuildFrameLFGButton:GetChecked()or z=="\049"then if z=="\048"then c=GuildFrame.selectedName else c=N end btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",fBtn[10],"\084\079\080\082\073\071\072\084",1,1)for z=1,GetNumGuildMembers(true),1 do local u,C,P,s,h,d,v,y,g,A,o,n,K,B,R,G,U=GetGuildRosterInfo(z)if c~=N then if u==c then e=string.sub(y,1,1)r=string.sub(y,2,2)if y~=""and(e~="\049"and e~="\048")then testQ.fldLvl=tonumber(e)testQ.qNum=string.sub(y,8,8)testQ.qDay=string.sub(y,6,7)elseif e=="\049"then testQ.fldLvl=.9 testQ.qNum=string.sub(y,8,8)testQ.qDay=string.sub(y,6,7)elseif e=="\048"then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 elseif e==""then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 end if r==nil then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 end end if u==N then e=string.sub(y,1,1)if y~=""and(e~="\049"and e~="\048")then testQ.mioFldLvl=string.sub(y,1,1)elseif e=="\049"then testQ.mioFldLvl=.9 elseif e=="\048"then testQ.mioFldLvl=.5 elseif e==""then testQ.mioFldLvl=.5 end end else if u==N then e=string.sub(y,1,1)r=string.sub(y,2,2)if y~=""and(e~="\049"and e~="\048")then testQ.mioFldLvl=string.sub(y,1,1)testQ.fldLvl=testQ.mioFldLvl testQ.qNum=string.sub(y,8,8)testQ.qDay=string.sub(y,6,7)elseif e=="\049"then testQ.mioFldLvl=.9 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=string.sub(y,8,8)testQ.qDay=string.sub(y,6,7)elseif e=="\048"then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 elseif e==""then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 end if r==nil then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 end end end if tonumber(testQ.mioFldLvl)==0 then testQ.mioFldLvl=.5 end if tonumber(testQ.fldLvl)==0 then testQ.fldLvl=.5 end end testQ.fRand1=math.random(1,1000000)testQ.sign=z SendAddonMessage("\115\104\077\070\108\100 "..testQ.fRand1,c..(" "..N),"\103\117\105\108\100")FriendsFrame:Hide()else local z=tablelength(risPet)for z=1,100,1 do if risPet[z]~=nil then risPetShow(z,"\104\105\100\101","")end end for z=1,100,1 do fBtn[z]:Hide()end btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end for z=1,100,1 do if dmG[z]~=nil and dmG[z]:IsVisible()then dmG[z]:Hide()end end for z=1,3,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[z]~=nil then if z==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[z]:Hide()end end end end for z=101,103,1 do if dmG[z]~=nil then dmG[z]:Hide()end end if tonumber(testQ.sign)==0 then FriendsFrame:Show()end testQ.sign=nil testQ.fRandD1nome=nil end else local z=tablelength(risPet)for z=1,100,1 do if risPet[z]~=nil then risPetShow(z,"\104\105\100\101","")end end for z=1,100,1 do fBtn[z]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end for z=1,100,1 do if dmG[z]~=nil and dmG[z]:IsVisible()then dmG[z]:Hide()end end for z=1,100,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[z]~=nil then if z==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[z]:Hide()end end end end for z=101,103,1 do if dmG[z]~=nil then dmG[z]:Hide()end end if tonumber(testQ.sign)==0 then FriendsFrame:Show()end if tostring(testQ.sign)=="\049"then btn[989]:Hide()end testQ.sign=nil end end function qLvl33c1()local z local N local c local e local r local u local C r=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(r)u=eMotC[r]["\208\191\208\190\208\184\209\129\208\186"]C=eMotC[r]["\208\190\209\130\208\178\208\181\209\130"]z=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]N=npcListC1[z]["\208\184\208\188\209\143"]z=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]c=npcListC1[z]["\208\184\208\188\209\143"]while true do if N==c then z=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]c=npcListC1[z]["\208\184\208\188\209\143"]else break end end z=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]e=npcListC1[z]["\208\184\208\188\209\143"]while true do if e==c or e==N then z=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]e=npcListC1[z]["\208\184\208\188\209\143"]else break end end return r,N,c,e,u,C end function qLvl33c2()local z local N local c local e local r local u local C r=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(r)u=eMotC[r]["\208\191\208\190\208\184\209\129\208\186"]C=eMotC[r]["\208\190\209\130\208\178\208\181\209\130"]z=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]N=npcListC2[z]["\208\184\208\188\209\143"]z=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]c=npcListC2[z]["\208\184\208\188\209\143"]while true do if N==c then z=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]c=npcListC2[z]["\208\184\208\188\209\143"]else break end end z=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]e=npcListC2[z]["\208\184\208\188\209\143"]while true do if e==c or e==N then z=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]e=npcListC2[z]["\208\184\208\188\209\143"]else break end end return r,N,c,e,u,C end function qLvl33c3()local z local N local c local e local r local u local C r=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(r)u=eMotC[r]["\208\191\208\190\208\184\209\129\208\186"]C=eMotC[r]["\208\190\209\130\208\178\208\181\209\130"]z=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]N=npcListC3[z]["\208\184\208\188\209\143"]z=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]c=npcListC3[z]["\208\184\208\188\209\143"]while true do if N==c then z=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]c=npcListC3[z]["\208\184\208\188\209\143"]else break end end z=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]e=npcListC3[z]["\208\184\208\188\209\143"]while true do if e==c or e==N then z=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]e=npcListC3[z]["\208\184\208\188\209\143"]else break end end return r,N,c,e,u,C end function rndTblc(z)local N={}for z in pairs(z)do table.insert(N,z)end return z[N[math.random(#N)]]end function htimer(z)local N=0 for c=1,100,1 do if mioFld1[z]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(c)]=="\116\111"then N="\116\111"end end if testQ[z].dTimer[30]==nil then testQ[z].dTimer[30]=26000 end if testQ[z].dTimer[tonumber(date("\037\100"))-1]==nil then testQ[z].dTimer[tonumber(date("\037\100"))-1]=26000 end if tonumber(testQ.mioFldLvl)==.5 or tonumber(testQ.mioFldLvl)==.9 then if testQ[z].hTimer==nil then if testQ[z].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[z].dTimer[30]==nil then if N~="\116\111"then testQ[z].hTimer=50400 else testQ[z].hTimer=26000 end else if tonumber(date("\037\100"))~=1 then if testQ[z].dTimer[tonumber(date("\037\100"))-1]>10800 then if N~="\116\111"then testQ[z].hTimer=testQ[z].dTimer[tonumber(date("\037\100"))-1]else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(testQ[z].dTimer[tonumber(date("\037\100"))-1])/1.5))end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end else if testQ[z].dTimer[30]~=nil and testQ[z].dTimer[30]>10800 then if N~="\116\111"then testQ[z].hTimer=testQ[z].dTimer[30]else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(testQ[z].dTimer[30])/1.5))end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==2 then if testQ[z].hTimer==nil then if testQ[z].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[z].dTimer[30]==nil then if N~="\116\111"then testQ[z].hTimer=25200 else testQ[z].hTimer=16000 end else if tonumber(date("\037\100"))~=1 then if testQ[z].dTimer[tonumber(date("\037\100"))-1]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/2))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/2))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end else if testQ[z].dTimer[30]~=nil and testQ[z].dTimer[30]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/2))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/2))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==3 then if testQ[z].hTimer==nil then if testQ[z].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[z].dTimer[30]==nil then if N~="\116\111"then testQ[z].hTimer=14500 else testQ[z].hTimer=10000 end else if tonumber(date("\037\100"))~=1 then if testQ[z].dTimer[tonumber(date("\037\100"))-1]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/3))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/3))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end else if testQ[z].dTimer[30]~=nil and testQ[z].dTimer[30]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/3))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/3))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==4 then if testQ[z].hTimer==nil then if testQ[z].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[z].dTimer[30]==nil then if N~="\116\111"then testQ[z].hTimer=11000 else testQ[z].hTimer=8000 end else if tonumber(date("\037\100"))~=1 then if testQ[z].dTimer[tonumber(date("\037\100"))-1]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/4))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/4))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end else if testQ[z].dTimer[30]~=nil and testQ[z].dTimer[30]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/4))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/4))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==5 then if testQ[z].hTimer==nil then if testQ[z].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[z].dTimer[30]==nil then if N~="\116\111"then testQ[z].hTimer=10500 else testQ[z].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[z].dTimer[tonumber(date("\037\100"))-1]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/5))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/5))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end else if testQ[z].dTimer[30]~=nil and testQ[z].dTimer[30]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/5))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/5))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==6 then if testQ[z].hTimer==nil then if testQ[z].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[z].dTimer[30]==nil then if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[z].dTimer[tonumber(date("\037\100"))-1]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/6))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/6))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end else if testQ[z].dTimer[30]~=nil and testQ[z].dTimer[30]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/6))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/6))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==7 then if testQ[z].hTimer==nil then if testQ[z].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[z].dTimer[30]==nil then if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[z].dTimer[tonumber(date("\037\100"))-1]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/7))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/7))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end else if testQ[z].dTimer[30]~=nil and testQ[z].dTimer[30]>10800 then if N~="\116\111"then testQ[z].hTimer=tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/7))if testQ[z].hTimer<10800 then testQ[z].hTimer=10800 end else testQ[z].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[z].dTimer[tonumber(date("\037\100"))-1]/7))/1.5))if testQ[z].hTimer<7000 then testQ[z].hTimer=7000 end end else if N~="\116\111"then testQ[z].hTimer=10800 else testQ[z].hTimer=7000 end end end end end end SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..z,testQ[z].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..z,testQ[z].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..z,testQ[z].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")end function ml()if BrowseBuyoutButton~=nil then if aucBtn==nil then aucBtn=CreateFrame("\066\117\116\116\111\110",nil,UIParent,"")aucBtn:SetFrameStrata("\084\079\079\076\084\073\080")aucBtn:SetSize(222,32)aucBtn:SetPoint("\067\069\078\084\069\082",BrowseBidButton,"\067\069\078\084\069\082",22,0)aucBtn:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\097\117\107\046\116\103\097")aucBtn:Hide()end name,texture,count,quality,canUse,level,levelColHeader,minBid,minIncrement,buyoutPrice,bidAmount,highBidder,owner,saleStatus,itemId,hasAllInfo=GetAuctionItemInfo("\108\105\115\116",tonumber(GetSelectedAuctionItem("\108\105\115\116")))if name=="\208\158\208\177\209\139\209\135\208\189\208\190\208\181 \208\191\208\184\209\129\209\140\208\188\208\190"then aucBtn:Show()if highBidder=="\208\165\208\181\209\132\208\181"then aucBtn:Hide()end else if aucBtn~=nil then aucBtn:Hide()end end end if Atr_Buy1_Button~=nil and Atr_Buy1_Button:IsVisible()then if aucBtn==nil then aucBtn=CreateFrame("\066\117\116\116\111\110",nil,UIParent,"")aucBtn:SetFrameStrata("\084\079\079\076\084\073\080")aucBtn:SetSize(222,32)aucBtn:SetPoint("\067\069\078\084\069\082",BrowseBidButton,"\067\069\078\084\069\082",22,0)aucBtn:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\097\117\107\046\116\103\097")aucBtn:Hide()end if Atr_Search_Box:IsVisible()and Atr_Search_Box:GetText()=="\208\158\208\177\209\139\209\135\208\189\208\190\208\181 \208\191\208\184\209\129\209\140\208\188\208\190"then aucBtn:Show()aucBtn:SetSize(422,32)else if aucBtn~=nil then aucBtn:Hide()end end end end function diffT(z,N)for c=1,100,1 do if z[c]~=N[c]then return false end end return true end function antc(z)shablon="\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"myB=string.find(shablon,(tostring(z)):sub(1,1),1,true)if tonumber(#tostring(z))>=2 then for N=2,#tostring(z),1 do myB=myB..string.find(shablon,(tostring(z)):sub(N,N),1,true)end end return myB end function ochered(z,N,c,e,r,u,C,P,s,h)if z~="\208\156\208\190\209\128"then local d=UnitClass("\112\108\097\121\101\114")local v=0 local y,g,A,o for N=1,24,1 do if c==1 then y,__,__,__,__,g,A,o=UnitDebuff("\116\097\114\103\101\116",N)if o=="\112\108\097\121\101\114"then if y=="\208\158\208\183\208\189\208\190\208\177"then if A~=nil and tonumber(A)-tonumber(GetTime())<=5 then testQ.o=1 else testQ.o=nil end end if y=="\208\154\209\128\208\190\208\178\208\176\208\178\208\176\209\143 \209\135\209\131\208\188\208\176"then if A~=nil and tonumber(A)-tonumber(GetTime())<=5 then testQ.c=1 else testQ.c=nil end end end end if e==1 then y=UnitBuff("\112\108\097\121\101\114",N)end if y~=nil then if y==z then v=1 end end end local n=UnitClass("\112\108\097\121\101\114")if n=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then if testQ.o==1 and testQ.c==1 then local z for N,c in pairs(testQ.skills)do if testQ.skills[N]~=nil then if testQ.skills[N]=="\208\156\208\190\209\128"then z=1 end end end if z~=1 then table.insert(testQ.skills,N,"\208\156\208\190\209\128")end end end for N,c in pairs(testQ.skills)do if testQ.skills[N]==z then v=1 end end local K=0 if P~=nil then K=K+1 end if s~=nil then K=K+1 end if h~=nil then K=K+1 end local B,R,G,U=GetSpellInfo(z)if U==nil then U=0 end if n=="\208\148\209\128\209\131\208\184\208\180"then U=30 end if u=="\109"then if UnitPower("\112\108\097\121\101\114")<U and(IsUsableSpell(z)and GetSpellCooldown(z)==0)then if v~=1 then if N==0 then table.insert(testQ.skills,N,z)end if N==1 then table.insert(testQ.skills,z)end end else for N,c in pairs(testQ.skills)do if testQ.skills[N]~=nil then if testQ.skills[N]==z then testQ.skills[N]=nil end end end end end local a,q,F,D=GetSpellInfo(z)if D==nil then D=0 end if u=="\098"then if UnitPower("\112\108\097\121\101\114")>=D and(IsUsableSpell(z)and GetSpellCooldown(z)==0)then if v~=1 then if N==0 then table.insert(testQ.skills,1,z)end if N==1 then table.insert(testQ.skills,z)end else end else for N,c in pairs(testQ.skills)do if testQ.skills[N]~=nil then if testQ.skills[N]==z then testQ.skills[N]=nil end end end end end if r~=nil and(IsUsableSpell(z)and(GetSpellCooldown(z)==0 and C==nil))then if n=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then if z=="\208\159\209\128\208\176\208\178\208\181\208\180\208\189\208\190\208\181 \208\189\208\181\208\184\209\129\209\130\208\190\208\178\209\129\209\130\208\178\208\190"then if v~=1 then PlaySoundFile(r)end end else if z~="\208\146\208\187\208\176\209\129\209\130\209\140 \208\187\209\140\208\180\208\176"then PlaySoundFile(r)end end if n=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then if z=="\208\146\208\187\208\176\209\129\209\130\209\140 \208\187\209\140\208\180\208\176"then if v~=1 then end end else if z~="\208\159\209\128\208\176\208\178\208\181\208\180\208\189\208\190\208\181 \208\189\208\181\208\184\209\129\209\130\208\190\208\178\209\129\209\130\208\178\208\190"then PlaySoundFile(r)end end end if z=="\208\156\209\143\209\129\208\190\209\128\209\131\208\177\208\186\208\176"then if tonumber(GetComboPoints("\112\108\097\121\101\114",target))==1 and v~=1 then end end if C==1 then if UnitHealth("\112\108\097\121\101\114")<=tonumber(UnitHealthMax("\112\108\097\121\101\114"))/2 and GetSpellCooldown(z)==0 then table.insert(testQ.skills,N,z)if r~=nil then end else for N,c in pairs(testQ.skills)do if testQ.skills[N]~=nil then if testQ.skills[N]==z then testQ.skills[N]=nil end end end end end end end function partyFrameHide()for z=1,25,1 do local N=_G["\080\097\114\116\121\077\101\109\098\101\114\070\114\097\109\101"..z]if N~=nil and N:IsVisible()then N:Hide()end end end function bs(z)local N local c=UnitClass("\112\108\097\121\101\114")local e=UnitStat("\112\108\097\121\101\114",1)local r=UnitStat("\112\108\097\121\101\114",2)local u=UnitStat("\112\108\097\121\101\114",3)local C=UnitStat("\112\108\097\121\101\114",4)local P=UnitStat("\112\108\097\121\101\114",5)local s=GetSpellBonusHealing()local h=GetCombatRating(6)local d=GetCombatRating(9)local v=GetCombatRating(24)local y=GetCombatRating(2)local g=GetCombatRating(3)local A=GetCombatRating(4)local o=GetCombatRating(5)local n=GetManaRegen()local K=GetCombatRating(25)local B,R=UnitAttackPower("\112\108\097\121\101\114")local G=GetCombatRating(18)local U=B+R local a local q=0 if c=="\208\150\209\128\208\181\209\134"or c=="\208\150\209\128\208\184\209\134\208\176"then local z,c,e,r,u=GetTalentInfo(3,27)if u>=1 then N=(((((C+P*.5)+s*2)+h)+d*2)+n*.5)+G q=h.."\047\050\056\057\047\052\052\054"else N=((((C+P*1.5)+s*2)+d)+n*1.5)+G q=h.."\047\048"end end if c=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then local z,c,K,B,R=GetTalentInfo(1,26)local a,F,D,H,J=GetTalentInfo(2,26)local t,O,i,Q,V=GetTalentInfo(3,26)if R>=1 then N=((((C*2+P)+s*1.5)+d)+n)+G*1.5 q=h.."\047\048"end if J>=1 then N=(((((((e+r)+u*2)+h)+v)+y*1.5)+g*1.5)+A*1.5)+o*1.5 q=h..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(v.."\047\049\056\053"))))end if V>=1 then N=(((((e*2+r)+h)+d)+U)+G)+v q=h..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(v.."\047\049\052\056"))))end end if c=="\208\146\208\190\208\184\208\189"then local z,c,C,P,s=GetTalentInfo(3,7)if s>=1 then N=(((((((e+r)+u*2)+h)+v)+y*1.5)+g*1.5)+A*1.5)+o*1.5 q=h..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(v.."\047\049\054\052"))))else N=((((((e*2+r)+h)+d*1.5)+v)+K*2)+U)+G q=h..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(v..("\047\050\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(K.."\047\049\052\048\048")))))))end end if c=="\208\148\209\128\209\131\208\184\208\180"then local c,A,o,B,R=GetTalentInfo(3,27)local a,F,D,H,J=GetTalentInfo(2,5)local t,O,i,Q,V=GetTalentInfo(1,13)local X,j,L,b,l=GetTalentInfo(2,9)if R>=1 or z=="\209\133\208\184\208\187"then N=((((C+P*1.5)+s*2)+G*1.5)+d)+n*1.5 q=h.."\047\048"end if J>=1 or z=="\208\188\208\181\208\180\208\178\208\181\208\180\209\140"then N=((((((((e+r*2)+u*2)+h)+d)+G*1.5)+v)+y*1.5)+g*2)+K q=h..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(v..("\047\049\051\050\047\050\056\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(K.."\047\063\063")))))))end if V>=1 or z=="\209\129\208\190\208\178\208\176"then N=(((((C+P*.5)+s*2)+h)+d*2)+n*.5)+G q=h.."\047\050\054\051"end if l>=1 or z=="\208\186\208\190\209\130"then N=((((((e+r*2)+h)+d*1.5)+v)+K*2)+U)+G q=h..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(v..("\047\049\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(K.."\047\049\052\048\048")))))))end end if c=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\208\186"or c=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\209\134\208\176"then N=((((((e+r*2)+h)+d)+K*2)+v)+U)+G q=h..("\047"..("\050\054\051"..("\047"..("\055\050\050"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(v..("\047\049\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(K.."\047\049\052\048\048")))))))))end if c=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\208\186"or c=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\209\134\208\176"then N=(((((C+P*1.5)+s*2)+h)+d*1.5)+n*.5)+G*1.5 q=h..("\047"..("\050\056\057\047\052\052\054 "..("\208\165\208\176\209\129\209\130\058 "..(G.." \049\049\048\048\047\049\052\048\048"))))end if c=="\208\168\208\176\208\188\208\176\208\189"or c=="\208\168\208\176\208\188\208\176\208\189\208\186\208\176"then local z,c,u,y,g=GetTalentInfo(1,3)local A,o,B,R,a=GetTalentInfo(2,9)local F,D,H,J,t=GetTalentInfo(3,1)if g>=3 and a>=1 then J,J,J,J,g=GetTalentInfo(1,7)J,J,J,J,a=GetTalentInfo(2,11)end if g>=1 then N=(((C+s*2)+d)+h)+G*1.5 q=h.."\047\051\054\056"end if a>=1 then N=(((((((e+r*2)+h)+d*1.5)+K)+U)+G*1.5)+v)+s*.5 q=h..("\047"..("\050\051\050"..("\047"..("\051\054\056"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(v.."\047\049\052\048"))))))end if t>=1 then N=((((C+P)+s*2)+d)+n*2)+G*2 q=h..("\047"..("\048"..(" \099\046\047\208\186\208\176\208\191\058 "..(G.."\047\049\050\054\057\047\050\049\048\048"))))end end if c=="\208\158\209\133\208\190\209\130\208\189\208\184\208\186"or c=="\208\158\209\133\208\190\209\130\208\189\208\184\209\134\208\176"then N=((((r*2+h)+d)+K*2)+U)+G q=h..("\047"..("\050\054\051"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(K.."\047\049\052\048\048"))))end if c=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then local z,c,C,P,s=GetTalentInfo(1,7)local A,o,n,B,R=GetTalentInfo(2,3)local G,a,F,D,H=GetTalentInfo(3,3)if s>=1 or R>=1 or H>=1 then N=(((((e+r)+u*2)+h)+v)+y*1.5)+g*1.5 q=h..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(v.."\047\049\055\048\047\052\048\057"))))else N=(((((e*2+r)+h)+d)+v)+K)+U q=h..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(v..("\047\049\055\048"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(K.."\047\049\052\048\048")))))))end end if c=="\208\156\208\176\208\179"then N=((((C+P)+s*2)+h)+d*1.5)+G*1.5 q=h..("\047"..("\051\055\054 \209\133\208\176\209\129\209\130\047\208\186\208\176\208\191\058 "..(G..("\047\049\049\051\048 \208\154\209\128\208\184\209\130\047\208\186\208\176\208\191\058 "..(d.."\047\049\049\053\048\063\040\052\053\037\041")))))end if N~=nil then return string.format("\037\100",N)..(" \209\133\208\184\209\130\047\208\186\208\176\208\191\058 "..q)else SendChatMessage("\208\159\208\190\209\135\208\181\208\188\209\131 \209\130\208\190 \208\191\209\131\209\129\209\130\208\190\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\046 \208\175\058 "..c,"\079\070\070\073\067\069\082",nil,1)end end GameTooltip:HookScript("\079\110\083\104\111\119",function(z)local N=UnitClass("\112\108\097\121\101\114")local c=0 local e local r=0 local u=0 local C=0 local P=0 local s=0 local h=0 local d=0 local v=0 local y=0 local g=0 local A=0 local o=0 local n=0 local K=0 local B=0 local R=0 local G=0 local U=0 local a=0 local q=0 local F=0 local D=0 local H=0 local J=0 local t=0 local O=0 local i=0 local Q=0 local V=0 local X local j=GetUnitName("\112\108\097\121\101\114")if testQ then if testQ[j]then if testQ[j].edaQuest~=nil then if testQ[j].edaQuest~=2 then if testQ.edaNum==nil then testQ.edaNome=_G.GameTooltipTextLeft1:GetText()testQ.edaNum=proverkaNaKolvoPredmetov(_G.GameTooltipTextLeft1:GetText())if testQ.edaNomeRez==nil then testQ.edaNomeRez={}end else if testQ.edaNome~=_G.GameTooltipTextLeft1:GetText()then testQ.edaNome=nil testQ.edaNum=nil else if testQ.edaNomeRez~=nil then if testQ.edaNum>proverkaNaKolvoPredmetov(_G.GameTooltipTextLeft1:GetText())then if testQ.edaNomeRez[_G.GameTooltipTextLeft1:GetText()]==nil then local z=math.random(1,10)if z~=1 then print("\208\164\209\131\044 \208\189\208\181\208\178\208\186\209\131\209\129\208\189\208\190\033")testQ.edaNomeRez[_G.GameTooltipTextLeft1:GetText()]=_G.GameTooltipTextLeft1:GetText()else local z=math.random(1,20)if z==100 then testQ[j].edaQuest=2 SendChatMessage("\208\157\208\176\208\185\208\180\208\181\208\189 \208\184\208\180\208\181\208\176\208\187\209\140\208\189\209\139\208\185 \208\186\208\190\209\128\208\188 \208\180\208\187\209\143 \208\191\208\181\209\130\208\176","\079\070\070\073\067\069\082",nil,1)else print("\208\146\209\128\208\190\208\180\208\181 \208\178\208\186\209\131\209\129\208\189\208\190\044 \208\189\208\190 \209\141\209\130\208\190 \208\189\208\181 \209\130\208\190\209\135\208\189\208\190\046\046")testQ.edaNomeRez={}end end end end end end end end end end end for z=1,z:NumLines(),1 do if _G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText()~=nil then if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,1)=="\043"or string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,1)=="\124"then e=mysplit(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText())if e[3]~=nil and string.utf8sub(e[3],1,3)=="\208\178\209\139\208\189"then if C==0 then C=tonumber(string.utf8sub(e[1],2))end if C==nil then C=tonumber(string.utf8sub(e[1],11))X=z end if C~=0 and X~=z then if tonumber(e[1]:sub(2))~=nil then else C=C+tonumber(e[1]:sub(11))end end end if e[3]~=nil and string.utf8sub(e[3],1,3)=="\208\187\208\190\208\178"then if u==0 then u=tonumber(string.utf8sub(e[1],2))end if u==nil then u=tonumber(string.utf8sub(e[1],11))X=z end if u~=0 and X~=z then if tonumber(e[1]:sub(2))~=nil then else u=u+tonumber(e[1]:sub(11))end end end if e[3]~=nil and string.utf8sub(e[3],1,3)=="\209\129\208\184\208\187"then if e[4]==nil then if r==0 then r=tonumber(string.utf8sub(e[1],2))end if r==nil then r=tonumber(string.utf8sub(e[1],11))X=z end if r~=0 and X~=z then if tonumber(e[1]:sub(2))~=nil then else r=r+tonumber(e[1]:sub(11))end end end end if e[3]~=nil and string.utf8sub(e[3],1,3)=="\208\184\208\189\209\130"then if P==0 then P=tonumber(string.utf8sub(e[1],2))end if P==nil then P=tonumber(string.utf8sub(e[1],11))X=z end if P~=0 and X~=z then if tonumber(e[1]:sub(2))~=nil then else P=P+tonumber(e[1]:sub(11))end end end if e[3]~=nil and string.utf8sub(e[3],1,3)=="\208\180\209\131\209\133"then if s==0 then s=tonumber(string.utf8sub(e[1],2))end if s==nil then s=tonumber(string.utf8sub(e[1],11))X=z end if s~=0 and X~=z then if tonumber(e[1]:sub(2))~=nil then else s=s+tonumber(e[1]:sub(11))end end end if e[4]~=nil and string.utf8sub(e[4],1,3)=="\208\176\209\130\208\176"then R=tonumber(e[1]:sub(2))if R==nil then R=tonumber(e[1]:sub(11))end end if e[4]~=nil and string.utf8sub(e[4],1,3)=="\208\186\209\128\208\184"then v=tonumber(e[1]:sub(2))if v==nil then v=tonumber(e[1]:sub(11))end end if e[4]~=nil and string.utf8sub(e[4],1,3)=="\208\188\208\176\209\129"then y=tonumber(e[1]:sub(2))if y==nil then y=tonumber(e[1]:sub(11))end end if e[4]~=nil and string.utf8sub(e[4],1,3)=="\208\183\208\176\208\186"then h=tonumber(e[1]:sub(2))if h==nil then h=tonumber(e[1]:sub(11))end end if e[4]~=nil and string.utf8sub(e[4],1,3)=="\208\188\208\181\209\130"then d=tonumber(e[1]:sub(2))if d==nil then d=tonumber(e[1]:sub(11))end end if e[4]~=nil and string.utf8sub(e[4],1,3)=="\209\129\208\186\208\190"then d=tonumber(e[1]:sub(2))if d==nil then d=tonumber(e[1]:sub(11))end end if e[4]~=nil and string.utf8sub(e[4],1,3)=="\208\183\208\176\209\137"then g=tonumber(e[1]:sub(2))if g==nil then g=tonumber(e[1]:sub(11))end end if e[4]~=nil and string.utf8sub(e[4],1,3)=="\209\131\208\186\208\187"then A=tonumber(e[1]:sub(2))if A==nil then A=tonumber(e[1]:sub(11))end end if e[4]~=nil and string.utf8sub(e[4],1,3)=="\208\191\208\176\209\128"then o=tonumber(e[1]:sub(2))if o==nil then o=tonumber(e[1]:sub(11))end end if e[4]~=nil and string.utf8sub(e[4],1,3)=="\208\177\208\187\208\190"then n=tonumber(e[1]:sub(2))if n==nil then n=tonumber(e[1]:sub(11))end end if e[4]~=nil and string.utf8sub(e[4],1,3)=="\208\191\209\128\208\190"then B=tonumber(e[1]:sub(2))if B==nil then B=tonumber(e[1]:sub(11))end end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\208\176\209\130\208\176\208\186\208\184")then Q=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\208\186\209\128\208\184\209\130\208\184\209\135\208\181\209\129\208\186\208\190\208\179\208\190")then q=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\208\188\208\176\209\129\209\130\208\181\209\128\209\129\209\130\208\178\208\176")then F=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\208\183\208\176\208\186\208\187\208\184\208\189\208\176\208\189\208\184\208\185")then U=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\208\188\208\181\209\130\208\186\208\190\209\129\209\130\208\184")then a=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\209\129\208\186\208\190\209\128\208\190\209\129\209\130\208\184")then V=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\208\183\208\176\209\137\208\184\209\130\209\139")then D=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\209\131\208\186\208\187\208\190\208\189\208\181\208\189\208\184\209\143")then H=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\208\191\208\176\209\128\208\184\209\128\208\190\208\178\208\176\208\189\208\184\209\143")then J=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\208\177\208\187\208\190\208\186\208\184\209\128\208\190\208\178\208\176\208\189\208\184\209\143")then t=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\208\146\208\190\209\129\208\191\208\190\208\187\208\189\208\181\208\189\208\184\208\181")then O=mysplit(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText())O=tonumber(O[5])end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\208\191\209\128\208\190\208\177\208\184\208\178\208\176\208\189\208\184\209\143")then i=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..z]:GetText(),"\037\083\043\036"))end end end end if R==nil then R=0 end if r==nil then r=0 end if u==nil then u=0 end if C==nil then C=0 end if P==nil then P=0 end if s==nil then s=0 end if h==nil then h=0 end if d==nil then d=0 end if v==nil then v=0 end if y==nil then y=0 end if g==nil then g=0 end if A==nil then A=0 end if o==nil then o=0 end if n==nil then n=0 end if K==nil then K=0 end if B==nil then B=0 end if Q==nil then Q=0 end if U==nil then U=0 end if a==nil then a=0 end if q==nil then q=0 end if F==nil then F=0 end if D==nil then D=0 end if H==nil then H=0 end if J==nil then J=0 end if t==nil then t=0 end if O==nil then O=0 end if i==nil then i=0 end if V==nil then V=0 end if G==nil then G=0 end if N=="\208\150\209\128\208\181\209\134"or N=="\208\150\209\128\208\184\209\134\208\176"then local z,N,e,r,u=GetTalentInfo(3,27)if u>=1 then c=((((((((((P+s*.5)+h*2)+U*2)+d)+a)+v*2)+q*2)+K*.5)+O*.5)+G)+V else c=((((((((P+s*1.5)+h*2)+v)+K*1.5)+G)+U*2)+q)+O*1.5)+V end end if N=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then local z,N,e,B,i=GetTalentInfo(1,26)local X,j,L,b,l=GetTalentInfo(2,26)local x,k,m,I,Z=GetTalentInfo(3,26)if i>=1 then c=((((((((P*2+s)+h*1.5)+v)+K)+G*1.5)+U*1.5)+q)+O)+V*1.5 end if l>=1 then c=(((((((((((((r+u)+C*2)+d)+y)+g*1.5)+A*1.5)+o*1.5)+n*1.5)+a)+F)+D*1.5)+H*1.5)+J*1.5)+t*1.5 end if Z>=1 then c=((((((((((r*2+u)+d)+v)+R)+G)+y)+a)+q)+Q)+V)+F end end if N=="\208\146\208\190\208\184\208\189"then local z,N,e,P,s=GetTalentInfo(3,7)if s>=1 then c=(((((((((((((r+u)+C*2)+d)+y)+g*1.5)+A*1.5)+o*1.5)+n*1.5)+a)+F)+D*1.5)+H*1.5)+J*1.5)+t*1.5 else c=((((((((((((r*2+u)+d)+v*1.5)+y)+B*2)+R)+G)+a)+q*1.5)+F)+i*2)+Q)+V end end if N=="\208\148\209\128\209\131\208\184\208\180"then local z,N,e,o,n=GetTalentInfo(3,27)local J,t,X,j,L=GetTalentInfo(2,5)local b,l,x,k,m=GetTalentInfo(1,13)local I,Z,T,E,w=GetTalentInfo(2,9)if n>=1 then c=((((((((P+s*1.5)+h*2)+G*1.5)+v)+K*1.5)+U*2)+V*1.5)+q)+O*1.5 end if L>=1 then c=(((((((((((((((r+u*2)+C*2)+d)+v)+G*1.5)+y)+g*1.5)+A*2)+B)+a)+q)+V*1.5)+F)+D*1.5)+H*2)+i end if m>=1 then c=((((((((((P+s*.5)+h*2)+d)+v*2)+K*.5)+G)+U*2)+a)+q*2)+O*.5)+V end if w>=1 then c=((((((((((((r+u*2)+d)+v*1.5)+y)+B*2)+R)+G)+a)+q*1.5)+F)+i*2)+Q)+V end end if N=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\208\186"or N=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\209\134\208\176"then c=((((((((((((r+u*2)+d)+v)+B*2)+y)+R)+G)+a)+q)+i*2)+F)+Q)+V end if N=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\208\186"or N=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\209\134\208\176"then c=((((((((((P+s*1.5)+h*2)+d)+v*1.5)+K*.5)+G*1.5)+U*2)+a)+q*1.5)+O*.5)+V*1.5 end if N=="\208\168\208\176\208\188\208\176\208\189"then local z,N,e,C,g=GetTalentInfo(1,3)local A,o,n,D,H=GetTalentInfo(2,9)local J,t,X,j,L=GetTalentInfo(3,1)if g>=3 and H>=1 then j,j,j,j,g=GetTalentInfo(1,7)j,j,j,j,H=GetTalentInfo(2,11)end if g>=1 then c=(((((((P+h*2)+v)+d)+G*1.5)+U*2)+q)+a)+V*1.5 end if H>=1 then c=((((((((((((((r+u*2)+d)+v*1.5)+B)+R)+G*1.5)+y)+h)+a)+q*1.5)+i)+Q)+V*1.5)+F)+U end if L>=1 then c=((((((((P+s)+h*2)+v)+K*2)+G*2)+U*2)+q)+O*2)+V*2 end end if N=="\208\158\209\133\208\190\209\130\208\189\208\184\208\186"or N=="\208\158\209\133\208\190\209\130\208\189\208\184\209\134\208\176"then c=(((((((((u*2+d)+v)+B*2)+R)+G)+a)+q)+i*2)+Q)+V end if N=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then local z,N,e,P,s=GetTalentInfo(1,7)local h,o,n,K,G=GetTalentInfo(2,3)local U,J,t,O,V=GetTalentInfo(3,3)if s>=1 or G>=1 or V>=1 then c=(((((((((r+u)+C*2)+d)+y)+g*1.5)+A*1.5)+a)+F)+D*1.5)+H*1.5 else c=((((((((((r*2+u)+d)+v)+y)+B)+R)+a)+q)+F)+i)+Q end end if N=="\208\156\208\176\208\179"then c=((((((((P+s)+h*2)+d)+v*1.5)+G*1.5)+U*2)+a)+q*1.5)+V*1.5 end if tonumber(c)~=0 then GameTooltip:AddLine("\124\099\102\102\048\048\066\070\070\070\208\177\209\129\058 \124\099\102\102\070\070\056\067\048\048"..c)GameTooltip:Show()else end end)function ns_obj(z)local N if z=="\097\097"then N="\107\097"end if z=="\097\065"then N="\116"end if z=="\097\098"then N="\102"end if z=="\097\066"then N="\111\098"end if z=="\097\099"then N="\109\122"end if z=="\097\067"then N="\104"end return N end local e={[0]="\048",[1]="\049",[2]="\050",[3]="\051";[4]="\052";[5]="\053";[6]="\054";[7]="\055",[8]="\056";[9]="\057";[10]="\065",[11]="\066";[12]="\067",[13]="\068",[14]="\069",[15]="\070",[16]="\071";[17]="\035";[18]="\036";[19]="\037";[20]="\040",[21]="\041",[22]="\042";[23]="\043",[24]="-",[25]="\046";[26]="\047",[27]="\058";[28]="\059",[29]="\060",[30]="\061",[31]="\062";[32]="\063";[33]="\064",[34]="\072",[35]="\073",[36]="\074",[37]="\075",[38]="\076";[39]="\077";[40]="\078";[41]="\079";[42]="\080",[43]="\081";[44]="\082",[45]="\083";[46]="\084";[47]="\085";[48]="\086";[49]="\087",[50]="\088";[51]="\089",[52]="\090";[53]="\094",[54]="\095",[55]="\096",[56]="\097";[57]="\098";[58]="\099";[59]="\100",[60]="\101",[61]="\102";[62]="\103";[63]="\104";[64]="\105",[65]="\106",[66]="\107",[67]="\108",[68]="\109",[69]="\110",[70]="\111",[71]="\112";[72]="\113",[73]="\114",[74]="\115";[75]="\116",[76]="\117",[77]="\118";[78]="\119",[79]="\120",[80]="\121",[81]="\122";[82]="\033",[83]="\123";[84]="\124";[85]="\125",[86]="\091";[87]="\093",[88]="\'",[89]="\044"}local u={}for z,N in pairs(e)do u[N]=z end function numeCod(z)local N=0 for c=1,#z,1 do local e=z:sub(c,c)local r=u[e]or 0 N=N*90+r end return N end function rand_alfabet()testQ.ns_alfabetQ={}testQ.ns_alfabetQ1={}local z={[1]="\208\144",[2]="\208\145",[3]="\208\146";[4]="\208\147",[5]="\208\148",[6]="\208\150";[7]="\208\151",[8]="\208\152";[9]="\208\154",[10]="\208\155";[11]="\208\156";[12]="\208\157",[13]="\208\158",[14]="\208\159";[15]="\208\160";[16]="\208\161",[17]="\208\162";[18]="\208\163";[19]="\208\164";[20]="\208\165",[21]="\208\166";[22]="\208\167",[23]="\208\168";[24]="\208\175",[25]="\208\149";[26]="\208\153",[27]="\208\173",[28]="\208\169";[29]="\208\174";[30]="\208\171"}for N=1,5,1 do local c=math.random(1,30)table.insert(testQ.ns_alfabetQ,z[c])table.insert(testQ.ns_alfabetQ1,z[c])end end function np_change_0()ns_cfg={HPheight=14,HPwidth=99,CBheight=5;CBtieFont=10,border=4,rheight=15;Rpoint="\082\073\071\072\084",RrelativePoint="\076\069\070\084";Rx=0,Ry=-4,LvLFontSize=13,LvLpoint="\082\073\071\072\084";LvLrelativePoint="\076\069\070\084";LvLx=-2;LvLy=0;NameFontSize=11,Npoint="\066\079\084\084\079\077";NrelativePoint="\084\079\080";Nx=0,Ny=4;hostileunit={r=.77,g=.11;b=.11},friendlyunit={r=.6;g=.88;b=.99};friendlyplayer={r=.11,g=.88;b=.11};neutralunit={r=.99;g=.99,b=0}}end function np_change_nil()ns_cfg={HPheight=4,HPwidth=99,CBheight=5,CBtieFont=10;border=2;rheight=15;Rpoint="\082\073\071\072\084";RrelativePoint="\076\069\070\084",Rx=0,Ry=-4,LvLFontSize=13;LvLpoint="\082\073\071\072\084",LvLrelativePoint="\076\069\070\084";LvLx=-2;LvLy=0,NameFontSize=11,Npoint="\066\079\084\084\079\077";NrelativePoint="\084\079\080",Nx=0;Ny=4,hostileunit={r=.77,g=.11;b=.11},friendlyunit={r=.6;g=.88,b=.99};friendlyplayer={r=.11;g=.88;b=.11};neutralunit={r=.99,g=.99,b=0}}end function ns_xy(z,N,c,e)local r=sqrt((z-c)^2+(N-e)^2)return r end function numZome()if GetZoneText()=="\208\155\209\131\208\189\208\190\209\129\208\178\208\181\209\130"then kont="\050"lok="\049\052"end if GetZoneText()=="\208\151\208\176\208\189\208\179\208\176\209\128\209\130\208\190\208\191\209\140"then kont="\051"lok="\050"end if GetZoneText()=="\208\162\208\176\208\189\208\176\209\128\208\184\209\129"then kont="\049"lok="\049\056"end if GetZoneText()=="\208\158\209\128\208\179\209\128\208\184\208\188\208\188\208\176\209\128"then kont="\049"lok="\049\048"end if GetZoneText()=="\208\168\209\130\208\190\209\128\208\188\208\179\209\128\208\176\208\180"then kont="\050"lok="\050\056"end if GetZoneText()=="\208\148\209\131\209\128\208\190\209\130\208\176\209\128"then kont="\049"lok="\052"end if GetZoneText()=="\208\161\209\130\208\181\208\191\208\184"then kont="\049"lok="\049\055"end return kont,lok end function ns_locaziya()local z=math.random(1,7)local N if z==1 then N="\208\155\209\131\208\189\208\190\209\129\208\178\208\181\209\130"end if z==2 then N="\208\148\209\131\209\128\208\190\209\130\208\176\209\128"end if z==3 then N="\208\158\209\128\208\179\209\128\208\184\208\188\208\188\208\176\209\128"end if z==4 then N="\208\151\208\176\208\189\208\179\208\176\209\128\209\130\208\190\208\191\209\140"end if z==5 then N="\208\161\209\130\208\181\208\191\208\184"end if z==6 then N="\208\162\208\176\208\189\208\176\209\128\208\184\209\129"end if z==7 then N="\208\168\209\130\208\190\209\128\208\188\208\179\209\128\208\176\208\180"end return N end function ns_q4xy()local z=GetUnitName("\112\108\097\121\101\114")kont,lok=numZome()if kont~=nil then if testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]==nil then testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]={}local N=math.random(1,99)local c=math.random(1,99)testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=600 testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..N)testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..c)testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=5 else if GetZoneText()==testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok then if testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time>=1 then local N,c=GetPlayerMapPosition("\112\108\097\121\101\114")testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=(ns_xy(N,c,testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x,testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y)/tonumber(mapTables.lokRasstoyanie[kont][lok]))/10 testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time-1 print("\208\158\209\129\209\130\208\176\208\187\208\190\209\129\209\140 "..(testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time.." \209\129\208\181\208\186\209\131\208\189\208\180"))if(ns_xy(N,c,testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x,testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y)/tonumber(mapTables.lokRasstoyanie[kont][lok]))/10<.5 then testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121\095\101\110\100"]=1 SendChatMessage("\208\158\208\189\208\176 \209\130\209\131\209\130\033 \208\157\209\142\209\133\208\190\208\188 \209\135\209\131\209\142\033","\079\070\070\073\067\069\082",nil,1)end else testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()SendChatMessage("\208\163\208\178\209\139\044 \208\188\208\190\209\142 \208\191\209\128\208\184\208\189\209\134\208\181\209\129\209\129\209\131 \209\131\208\182\208\181 \209\131\208\178\208\181\208\183\208\187\208\184 \208\178 "..testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok,"\079\070\070\073\067\069\082",nil,1)local N=math.random(1,99)local c=math.random(1,99)testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..N)testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..c)testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=600 end end end else if testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]==nil then testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]={}local N=math.random(1,99)local c=math.random(1,99)testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=300 testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..N)testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..c)testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()testQ[z]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=5 end end end function allcash(z,N,c)local e,r=GetPlayerMapPosition("\112\108\097\121\101\114")local u=sqrt((e-z)^2+(r-N)^2)local C=(.82-u)/.82 if c==1 then MoveViewRightStart(0)if testQ.acbuhlo==nil then MoveViewLeftStart(C)else MoveViewLeftStart(C/2)end else MoveViewLeftStart(0)if testQ.acbuhlo==nil then MoveViewRightStart(C)else MoveViewRightStart(C/2)end end local P=math.random(1,2)if P==1 then if testQ.acbuhlo==1 then print(C)end end end function osleplenie(z)MoveViewLeftStart(0)MoveViewRightStart(0)local N=math.random(1,2)if N==1 then MoveViewLeftStart(z)else MoveViewRightStart(z)end end function Shuffle(z)local N={}for c=1,#z,1 do N[c]=z[c]end for z=#z,2,-1 do local c=math.random(z)N[z],N[c]=N[c],N[z]end return N end function ns_iya(z)for z=1,100,1 do if iYaBtn[z]~=nil then iYaBtn[z]:Hide()iYaBtn[z]:Enable()iYaBtn[z]:SetAlpha(1)end if iYaBtnP[z]~=nil then iYaBtnP[z]:Hide()end end if tblIya[z].sh==1 then testQ.iya_temp=time()for z=1,11,1 do if iYaBtn[z]~=nil then iYaBtn[z]:SetAlpha(1)end end for z=1,100,1 do if iYaBtnP[z]~=nil then iYaBtnP[z]:Hide()end end for z=1,100,1 do if iYaBtnPic[z]~=nil then iYaBtnPic[z]:Hide()end end for z=1,100,1 do if iYaBtnText[z]~=nil then iYaBtnText[z]:Hide()end end for z=1,100,1 do if iYaBtnVsp[z]~=nil then iYaBtnVsp[z]:Hide()end end iYaBtn:configure(1,0,300,515,32,"",tblIya[z].t1,z,tblIya[z].s1,99)iYaBtn:configure(2,-131,125,256,256,tblIya[z].p1,tblIya[z].t2,z,tblIya[z].s2,99)iYaBtn:configure(3,127,125,256,256,tblIya[z].p2,tblIya[z].t3,z,tblIya[z].s3,99)iYaBtn:configure(4,-131,-165,256,256,tblIya[z].p3,tblIya[z].t4,z,tblIya[z].s4,tblIya[z].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[z].p4,tblIya[z].t5,z,tblIya[z].s5,tblIya[z].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[z].t6,z,tblIya[z].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[z].t7,z,tblIya[z].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[z].t8,z,tblIya[z].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[z].t9,z,tblIya[z].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",z,"",99)iYaBtn:configure(11,-322,300,128,64,"",z..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)iYaBtn[6]:SetAlpha(.5)iYaBtn[7]:SetAlpha(.5)iYaBtn[2]:SetAlpha(.5)iYaBtn[3]:SetAlpha(.5)end if tblIya[z].sh==2 then testQ.iya_temp=time()for z=1,11,1 do if iYaBtn[z]~=nil then iYaBtn[z]:SetAlpha(1)end end for z=1,100,1 do if iYaBtnP[z]~=nil then iYaBtnP[z]:Hide()end end for z=1,100,1 do if iYaBtnPic[z]~=nil then iYaBtnPic[z]:Hide()end end for z=1,100,1 do if iYaBtnText[z]~=nil then iYaBtnText[z]:Hide()end end for z=1,100,1 do if iYaBtnVsp[z]~=nil then iYaBtnVsp[z]:Hide()end end local N={"\050","\051","\052","\053"}local c=Shuffle(N)iYaBtn:configure(1,0,300,515,32,tblIya[z].p10,tblIya[z].t1,z,tblIya[z].s1,99)iYaBtn:configure(2,-131,125,256,256,tblIya[z]["\112"..c[1]],tblIya[z]["\116"..c[1]],z,tblIya[z]["\115"..c[1]],tblIya[z].tq)iYaBtn:configure(3,127,125,256,256,tblIya[z]["\112"..c[2]],tblIya[z]["\116"..c[2]],z,tblIya[z]["\115"..c[2]],tblIya[z].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[z]["\112"..c[3]],tblIya[z]["\116"..c[3]],z,tblIya[z]["\115"..c[3]],tblIya[z].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[z]["\112"..c[4]],tblIya[z]["\116"..c[4]],z,tblIya[z]["\115"..c[4]],tblIya[z].tq)iYaBtn:configure(6,-128,268,256,32,tblIya[z].p6,tblIya[z].t6,z,tblIya[z].s6,99)iYaBtn:configure(7,128,268,256,32,tblIya[z].p7,tblIya[z].t7,z,tblIya[z].s7,99)iYaBtn:configure(8,-128,-22,256,32,tblIya[z].p8,tblIya[z].t8,z,tblIya[z].s8,99)iYaBtn:configure(9,128,-22,256,32,tblIya[z].p9,tblIya[z].t9,z,tblIya[z].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",z,"",99)iYaBtn:configure(11,-322,300,128,64,"",z..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[z].sh==3 then testQ.iya_temp=time()for z=1,11,1 do if iYaBtn[z]~=nil then iYaBtn[z]:SetAlpha(1)end end for z=1,100,1 do if iYaBtnP[z]~=nil then iYaBtnP[z]:Hide()end end for z=1,100,1 do if iYaBtnPic[z]~=nil then iYaBtnPic[z]:Hide()end end for z=1,100,1 do if iYaBtnText[z]~=nil then iYaBtnText[z]:Hide()end end for z=1,100,1 do if iYaBtnVsp[z]~=nil then iYaBtnVsp[z]:Hide()end end local N={"\050";"\051";"\052"}local c=Shuffle(N)iYaBtn:configure(1,0,300,515,32,"",tblIya[z].t1,z,tblIya[z].s1,99)iYaBtn:configure(2,0,125,256,256,tblIya[z]["\112"..c[1]],tblIya[z]["\116"..c[1]],z,tblIya[z]["\115"..c[1]],tblIya[z].tq)iYaBtn:configure(3,-256,125,256,256,tblIya[z]["\112"..c[2]],tblIya[z]["\116"..c[2]],z,tblIya[z]["\115"..c[2]],tblIya[z].tq)iYaBtn:configure(4,256,125,256,256,tblIya[z]["\112"..c[3]],tblIya[z]["\116"..c[3]],z,tblIya[z]["\115"..c[3]],tblIya[z].tq)iYaBtn:configure(10,268,300,32,32,"","\120",z,"",99)iYaBtn:configure(11,-322,300,128,64,"",z..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[z].sh==4 then local N={"\050","\051";"\052","\053"}local c=Shuffle(N)for z=1,11,1 do if iYaBtn[z]~=nil then iYaBtn[z]:SetAlpha(1)end end for z=1,100,1 do if iYaBtnP[z]~=nil then iYaBtnP[z]:Hide()end end for z=1,100,1 do if iYaBtnPic[z]~=nil then iYaBtnPic[z]:Hide()end end for z=1,100,1 do if iYaBtnText[z]~=nil then iYaBtnText[z]:Hide()end end for z=1,100,1 do if iYaBtnVsp[z]~=nil then iYaBtnVsp[z]:Hide()end end iYaBtn:configure(2,-131,125,256,256,tblIya[z]["\112"..c[1]],tblIya[z]["\116"..c[1]],z,tblIya[z]["\115"..c[1]],tblIya[z].tq)iYaBtn:configure(3,127,125,256,256,tblIya[z]["\112"..c[2]],tblIya[z]["\116"..c[2]],z,tblIya[z]["\115"..c[2]],tblIya[z].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[z]["\112"..c[3]],tblIya[z]["\116"..c[3]],z,tblIya[z]["\115"..c[3]],tblIya[z].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[z]["\112"..c[4]],tblIya[z]["\116"..c[4]],z,tblIya[z]["\115"..c[4]],tblIya[z].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[z]["\116\116"..c[1]],z,tblIya[z].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[z]["\116\116"..c[2]],z,tblIya[z].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[z]["\116\116"..c[3]],z,tblIya[z].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[z]["\116\116"..c[4]],z,tblIya[z].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",z,"",99)iYaBtn:configure(11,-322,300,128,64,"",z..("\047"..50-testQ.iya_ser),"","",99)local e={"\049";"\050","\051";"\052"}local r=Shuffle(e)iYaBtnP:configure(1,tblIya[z].x1,tblIya[z].y1,tblIya[z].rx1,tblIya[z].ry1,"",tblIya[z]["\116\112"..r[1]],z,tblIya[z].s10,tblIya[z].tq)iYaBtnP:configure(2,tblIya[z].x2,tblIya[z].y2,tblIya[z].rx2,tblIya[z].ry2,"",tblIya[z]["\116\112"..r[2]],z,tblIya[z].s10,tblIya[z].tq)iYaBtnP:configure(3,tblIya[z].x3,tblIya[z].y3,tblIya[z].rx3,tblIya[z].ry3,"",tblIya[z]["\116\112"..r[3]],z,tblIya[z].s10,tblIya[z].tq)iYaBtnP:configure(4,tblIya[z].x4,tblIya[z].y4,tblIya[z].rx4,tblIya[z].ry4,"",tblIya[z]["\116\112"..r[4]],z,tblIya[z].s10,tblIya[z].tq)iYaBtn[2]:Disable()iYaBtn[3]:Disable()iYaBtn[4]:Disable()iYaBtn[5]:Disable()iYaBtn[6]:Disable()iYaBtn[7]:Disable()iYaBtn[8]:Disable()iYaBtn[9]:Disable()end if tblIya[z].sh==5 then testQ.iya_temp=time()local N={"\049","\050";"\051","\052";"\053","\054"}local c=Shuffle(N)iYaBtn:configure(1,0,300,515,32,tblIya[z].p11,tblIya[z].t11,z,tblIya[z].s1,99)iYaBtnPic:configure(1,-259,125,256,256,tblIya[z]["\112"..c[1]],tblIya[z]["\116"..c[1]],z,tblIya[z]["\116\115"..c[1]],tblIya[z].tq)iYaBtnPic:configure(2,257,125,256,256,tblIya[z]["\112"..c[2]],tblIya[z]["\116"..c[2]],z,tblIya[z]["\116\115"..c[2]],tblIya[z].tq)iYaBtnPic:configure(3,-259,-165,256,256,tblIya[z]["\112"..c[3]],tblIya[z]["\116"..c[3]],z,tblIya[z]["\116\115"..c[3]],tblIya[z].tq)iYaBtnPic:configure(4,257,-165,256,256,tblIya[z]["\112"..c[4]],tblIya[z]["\116"..c[4]],z,tblIya[z]["\116\115"..c[4]],tblIya[z].tq)iYaBtnPic:configure(5,0,125,256,256,tblIya[z]["\112"..c[5]],tblIya[z]["\116"..c[5]],z,tblIya[z]["\116\115"..c[5]],tblIya[z].tq)iYaBtnPic:configure(6,0,-165,256,256,tblIya[z]["\112"..c[6]],tblIya[z]["\116"..c[6]],z,tblIya[z]["\116\115"..c[6]],tblIya[z].tq)iYaBtnText:configure(1,-259,268,256,32,"",tblIya[z].tt1,z,tblIya[z].tts1,99)iYaBtnText:configure(2,255,268,256,32,"",tblIya[z].tt2,z,tblIya[z].tts2,99)iYaBtnText:configure(3,-259,-22,256,32,"",tblIya[z].tt3,z,tblIya[z].tts3,99)iYaBtnText:configure(4,255,-22,256,32,"",tblIya[z].tt4,z,tblIya[z].tts4,99)iYaBtnText:configure(5,0,268,256,32,"",tblIya[z].tt5,z,tblIya[z].tts5,99)iYaBtnText:configure(6,0,-22,256,32,"",tblIya[z].tt6,z,tblIya[z].tts6,99)iYaBtn:configure(10,268,300,32,32,"","\120",z,"",99)iYaBtn:configure(11,-322,316,128,64,"",z..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[z].sh==6 then local N={"\050","\051","\052","\053"}local c=Shuffle(N)for z=1,11,1 do if iYaBtn[z]~=nil then iYaBtn[z]:SetAlpha(1)end end for z=1,100,1 do if iYaBtnP[z]~=nil then iYaBtnP[z]:Hide()end end for z=1,100,1 do if iYaBtnPic[z]~=nil then iYaBtnPic[z]:Hide()end end for z=1,100,1 do if iYaBtnText[z]~=nil then iYaBtnText[z]:Hide()end end for z=1,100,1 do if iYaBtnVsp[z]~=nil then iYaBtnVsp[z]:Hide()end end iYaBtn:configure(2,-131,125,256,256,tblIya[z]["\112"..c[1]],tblIya[z]["\116"..c[1]],z,tblIya[z]["\115"..c[1]],tblIya[z].tq)iYaBtn:configure(3,127,125,256,256,tblIya[z]["\112"..c[2]],tblIya[z]["\116"..c[2]],z,tblIya[z]["\115"..c[2]],tblIya[z].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[z]["\112"..c[3]],tblIya[z]["\116"..c[3]],z,tblIya[z]["\115"..c[3]],tblIya[z].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[z]["\112"..c[4]],tblIya[z]["\116"..c[4]],z,tblIya[z]["\115"..c[4]],tblIya[z].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[z]["\116\116"..c[1]],z,tblIya[z].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[z]["\116\116"..c[2]],z,tblIya[z].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[z]["\116\116"..c[3]],z,tblIya[z].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[z]["\116\116"..c[4]],z,tblIya[z].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",z,"",99)iYaBtn:configure(11,-322,300,128,64,"",z..("\047"..50-testQ.iya_ser),"","",99)local e={"\049","\050";"\051","\052"}local r=Shuffle(e)iYaBtnP:configure(1,-11,148,80,32,"",tblIya[z]["\116\112"..r[1]],z,tblIya[z].s10,tblIya[z].tq)iYaBtnP:configure(2,-11,116,80,32,"",tblIya[z]["\116\112"..r[2]],z,tblIya[z].s10,tblIya[z].tq)iYaBtnP:configure(3,-11,84,80,32,"",tblIya[z]["\116\112"..r[3]],z,tblIya[z].s10,tblIya[z].tq)iYaBtnP:configure(4,-11,52,80,32,"",tblIya[z]["\116\112"..r[4]],z,tblIya[z].s10,tblIya[z].tq)iYaBtn[2]:Disable()iYaBtn[3]:Disable()iYaBtn[4]:Disable()iYaBtn[5]:Disable()iYaBtn[6]:Disable()iYaBtn[7]:Disable()iYaBtn[8]:Disable()iYaBtn[9]:Disable()end end function sCh()SendChatMessage("\208\167\209\130\208\190 \208\178\209\139 \208\178\208\184\208\180\208\184\209\130\208\181 \209\130\209\131\209\130\058 \"\195\145\195\177\"\063","\071\085\073\076\068",nil,1)end function pokazTextur(z,N,c,e)if e=="\115\104\111\119"then prok_set1={Rx=128,Ry=256;x=-200,y=0}prok_set2={Rx=128,Ry=256;x=200,y=0}prok_set3={Rx=256;Ry=128;x=0;y=200}prok_set4={Rx=0,Ry=0,x=0,y=0}local e=GetScreenWidth()local r=GetScreenHeight()if c==4 then unIcon(tonumber(z),e,r,0+prok_set4.x,0+prok_set4.y,N,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if c==1 then unIcon(tonumber(z),prok_set1.Rx,prok_set1.Ry,0+prok_set1.x,0+prok_set1.y,N,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if c==2 then unIcon(tonumber(z),prok_set2.Rx,prok_set2.Ry,0+prok_set2.x,0+prok_set2.y,N,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if c==3 then unIcon(tonumber(z),prok_set3.Rx,prok_set3.Ry,0+prok_set3.x,0+prok_set3.y,N,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end else unIcon(tonumber(tonumber(z),x,y,0,0,0,"\104\105\100\101",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082"))end end function cepochkiQuestov(z,N,c,e,r,u,C)if z=="\102\101\110\105\120"then if t_cQ[z][testQ[C].puteshestvie].sh=="\208\181\208\180\208\176"then if testQ[C].edaQuest==nil then testQ[C].edaQuest=1 end local N=sqrt((r-t_cQ[z][testQ[C].puteshestvie].x)^2+(u-t_cQ[z][testQ[C].puteshestvie].y)^2)if mapTables.lokRasstoyanie[c]~=nil then if mapTables.lokRasstoyanie[c][e]~=nil then if N<mapTables.lokRasstoyanie[c][e]*t_cQ[z][testQ[C].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[z][testQ[C].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end if t_cQ[z][testQ[C].puteshestvie].sh=="\209\141\208\188\208\190\209\134\208\184\209\143"then if testQ[C]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]==nil then obnulenieEmocij(C)testQ[C]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]=1 end if testQ[C]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]~=nil then if proverkaEmocij(C)==nil then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[C].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[C].puteshestvie=t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"]else local N=sqrt((r-t_cQ[z][testQ[C].puteshestvie].x)^2+(u-t_cQ[z][testQ[C].puteshestvie].y)^2)if mapTables.lokRasstoyanie[c]~=nil then if mapTables.lokRasstoyanie[c][e]~=nil then if N<mapTables.lokRasstoyanie[c][e]*t_cQ[z][testQ[C].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[z][testQ[C].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end end end if t_cQ[z][testQ[C].puteshestvie].sh=="\208\186\208\187\208\184\208\186"then if ns_FLAGnaClick~=nil then if testQ.fx==nil then testQ.fx,testQ.fy=GetPlayerMapPosition("\112\108\097\121\101\114")end local N=sqrt((r-testQ.fx)^2+(u-testQ.fy)^2)if N<mapTables.lokRasstoyanie[c][e]*t_cQ[z][testQ[C].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[z][testQ[C].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[C].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[C].puteshestvie=t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"]testQ.fy=nil testQ.fx=nil ns_FLAGnaClick=nil end end end end if t_cQ[z][testQ[C].puteshestvie].sh=="\208\180\208\190\208\177\209\139\209\135\208\176 \208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"then if tonumber(t_cQ[z][testQ[C].puteshestvie].kont)==tonumber(c)and tonumber(t_cQ[z][testQ[C].puteshestvie].lok)==tonumber(e)then local N=sqrt((r-t_cQ[z][testQ[C].puteshestvie].x)^2+(u-t_cQ[z][testQ[C].puteshestvie].y)^2)if N<mapTables.lokRasstoyanie[c][e]*t_cQ[z][testQ[C].puteshestvie].dalnost then showFenix("\115\104\111\119")local N rtnTextF(t_cQ[z][testQ[C].puteshestvie].text,1,"\115\104\111\119")for c=1,t_cQ[z][testQ[C].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\154\208\190\208\187\208\184\209\135\208\181\209\129\209\130\208\178\208\190"],1 do if proverkaNaPredmety(t_cQ[z][testQ[C].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130"..c])then if proverkaNaKolvoPredmetov(t_cQ[z][testQ[C].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130"..c])>=t_cQ[z][testQ[C].puteshestvie]["\208\178\209\129\208\181\208\179\208\190\208\159\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"..c]then N=1 else N=nil break end else N=nil break end end if N~=nil then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[C].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[C].puteshestvie=t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end if z~="\102\101\110\105\120"then if t_cQ[z][testQ[C].puteshestvie].sh=="\208\191\208\190\208\180\208\184 \209\130\209\131\208\180\208\176"then if tonumber(t_cQ[z][testQ[C].puteshestvie].kont)==tonumber(c)and tonumber(t_cQ[z][testQ[C].puteshestvie].lok)==tonumber(e)then local N=sqrt((r-t_cQ[z][testQ[C].puteshestvie].x)^2+(u-t_cQ[z][testQ[C].puteshestvie].y)^2)if N<mapTables.lokRasstoyanie[c][e]*t_cQ[z][testQ[C].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[z][testQ[C].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[C].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[C].puteshestvie=t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"]end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[C].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[C].puteshestvie=t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"]end end end if t_cQ[z][testQ[C].puteshestvie].sh=="\208\178\208\183\208\187\208\190\208\188 \209\129\208\181\208\185\209\132\208\176"then if tonumber(t_cQ[z][testQ[C].puteshestvie].kont)==tonumber(c)and tonumber(t_cQ[z][testQ[C].puteshestvie].lok)==tonumber(e)then local N=sqrt((r-t_cQ[z][testQ[C].puteshestvie].x)^2+(u-t_cQ[z][testQ[C].puteshestvie].y)^2)if N<mapTables.lokRasstoyanie[c][e]*t_cQ[z][testQ[C].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[z][testQ[C].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[C].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)puteshestvieGrafikaHide()sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[C].puteshestvie=t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end if t_cQ[z][testQ[C].puteshestvie].sh=="\208\180\208\190\208\177\209\139\209\135\208\176 \208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"then if tonumber(t_cQ[z][testQ[C].puteshestvie].kont)==tonumber(c)and tonumber(t_cQ[z][testQ[C].puteshestvie].lok)==tonumber(e)then local N=sqrt((r-t_cQ[z][testQ[C].puteshestvie].x)^2+(u-t_cQ[z][testQ[C].puteshestvie].y)^2)if N<mapTables.lokRasstoyanie[c][e]*t_cQ[z][testQ[C].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[z][testQ[C].puteshestvie].text,1,"\115\104\111\119")if proverkaNaPredmety(t_cQ[z][testQ[C].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\049"])and(proverkaNaPredmety(t_cQ[z][testQ[C].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\050"])and proverkaNaPredmety(t_cQ[z][testQ[C].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\051"]))then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[C].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[C].puteshestvie=t_cQ[z][testQ[C].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end if t_cQ[z][testQ[C].puteshestvie].sh=="\208\178\208\190\208\191\209\128\208\190\209\129"then if tonumber(t_cQ[z][testQ[C].puteshestvie].kont)==tonumber(c)and tonumber(t_cQ[z][testQ[C].puteshestvie].lok)==tonumber(e)then local N=sqrt((r-t_cQ[z][testQ[C].puteshestvie].x)^2+(u-t_cQ[z][testQ[C].puteshestvie].y)^2)if N<mapTables.lokRasstoyanie[c][e]*t_cQ[z][testQ[C].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[z][testQ[C].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end if t_cQ[z][testQ[C].puteshestvie].sh=="\208\191\208\190\208\177\208\181\208\180\208\176"then if tonumber(t_cQ[z][testQ[C].puteshestvie].kont)==tonumber(c)and tonumber(t_cQ[z][testQ[C].puteshestvie].lok)==tonumber(e)then local N=sqrt((r-t_cQ[z][testQ[C].puteshestvie].x)^2+(u-t_cQ[z][testQ[C].puteshestvie].y)^2)if N<mapTables.lokRasstoyanie[c][e]*t_cQ[z][testQ[C].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[z][testQ[C].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\159\208\190\208\177\208\181\208\180\208\176\033\033\033 \208\146\208\190\208\182\208\180\209\140\044 \209\143 \208\189\208\181\209\129\209\131 \209\130\208\181\208\177\208\181 \208\178\209\129\208\181 \209\129\208\190\208\180\208\181\209\128\208\182\208\184\208\188\208\190\208\181 \209\129\208\181\208\185\209\132\208\190\208\178\033\033\033","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")puteshestvieHide()end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\159\208\190\208\177\208\181\208\180\208\176\033\033\033 \208\146\208\190\208\182\208\180\209\140\044 \209\143 \208\189\208\181\209\129\209\131 \209\130\208\181\208\177\208\181 \208\178\209\129\208\181 \209\129\208\190\208\180\208\181\209\128\208\182\208\184\208\188\208\190\208\181 \209\129\208\181\208\185\209\132\208\190\208\178\033\033\033","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")puteshestvieHide()end end end end end function puteshestvieHide()local z=GetUnitName("\112\108\097\121\101\114")testQ[z].puteshestvie=nil testQ[z][testQ[z].puteshestvieTabella]=nil quesT("\104\105\100\101")rtnTextF("",1,"\104\105\100\101")if btn[980]~=nil then btn[980]:Hide()btn[979]:Hide()btn[978]:Hide()end puteshestvieGrafikaHide()end function puteshestvieGrafikaHide()if fenix[1]~=nil then showFenix("\104\105\100\101")end if iconQ[1]~=nil then quesT("\104\105\100\101")end rtnTextF("",1,"\104\105\100\101")end function ns_addXY()local z,N=GetPlayerMapPosition("\112\108\097\121\101\114")local c=tostring(GetCurrentMapContinent())local e=tostring(GetCurrentMapZone())print("\091\'\120\'\093 \061 "..(z.."\044"))print("\091\'\121\'\093 \061 "..(N.."\044"))print("\091\'\107\111\110\116\'\093 \061 "..(c.."\044"))print("\091\'\108\111\107\'\093 \061 "..(e.."\044"))end function proverkaNaPredmety(z)for N=0,4,1 do for c=1,GetContainerNumSlots(N),1 do local e=GetContainerItemLink(N,c)if e and e:find(z)then return true end end end end function proverkaNaKolvoPredmetov(z)local N=0 for c=0,4,1 do for e=1,GetContainerNumSlots(c),1 do local r=GetContainerItemLink(c,e)if r and r:find(z)then local z,r=GetContainerItemInfo(c,e)N=N+r end end end return N end function sohranenieProgressa(z)local N=GetUnitName("\112\108\097\121\101\114")if z=="\208\190\208\177\209\139\209\135\208\186\208\176"then if testQ[N][testQ[N]]==nil then testQ[N][testQ[N].puteshestvieTabella]=0 end if tonumber(testQ[N][testQ[N].puteshestvieTabella])<tonumber(t_cQ[testQ[N].puteshestvieTabella][testQ[N].puteshestvie]["\208\186\209\131\208\180\208\176"])then testQ[N][testQ[N].puteshestvieTabella]=t_cQ[testQ[N].puteshestvieTabella][testQ[N].puteshestvie]["\208\186\209\131\208\180\208\176"]end end if z=="\208\178\208\183\208\187\208\190\208\188"then if testQ[N][testQ[N]]==nil then testQ[N][testQ[N].puteshestvieTabella]=0 end if tonumber(testQ[N][testQ[N].puteshestvieTabella])<tonumber(t_cQ[testQ[N].puteshestvieTabella][testQ[N].puteshestvie]["\208\186\209\131\208\180\208\176 \208\191\209\128\208\184 \208\178\208\183\208\187\208\190\208\188\208\181"])then testQ[N][testQ[N].puteshestvieTabella]=t_cQ[testQ[N].puteshestvieTabella][testQ[N].puteshestvie]["\208\186\209\131\208\180\208\176 \208\191\209\128\208\184 \208\178\208\183\208\187\208\190\208\188\208\181"]end end end function sohranenieTablicRamerovLokaciy()SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\055","\048\046\048\048\048\052\057\057","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\048","\048\046\048\048\051\054\055\054","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \052","\048\046\048\048\048\054\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \050\056","\048\046\048\048\050\049","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \057\057 \049","\048\046\048\048\051","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\056","\048\046\048\048\048\056\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \051 \050","\048\046\048\048\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \049\052","\048\046\048\048\050","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\053","\048\046\048\048\048\052\057\057","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \050\053","\048\046\048\048\048\052\057\057","\103\117\105\108\100")end function proverkaEmocij(z)local N if testQ[z].HumanMan==nil then N=1 end if testQ[z].HumanWoman==nil then N=1 end if testQ[z].DworfMan==nil then N=1 end if testQ[z].DworfWoman==nil then N=1 end if testQ[z].NEMan==nil then N=1 end if testQ[z].NEWoman==nil then N=1 end if testQ[z].GnomMan==nil then N=1 end if testQ[z].GnomWoman==nil then N=1 end if testQ[z].DrenayMan==nil then N=1 end if testQ[z].DrenayWoman==nil then N=1 end if testQ[z].OrkMan==nil then N=1 end if testQ[z].OrkWoman==nil then N=1 end if testQ[z].UndeadMan==nil then N=1 end if testQ[z].UndeaWoman==nil then N=1 end if testQ[z].TaurenMan==nil then N=1 end if testQ[z].TaurenWoman==nil then N=1 end if testQ[z].TrollMan==nil then N=1 end if testQ[z].TrollWoman==nil then N=1 end if testQ[z].ElfMan==nil then N=1 end if testQ[z].ElfWoman==nil then N=1 end return N end function testShip(z)local N if testQ[z].HumanMan==nil then N="\208\167\208\181\208\187\208\190\208\178\208\181\208\186"end if testQ[z].HumanWoman==nil then N="\208\167\208\181\208\187\208\190\208\178\208\181\208\186\208\176"end if testQ[z].DworfMan==nil then N="\208\148\208\178\208\190\209\128\209\132"end if testQ[z].DworfWoman==nil then N="\208\148\208\178\208\190\209\128\209\132\208\186\208\176"end if testQ[z].NEMan==nil then N="\208\157\208\190\209\135\208\189\208\190\209\141\208\187\209\140\209\132"end if testQ[z].NEWoman==nil then N="\208\157\208\190\209\135\208\189\208\190\209\141\208\187\209\140\209\132\208\186\208\176"end if testQ[z].GnomMan==nil then N="\208\147\208\189\208\190\208\188"end if testQ[z].GnomWoman==nil then N="\208\147\208\189\208\190\208\188\208\176"end if testQ[z].DrenayMan==nil then N="\208\148\209\128\208\181\208\189\208\181\208\185"end if testQ[z].DrenayWoman==nil then N="\208\148\209\128\208\181\208\189\208\181\208\185\208\186\208\176"end if testQ[z].OrkMan==nil then N="\208\158\209\128\208\186"end if testQ[z].OrkWoman==nil then N="\208\158\209\128\209\135\208\186\208\176"end if testQ[z].UndeadMan==nil then N="\208\144\208\189\208\180\208\181\208\180"end if testQ[z].UndeaWoman==nil then N="\208\149\209\137\208\181 \051\048 \208\188\208\184\208\189\209\131\209\130 \208\182\208\181\208\189\209\137\208\184\208\189\208\176"end if testQ[z].TaurenMan==nil then N="\208\162\208\176\209\131\209\128\208\181\208\189"end if testQ[z].TaurenWoman==nil then N="\208\162\208\181\208\187\208\190\209\135\208\186\208\176"end if testQ[z].TrollMan==nil then N="\208\162\209\128\208\190\208\187\208\187\209\140"end if testQ[z].TrollWoman==nil then N="\208\162\209\128\208\190\208\187\208\187\209\140\208\186\208\176"end if testQ[z].ElfMan==nil then N="\208\173\208\187\209\140\209\132"end if testQ[z].ElfWoman==nil then N="\208\173\208\187\209\140\209\132\208\176"end return N end function obnulenieEmocij(z)testQ[z].HumanMan=nil testQ[z].HumanWoman=nil testQ[z].DworfMan=nil testQ[z].DworfWoman=nil testQ[z].NEMan=nil testQ[z].NEWoman=nil testQ[z].GnomMan=nil testQ[z].GnomWoman=nil testQ[z].DrenayMan=nil testQ[z].DrenayWoman=nil testQ[z].OrkMan=nil testQ[z].OrkWoman=nil testQ[z].UndeadMan=nil testQ[z].UndeaWoman=nil testQ[z].TaurenMan=nil testQ[z].TaurenWoman=nil testQ[z].TrollMan=nil testQ[z].TrollWoman=nil testQ[z].ElfMan=nil testQ[z].ElfWoman=nil end function obnulenieEmocij1(z)testQ[z].HumanMan=1 testQ[z].HumanWoman=1 testQ[z].DworfMan=1 testQ[z].DworfWoman=1 testQ[z].NEMan=1 testQ[z].NEWoman=1 testQ[z].GnomMan=1 testQ[z].GnomWoman=1 testQ[z].DrenayMan=1 testQ[z].DrenayWoman=1 testQ[z].OrkMan=1 testQ[z].OrkWoman=1 testQ[z].UndeadMan=1 testQ[z].UndeaWoman=1 testQ[z].TaurenMan=1 testQ[z].TaurenWoman=1 testQ[z].TrollMan=1 testQ[z].TrollWoman=1 testQ[z].ElfMan=1 testQ[z].ElfWoman=1 end function nsGP()local z={}local N=GetNumRaidMembers()for N=1,N,1 do local c for e=1,GetNumGuildMembers(true),1 do local r,u,C,P,s,h,d,v,y,g,A,o,n,K,B,R,G=GetGuildRosterInfo(e)if r==UnitName("\114\097\105\100"..N)then z[N]={}local e=mysplit(v)z[N].nome=r z[N].public=d z[N].rank=u if e[3]~=nil then z[N].znach=tonumber(e[3])else z[N].znach=tonumber("\048\048\048\048")end c=1 end end if c==nil then z[N]={}if UnitName("\114\097\105\100"..N)~=nil then z[N].nome=UnitName("\114\097\105\100"..N)z[N].znach=tonumber("\048\048\048\048")z[N].public="\208\157\208\149 \208\146 \208\147\208\152\208\155\208\172\208\148\208\152\208\152"else z[N].nome="\208\191\209\131\209\129\209\130\208\190"z[N].znach=tonumber("\048\048\048\048")end end end table.sort(z,function(z,N)return z.znach<N.znach end)local c={}local e=tostring(1)for z,N in ipairs(z)do c[e]={}c[e].nome=N.nome c[e].znach=N.znach c[e].public=N.public c[e].rank=N.rank e=tostring(tonumber(e)+1)end return c end function gpEnTg()FriendsFrame:Show()GuildFrame:Show()testQ.gpEnTg={}for z=1,GetNumGuildMembers(true),1 do local N,c,e,r,u,C,P,s,h,d,v,y,g,A,o,n,K=GetGuildRosterInfo(z)local B=mysplit(s)if B[3]~=nil then testQ.gpEnTg[N]=tonumber(B[3])end end FriendsFrame:Hide()GuildFrame:Hide()end function addMioFld(z,N,c,e)if mioFld1~=nil then if mioFld1[z]~=nil then if mioFld1[z][N]~=nil then mioFld1[z][N][tostring(c)]=tostring(e)end end end end function readMioFld(z,N,c)if mioFld1~=nil then if mioFld1[z]~=nil then if mioFld1[z][N]~=nil then return mioFld1[z][N][tostring(c)]end end end end nBtn={}function nBtn.new(U,z,N,c,e,r,u,C,P,s,h,d,v,y,g,A,o,n,K,B,R,G)local a={}local q local F local D local H=B a.message=v function a.configure(u)if G==nil then u[z]=u[z]or CreateFrame("\066\117\116\116\111\110",nil,c,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")else u[z]=u[z]or CreateFrame("\066\117\116\116\111\110",nil,c,"")u[z]:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092"..(G.."\046\116\103\097"))if R~=0 then u[z]:SetHighlightTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092"..(G.."\046\116\103\097"))end q={}a:SetText(v)end u[z]:SetPoint(y,c,g,e,r)u[z]:SetSize(h,d)u[z]:SetText(v)u[z]:SetFrameStrata(n)if N~=nil then N(a)end end function a.reMove(r,N,e)r[z]:SetPoint(y,c,g,N,e)end function a.reSize(e,N,c)e[z]:SetSize(N,c)end function a.getID(N)print(z)end function a.Hide(N)N[z]:Hide()end function a.Show(N)N[z]:Show()end function a.textSize(c,N)q[z]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",N,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end function a.textMove(e,N,c)q[z]:SetPoint("\066\079\084\084\079\077\076\069\070\084",a[z],"\066\079\084\084\079\077\076\069\070\084",N,c)end function a.SetText(c,N)if G~=nil then q[z]=q[z]or a[z]:CreateFontString(nil,"\079\086\069\082\076\065\089")q[z]:SetSize(h,d)q[z]:SetPoint("\084\079\080\076\069\070\084")q[z]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",s,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")q[z]:SetText("\124\099\102\102"..(K..(N.."\124\114")))q[z]:Show()else a[z]:SetText(N)end end function a.getSaveNome(z)return H end function a.setOnUpdate(e,N,c)N(e[z],c)end function a.setOnEnter(c,N)N(c[z],v)end function a.setOnClick(c,N)N(c[z],v)end function a.setClick(r,N,c,e)r[z]:RegisterForClicks("\082\105\103\104\116\066\117\116\116\111\110\068\111\119\110","\076\101\102\116\066\117\116\116\111\110\068\111\119\110")r[z]:SetScript("\079\110\067\108\105\099\107",function(z,r,u)if N~=nil then if arg1=="\076\101\102\116\066\117\116\116\111\110"then N(z,r,H,e)end end if c~=nil then if arg1=="\082\105\103\104\116\066\117\116\116\111\110"then c(z,r,H,e)end end end)end function a.gesture(e,N,c)F=CreateFrame("\070\082\065\077\069")D=0 F:SetScript("\079\110\085\112\100\097\116\101",function(e,r)D=D+r if D>.1 then local e,r=WorldFrame:GetSize()local u,C=GetCursorPosition()if u<=20 and C>=r-20 then N(a[z])end if u>=e-20 and C>=r-20 then c(a[z])end end end)end function a.killall(N)F:SetScript("\079\110\085\112\100\097\116\101",nil)a[z]:SetScript("\079\110\067\108\105\099\107",nil)end setmetatable(a,U)U.__index=U return a end function gpBtn1_enter(z,N)z:SetScript("\079\110\069\110\116\101\114",function(z,c,e)GameTooltip:SetOwner(z,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\155\208\154\208\156\058 \208\189\208\176\209\135\208\184\209\129\208\187\208\184\209\130\209\140 "..(" \124\099\102\102\070\070\056\067\048\048"..(N.." \124\099\102\102\057\057\102\102\057\057\208\147\208\159")))GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\159\208\154\208\156\058 \209\129\208\189\209\143\209\130\209\140 "..(" \124\099\102\102\070\070\056\067\048\048"..(N.." \124\099\102\102\057\057\102\102\057\057\208\147\208\159")))GameTooltip:Show()gpBtn1:Show()gpBtn2:Show()gpBtn3:Show()gpBtn4:Show()gpBtn5:Show()gpBtn6:Show()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",0,-20)ShowCheckboxWindow()end)z:SetScript("\079\110\076\101\097\118\101",function(z,N,c)GameTooltip:Hide()end)end function gpBtn1_click(z,N)z:RegisterForClicks("\082\105\103\104\116\066\117\116\116\111\110\068\111\119\110","\076\101\102\116\066\117\116\116\111\110\068\111\119\110")z:SetScript("\079\110\067\108\105\099\107",function(z,c)if testQ.gpRez==nil or#testQ.gpRez==0 then if arg1=="\076\101\102\116\066\117\116\116\111\110"then SendChatMessage("\208\147\208\159 "..N,"\071\085\073\076\068",nil,1)else SendChatMessage("\208\147\208\159 -"..N,"\071\085\073\076\068",nil,1)end gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)HideCheckboxWindow()gplabels={}testQ.gpRez=nil else if arg1=="\076\101\102\116\066\117\116\116\111\110"then sendGPnik(N)HideCheckboxWindow()gplabels={}testQ.gpRez=nil gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)else sendGPnik(-N)HideCheckboxWindow()gplabels={}testQ.gpRez=nil gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)end end end)end function change_spek(z,N,c,e)SendChatMessage("\033\208\183\208\176\208\188\208\181\209\130\208\186\208\176 "..e.message,"\071\085\073\076\068",nil,1)spek1:Hide()spek2:Hide()spek3:Hide()end function duelOnUpdate(z,N)z:SetScript("\079\110\069\110\116\101\114",function(z,c)GameTooltip:SetOwner(z,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\159\209\128\208\184\208\189\209\143\209\130\209\140 \208\180\209\131\209\141\208\187\209\140 \208\190\209\130 \208\184\208\179\209\128\208\190\208\186\208\176\058 \124\099\102\102\057\057\102\102\057\057"..N)GameTooltip:Show()end)z:SetScript("\079\110\076\101\097\118\101",function(z,N)GameTooltip:Hide()end)end function btnHide(z)z:Hide()end function btnShow(z)z:Show()end function gpBtnClick(z)if IsRaidLeader()then if testQ.raidAUKPobeda~=nil then SendChatMessage(testQ.raidAUKPobeda..(" \208\191\208\190\208\177\208\181\208\182\208\180\208\176\208\181\209\130\044 \208\191\208\190\209\129\209\130\208\176\208\178\208\184\208\178 "..(testQ.raidAUKPobeda_gp.." \208\147\208\159")),"\082\065\073\068",nil,1)end SendAddonMessage("\110\115\065\085\075\101\110\100 ","\049\048","\082\065\073\068")end end function ns_duelTrue(z,N,c)SendAddonMessage("\110\115\095\100\117\101\108\095\111\116\118\101\116",c,"\103\117\105\108\100")duelBtn[c.."\049"]:Hide()duelBtn[c.."\050"]:Hide()end function ns_duelFalse(z,N,c)SendChatMessage("\208\162\208\176\208\186 \209\143 \208\182 \209\130\209\128\209\131\209\129 \208\184 \208\191\208\190\208\180\208\187\208\181\209\134\046 \208\158\209\130\208\186\208\176\208\183\209\139\208\178\208\176\209\142\209\129\209\140\046","\071\085\073\076\068",nil,1)duelBtn[c.."\049"]:Hide()duelBtn[c.."\050"]:Hide()SendAddonMessage("\110\115\095\100\117\101\108\095\111\116\107\097\122",c,"\103\117\105\108\100")end function nsAUK(z,N,c)if testQ.raidAUK~=nil then N=tonumber(N)if N~=nil then local e=tablelength(testQ.raidAUK)local r local u local C=tablelength(testQ.rez)local P=""local s=nil for N=1,C,1 do if testQ.rez[tostring(N)].nome==z then u=testQ.rez[tostring(N)].public r=tonumber(testQ.rez[tostring(N)].znach)break end end if e>=1 then for c=1,e,1 do if testQ.raidAUK[c].nome==z then if tonumber(N)<=r then testQ.raidAUK[c].auk=N end s=1 break end end if s==nil then testQ.raidAUK[e+1]={nome=z;auk=0;public=u;rezultat=r}if testQ.raidAUK[e+1].auk+tonumber(N)<=r then testQ.raidAUK[e+1].auk=testQ.raidAUK[e+1].auk+tonumber(N)end end else testQ.raidAUK[1]={nome=z;auk=0,public=u;rezultat=r}if testQ.raidAUK[1].auk+tonumber(N)<=r then testQ.raidAUK[1].auk=testQ.raidAUK[1].auk+tonumber(N)end end table.sort(testQ.raidAUK,function(z,N)return z.auk<N.auk end)local h={}local d=""for z,N in ipairs(testQ.raidAUK)do h[z]={nome=N.nome,znach=N.auk;public=N.public;rezultat=N.rezultat}d=d..("\124\099\070\070\054\052\057\053\069\068"..(N.nome..(" \124\099\102\102\070\070\056\067\048\048\040"..(N.public..("\124\099\102\102\056\048\056\048\056\048\124\124"..("\124\099\102\102\102\102\048\048\048\048"..(N.rezultat..("\124\099\102\102\070\070\056\067\048\048\041\058 \124\099\102\102\057\057\102\102\057\057"..(N.auk.."\n")))))))))if z==#testQ.raidAUK and IsRaidLeader()then SendChatMessage(N.nome..("\058 "..(N.auk.."\044 \208\186\209\130\208\190 \208\177\208\190\208\187\209\140\209\136\208\181\063")),"\082\065\073\068",nil,1)testQ.raidAUKPobeda=N.nome testQ.raidAUKPobeda_gp=N.auk end end print(c)TextWindow(c..("\n\n"..d))end end end function lastWords(z)local N=mysplit(z)N=N[1]local c=string.utf8len(N)local e=string.utf8len(z)local r=string.utf8sub(z,c+1,e)return r end function sendGPnik(z)local N=""for z=1,#testQ.gpRez,1 do N=N..(testQ.gpRez[z].." ")end SendAddonMessage("\110\115\071\080"..(" "..z),N,"\103\117\105\108\100")end function sendGP(z)local N=GetUnitName("\112\108\097\121\101\114")msg={}msg[2]=z for z=1,GetNumGuildMembers(true),1 do local c,e,r,u,C,P,s,h,d,v,y,g,A,o,n,K,B=GetGuildRosterInfo(z)if c==N then if e=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"or e=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"then if GetNumRaidMembers()<=10 then local z=""z=UnitName("\114\097\105\100\049").." "for N=2,GetNumRaidMembers(),1 do z=z..(UnitName("\114\097\105\100"..N).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),z,"\103\117\105\108\100")elseif GetNumRaidMembers()>10 and GetNumRaidMembers()<=20 then local z=""z=UnitName("\114\097\105\100\049").." "for N=2,10,1 do z=z..(UnitName("\114\097\105\100"..N).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),z,"\103\117\105\108\100")local N=""N=UnitName("\114\097\105\100\049\049").." "for z=12,GetNumRaidMembers(),1 do N=N..(UnitName("\114\097\105\100"..z).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),N,"\103\117\105\108\100")elseif GetNumRaidMembers()>20 then local z=""z=UnitName("\114\097\105\100\049").." "for N=2,10,1 do z=z..(UnitName("\114\097\105\100"..N).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),z,"\103\117\105\108\100")local N=""N=UnitName("\114\097\105\100\049\049").." "for z=12,20,1 do N=N..(UnitName("\114\097\105\100"..z).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),N,"\103\117\105\108\100")local c=""c=UnitName("\114\097\105\100\050\049").." "for z=22,GetNumRaidMembers(),1 do c=c..(UnitName("\114\097\105\100"..z).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),c,"\103\117\105\108\100")end end end end end function createParent()parentFrame=CreateFrame("\070\114\097\109\101",nil,UIParent)parentFrame:SetSize(200,200)parentFrame:SetPoint("\067\069\078\084\069\082")parentFrame:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100";edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114";tile=true;tileSize=32,edgeSize=32;insets={left=11;right=12;top=12;bottom=11}})parentFrame:SetBackdropColor(0,0,0,1)parentFrame:SetMovable(true)parentFrame:EnableMouse(true)parentFrame:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")parentFrame:SetScript("\079\110\068\114\097\103\083\116\097\114\116",function(z)z:StartMoving()end)parentFrame:SetScript("\079\110\068\114\097\103\083\116\111\112",function(z)z:StopMovingOrSizing()ClampFrameToScreen(z)SaveFramePosition(z)end)if testQ.pgChbX and testQ.pgChbY then parentFrame:ClearAllPoints()parentFrame:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",testQ.pgChbX,testQ.pgChbY)end HideCheckboxWindow()end function ClampFrameToScreen(z)local N=UIParent:GetWidth()local c=UIParent:GetHeight()local e=z:GetWidth()local r=z:GetHeight()local u,C=z:GetCenter()u=u or 0 C=C or 0 u=math.max(e/2,math.min(N-e/2,u))C=math.max(r/2,math.min(c-r/2,C))z:ClearAllPoints()z:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",u,C)end function SaveFramePosition(z)local N,c=z:GetCenter()testQ.pgChbX=N testQ.pgChbY=c end function CreateCheckboxes(z,N)local c={}local e=-10 local r=0 for N,u in ipairs(N)do local C=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,z,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")C:SetSize(24,24)C:SetPoint("\084\079\080\076\069\070\084",10,e)local P=C:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")P:SetPoint("\076\069\070\084",C,"\082\073\071\072\084",5,0)P:SetText(u)C.label=u C:SetScript("\079\110\067\108\105\099\107",function(z)if testQ.gpRez==nil then testQ.gpRez={}end local N=mysplit(z.label)if z:GetChecked()then table.insert(testQ.gpRez,N[1])else for z=1,#testQ.gpRez,1 do if testQ.gpRez[z]==N[1]then table.remove(testQ.gpRez,z)end end end end)c[N]=C local s=P:GetStringWidth()if s>r then r=s end e=e-30 end local u=r+50 local C=#N*30+20 z:SetSize(u,C)return c end function HideCheckboxWindow()if parentFrame then parentFrame:Hide()end end function ShowCheckboxWindow()if parentFrame then parentFrame:Show()end end function DestroyCheckboxWindow()if parentFrame then parentFrame:Hide()parentFrame:ClearAllPoints()parentFrame:SetParent(nil)parentFrame=nil end end gplabels={}textWindow=nil local function C(z)local N=UIParent:GetWidth()local c=UIParent:GetHeight()local e=z:GetWidth()local r=z:GetHeight()local u,C=z:GetCenter()u=u or 0 C=C or 0 u=math.max(e/2,math.min(N-e/2,u))C=math.max(r/2,math.min(c-r/2,C))z:ClearAllPoints()z:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",u,C)end function TextWindow(z)if textWindow then textWindow.textLabel:SetText(z)local N=textWindow.textLabel:GetStringWidth()local c=textWindow.textLabel:GetStringHeight()local e=20 textWindow:SetSize(N+e,c+e)C(textWindow)textWindow:Show()return end textWindow=CreateFrame("\070\114\097\109\101",nil,UIParent)textWindow:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100",edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114";tile=true,tileSize=32;edgeSize=32;insets={left=11,right=12,top=12;bottom=11}})textWindow:SetBackdropColor(0,0,0,1)textWindow:SetMovable(true)textWindow:EnableMouse(true)textWindow:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")textWindow:SetScript("\079\110\068\114\097\103\083\116\097\114\116",function(z)z:StartMoving()end)textWindow:SetScript("\079\110\068\114\097\103\083\116\111\112",function(z)z:StopMovingOrSizing()C(z)testQ.textWinX,testQ.textWinY=z:GetCenter()end)textWindow.textLabel=textWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")textWindow.textLabel:SetPoint("\067\069\078\084\069\082",textWindow,"\067\069\078\084\069\082",0,0)textWindow.textLabel:SetText(z)local N=textWindow.textLabel:GetStringWidth()local c=textWindow.textLabel:GetStringHeight()local e=20 textWindow:SetSize(N+e,c+e)if testQ.textWinX and testQ.textWinY then textWindow:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",testQ.textWinX,testQ.textWinY)else textWindow:SetPoint("\082\073\071\072\084",btn[973],"\076\069\070\084",0,0)end end function HideTextWindow()if textWindow then textWindow:Hide()end end function ShowTextWindow()if textWindow then textWindow:Show()end end function DestroyTextWindow()if textWindow then textWindow:Hide()textWindow:ClearAllPoints()textWindow:SetParent(nil)textWindow=nil end end function CreateListUI()local z=CreateFrame("\070\114\097\109\101","\084\101\115\116\076\105\115\116\070\114\097\109\101",UIParent)z:SetSize(400,500)z:SetPoint("\067\069\078\084\069\082")z:SetMovable(true)z:EnableMouse(true)z:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")z:SetScript("\079\110\068\114\097\103\083\116\097\114\116",z.StartMoving)z:SetScript("\079\110\068\114\097\103\083\116\111\112",z.StopMovingOrSizing)z:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100";edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114";tile=true;tileSize=32,edgeSize=32;insets={left=11,right=12,top=12;bottom=11}})local N=CreateFrame("\066\117\116\116\111\110",nil,z,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")N:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)N:SetScript("\079\110\067\108\105\099\107",function()z:Hide()end)local c=z:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")c:SetPoint("\084\079\080",0,-20)c:SetText("\208\163\208\191\209\128\208\176\208\178\208\187\208\181\208\189\208\184\208\181 \209\129\208\191\208\184\209\129\208\186\208\190\208\188")local e=CreateFrame("\069\100\105\116\066\111\120",nil,z,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")e:SetSize(200,30)e:SetPoint("\084\079\080",0,-60)e:SetAutoFocus(false)local r=CreateFrame("\066\117\116\116\111\110",nil,z,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")r:SetSize(100,30)r:SetPoint("\084\079\080\076\069\070\084",e,"\066\079\084\084\079\077\076\069\070\084",0,-20)r:SetText("\208\148\208\190\208\177\208\176\208\178\208\184\209\130\209\140")local u=CreateFrame("\066\117\116\116\111\110",nil,z,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")u:SetSize(100,30)u:SetPoint("\084\079\080\082\073\071\072\084",e,"\066\079\084\084\079\077\082\073\071\072\084",0,-20)u:SetText("\208\163\208\180\208\176\208\187\208\184\209\130\209\140")local C=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\084\101\115\116\083\099\114\111\108\108\070\114\097\109\101",z,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")C:SetSize(360,300)C:SetPoint("\084\079\080",r,"\066\079\084\084\079\077",0,-30)local P=_G.TestScrollFrameScrollBar P:SetPoint("\084\079\080\076\069\070\084",C,"\084\079\080\082\073\071\072\084",-12,-16)local s=CreateFrame("\070\114\097\109\101",nil,C)s:SetSize(335,0)C:SetScrollChild(s)testQ.fls=testQ.fls or{}s.entries={}local function h()local z=0 for z,N in ipairs(s.entries)do N:Hide()end for N,c in ipairs(testQ.fls)do if not s.entries[N]then local z=CreateFrame("\070\114\097\109\101",nil,s)z:SetSize(335,20)local c=z:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")c:SetPoint("\076\069\070\084",10,0)c:SetWidth(315)z.text=c s.entries[N]=z end local e=s.entries[N]e:SetPoint("\084\079\080\076\069\070\084",5,-z)e.text:SetText(c)e:Show()z=z+20 end s:SetHeight(math.max(z,1))C:UpdateScrollChildRect()P:SetValue(0)end r:SetScript("\079\110\067\108\105\099\107",function()local z=e:GetText()if z~=""then table.insert(testQ.fls,z)h()e:SetText("")end end)u:SetScript("\079\110\067\108\105\099\107",function()local z=e:GetText()for N=#testQ.fls,1,-1 do if testQ.fls[N]==z then table.remove(testQ.fls,N)end end h()e:SetText("")end)h()end function SendGuildOfficerMessageWithBonus(z)local N=mysplit(z)local c=UnitName("\112\108\097\121\101\114")if#N<3 then return end local e=N[2]local r=table.concat(N," ",3)for z=1,GetNumGuildMembers(true),1 do local N,u=GetGuildRosterInfo(z)if N==c then if u=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"or u=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"then SendChatMessage(r..(" \208\191\208\187\209\142\209\129 "..e),"\079\070\070\073\067\069\082",nil,1)SendAddonMessage("\110\115\071\080"..(" "..e),r,"\103\117\105\108\100")end SendAddonMessage("\110\115\071\080\108\111\103\082",e..(" "..r),"\103\117\105\108\100")break end end end GpDb_old={}GpDb_old.__index=GpDb_old function GpDb_old.new(N,z)local c={gp_data={};sort_column="\110\105\099\107",sort_ascending=true;visible_rows=20;selected_indices={},last_selected_index=nil,logData={}}setmetatable(c,N)c:_CreateWindow()c:_CreateRaidSelectionWindow()c:_CreateLogWindow()return c end function GpDb_old._CreateLogWindow(z)z.logWindow=CreateFrame("\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\087\105\110\100\111\119",z.window)z.logWindow:SetFrameStrata("\068\073\065\076\079\071")z.logWindow:SetSize(600,z.window:GetHeight())z.logWindow:SetPoint("\084\079\080\076\069\070\084",z.window,"\084\079\080\082\073\071\072\084",5,0)z.logWindow:SetMovable(false)z.logWindow:Hide()z.logWindow.background=z.logWindow:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")z.logWindow.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")z.logWindow.background:SetVertexColor(.1,.1,.1)z.logWindow.background:SetAlpha(.9)z.logWindow.background:SetAllPoints(true)z.logWindow.borderFrame=CreateFrame("\070\114\097\109\101",nil,z.logWindow)z.logWindow.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)z.logWindow.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)z.logWindow.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",edgeSize=16;insets={left=4;right=4,top=4;bottom=4}})z.logWindow.closeButton=CreateFrame("\066\117\116\116\111\110",nil,z.logWindow,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")z.logWindow.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)z.logWindow.closeButton:SetScript("\079\110\067\108\105\099\107",function()z.logWindow:Hide()end)z.logWindow.filters=CreateFrame("\070\114\097\109\101",nil,z.logWindow)z.logWindow.filters:SetPoint("\084\079\080\076\069\070\084",10,-5)z.logWindow.filters:SetPoint("\082\073\071\072\084",-10,0)z.logWindow.filters:SetHeight(30)z.logWindow.countFilter=CreateFrame("\069\100\105\116\066\111\120",nil,z.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")z.logWindow.countFilter:SetSize(60,20)z.logWindow.countFilter:SetPoint("\076\069\070\084",z.logWindow.filters,"\076\069\070\084")z.logWindow.countFilter:SetAutoFocus(false)z.logWindow.countFilter:SetText("\208\154\208\190\208\187-\208\178\208\190")z.logWindow.countFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()z.logWindow.countFilter:ClearFocus()end)z.logWindow.countFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()z.logWindow.countFilter:ClearFocus()z:UpdateLogDisplay()end)z.logWindow.timeFilter=CreateFrame("\069\100\105\116\066\111\120",nil,z.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")z.logWindow.timeFilter:SetSize(70,20)z.logWindow.timeFilter:SetPoint("\076\069\070\084",z.logWindow.countFilter,"\082\073\071\072\084",5,0)z.logWindow.timeFilter:SetAutoFocus(false)z.logWindow.timeFilter:SetText("\208\146\209\128\208\181\208\188\209\143")z.logWindow.timeFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()z.logWindow.timeFilter:ClearFocus()end)z.logWindow.timeFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()z.logWindow.timeFilter:ClearFocus()z:UpdateLogDisplay()end)z.logWindow.rlFilter=CreateFrame("\069\100\105\116\066\111\120",nil,z.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")z.logWindow.rlFilter:SetSize(70,20)z.logWindow.rlFilter:SetPoint("\076\069\070\084",z.logWindow.timeFilter,"\082\073\071\072\084",5,0)z.logWindow.rlFilter:SetAutoFocus(false)z.logWindow.rlFilter:SetText("\208\160\208\155")z.logWindow.rlFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()z.logWindow.rlFilter:ClearFocus()end)z.logWindow.rlFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()z.logWindow.rlFilter:ClearFocus()z:UpdateLogDisplay()end)z.logWindow.raidFilter=CreateFrame("\069\100\105\116\066\111\120",nil,z.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")z.logWindow.raidFilter:SetSize(100,20)z.logWindow.raidFilter:SetPoint("\076\069\070\084",z.logWindow.rlFilter,"\082\073\071\072\084",5,0)z.logWindow.raidFilter:SetAutoFocus(false)z.logWindow.raidFilter:SetText("\208\160\208\181\208\185\208\180")z.logWindow.raidFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()z.logWindow.raidFilter:ClearFocus()end)z.logWindow.raidFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()z.logWindow.raidFilter:ClearFocus()z:UpdateLogDisplay()end)z.logWindow.nameFilter=CreateFrame("\069\100\105\116\066\111\120",nil,z.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")z.logWindow.nameFilter:SetSize(100,20)z.logWindow.nameFilter:SetPoint("\076\069\070\084",z.logWindow.raidFilter,"\082\073\071\072\084",5,0)z.logWindow.nameFilter:SetAutoFocus(false)z.logWindow.nameFilter:SetText("\208\157\208\184\208\186")z.logWindow.nameFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()z.logWindow.nameFilter:ClearFocus()end)z.logWindow.nameFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()z.logWindow.nameFilter:ClearFocus()z:UpdateLogDisplay()end)z.logWindow.showButton=CreateFrame("\066\117\116\116\111\110",nil,z.logWindow.filters,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")z.logWindow.showButton:SetSize(80,22)z.logWindow.showButton:SetPoint("\076\069\070\084",z.logWindow.nameFilter,"\082\073\071\072\084",5,0)z.logWindow.showButton:SetText("\208\159\208\190\208\186\208\176\208\183\208\176\209\130\209\140")z.logWindow.showButton:SetScript("\079\110\067\108\105\099\107",function()local function N(z)if z:find("\037\115")then z=z:gsub("\037\115\043","\095")end return z end local c=N(z.logWindow.countFilter:GetText())local e=N(z.logWindow.timeFilter:GetText())local r=N(z.logWindow.rlFilter:GetText())local u=N(z.logWindow.raidFilter:GetText())local C=N(z.logWindow.nameFilter:GetText())gpDb_old:ClearLog()SendAddonMessage("\078\083\083\104\111\119\077\101\076\111\103\115",c..(" "..(e..(" "..(r..(" "..(u..(" "..C))))))),"\103\117\105\108\100")end)z.logWindow.scrollFrame=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\083\099\114\111\108\108\070\114\097\109\101",z.logWindow,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")z.logWindow.scrollFrame:SetPoint("\084\079\080\076\069\070\084",0,-35)z.logWindow.scrollFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",0,10)z.logWindow.scrollChild=CreateFrame("\070\114\097\109\101")z.logWindow.scrollChild:SetSize(580,1000)z.logWindow.scrollFrame:SetScrollChild(z.logWindow.scrollChild)z.logRows={}for N=1,50,1 do local c=CreateFrame("\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\082\111\119"..N,z.logWindow.scrollChild)c:SetSize(580,40)c:SetPoint("\084\079\080\076\069\070\084",0,-((N-1)*40))c.text=c:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")c.text:SetAllPoints(true)c.text:SetJustifyH("\076\069\070\084")c.text:SetJustifyV("\084\079\080")c.text:SetWordWrap(true)c.text:SetText("")z.logRows[N]=c end end function GpDb_old.ClearLog(z)z.logData={}z.logWindow.countFilter:SetText("\208\154\208\190\208\187-\208\178\208\190")z.logWindow.timeFilter:SetText("\208\146\209\128\208\181\208\188\209\143")z.logWindow.rlFilter:SetText("\208\160\208\155")z.logWindow.raidFilter:SetText("\208\160\208\181\208\185\208\180")z.logWindow.nameFilter:SetText("\208\157\208\184\208\186")z:UpdateLogDisplay()print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\155\208\190\208\179 \209\131\209\129\208\191\208\181\209\136\208\189\208\190 \208\190\209\135\208\184\209\137\208\181\208\189")end function GpDb_old._CreateWindow(z)z.window=CreateFrame("\070\114\097\109\101","\071\112\084\114\097\099\107\101\114\087\105\110\100\111\119",UIParent)z.window:SetFrameStrata("\068\073\065\076\079\071")z.window:SetSize(400,500)z.window:SetPoint("\076\069\070\084",5,100)z.window:SetMovable(true)z.window:EnableMouse(true)z.window:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")z.window:SetScript("\079\110\068\114\097\103\083\116\097\114\116",z.window.StartMoving)z.window:SetScript("\079\110\068\114\097\103\083\116\111\112",z.window.StopMovingOrSizing)z.window:Hide()z.window.background=z.window:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")z.window.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")z.window.background:SetVertexColor(0,0,0)z.window.background:SetAlpha(1)z.window.background:SetAllPoints(true)z.window.borderFrame=CreateFrame("\070\114\097\109\101",nil,z.window)z.window.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)z.window.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)z.window.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",edgeSize=16,insets={left=4,right=4,top=4,bottom=4}})z.window.title=z.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")z.window.title:SetPoint("\084\079\080",0,-15)z.window.title:SetText("")z.window.closeButton=CreateFrame("\066\117\116\116\111\110",nil,z.window,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")z.window.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)z.window.closeButton:SetScript("\079\110\067\108\105\099\107",function()z.window:Hide()end)z.window.logButton=CreateFrame("\066\117\116\116\111\110",nil,z.window,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")z.window.logButton:SetSize(24,24)z.window.logButton:SetPoint("\082\073\071\072\084",z.window.closeButton,"\076\069\070\084",-5,0)z.window.logButton:SetText("\076")z.window.logButton:SetScript("\079\110\067\108\105\099\107",function()z:ToggleLogWindow()end)z.window.raidOnlyCheckbox=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,z.window,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")z.window.raidOnlyCheckbox:SetPoint("\084\079\080\076\069\070\084",10,-15)z.window.raidOnlyCheckbox:SetSize(24,24)z.window.raidOnlyCheckbox.text=z.window.raidOnlyCheckbox:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")z.window.raidOnlyCheckbox.text:SetPoint("\076\069\070\084",z.window.raidOnlyCheckbox,"\082\073\071\072\084",5,0)z.window.raidOnlyCheckbox.text:SetText("\208\162\208\190\208\187\209\140\208\186\208\190 \209\128\208\181\208\185\208\180")z.window.raidOnlyCheckbox:SetScript("\079\110\067\108\105\099\107",function()z:_UpdateFromGuild()z:UpdateWindow()end)z.window.scrollFrame=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\083\099\114\111\108\108\070\114\097\109\101",z.window,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")z.window.scrollFrame:SetPoint("\084\079\080\076\069\070\084",0,-40)z.window.scrollFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",0,40)z.window.scrollChild=CreateFrame("\070\114\097\109\101")z.window.scrollChild:SetSize(380,500)z.window.scrollFrame:SetScrollChild(z.window.scrollChild)z.window.scrollBar=_G[z.window.scrollFrame:GetName().."\083\099\114\111\108\108\066\097\114"]z.window.scrollBar:SetPoint("\084\079\080\076\069\070\084",z.window.scrollFrame,"\084\079\080\082\073\071\072\084",-20,-16)z.window.scrollBar:SetPoint("\066\079\084\084\079\077\076\069\070\084",z.window.scrollFrame,"\066\079\084\084\079\077\082\073\071\072\084",-20,16)z.window.countText=z.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")z.window.countText:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,10)z.window.countText:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,10)z.window.countText:SetJustifyH("\076\069\070\084")z.window.countText:SetText("")z.window.totalText=z.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")z.window.totalText:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,30)z.window.totalText:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,30)z.window.totalText:SetJustifyH("\076\069\070\084")z.window.totalText:SetText("")z:_SetupTable()end function GpDb_old._SetupTable(N)local c={"\208\157\208\184\208\186","\208\147\208\159"}for z,c in ipairs(c)do local e=CreateFrame("\066\117\116\116\111\110",nil,N.window.scrollChild)e:SetSize(z==1 and 290 or 50,20)e:SetPoint("\084\079\080\076\069\070\084",(z-1)*290+(z==2 and 10 or 0),0)e:SetNormalFontObject("\071\097\109\101\070\111\110\116\078\111\114\109\097\108")e:SetHighlightFontObject("\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")local r=e:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")r:SetAllPoints(true)r:SetText(c)e:SetScript("\079\110\067\108\105\099\107",function()N:SortData(c:lower())N:UpdateWindow()end)end N.rows={}for c=1,999,1 do local e=CreateFrame("\066\117\116\116\111\110","\071\112\068\098\095\111\108\100\082\111\119"..c,N.window.scrollChild)e:SetSize(350,20)e:SetPoint("\084\079\080\076\069\070\084",0,-25-(c-1)*25)e:EnableMouse(true)e:RegisterForClicks("\076\101\102\116\066\117\116\116\111\110\085\112","\082\105\103\104\116\066\117\116\116\111\110\085\112")e:SetHighlightTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056");(e:GetHighlightTexture()):SetVertexColor(.4,.4,.8,.4)e.selection=e:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")e.selection:SetAllPoints(true)e.selection:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")e.selection:SetVertexColor(.3,.3,.7,.7)e.selection:Hide()e.nick=e:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")e.nick:SetPoint("\076\069\070\084",10,0)e.nick:SetWidth(290)e.nick:SetJustifyH("\076\069\070\084")e.gp=e:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")e.gp:SetPoint("\082\073\071\072\084",5,0)e.gp:SetWidth(50)e.gp:SetJustifyH("\082\073\071\072\084")e.lastClickTime=0 e:SetScript("\079\110\067\108\105\099\107",function(r,u,C)local P=FauxScrollFrame_GetOffset(N.window.scrollFrame)local s=c+P if not N.gp_data or not N.gp_data[s]then return end local h=GetTime()if u=="\076\101\102\116\066\117\116\116\111\110"and(z()and h-e.lastClickTime<.5)then N:ClearSelection()for z=1,#N.gp_data,1 do N.selected_indices[z]=true end N.last_selected_index=s N:_UpdateSelectionCount()N:RefreshRowHighlights()N:UpdateRaidWindowVisibility()if N.raidWindow and N.raidWindow:IsShown()then N:_UpdateSelectedPlayersText()end e.lastClickTime=0 return end e.lastClickTime=h if u=="\076\101\102\116\066\117\116\116\111\110"then local z=N.selected_indices[s]if IsShiftKeyDown()then if not N.last_selected_index then N:ClearSelection()N.selected_indices[s]=true N.last_selected_index=s else local z=math.min(N.last_selected_index,s)local c=math.max(N.last_selected_index,s)if not IsControlKeyDown()then N:ClearSelection()end for z=z,c,1 do if N.gp_data[z]then N.selected_indices[z]=true end end end elseif IsControlKeyDown()then N.selected_indices[s]=not z for z in pairs(N.selected_indices)do if not N.gp_data[z]then N.selected_indices[z]=nil end end if N.selected_indices[s]then N.last_selected_index=s else N.last_selected_index=nil for z in pairs(N.selected_indices)do if N.selected_indices[z]then N.last_selected_index=z break end end end else if z then N:ClearSelection()else N:ClearSelection()N.selected_indices[s]=true N.last_selected_index=s end end N:_UpdateSelectionCount()N:RefreshRowHighlights()N:UpdateRaidWindowVisibility()if N.raidWindow and N.raidWindow:IsShown()then N:_UpdateSelectedPlayersText()end end end)N.rows[c]=e end N.window:SetScript("\079\110\072\105\100\101",function()N:ClearSelection()if N.raidWindow and N.raidWindow:IsShown()then N.raidWindow:Hide()end if N.logWindow and N.logWindow:IsShown()then N.logWindow:Hide()end end)end function GpDb_old.ToggleLogWindow(z)if not z.logWindow then z:_CreateLogWindow()end if z.logWindow:IsShown()then z.logWindow:Hide()else z.logWindow:Show()z:UpdateLogDisplay()if z.raidWindow and z.raidWindow:IsShown()then z.logWindow:SetHeight(z.window:GetHeight()/2)else z.logWindow:SetHeight(z.window:GetHeight())end end end function GpDb_old.UpdateLogDisplay(z)if not z.logWindow or not z.logWindow:IsShown()then return end local N=0 local c={}for e,r in ipairs(z.logData)do local u=z.logWindow.scrollChild:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")u:SetWidth(580)u:SetText(r.text)u:SetWordWrap(true)local C=u:GetStringHeight()+5 c[e]=C N=N+C u:Hide()end local e=0 for N=1,#z.logRows,1 do local r=N if r<=#z.logData then local u=z.logData[r]local C=c[r]z.logRows[N]:SetHeight(C)z.logRows[N]:SetPoint("\084\079\080\076\069\070\084",0,-e)z.logRows[N].text:SetText(u.text)z.logRows[N]:Show()e=e+C else z.logRows[N]:Hide()end end z.logWindow.scrollChild:SetHeight(N)z.logWindow.scrollFrame:UpdateScrollChildRect()end function GpDb_old._UpdateSelectionCount(z)local N=0 for c,e in pairs(z.selected_indices)do if e and z.gp_data[c]then N=N+1 else z.selected_indices[c]=nil end end z.window.countText:SetText(string.format("\208\146\209\139\208\180\208\181\208\187\208\181\208\189\208\190\058 \037\100",N))if N==0 then z.last_selected_index=nil end return N end function GpDb_old.IsValidIndex(N,z)return z and(type(z)=="\110\117\109\098\101\114"and(N.gp_data and N.gp_data[z]))end function GpDb_old.RefreshRowHighlights(z)local N=FauxScrollFrame_GetOffset(z.window.scrollFrame)for c,e in ipairs(z.rows)do local r=c+N if r<=#z.gp_data then if z.selected_indices[r]then e.selection:Show();(e:GetHighlightTexture()):SetAlpha(.2)else e.selection:Hide();(e:GetHighlightTexture()):SetAlpha(.4)end end end local c=0 for z in pairs(z.selected_indices)do c=c+1 end z.window.countText:SetText(string.format("\208\146\209\139\208\180\208\181\208\187\208\181\208\189\208\190\058 \037\100",c))end function GpDb_old.ClearSelection(z)z.selected_indices={}z.last_selected_index=nil z:_UpdateSelectionCount()z:RefreshRowHighlights()z:UpdateRaidWindowVisibility()end function GpDb_old.GetSelectedEntries(z)local N={}for c,e in pairs(z.selected_indices)do if c<=#z.gp_data then table.insert(N,z.gp_data[c])end end return N end function GpDb_old.AddLogEntry(u,z,N,c,e,r)if not u.logData then u.logData={}print("\124\099\070\070\070\070\048\048\048\048\068\069\066\085\071\058\124\114 \108\111\103\068\097\116\097 \208\177\209\139\208\187 \110\105\108\044 \209\129\208\190\208\183\208\180\208\176\208\189\208\176 \208\189\208\190\208\178\208\176\209\143 \209\130\208\176\208\177\208\187\208\184\209\134\208\176")end if not u.window then u:_CreateWindow()end if not u.logWindow then u:_CreateLogWindow()end local function C(z)if not z or type(z)~="\115\116\114\105\110\103"or z==""then return"\124\099\070\070\070\070\070\070\070\070"end local N=z:match("\094\040\046-\041-")or z for z=1,GetNumGuildMembers(),1 do local c,e,r,u,C,P,s,h,d,v,y=GetGuildRosterInfo(z)if c and c==N then local z=RAID_CLASS_COLORS[y]if z then return string.format("\124\099\070\070\037\048\050\120\037\048\050\120\037\048\050\120",z.r*255,z.g*255,z.b*255)end break end end return"\124\099\070\070\070\070\070\070\070\070"end local P=tonumber(N)or 0 local s="\124\099\070\070\065\048\065\048\065\048"..((z or date("\037\072\058\037\077")).."\124\114")local h=type(c)=="\115\116\114\105\110\103"and c or UnitName("\112\108\097\121\101\114")or"\208\157\208\181\208\184\208\183\208\178\208\181\209\129\209\130\208\189\208\190"local d=C(h)..(h.."\124\114")local v=P>=0 and"\124\099\070\070\048\048\070\070\048\048"or"\124\099\070\070\070\070\048\048\048\048"local y=v..(tostring(P).."\124\114")local g=type(e)=="\115\116\114\105\110\103"and e or"\208\157\208\181\208\184\208\183\208\178\208\181\209\129\209\130\208\189\208\190"local A="\124\099\070\070\070\070\070\070\048\048"..(g.."\124\114")local o=type(r)=="\115\116\114\105\110\103"and r or"\208\157\208\181\208\184\208\183\208\178\208\181\209\129\209\130\208\189\208\190"local n={}for z in o:gmatch("\037\083\043")do table.insert(n,C(z)..(z.."\124\114"))end local K=table.concat(n," ")local B=string.format("\037\115 \124 \037\115 \124 \037\115 \124 \037\115 \124 \037\115",s,d,y,A,K)table.insert(u.logData,{text=B;raw={time=z or date("\037\072\058\037\077");rl=h,gp=P,raid=g;targets=o}})if#u.logData>200 then table.remove(u.logData,1)end if u.logWindow and u.logWindow:IsShown()then u:UpdateLogDisplay()u.logWindow.scrollFrame:SetVerticalScroll(u.logWindow.scrollFrame:GetVerticalScrollRange())end end function GpDb_old.UpdateRaidWindowVisibility(N)if not N.raidWindow then return end local c=N:_CheckOfficerRank()if not c then if N.raidWindow:IsShown()then N.raidWindow:Hide()if N.logWindow and N.logWindow:IsShown()then N.logWindow:SetHeight(N.window:GetHeight())end end return end local e=next(N.selected_indices)~=nil if not e then if N.raidWindow:IsShown()then N.raidWindow:Hide()if N.logWindow and N.logWindow:IsShown()then N.logWindow:SetHeight(N.window:GetHeight())end end return end local r=z()local u=N.window.raidOnlyCheckbox:GetChecked()local C=not r or u if C and r then local z={}for N=1,GetNumGroupMembers(),1 do local c=GetRaidRosterInfo(N)if c then z[c]=true end end for c in pairs(N.selected_indices)do local e=N.gp_data[c]if e and not z[e.original_nick]then C=false print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\208\181\208\186\208\190\209\130\208\190\209\128\209\139\208\181 \208\178\209\139\208\180\208\181\208\187\208\181\208\189\208\189\209\139\208\181 \208\184\208\179\209\128\208\190\208\186\208\184 \208\189\208\181 \208\178 \209\128\208\181\208\185\208\180\208\181")break end end end if C then if not N.raidWindow:IsShown()then N.raidWindow:Show()N:RestoreRaidWindowState()N:_UpdateSelectedPlayersText()if N.logWindow and N.logWindow:IsShown()then N.logWindow:SetHeight(N.window:GetHeight()/2)end end else if N.raidWindow:IsShown()then N.raidWindow:Hide()end if N.logWindow and N.logWindow:IsShown()then N.logWindow:SetHeight(N.window:GetHeight())end end end function GpDb_old.UpdateWindow(z)if not z.window or not z.rows then return end local N=FauxScrollFrame_GetOffset(z.window.scrollFrame)for c=1,z.visible_rows,1 do local e=z.rows[c]local r=c+N if r<=#z.gp_data then local N=z.gp_data[r]e.nick:SetText(N.nick)e.gp:SetText(tostring(N.gp))if N.classColor then e.nick:SetTextColor(N.classColor.r,N.classColor.g,N.classColor.b)else e.nick:SetTextColor(1,1,1)end e:Show()else e:Hide()end end z:RefreshRowHighlights()FauxScrollFrame_Update(z.window.scrollFrame,#z.gp_data,z.visible_rows,25)z:UpdateRaidWindowVisibility()end function GpDb_old.GetNumSelected(z)local N=0 for c in pairs(z.selected_indices)do if z.gp_data[c]then N=N+1 else z.selected_indices[c]=nil end end print(string.format("\071\101\116\078\117\109\083\101\108\101\099\116\101\100\058 \208\189\208\176\208\185\208\180\208\181\208\189\208\190 \037\100 \209\141\208\187\208\181\208\188\208\181\208\189\209\130\208\190\208\178",N))return N end function GpDb_old.Show(N)N.window:Show()N.window.raidOnlyCheckbox:SetChecked(z())N:_UpdateFromGuild()N:UpdateWindow()end function GpDb_old.Hide(z)z.window:Hide()end function GpDb_old._UpdateFromGuild(N)N.gp_data={}local c=0 local e=GetNumGuildMembers()local r=z()N.window.raidOnlyCheckbox:SetChecked(r)local u=r and N.window.raidOnlyCheckbox:GetChecked()if not IsInGuild()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\146\209\139 \208\189\208\181 \209\129\208\190\209\129\209\130\208\190\208\184\209\130\208\181 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184")N:UpdateWindow()return end GuildRoster()C_Timer(.5,function()local z={}for N=1,GetNumGuildMembers(),1 do local c,e,r,u,C,P,s,h,d,v,y=GetGuildRosterInfo(N)if c then local N=nil if h then local z={}for N in h:gmatch("\037\083\043")do table.insert(z,N)end if#z>=2 then N=z[2]end end z[c]={publicNote=s;officerNote=h;classFileName=y,playerID=N}end end if u then local r=GetNumGroupMembers()local u=true local C={}for N=1,r,1 do local c,e,r,P,s,h,d,v,y,g,A,o,n,K,B,R,G,U,a=GetRaidRosterInfo(N)if c then local N=c:match("\094\040\046-\041-")or c if not z[N]then u=false table.insert(C,c)end end end if not u then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\146 \209\128\208\181\208\185\208\180\208\181 \208\181\209\129\209\130\209\140 \208\189\208\181 \209\135\208\187\208\181\208\189\209\139 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\058 "..table.concat(C,"\044 "))N.window.countText:SetText("\208\158\209\130\208\190\208\177\209\128\208\176\208\182\208\176\208\181\209\130\209\129\209\143 \208\184\208\179\209\128\208\190\208\186\208\190\208\178\058 \048 \040\208\178 \209\128\208\181\208\185\208\180\208\181 \208\181\209\129\209\130\209\140 \208\189\208\181 \209\135\208\187\208\181\208\189\209\139 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041")N.window.totalText:SetText(string.format("\208\146\209\129\208\181\208\179\208\190 \208\184\208\179\209\128\208\190\208\186\208\190\208\178 \209\129 \208\147\208\159\058 \037\100 \040\208\184\208\183 \037\100 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041",c,e))N:UpdateWindow()return end for e=1,r,1 do local r,u,C,P,s,h=GetRaidRosterInfo(e)if r then local e=r:match("\094\040\046-\041-")or r local u=z[e]if u then local z=0 local e=u.publicNote or""if u.officerNote then local N={}for z in u.officerNote:gmatch("\037\083\043")do table.insert(N,z)end if#N>=3 then z=tonumber(N[3])or 0 end end if z>0 then c=c+1 end local C=r if e and e~=""then C=r..(" \124\099\070\070\070\070\070\070\048\048\040"..(e.."\041\124\114"))end table.insert(N.gp_data,{nick=C,original_nick=r;gp=z;classColor=RAID_CLASS_COLORS[h]or{r=1;g=1;b=1};classFileName=h;playerID=u.playerID})end end end else for z=1,GetNumGuildMembers(),1 do local e,r,u,C,P,s,h,d,v,y,g=GetGuildRosterInfo(z)if e and(d and d~="")then local z={}for N in d:gmatch("\037\083\043")do table.insert(z,N)end if#z>=3 then local r=tonumber(z[3])or 0 local u=z[2]if r~=0 then c=c+1 local z=e if h and h~=""then z=e..(" \124\099\070\070\070\070\070\070\048\048\040"..(h.."\041\124\114"))end table.insert(N.gp_data,{nick=z,original_nick=e;gp=r;classColor=RAID_CLASS_COLORS[g]or{r=1,g=1,b=1};classFileName=g;playerID=u})end end end end end N.window.countText:SetText(string.format("\208\158\209\130\208\190\208\177\209\128\208\176\208\182\208\176\208\181\209\130\209\129\209\143 \208\184\208\179\209\128\208\190\208\186\208\190\208\178\058 \037\100",#N.gp_data))N.window.totalText:SetText(string.format("\208\146\209\129\208\181\208\179\208\190 \208\184\208\179\209\128\208\190\208\186\208\190\208\178 \209\129 \208\147\208\159\058 \037\100 \040\208\184\208\183 \037\100 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041",c,GetNumGuildMembers()))N:ClearSelection()N:SortData()N:UpdateWindow()end)end function GpDb_old.Show(N)N.window:Show()if z()then N.window.raidOnlyCheckbox:SetChecked(true)else N.window.raidOnlyCheckbox:SetChecked(false)end GuildRoster()C_Timer(.5,function()N:_UpdateFromGuild()N:UpdateWindow()end)end function GpDb_old.AddGpEntry(e,z,N,c)table.insert(e.gp_data,{nick=z,original_nick=z;gp=tonumber(N)or 0,playerID=c})e:SortData()e:UpdateWindow()end function GpDb_old.UpdateGpEntry(c,z,N)for c,e in ipairs(c.gp_data)do if e.original_nick==z then e.gp=tonumber(N)or 0 break end end c:SortData()c:UpdateWindow()end function GpDb_old.RemoveGpEntry(N,z)for c,e in ipairs(N.gp_data)do if e.original_nick==z then table.remove(N.gp_data,c)break end end N:UpdateWindow()end function GpDb_old.FindGpEntry(N,z)for N,c in ipairs(N.gp_data)do if c.original_nick==z then return c.gp end end return nil end function GpDb_old.ClearAll(z)z.gp_data={}z:UpdateWindow()end function GpDb_old.SortData(N,z)if z then if N.sort_column==z then N.sort_ascending=not N.sort_ascending else N.sort_column=z N.sort_ascending=true end end table.sort(N.gp_data,function(z,c)local e,r if N.sort_column=="\110\105\099\107"then e=string.lower(string.lower(z.original_nick or""))r=string.lower(string.lower(c.original_nick or""))else e=z.gp or 0 r=c.gp or 0 end if N.sort_ascending then return e<r else return e>r end end)N:ClearSelection()N:UpdateWindow()end function GpDb_old.UpdateWindow(z)if not z.window or not z.rows then return end for N,c in ipairs(z.rows)do local e=z.gp_data[N]if e then c.nick:SetText(e.nick)if e.classColor then local z=e.nick:match("\094\091\094\124\093\043")or e.nick c.nick:SetText(z)c.nick:SetTextColor(e.classColor.r,e.classColor.g,e.classColor.b)local N=e.nick:match("\124\099\046\043\036")if N then local z=c.nick:GetText()..(" "..N)c.nick:SetText(z)end else c.nick:SetTextColor(1,1,1)end c.gp:SetText(tostring(e.gp))c.gp:SetTextColor(1,1,1)c:Show()else c:Hide()end end z.window.scrollChild:SetHeight(#z.gp_data*25)z.window.scrollFrame:UpdateScrollChildRect()end function GpDb_old.SaveToNsDb(z)for N,c in ipairs(z.gp_data)do z.ns_db:addStaticStr("\071\080\095\068\065\084\065",c.original_nick,nil,tostring(c.gp))end end function GpDb_old.LoadFromNsDb(z)z.gp_data={}local N=z.ns_db.input_table.GP_DATA if N then for N,c in pairs(N)do table.insert(z.gp_data,{nick=N;original_nick=N;gp=tonumber(c)or 0})end end z:SortData()z:UpdateWindow()end function GpDb_old._CreateRaidSelectionWindow(z)z.raidWindow=CreateFrame("\070\114\097\109\101","\071\112\068\098\082\097\105\100\087\105\110\100\111\119",z.window)z.raidWindow:SetFrameStrata("\068\073\065\076\079\071")z.raidWindow:SetSize(250,z.window:GetHeight()*.5)z.raidWindow:SetPoint("\066\079\084\084\079\077\076\069\070\084",z.window,"\066\079\084\084\079\077\082\073\071\072\084",5,0)z.raidWindow:SetMovable(false)z.raidWindow.background=z.raidWindow:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")z.raidWindow.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")z.raidWindow.background:SetVertexColor(0,0,0)z.raidWindow.background:SetAlpha(1)z.raidWindow.background:SetAllPoints(true)z.raidWindow.borderFrame=CreateFrame("\070\114\097\109\101",nil,z.raidWindow)z.raidWindow.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)z.raidWindow.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)z.raidWindow.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",edgeSize=16;insets={left=4,right=4,top=4,bottom=4}})z.raidWindow.closeButton=CreateFrame("\066\117\116\116\111\110",nil,z.raidWindow,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")z.raidWindow.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)z.raidWindow.closeButton:SetScript("\079\110\067\108\105\099\107",function()z.raidWindow:Hide()end)z.raidWindow.dropdown=CreateFrame("\070\114\097\109\101","\071\112\068\098\082\097\105\100\068\114\111\112\100\111\119\110",z.raidWindow,"\085\073\068\114\111\112\068\111\119\110\077\101\110\117\084\101\109\112\108\097\116\101")z.raidWindow.dropdown:SetPoint("\084\079\080\076\069\070\084",10,-10)z.raidWindow.dropdown:SetPoint("\082\073\071\072\084",z.raidWindow.closeButton,"\076\069\070\084",-10,0)z.raidWindow.dropdown:SetHeight(32)local function N()if z.raidWindow.selectedRaidId then for N=1,GetNumSavedInstances(),1 do local c,e=GetSavedInstanceInfo(N)if e==z.raidWindow.selectedRaidId then UIDropDownMenu_SetText(z.raidWindow.dropdown,string.format("\037\100\058 \037\115",e,c))return end end else UIDropDownMenu_SetText(z.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")end end local function c(c,e,r)local u=UIDropDownMenu_CreateInfo()for c=1,GetNumSavedInstances(),1 do local e,r,C,P,s,h,d,v,y=GetSavedInstanceInfo(c)if e and r then u.text=string.format("\037\100\058 \037\115 \040\037\100\041",r,e,y)u.arg1={id=r;name=e,players=y}u.func=function(c,e)z.raidWindow.selectedRaidId=e.id z.raidWindow.selectedRaidName=e.name z.raidWindow.selectedRaidPlayers=e.players if z.saveSelectionEnabled then z.lastSelectionType="\114\097\105\100"z.lastRaidId=e.id z.lastRaidName=e.name z.lastRaidPlayers=e.players end N()z.raidWindow.editBox:SetText("")end u.checked=z.raidWindow.selectedRaidId==r UIDropDownMenu_AddButton(u)end end u.text="\208\158\209\135\208\184\209\129\209\130\208\184\209\130\209\140 \208\178\209\139\208\177\208\190\209\128"u.func=function()z.raidWindow.selectedRaidId=nil z.raidWindow.selectedRaidName=nil if z.saveSelectionEnabled then z.lastSelectionType=nil z.lastRaidId=nil z.lastRaidName=nil z.lastRaidPlayers=0 end N()end u.notCheckable=true UIDropDownMenu_AddButton(u)end UIDropDownMenu_Initialize(z.raidWindow.dropdown,c)UIDropDownMenu_SetWidth(z.raidWindow.dropdown,200)UIDropDownMenu_SetButtonWidth(z.raidWindow.dropdown,224)UIDropDownMenu_JustifyText(z.raidWindow.dropdown,"\076\069\070\084")N()z.raidWindow.otherText=z.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")z.raidWindow.otherText:SetPoint("\084\079\080\076\069\070\084",z.raidWindow.dropdown,"\066\079\084\084\079\077\076\069\070\084",0,-10)z.raidWindow.otherText:SetText("\208\148\209\128\209\131\208\179\208\190\208\181\058")z.raidWindow.editBox=CreateFrame("\069\100\105\116\066\111\120",nil,z.raidWindow,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")z.raidWindow.editBox:SetPoint("\084\079\080\076\069\070\084",z.raidWindow.otherText,"\066\079\084\084\079\077\076\069\070\084",0,-5)z.raidWindow.editBox:SetPoint("\082\073\071\072\084",-10,0)z.raidWindow.editBox:SetHeight(20)z.raidWindow.editBox:SetAutoFocus(false)z.raidWindow.editBox:SetScript("\079\110\084\101\120\116\067\104\097\110\103\101\100",function(c)if c:GetText()~=""then if z.saveSelectionEnabled then z.lastSelectionType="\111\116\104\101\114"z.lastOtherText=c:GetText()end z.raidWindow.selectedRaidId=nil z.raidWindow.selectedRaidName=nil N()end end)z.raidWindow.saveCheckbox=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,z.raidWindow,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")z.raidWindow.saveCheckbox:SetPoint("\084\079\080\076\069\070\084",z.raidWindow.editBox,"\066\079\084\084\079\077\076\069\070\084",0,-10)z.raidWindow.saveCheckbox:SetSize(24,24)z.raidWindow.saveCheckbox.text=z.raidWindow.saveCheckbox:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")z.raidWindow.saveCheckbox.text:SetPoint("\076\069\070\084",z.raidWindow.saveCheckbox,"\082\073\071\072\084",5,0)z.raidWindow.saveCheckbox.text:SetText("\208\161\208\190\209\133\209\128\208\176\208\189\208\184\209\130\209\140 \208\178\209\139\208\177\208\190\209\128")z.raidWindow.saveCheckbox:SetChecked(true)z.saveSelectionEnabled=true z.raidWindow.saveCheckbox:SetScript("\079\110\067\108\105\099\107",function()z.saveSelectionEnabled=z.raidWindow.saveCheckbox:GetChecked()end)z.raidWindow.selectedPlayersText=z.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")z.raidWindow.selectedPlayersText:SetPoint("\084\079\080\076\069\070\084",z.raidWindow.saveCheckbox,"\066\079\084\084\079\077\076\069\070\084",0,-5)z.raidWindow.selectedPlayersText:SetPoint("\082\073\071\072\084",-10,0)z.raidWindow.selectedPlayersText:SetHeight(70)z.raidWindow.selectedPlayersText:SetJustifyH("\076\069\070\084")z.raidWindow.selectedPlayersText:SetJustifyV("\084\079\080")z.raidWindow.selectedPlayersText:SetWordWrap(true)local e={5;10,20,25;50,100}local r for N,c in ipairs(e)do local e=CreateFrame("\066\117\116\116\111\110",nil,z.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")e:SetSize(27,20)e:SetText(tostring(c))if N==1 then e:SetPoint("\066\079\084\084\079\077\076\069\070\084",z.raidWindow.selectedPlayersText,"\066\079\084\084\079\077\076\069\070\084",0,-20)else e:SetPoint("\076\069\070\084",r,"\082\073\071\072\084",5,0)end e:SetScript("\079\110\067\108\105\099\107",function()local N=tonumber(z.raidWindow.gpEditBox:GetText())or 0 z.raidWindow.gpEditBox:SetText(tostring(c))z.raidWindow.gpEditBox:HighlightText()end)r=e end local u=CreateFrame("\066\117\116\116\111\110",nil,z.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")u:SetSize(40,22)u:SetText("-\047\043")u:SetPoint("\076\069\070\084",r,"\082\073\071\072\084",5,0)u:SetScript("\079\110\067\108\105\099\107",function()local N=tonumber(z.raidWindow.gpEditBox:GetText())or 0 z.raidWindow.gpEditBox:SetText(tostring(-N))z.raidWindow.gpEditBox:HighlightText()end)z.raidWindow.gpEditBox=CreateFrame("\069\100\105\116\066\111\120",nil,z.raidWindow,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")z.raidWindow.gpEditBox:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,5)z.raidWindow.gpEditBox:SetSize(100,20)z.raidWindow.gpEditBox:SetAutoFocus(false)z.raidWindow.gpEditBox:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()z.raidWindow.gpEditBox:ClearFocus()end)z.raidWindow.gpEditBox:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()z.raidWindow.gpEditBox:ClearFocus()end)z.raidWindow.awardButton=CreateFrame("\066\117\116\116\111\110",nil,z.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")z.raidWindow.awardButton:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,5)z.raidWindow.awardButton:SetSize(100,22)z.raidWindow.awardButton:SetText("\208\157\208\176\209\135\208\184\209\129\208\187\208\184\209\130\209\140")z.raidWindow.awardButton:SetScript("\079\110\067\108\105\099\107",function()if not z:_CheckOfficerRank()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\162\208\190\208\187\209\140\208\186\208\190 \208\190\209\132\208\184\209\134\208\181\209\128\209\139 \208\188\208\190\208\179\209\131\209\130 \208\189\208\176\209\135\208\184\209\129\208\187\209\143\209\130\209\140 \208\147\208\159")z.raidWindow:Hide()return end if next(z.selected_indices)==nil then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\208\181\209\130 \208\178\209\139\208\180\208\181\208\187\208\181\208\189\208\189\209\139\209\133 \208\184\208\179\209\128\208\190\208\186\208\190\208\178")z.raidWindow:Hide()return end local N=tonumber(z.raidWindow.gpEditBox:GetText())if not N then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\163\208\186\208\176\208\182\208\184\209\130\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181 \208\147\208\159")return end if not z.raidWindow.selectedRaidId and not(z.lastOtherText or""):match("\037\083")then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\209\131\208\182\208\189\208\190 \208\178\209\139\208\177\209\128\208\176\209\130\209\140 \209\128\208\181\208\185\208\180 \208\184\208\187\208\184 \209\131\208\186\208\176\208\183\208\176\209\130\209\140 \208\191\209\128\208\184\209\135\208\184\208\189\209\131")return end if not z.saveSelectionEnabled then z.lastSelectionType=nil z.lastRaidId=nil z.lastRaidName=nil z.lastRaidPlayers=0 z.lastOtherText=nil z.lastGPValue=0 else z.lastGPValue=N end local c if z.raidWindow.selectedRaidId then local e=(z.raidWindow.selectedRaidName or""):gsub("\037\115\043","\095")c=string.format("\037\048\052\100\095\037\115\095\037\100 \037\100",z.raidWindow.selectedRaidId,e,z.raidWindow.selectedRaidPlayers or 0,N)else local e=(z.lastOtherText or""):gsub("\037\115\043","\095")c=string.format("\037\115 \037\100",e,N)end for e in pairs(z.selected_indices)do if z.gp_data[e]then local r=z.gp_data[e].original_nick local u=z.gp_data[e].playerID or"\085\078\075\078\079\087\078"SendAddonMessage("\110\115\071\080"..(" "..N),r,"\103\117\105\108\100")c=c..(" "..u)z:AddLogEntry(N,date("\037\072\058\037\077"),UnitName("\112\108\097\121\101\114"),z.raidWindow.selectedRaidName or z.raidWindow.editBox:GetText(),r)end end SendAddonMessage("\110\115\071\080\108\111\103",c,"\103\117\105\108\100")for z,c in ipairs(z:GetSelectedEntries())do c.gp=(c.gp or 0)+N end z:UpdateWindow()z.raidWindow:Hide()end)z.raidWindow:SetScript("\079\110\072\105\100\101",function()if z.logWindow and z.logWindow:IsShown()then z.logWindow:SetHeight(z.window:GetHeight())end end)z.raidWindow:Hide()end function GpDb_old._UpdateSelectedPlayersText(z)if not z.raidWindow then return end local N=z:GetSelectedEntries()local c={}for z,N in ipairs(N)do table.insert(c,N.original_nick)end local e=table.concat(c,"\044 ")if not z.raidWindow.selectedPlayersText then z.raidWindow.selectedPlayersText=z.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")z.raidWindow.selectedPlayersText:SetPoint("\084\079\080\076\069\070\084",z.raidWindow.saveCheckbox,"\066\079\084\084\079\077\076\069\070\084",0,-5)z.raidWindow.selectedPlayersText:SetPoint("\082\073\071\072\084",-10,0)z.raidWindow.selectedPlayersText:SetHeight(80)z.raidWindow.selectedPlayersText:SetJustifyH("\076\069\070\084")z.raidWindow.selectedPlayersText:SetJustifyV("\084\079\080")z.raidWindow.selectedPlayersText:SetWordWrap(true)z.raidWindow.selectedPlayersTextContainer=CreateFrame("\070\114\097\109\101",nil,z.raidWindow)z.raidWindow.selectedPlayersTextContainer:SetAllPoints(z.raidWindow.selectedPlayersText)z.raidWindow.selectedPlayersTextContainer:SetScript("\079\110\069\110\116\101\114",function()if z.raidWindow.selectedPlayersText.tooltip then GameTooltip:SetOwner(z.raidWindow.selectedPlayersTextContainer,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:SetText("\208\146\209\139\208\177\209\128\208\176\208\189\208\189\209\139\208\181 \208\184\208\179\209\128\208\190\208\186\208\184\058")GameTooltip:AddLine(z.raidWindow.selectedPlayersText.tooltip,1,1,1,true)GameTooltip:Show()end end)z.raidWindow.selectedPlayersTextContainer:SetScript("\079\110\076\101\097\118\101",function()GameTooltip:Hide()end)end if#e>60 then local N=string.sub(e,1,600).."\046\046\046"z.raidWindow.selectedPlayersText:SetText(N)z.raidWindow.selectedPlayersText.tooltip=e else z.raidWindow.selectedPlayersText:SetText(e)z.raidWindow.selectedPlayersText.tooltip=nil end end function GpDb_old.RestoreRaidWindowState(z)if not z.raidWindow then return end if z.lastSelectionType=="\114\097\105\100"and z.lastRaidId then UIDropDownMenu_SetText(z.raidWindow.dropdown,string.format("\037\100\058 \037\115",z.lastRaidId,z.lastRaidName))z.raidWindow.editBox:SetText("")z.raidWindow.selectedRaidId=z.lastRaidId z.raidWindow.selectedRaidName=z.lastRaidName z.raidWindow.selectedRaidPlayers=z.lastRaidPlayers elseif z.lastSelectionType=="\111\116\104\101\114"and z.lastOtherText then UIDropDownMenu_SetText(z.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")z.raidWindow.editBox:SetText(z.lastOtherText)z.raidWindow.selectedRaidId=nil z.raidWindow.selectedRaidName=nil else UIDropDownMenu_SetText(z.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")z.raidWindow.editBox:SetText("")z.raidWindow.selectedRaidId=nil z.raidWindow.selectedRaidName=nil end if not z.lastGPValue then z.lastGPValue=0 end z.raidWindow.gpEditBox:SetText(tostring(z.lastGPValue))z.raidWindow.saveCheckbox:SetChecked(z.saveSelectionEnabled)z:_UpdateSelectedPlayersText()end function GpDb_old._CheckOfficerRank(z)if not IsInGuild()then return false end local N=UnitName("\112\108\097\121\101\114")for z=1,GetNumGuildMembers(),1 do local c,e,r=GetGuildRosterInfo(z)if c and c==N then local z=GuildControlGetRankName(r+1)if z=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"or z=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"then return true end break end end return false end function GpDb_old.ToggleRaidWindow(N)if not N:_CheckOfficerRank()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\162\208\190\208\187\209\140\208\186\208\190 \208\190\209\132\208\184\209\134\208\181\209\128\209\139 \208\188\208\190\208\179\209\131\209\130 \208\189\208\176\209\135\208\184\209\129\208\187\209\143\209\130\209\140 \208\147\208\159")if N.raidWindow and N.raidWindow:IsShown()then N.raidWindow:Hide()end return end if not N.raidWindow then N:_CreateRaidSelectionWindow()end local c=z()local e=N.window.raidOnlyCheckbox:GetChecked()local r=next(N.selected_indices)~=nil if not r and not N.raidWindow:IsShown()then N.raidWindow:Show()UIDropDownMenu_Initialize(N.raidWindow.dropdown,nil)return end if r then if c and not e then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\148\208\187\209\143 \208\189\208\176\209\135\208\184\209\129\208\187\208\181\208\189\208\184\209\143 \208\147\208\159 \208\178 \209\128\208\181\208\185\208\180\208\181 \208\178\208\186\208\187\209\142\209\135\208\184\209\130\208\181 \'\208\162\208\190\208\187\209\140\208\186\208\190 \209\128\208\181\208\185\208\180\'")N.raidWindow:Hide()return end if N.raidWindow:IsShown()then N.raidWindow:Hide()else N.raidWindow:Show()UIDropDownMenu_Initialize(N.raidWindow.dropdown,nil)end end end function C_Timer(z,N,c)local e=CreateFrame("\070\114\097\109\101")e.duration=z e.elapsed=0 e.isLooping=c or false e:SetScript("\079\110\085\112\100\097\116\101",function(z,c)z.elapsed=z.elapsed+c if z.elapsed>=z.duration then if type(N)=="\102\117\110\099\116\105\111\110"then N()end if z.isLooping then z.elapsed=0 else z:SetScript("\079\110\085\112\100\097\116\101",nil)z=nil end end end)end function GetNumGroupMembers()if GetNumRaidMembers()>0 then return GetNumRaidMembers()else return GetNumPartyMembers()+1 end end