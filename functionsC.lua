function mysplit(a,b)if b==nil then b="%s"end;local d={}for e in string.gmatch(a,"([^"..b.."]+)")do table.insert(d,e)end;return d end;function round(f)if f-f%0.1-(f-f%1)<0.5 then f=f-f%1 else f=f-f%1+1 end;return f end;function nsplit(e)lines={}for g in e:gmatch("[^\r\n]+")do table.insert(lines,g)end;return lines end;function all_trim(g)return g:match("^%s*(.-)%s*$")end;function kirTest(h,i)test1=h:sub(i,i)testN=h:byte(7)testN=tonumber(testN)if testN==208 then r=h:sub(i*2-1,i*2)else r=test1 end;return r end;function alfabet(l)shablon="абвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ !?,.-0123456789'()"myB=string.find(shablon,l,1,true)return myB end;function alfabetC(l,c)shablon="абвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯabcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ !?,.-0123456789'()"local myB;if c==0 then myB=string.find(shablon,l,1,true)end;if c==1 then if l<133 then myB=string.utf8sub(shablon,l/2+0.5,l/2+0.5)else myB=string.sub(shablon,l,l)end end;return myB end;function hashStr(n)local o=time()o=o%10000;o=tostring(o)o=string.utf8sub(o,2,3)o=string.format("%03d",o)nomeLen=string.utf8len(n)nome1={}for p=1,nomeLen do nome1[p]=string.utf8sub(n,p,p)tmNome=nome1[p]nome1[p]=alfabet(tmNome)end;nome11=0;for p=1,nomeLen do nome11=nome11+nome1[p]end;nome11=nome11%1000;hNome=string.format("%03d",nome11)iN=tostring(o)r1=string.utf8sub(iN,1,1)r2=string.utf8sub(hNome,1,1)r3=string.utf8sub(iN,2,2)r4=string.utf8sub(hNome,2,2)r5=string.utf8sub(iN,3,3)r6=string.utf8sub(hNome,3,3)r=r1 ..r2 ..r3 ..r4 ..r5 ..r6;return r end;function tablelength(q)local count=0;for s in pairs(q)do count=count+1 end;return count end;function getPOS(x,y)local t=(1-y)*668;local u=x*1002;return u,t end;function hshStrNuovo(v,w)nomeLen=string.utf8len(w)nome1={}for p=1,nomeLen do nome1[p]=string.utf8sub(w,p,p)tmNome=nome1[p]nome1[p]=alfabet(tmNome)end;nome11=0;for p=1,nomeLen do nome11=nome11+nome1[p]end;nome11=nome11%1000;hNome=string.format("%03d",nome11)local z=string.sub(v,2,2)local A=string.sub(v,4,4)local B=string.sub(v,6,6)local C=math.random(0,9)local D=math.random(0,9)local E=math.random(0,9)local F=z..A..B;local G=hashStr(w)local H=string.utf8sub(nome11,2,2)local I=string.utf8sub(nome11,4,4)local J=string.utf8sub(nome11,6,6)local K=H..I..J;local L=C..I..D..H..E..J;return F,K,L end;function hshStrNuovo(v,w)local nomeLen;local tmNome;local nome11;local hNome;local H;local I;local J;local M;local N;local O;local P;local F;local K;nomeLen=string.utf8len(w)local nome1={}for p=1,nomeLen do nome1[p]=string.utf8sub(w,p,p)tmNome=nome1[p]nome1[p]=alfabet(tmNome)end;nome11=0;for p=1,nomeLen do nome11=nome11+nome1[p]end;nome11=nome11%1000;hNome=string.format("%03d",nome11)H=string.sub(hNome,1,1)I=string.sub(hNome,2,2)J=string.sub(hNome,3,3)M=string.sub(v,2,2)M=tonumber(M)if M==0 then N=string.sub(v,3,3)O=string.sub(v,4,4)P=string.sub(v,6,6)elseif M==1 then N=string.sub(v,4,4)O=string.sub(v,3,3)P=string.sub(v,6,6)elseif M==2 then N=string.sub(v,4,4)O=string.sub(v,6,6)P=string.sub(v,3,3)elseif M==3 then N=string.sub(v,3,3)O=string.sub(v,6,6)P=string.sub(v,4,4)elseif M==4 then N=string.sub(v,1,1)O=string.sub(v,6,6)P=string.sub(v,4,4)elseif M==5 then N=string.sub(v,1,1)O=string.sub(v,6,6)P=string.sub(v,3,3)elseif M==6 then N=string.sub(v,6,6)O=string.sub(v,1,1)P=string.sub(v,3,3)elseif M==7 then N=string.sub(v,6,6)O=string.sub(v,3,3)P=string.sub(v,1,1)elseif M==8 then N=string.sub(v,4,4)O=string.sub(v,5,5)P=string.sub(v,6,6)elseif M==9 then N=string.sub(v,5,5)O=string.sub(v,1,1)P=string.sub(v,3,3)end;F=N..O..P;K=H..I..J;return F,K end;function hshSenderNomeC(Q)local nomeLen;local nome1;local nome11;local R;local S;local T;local U;local V;local W;local X;local Y;nomeLen=string.utf8len(Q)nome1={}for p=1,nomeLen do nome1[p]=string.utf8sub(Q,p,p)tmNome=nome1[p]nome1[p]=alfabet(tmNome)end;nome11=0;for p=1,nomeLen do nome11=nome11+nome1[p]end;nome11=nome11%1000;R=string.format("%03d",nome11)S=string.sub(R,1,1)T=string.sub(R,2,2)U=string.sub(R,3,3)V=math.random(0,9)W=math.random(0,9)X=math.random(0,9)if W==0 then Y=V..W..S..T..X..U elseif W==1 then Y=V..W..T..S..X..U elseif W==2 then Y=V..W..U..S..X..T elseif W==3 then Y=V..W..S..U..X..T elseif W==4 then Y=S..W..V..U..X..T elseif W==5 then Y=S..W..U..V..X..T elseif W==6 then Y=T..W..U..V..X..S elseif W==7 then Y=U..W..T..X..V..S elseif W==8 then Y=V..W..X..S..T..U elseif W==8 then Y=S..W..U..V..T..X elseif W==9 then Y=T..W..U..V..S..X end;if testQ~=nil then if testQ[Q]~=nil then if testQ[Q]["rarHSH1"]==nil then testQ[Q]["rarHSH1"]={}end;if testQ[Q]["rarHSH"]==nil then testQ[Q]["rarHSH"]={}end;testDate=date("%d")testDate=tonumber(testDate)if testDate%2==0 then tableHSH="rarHSH"testQ[Q]["rarHSH1"]=nil else tableHSH="rarHSH1"testQ[Q]["rarHSH"]=nil end;if Y==testQ[Q][tableHSH]then Y=hshSenderNomeC(Q)end;table.insert(testQ[Q][tableHSH],Y)return Y end end end;function gmTest(Z)local _;for o=1,#gmList do if Z==gmList[o]then _="гм"break end;o=o+1 end;return _ end;function proverkaVypolneniyaKvestySachivkoj(a0,a1)local a2=testQ[a0]["взятый_квест"]if a1=="2"then a1="квест_лвл2"elseif a1=="3"then a1="квест_лвл3"end;local a3=testQ[a0][a1][a2]a3=tonumber(a3)local count=GetAchievementNumCriteria(a2)j=0;k=0;for o=1,count do local a4,a5,a6,a7,a8,a9,aa,ab,ac,ad=GetAchievementCriteriaInfo(a2,o)prov=a6;if prov==true then j=j+1 else k=k+1 end;o=o+1 end;local ae=a3-j;if ae<0 then ae=0 end;SendChatMessage("Осталось выполнить "..ae.." пунктов ачивки "..a2 .." "..GetAchievementLink(a2).." из "..a3,"GUILD",nil,1)end;function npcXY(k,af,x,y,ag)local ah=nil;local ai=k;local aj=af;ai=tostring(ai)aj=tostring(aj)if npcScan[ai]==nil then npcScan[ai]={}end;if npcScan[ai][aj]==nil then npcScan[ai][aj]={}end;local ak=ag;if ak~=nil then local al=x;local am=y;al=tostring(al)am=tostring(am)if npcScan[ai][aj][ak]==nil then npcCount=1;npcCount=tostring(npcCount)npcScan[ai][aj][ak]={}npcScan[ai][aj][ak][npcCount]={}npcScan[ai][aj][ak][npcCount]["x"]=al;npcScan[ai][aj][ak][npcCount]["y"]=am else local an={}local ao={}npcCount=tablelength(npcScan[ai][aj][ak])+1;npcCount=tostring(npcCount)al=tostring(al)am=tostring(am)npcScan[ai][aj][ak][npcCount]={}npcScan[ai][aj][ak][npcCount]["x"]=al;npcScan[ai][aj][ak][npcCount]["y"]=am end else print("Выбери цель")end end;function testNpc(ap)local r;CreateFrame("GameTooltip","MyScanningTooltip",nil,"GameTooltipTemplate")MyScanningTooltip:SetOwner(WorldFrame,"ANCHOR_NONE")MyScanningTooltip:AddFontStrings(MyScanningTooltip:CreateFontString("$parentTextLeft1",nil,"GameTooltipText"),MyScanningTooltip:CreateFontString("$parentTextRight1",nil,"GameTooltipText"))MyScanningTooltip:SetHyperlink("unit:"..ap)r=EnumerateTooltipLines(MyScanningTooltip)return r end;local function aq(...)local ar;for o=1,select("#",...)do local as=select(o,...)if as and as:GetObjectType()=="FontString"then local at=as:GetText()if at~=nil then print(at)if string.find(at,"Уровень")then testLvlNpc=mysplit(at)end;if string.find(at,"уровня")then testLvlNpc=mysplit(at)if string.find(testLvlNpc[3],"%?%?")then else ar="1"end;if string.find(testLvlNpc[2],"%?%?")then SendAddonMessage("NSGadd","#npcOff","guild")end;if string.find(testLvlNpc[1],"Труп")then SendAddonMessage("NSGadd","#npcDie","guild")end end end end end;return ar end;function EnumerateTooltipLines(au)local r;r=aq(au:GetRegions())return r end;function pLid()if UnitIsPartyLeader("party1")then pL=1 elseif UnitIsPartyLeader("party2")then pL=2 elseif UnitIsPartyLeader("party3")then pL=3 elseif UnitIsPartyLeader("party4")then pL=4 else pL=0 end;return pL end;function pM(av)if av==UnitName("party1")then r=1 elseif av==UnitName("party2")then r=1 elseif av==UnitName("party3")then r=1 elseif av==UnitName("party4")then r=1 else r=0 end;return r end;function testN()testNpc(UnitGUID("target"))end;function tblAllFail(aw,av)if mmList[aw]~=nil then for o=1,mmList[aw]["количество_боссов"]do if av==mmList[aw][o]then r=o;break else r=0 end end end;return r end;function testMarsh(ax,ay)trovMarsh(ax,ay)local az=0;for k,aA in pairs(mapTables[ax])do if type(k)=="string"then tKont=k end;for k,aA in pairs(mapTables[ax][k])do if type(k)=="string"then tLok=k end end end;if testQ["schet1"]~=nil then for o=testQ["schet1"]-10,testQ["schet1"]+10 do if testQ["schet"][o]~=nil then marshrut(o,tablelength(mapTables[ax][tKont][tLok]))az=az+testQ["schet"][o]if az>0 then break end end end end;return az end;function trovMarsh(ax,ay)if testKontLok(ax)~=nil then local x,y=GetPlayerMapPosition("player")local aB=GetCurrentMapContinent()aB=tostring(aB)local lok=GetCurrentMapZone()lok=tostring(lok)local aC=GetMapInfo()if aC=="Ragefire"then aB="99"lok="1"end;local aD=tablelength(mapTables[ax][aB][lok])testQ["schet"]={}testQ["numPunti"]={}if testQ["num"]==nil then if testKontLok(ax)<ay then testQ["num"]=1;testQ["schet1"]=1 end end;for o=testQ["num"]-10,testQ["num"]+10 do testQ["schet1"]=o;j=tostring(o)if testQ["старт"]~=nil then if mapTables[ax][aB][lok][j]~=nil then mioCel=sqrt((x-mapTables[ax][aB][lok][j]["x"])^2+(y-mapTables[ax][aB][lok][j]["y"])^2)if mioCel<ay then testQ["schet"][o]=1;j=testQ["num"]j=tostring(j)mioCel1=sqrt((x-mapTables[ax][aB][lok][j]["x"])^2+(y-mapTables[ax][aB][lok][j]["y"])^2)if mioCel1>mioCel then testQ["num"]=o;testQ["marshF"][o]=o;if testQ["marshF"][o]==math.modf(aD/4)then SendChatMessage("Я прошел четверть маршрута","OFFICER",nil,1)PlaySoundFile("Interface\\AddOns\\NSQC\\punto.ogg")end;if testQ["marshF"][o]==math.modf(aD/2)then SendChatMessage("Я прошел половину маршрута","OFFICER",nil,1)PlaySoundFile("Interface\\AddOns\\NSQC\\punto.ogg")end;if testQ["marshF"][o]==math.modf(aD/4*3)then SendChatMessage("Я прошел три четверти маршрута","OFFICER",nil,1)PlaySoundFile("Interface\\AddOns\\NSQC\\punto.ogg")end;if tonumber(aD)==tonumber(o)then SendChatMessage("Маршрут завершен","OFFICER",nil,1)PlaySoundFile("Interface\\AddOns\\NSQC\\fin.ogg")if marshruT~=nil then for o=1,9999 do if marshruT[o]~=nil then marshruT[o]:Hide()end end end;marshruT=nil;testQ["старт"]=nil;testQ["num"]=nil;testQ["marshF"]=nil;if ax=="evO0102"then testQ["evO0102"]=true;testQ["startChern"]=nil end;if ax=="evO0203"then testQ["evO0203"]=true;testQ["startChern"]=nil end;if ax=="evO0304"then testQ["evO0304"]=true;testQ["startChern"]=nil end;if ax=="evO0405"then testQ["evO0405"]=true;testQ["startChern"]=nil end;if ax=="evO0506"then testQ["evO0506"]=true;testQ["startChern"]=nil end;if ax=="evO0607"then testQ["evO0607"]=true;testQ["startChern"]=nil end;if ax=="evO0708"then testQ["evO0708"]=true;testQ["startChern"]=nil end;if ax=="evO0809"then testQ["evO0809"]=true;testQ["startChern"]=nil end;if ax=="evO0910"then testQ["evO0910"]=true;testQ["startChern"]=nil end;if ax=="evO1011"then testQ["evO1011"]=true;testQ["startChern"]=nil end;if ax=="evO11"then testQ["evO11"]=true;testQ["startChern"]=nil end;if ax=="evO12"then testQ["evO12"]=true;testQ["startChern"]=nil end;if ax=="evO13"then testQ["evO13"]=true;testQ["startChern"]=nil end;if ax=="evO14"then testQ["evO14"]=true;testQ["startChern"]=nil end;testQ["start"]=nil end end else testQ["schet"][o]=0 end end end end end end;function testKontLok(ax)local aB=GetCurrentMapContinent()aB=tostring(aB)local lok=GetCurrentMapZone()lok=tostring(lok)local mioCel;local x,y=GetPlayerMapPosition("player")local tKont,tLok;local aC=GetMapInfo()if aC=="Ragefire"then aB="99"lok="1"end;if mapTables~=nil then if mapTables[ax]~=nil then for k,aA in pairs(mapTables[ax])do if type(k)=="string"then tKont=k end;for k,aA in pairs(mapTables[ax][k])do if type(k)=="string"then tLok=k end end end;if tostring(lok)==tostring(tLok)then if ax~=nil then if mapTables[ax]~=nil then if tKont==aB then if mapTables[ax][aB][lok]~=nil then if tLok==lok then mioCel=sqrt((x-mapTables[ax][aB][lok]["1"]["x"])^2+(y-mapTables[ax][aB][lok]["1"]["y"])^2)return mioCel end end end end end end end end end;function startFchern(ax,i,aE)i=tostring(i)aE=tostring(aE)if krt[i]==true and krt[aE]==true then testQ["start"]=ax;testQ["старт"]=0;testQ[ax]="старт"marshruT={}end end;function testFchern(ax,i,aE)i=tostring(i)aE=tostring(aE)local tKont,tLok;if testQ[ax]==nil then for k,aA in pairs(mapTables[ax])do if type(k)=="string"then tKont=k end;for k,aA in pairs(mapTables[ax][tKont])do if type(k)=="string"then tLok=k end end end;if mapTables["lokRasstoyanie"][tostring(tKont)]~=nil then if mapTables["lokRasstoyanie"][tostring(tKont)][tostring(tLok)]~=nil then if testKontLok(ax)~=nil then if tonumber(testKontLok(ax))<=tonumber(mapTables["lokRasstoyanie"][tostring(tKont)][tostring(tLok)])*3 then startFchern(ax,i,aE)testQ["startChern"]=ax end end end end end end;function printPar(ax)local aF={}local aG;for k,aA in pairs(ax)do if k~=nil then table.insert(aF,k)end end;aG=table.concat(aF," ")return aG end;function otladka(aH,aI,aJ,aK,aL,aM,aN)local x;numF=tonumber(aH)if numF==1 then if aI=="testQ"then x=testQ end end;if numF==2 then if aI=="testQ"then x=testQ[aJ]end end;if numF==3 then if aI=="testQ"then x=testQ[aJ][aK]end end;if numF==4 then if aI=="testQ"then x=testQ[aJ][aK][aL]end end;if numF==5 then if aI=="testQ"then x=testQ[aJ][aK][aL][aM]end end;if numF==6 then if aI=="testQ"then x=testQ[aJ][aK][aL][aM][aN]end end;x=type(x)y=x;return x,y end;function tabellaFind(table,aO)local aP=1;while table[aP]do print(aO)print(table[aP])if aO==table[aP]then return 1 end;aP=aP+1 end;return nil end;function krtChernGetXY(aQ)aQ=tostring(aQ)for k,aA in pairs(krt["chernila"][aQ])do kont=k end;for k,aA in pairs(krt["chernila"][aQ][kont])do lok=k end;for k,aA in pairs(krt["chernila"][aQ][kont][lok])do if k=="x"then x=aA end;if k=="y"then y=aA end;if k=="msg"then m=aA end end;return kont,lok,x,y,m end;function mapQuest(aQ)aQ=tostring(aQ)for k,aA in pairs(testQ["mapQuest"][aQ])do kont=k end;for k,aA in pairs(testQ["mapQuest"][aQ][kont])do lok=k end;for k,aA in pairs(testQ["mapQuest"][aQ][kont][lok])do if k=="x"then x=aA end;if k=="y"then y=aA end;if k=="msg"then m=aA end;if k=="cel"then c=aA end end;return kont,lok,x,y,m,c end;function mapQuestP(aQ)aQ=tostring(aQ)testQ["mapQuest"]["podskazkiRez"]={}for k,aA in pairs(testQ["mapQuest"][aQ])do kont=k end;for k,aA in pairs(testQ["mapQuest"][aQ][kont])do lok=k end;for k,aA in pairs(testQ["mapQuest"][aQ][kont][lok])do if k=="podskazki"then for k,aA in pairs(testQ["mapQuest"][aQ][kont][lok]["podskazki"])do testQ["mapQuest"]["podskazkiRez"][k]=aA end end end end;function chern1P(aQ)aQ=tostring(aQ)krt["chernila"]["podskazkiRez"]={}for k,aA in pairs(krt["chernila"][aQ])do kont=k end;for k,aA in pairs(krt["chernila"][aQ][kont])do lok=k end;for k,aA in pairs(krt["chernila"][aQ][kont][lok])do if k=="podskazki"then for k,aA in pairs(krt["chernila"][aQ][kont][lok]["podskazki"])do krt["chernila"]["podskazkiRez"][k]=aA end end end end;function tabellaEnStr(aR,aS)local aT,az,af,k,x,aU;aR=tostring(aR)aS=tostring(aS)if testQ["chD"]==nil then testQ["chD"]={}end;if testQ["chD"][tostring(aR)]==nil then af="0"for aV,aA in pairs(krt["chernila"][aR])do x=aV end;for aV,aA in pairs(krt["chernila"][aR][x])do aU=aV end;aT=tablelength(krt["chernila"][aR][x][aU]["podskazki"])for o=1,aT do k=tostring(o)if az==nil then az=k.." "..txtXor(krt["chernila"][aR][x][aU]["podskazki"][k]).."\n"else az=az..k.." "..txtXor(krt["chernila"][aR][x][aU]["podskazki"][k]).."\n"end;af=tonumber(af)af=af+1;af=tostring(af)if af==aS then break end end else for aV,aA in pairs(krt["chernila"][aR])do x=aV end;for aV,aA in pairs(krt["chernila"][aR][x])do aU=aV end;az=aR.." выполнено\n"af=tablelength(krt["chernila"][aR][x][aU]["podskazki"])end;return az,af end;function txtXor(e)local aW=e:utf8sub(1,3)local aH;local aX;if aW~="###"then aH=string.utf8len(e)aX="###"for o=1,aH do aX=aX..string.format("%03d",alfabet(string.utf8sub(e,o,o)))end end;if aW=="###"then aX=alfabetC(tonumber(string.sub(e,4,6)),1)for o=7,#e,3 do aX=aX..alfabetC(tonumber(string.sub(e,o,o+2)),1)end end;return aX end;bcsQuickFrame={}function createQuickHtmlFrame(at,aH,aY)local aZ=GetTime()bcsQuickFrame[aY]=CreateFrame("SimpleHTML","BCSQuickFrame",UIParent)bcsQuickFrame[aY]:SetSize(222,222)bcsQuickFrame[aY]:SetFrameStrata("HIGH")bcsQuickFrame[aY]:SetPoint("CENTER",UIParent,"CENTER",33,aH)bcsQuickFrame[aY]:SetBackdropColor(0,103,51,1)bcsQuickFrame[aY]:SetFont('Fonts\\FRIZQT__.TTF',32)bcsQuickFrame[aY]:SetText("<html><body><p>|cff90ee90"..at.."</p></body></html>")end;dmG={}function dmgText(at,a_,aY,b0,b1)if dmG[aY]==nil then dmG[aY]=CreateFrame("SimpleHTML","dmG",a_)end;dmG[aY]:SetFrameStrata("FULLSCREEN_DIALOG")dmG[aY]:ClearAllPoints()dmG[aY]:SetBackdropColor(0,103,51,1)dmG[aY]:SetFont('Fonts\\FRIZQT__.TTF',13,"OUTLINE","MONOCHROME")if at~=""then if tonumber(at)<=9999 then dmG[aY]:SetSize(48,48)end;if tonumber(at)>9999 then dmG[aY]:SetSize(54,48)end;if tonumber(at)<=9999 then dmG[aY]:SetPoint("CENTER",a_,"CENTER",5,-10)end;if tonumber(at)>9999 then dmG[aY]:SetPoint("CENTER",a_,"CENTER",1,-10)end end;dmG[aY]:SetText("<html><body><p style='background-color: #12345a'> |cff"..b1 ..at.."</p></body></html>")end;dmG1={}function dmgText1(at,a_,aY,b0,b1)if dmG1[aY]==nil then dmG1[aY]=CreateFrame("SimpleHTML","dmG",a_)dmG1[aY]:SetFrameStrata("FULLSCREEN_DIALOG")dmG1[aY]:ClearAllPoints()dmG1[aY]:SetBackdropColor(0,103,51,1)dmG1[aY]:SetFont('Fonts\\FRIZQT__.TTF',13,"OUTLINE","MONOCHROME")end;if at~=""then if tonumber(at)<=9999 then dmG1[aY]:SetSize(48,48)end;if tonumber(at)>9999 then dmG1[aY]:SetSize(54,48)end;if tonumber(at)<=9999 then dmG1[aY]:SetPoint("CENTER",a_,"CENTER",5,-10)end;if tonumber(at)>9999 then dmG1[aY]:SetPoint("CENTER",a_,"CENTER",1,-10)end end;dmG1[aY]:SetText("<html><body><p style='background-color: #12345a'> |cff"..b1 ..at.."</p></body></html>")end;dmG2={}function dmgText2(at,a_,aY,b0,b1)if dmG2[aY]==nil then dmG2[aY]=CreateFrame("SimpleHTML","dmG",a_)dmG2[aY]:SetFrameStrata("FULLSCREEN_DIALOG")dmG2[aY]:ClearAllPoints()dmG2[aY]:SetBackdropColor(0,103,51,1)dmG2[aY]:SetFont('Fonts\\FRIZQT__.TTF',13,"OUTLINE","MONOCHROME")end;if at~=nil and at~=""then if tonumber(at)<=9999 then dmG2[aY]:SetSize(48,48)end;if tonumber(at)>9999 then dmG2[aY]:SetSize(54,48)end;if tonumber(at)<=9999 then dmG2[aY]:SetPoint("CENTER",a_,"CENTER",5,-10)end;if tonumber(at)>9999 then dmG2[aY]:SetPoint("CENTER",a_,"CENTER",1,-10)end end;if at~=nil then dmG2[aY]:SetText("<html><body><p style='background-color: #12345a'> |cff"..b1 ..at.."</p></body></html>")end end;rtnText={}function rtnTextF(at,aY,b2)if b2=="show"then if rtnText[aY]==nil then rtnText[aY]=CreateFrame("SimpleHTML","BCSQuickFrame",UIParent)rtnText[aY]:SetSize(460,396)rtnText[aY]:SetFrameStrata("TOOLTIP")rtnText[aY]:SetPoint("CENTER",UIParent,"CENTER",15,-55)rtnText[aY]:SetBackdropColor(0,0,0,0)rtnText[aY]:SetFont('Fonts\\FRIZQT__.TTF',33)end;rtnText[aY]:SetText("<html><body><p>|cff000000"..at.."</p></body></html>")rtnText[aY]:Show()else if rtnText[aY]~=nil then rtnText[aY]:Hide()end end end;function versFail(aH)if VerF==nil then VerF=CreateFrame("SimpleHTML","BCSQuickFrame",UIParent)end;VerF:SetSize(1111,888)VerF:SetFrameStrata("HIGH")if testQ["VerF"]==nil then testQ["VerF"]=600 end;VerF:SetPoint("CENTER",UIParent,"CENTER",testQ["VerF"],-355)VerF:SetBackdropColor(0,103,51,1)VerF:SetFont('Fonts\\FRIZQT__.TTF',aH+10)VerF:SetText("<html><body><p>|cffff0000ОБНОВИ АДДОН</p></body></html>")end;function marshrut(aY,b3)local j=aY-1;local b4=aY+1;local b5=aY+2;local b6=aY-2;local b7=aY+3;local b8=aY-3;if testQ["start"]~="evO3"then if marshruT~=nil then if marshruT[aY]==nil then marshruT[aY]=CreateFrame("SimpleHTML","marshrut",UIParent)marshruT[aY]:SetSize(222,222)marshruT[aY]:SetFrameStrata("HIGH")marshruT[aY]:SetPoint("CENTER",UIParent,"CENTER",333,111)marshruT[aY]:SetBackdropColor(0,103,51,1)marshruT[aY]:SetFont('Fonts\\FRIZQT__.TTF',32)marshruT[aY]:SetText("<html><body><p>|cff90ee90"..aY.." из "..tostring(b3).."</p></body></html>")end;if marshruT[j]~=nil then marshruT[j]:Hide()marshruT[j]=nil end;if marshruT[b4]~=nil then marshruT[b4]:Hide()marshruT[b4]=nil end;if marshruT[b5]~=nil then marshruT[b5]:Hide()marshruT[b5]=nil end;if marshruT[b6]~=nil then marshruT[b6]:Hide()marshruT[b6]=nil end;if marshruT[b7]~=nil then marshruT[b7]:Hide()marshruT[b7]=nil end;if marshruT[b8]~=nil then marshruT[b8]:Hide()marshruT[b8]=nil end end end end;function showOpt()for k,aA in pairs(InterfaceOptionsCombatTextPanelHealing)do print(k,aA)end end;function showRB(n)if debuffChkB==nil then debuffChkB={}end;if pokazat==1 and btn[1]~=nil then for ii=1,15 do if btn[ii]~=nil then btn[ii]:Hide()end end;btn[991]:Show()if tonumber(testQ["mioFldLvl"])~=0.5 and tonumber(testQ["mioFldLvl"])~=0.9 and tonumber(testQ["mioFldLvl"])~=nil then btn[14]:Show()end;myCheckButton1:Show()myCheckButton2:Show()myCheckButton3:Show()myCheckButton4:Show()myCheckButton5:Show()myCheckButton6:Show()myCheckButton7:Show()btn[998]:Show()btn[997]:Show()for o=1,20 do local name,b9,b9,b9,b9,b9,b9,b9=UnitDebuff("player",o)if name~=nil then debuffChkB[name]=createCheckbutton(UIParent,150,-20*o+230,name)debuffChkB[name].tooltip="Скрывать иконку "..name;debuffChkB[name]:SetScript("OnClick",function()if testQ[n]["настройки"]["debuffChkB"]==nil then testQ[n]["настройки"]["debuffChkB"]={}end;if testQ[n]["настройки"]["debuffChkB"][name]=="Disable"or testQ[n]["настройки"]["debuffChkB"][name]==nil then testQ[n]["настройки"]["debuffChkB"][name]="Enable"debuffChkB[name]:SetChecked(true)elseif testQ[n]["настройки"]["debuffChkB"][name]=="Enable"then testQ[n]["настройки"]["debuffChkB"][name]="Disable"debuffChkB[name]:SetChecked(false)end end)end end;pokazat=0;pokazatChk=1 elseif pokazat==0 then btn[991]:Hide()if tonumber(testQ["mioFldLvl"])~=0.5 and tonumber(testQ["mioFldLvl"])~=0.9 and tonumber(testQ["mioFldLvl"])~=nil then for ii=1,15 do if btn[ii]~=nil then btn[ii]:Show()end end;if btn[ii]~=nil then if testQ[n]["взятый_квест"]=="9999"then btn[1]:Show()btn[2]:Hide()end;if testQ[n]["взятый_квест"]~="9999"then btn[1]:Hide()btn[2]:Show()end end end;testQ["lvlProv"]=nil;myCheckButton1:Hide()myCheckButton2:Hide()myCheckButton3:Hide()myCheckButton4:Hide()myCheckButton5:Hide()myCheckButton6:Hide()myCheckButton7:Show()for k,aA in pairs(debuffChkB)do if debuffChkB[k]~=nil then debuffChkB[k]:Hide()end end;btn[998]:Hide()btn[997]:Hide()pokazat=1;pokazatChk=0 end end;function marSh()local aB=GetCurrentMapContinent()local lok=GetCurrentMapZone()local x,y=GetPlayerMapPosition("player")local aS;aB=tostring(aB)lok=tostring(lok)local aC=GetMapInfo()if aC=="Ragefire"then aB="99"lok="1"end;if marsh==nil then marsh={}end;if marsh[aB]==nil then marsh[aB]={}end;if marsh[aB][lok]==nil then marsh[aB][lok]={}end;local aS=tablelength(marsh[aB][lok])aS=tostring(aS+1)marsh[aB][lok][aS]={}testQ["marshK"]=aB;testQ["marshL"]=lok;testQ["marshN"]=aS;marsh[aB][lok][aS]["x"]=string.format("%.3f",x)marsh[aB][lok][aS]["y"]=string.format("%.3f",y)print(aS)end;function resObj(aY,ba,n)if krt==nil then krt={}end;if krt["podskazki"]==nil then krt["podskazki"]=1 end;if testQ["трудовые_ресурсы"]==nil then testQ["трудовые_ресурсы"]={}testQ["трудовые_ресурсы"]=0 end;if ba==n then if mioFld~=nil then if mioFld[ba]~=nil then if mioFld[ba]["целостность"]~=nil then if tonumber(testQ["трудовые_ресурсы"])<=tonumber(krt["podskazki"])then if mioFld[ba]["объекты"][tostring(aY)]~="hs"and mioFld[ba]["объекты"][tostring(aY)]~="zs"and mioFld[ba]["объекты"][tostring(aY)]~="zx"and mioFld[ba]["объекты"][tostring(aY)]~="sx"and mioFld[ba]["объекты"][tostring(aY)]~="tc"and mioFld[ba]["объекты"][tostring(aY)]~="as"and mioFld[ba]["объекты"][tostring(aY)]~="bc"and mioFld[ba]["объекты"][tostring(aY)]~="bs"and mioFld[ba]["объекты"][tostring(aY)]~="bx"and mioFld[ba]["объекты"][tostring(aY)]~="zc"and mioFld[ba]["объекты"][tostring(aY)]~="zp"and mioFld[ba]["объекты"][tostring(aY)]~="tz"and mioFld[ba]["объекты"][tostring(aY)]~="tv"and mioFld[ba]["объекты"][tostring(aY)]~="mf"and mioFld[ba]["объекты"][tostring(aY)]~="m0"and mioFld[ba]["объекты"][tostring(aY)]~="lx"and mioFld[ba]["объекты"][tostring(aY)]~="lp"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+50;testQ["трудовые_ресурсы"]=testQ["трудовые_ресурсы"]+0.02 else if mioFld[ba]["объекты"][tostring(aY)]=="f"then SendAddonMessage("tree "..tostring(aY),ba,"guild")end;mioFld[ba]["целостность"][tostring(aY)]=999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="m0"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<29999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+50;testQ["трудовые_ресурсы"]=testQ["трудовые_ресурсы"]+0.02 else mioFld[ba]["целостность"][tostring(aY)]=29999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="hs"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<9999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+50;testQ["трудовые_ресурсы"]=testQ["трудовые_ресурсы"]+0.02 else mioFld[ba]["целостность"][tostring(aY)]=9999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="tz"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<29999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+50;testQ["трудовые_ресурсы"]=testQ["трудовые_ресурсы"]+0.02 else mioFld[ba]["целостность"][tostring(aY)]=29999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="lx"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<19999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+50;testQ["трудовые_ресурсы"]=testQ["трудовые_ресурсы"]+0.02 else mioFld[ba]["целостность"][tostring(aY)]=19999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="zc"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<9999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+50;testQ["трудовые_ресурсы"]=testQ["трудовые_ресурсы"]+0.02 else mioFld[ba]["целостность"][tostring(aY)]=9999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="as"or mioFld[ba]["объекты"][tostring(aY)]=="bc"or mioFld[ba]["объекты"][tostring(aY)]=="bs"or mioFld[ba]["объекты"][tostring(aY)]=="bx"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<14999 then print('тут')mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+50;testQ["трудовые_ресурсы"]=testQ["трудовые_ресурсы"]+0.02 else print('тут3')mioFld[ba]["целостность"][tostring(aY)]=14999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="zs"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<19999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+50;testQ["трудовые_ресурсы"]=testQ["трудовые_ресурсы"]+0.02 else mioFld[ba]["целостность"][tostring(aY)]=19999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="tc"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<4999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+50;testQ["трудовые_ресурсы"]=testQ["трудовые_ресурсы"]+0.02 else mioFld[ba]["целостность"][tostring(aY)]=4999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="zx"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<19999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+50;testQ["трудовые_ресурсы"]=testQ["трудовые_ресурсы"]+0.02 else mioFld[ba]["целостность"][tostring(aY)]=19999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="sx"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<29999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+50;testQ["трудовые_ресурсы"]=testQ["трудовые_ресурсы"]+0.02 else mioFld[ba]["целостность"][tostring(aY)]=29999 end end else if mioFld[ba]["объекты"][tostring(aY)]~="hs"and mioFld[ba]["объекты"][tostring(aY)]~="zs"and mioFld[ba]["объекты"][tostring(aY)]~="zx"and mioFld[ba]["объекты"][tostring(aY)]~="sx"and mioFld[ba]["объекты"][tostring(aY)]~="tc"and mioFld[ba]["объекты"][tostring(aY)]~="as"and mioFld[ba]["объекты"][tostring(aY)]~="bx"and mioFld[ba]["объекты"][tostring(aY)]~="bc"and mioFld[ba]["объекты"][tostring(aY)]~="bs"and mioFld[ba]["объекты"][tostring(aY)]~="zc"and mioFld[ba]["объекты"][tostring(aY)]~="zp"and mioFld[ba]["объекты"][tostring(aY)]~="tz"and mioFld[ba]["объекты"][tostring(aY)]~="tv"and mioFld[ba]["объекты"][tostring(aY)]~="mf"and mioFld[ba]["объекты"][tostring(aY)]~="m0"and mioFld[ba]["объекты"][tostring(aY)]~="lx"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+5 else if mioFld[ba]["объекты"][tostring(aY)]=="f"then SendAddonMessage("tree "..tostring(aY),ba,"guild")end;mioFld[ba]["целостность"][tostring(aY)]=999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="hs"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<9999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+5 else mioFld[ba]["целостность"][tostring(aY)]=9999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="lx"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<19999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+5 else mioFld[ba]["целостность"][tostring(aY)]=19999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="tz"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<29999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+5 else mioFld[ba]["целостность"][tostring(aY)]=29999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="m0"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<29999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+5 else mioFld[ba]["целостность"][tostring(aY)]=29999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="zc"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<9999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+5 else mioFld[ba]["целостность"][tostring(aY)]=9999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="as"or mioFld[ba]["объекты"][tostring(aY)]=="bc"or mioFld[ba]["объекты"][tostring(aY)]=="bs"or mioFld[ba]["объекты"][tostring(aY)]=="bx"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<14999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+5 else mioFld[ba]["целостность"][tostring(aY)]=14999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="zs"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<19999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+5 else mioFld[ba]["целостность"][tostring(aY)]=19999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="tc"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<4999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+5 else mioFld[ba]["целостность"][tostring(aY)]=4999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="zx"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<19999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+5 else mioFld[ba]["целостность"][tostring(aY)]=19999 end end;if mioFld[ba]["объекты"][tostring(aY)]=="sx"then if tonumber(mioFld[ba]["целостность"][tostring(aY)])<29999 then mioFld[ba]["целостность"][tostring(aY)]=mioFld[ba]["целостность"][tostring(aY)]+5 else mioFld[ba]["целостность"][tostring(aY)]=29999 end end end;SendAddonMessage("resObj "..aY.." "..mioFld[ba]["целостность"][tostring(aY)],n,"guild")end end end else if mioFld~=nil then if mioFld[n]~=nil then if mioFld[n]["целостность"]~=nil then if tonumber(testQ["трудовые_ресурсы"])<=tonumber(krt["podskazki"])then if mioFld[n]["объекты"][tostring(aY)]~="hs"and mioFld[n]["объекты"][tostring(aY)]~="zs"and mioFld[n]["объекты"][tostring(aY)]~="zx"and mioFld[n]["объекты"][tostring(aY)]~="sx"and mioFld[n]["объекты"][tostring(aY)]~="tc"and mioFld[n]["объекты"][tostring(aY)]~="as"and mioFld[n]["объекты"][tostring(aY)]~="bc"and mioFld[n]["объекты"][tostring(aY)]~="bs"and mioFld[n]["объекты"][tostring(aY)]~="bx"and mioFld[n]["объекты"][tostring(aY)]~="zc"and mioFld[n]["объекты"][tostring(aY)]~="zp"and mioFld[n]["объекты"][tostring(aY)]~="tz"and mioFld[n]["объекты"][tostring(aY)]~="tv"and mioFld[n]["объекты"][tostring(aY)]~="m0"and mioFld[n]["объекты"][tostring(aY)]~="mf"and mioFld[n]["объекты"][tostring(aY)]~="lx"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<999 then if 5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=999 end end;if mioFld[n]["объекты"][tostring(aY)]=="hs"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<9999 then if 5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=9999 end end;if mioFld[n]["объекты"][tostring(aY)]=="lx"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<19999 then if 5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=19999 end end;if mioFld[n]["объекты"][tostring(aY)]=="tz"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<29999 then if 5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=29999 end end;if mioFld[n]["объекты"][tostring(aY)]=="m0"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<29999 then if 5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=29999 end end;if mioFld[n]["объекты"][tostring(aY)]=="zc"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<9999 then if 5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=9999 end end;if mioFld[n]["объекты"][tostring(aY)]=="as"or mioFld[n]["объекты"][tostring(aY)]=="bc"or mioFld[n]["объекты"][tostring(aY)]=="bs"or mioFld[n]["объекты"][tostring(aY)]=="bx"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<14999 then if 5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=14999 end end;if mioFld[n]["объекты"][tostring(aY)]=="zs"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<19999 then if 5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=19999 end end;if mioFld[n]["объекты"][tostring(aY)]=="zx"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<19999 then if 5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=19999 end end;if mioFld[n]["объекты"][tostring(aY)]=="tc"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<4999 then if 5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=4999 end end;if mioFld[n]["объекты"][tostring(aY)]=="sx"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<29999 then if 5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(5*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=29999 end end else if mioFld[n]["объекты"][tostring(aY)]~="hs"and mioFld[n]["объекты"][tostring(aY)]~="zs"and mioFld[n]["объекты"][tostring(aY)]~="zx"and mioFld[n]["объекты"][tostring(aY)]~="sx"and mioFld[n]["объекты"][tostring(aY)]~="tc"and mioFld[n]["объекты"][tostring(aY)]~="as"and mioFld[n]["объекты"][tostring(aY)]~="bc"and mioFld[n]["объекты"][tostring(aY)]~="bs"and mioFld[n]["объекты"][tostring(aY)]~="bx"and mioFld[n]["объекты"][tostring(aY)]~="zc"and mioFld[n]["объекты"][tostring(aY)]~="zp"and mioFld[n]["объекты"][tostring(aY)]~="tz"and mioFld[n]["объекты"][tostring(aY)]~="tv"and mioFld[n]["объекты"][tostring(aY)]~="m0"and mioFld[n]["объекты"][tostring(aY)]~="mf"and mioFld[n]["объекты"][tostring(aY)]~="lx"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<999 then if 1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=999 end end;if mioFld[n]["объекты"][tostring(aY)]=="hs"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<9999 then if 1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=9999 end end;if mioFld[n]["объекты"][tostring(aY)]=="lx"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<19999 then if 1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=19999 end end;if mioFld[n]["объекты"][tostring(aY)]=="tz"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<29999 then if 1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=29999 end end;if mioFld[n]["объекты"][tostring(aY)]=="m0"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<29999 then if 1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=29999 end end;if mioFld[n]["объекты"][tostring(aY)]=="tc"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<4999 then if 1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=4999 end end;if mioFld[n]["объекты"][tostring(aY)]=="as"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<14999 then if 1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=14999 end end;if mioFld[n]["объекты"][tostring(aY)]=="zs"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<19999 then if 1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=19999 end end;if mioFld[n]["объекты"][tostring(aY)]=="zx"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<19999 then if 1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=19999 end end;if mioFld[n]["объекты"][tostring(aY)]=="sx"then if tonumber(mioFld[n]["целостность"][tostring(aY)])<29999 then if 1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])<1 then local x=math.random(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"])*10,9)if x==9 then mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=tonumber(mioFld[n]["целостность"][tostring(aY)])+round(1*tonumber(testQ["mioFldLvl"])/tonumber(testQ["fldLvl"]))end else mioFld[n]["целостность"][tostring(aY)]=29999 end end end;SendAddonMessage("resObj "..aY.." "..mioFld[n]["целостность"][tostring(aY)],n,"guild")end end end end end;function gKam(ba,x)local bb=nil;if tonumber(x)==500 then for o=1,100 do if mioFld[ba]["объекты"][tostring(o)]=="sk"then if bb==nil then bb=1 else bb=bb+1 end end end;if bb==nil then testQ["kamen"]=testQ["kamen"]+1;testQ["nikQK"]=antc(testQ["kamen"])if ach_ach[11]==nil then SendAddonMessage("#achVSE",11,"guild")end;SendAddonMessage("ns_kP","0","guild")PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\k.ogg")elseif bb==1 then testQ["kamen"]=testQ["kamen"]+1;testQ["nikQK"]=antc(testQ["kamen"])if ach_ach[11]==nil then SendAddonMessage("#achVSE",11,"guild")end;SendAddonMessage("ns_kP","1","guild")PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\k.ogg")elseif bb==2 then testQ["kamen"]=testQ["kamen"]+1;testQ["nikQK"]=antc(testQ["kamen"])if ach_ach[11]==nil then SendAddonMessage("#achVSE",11,"guild")end;SendAddonMessage("ns_kP","2","guild")PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\k.ogg")elseif bb==3 then testQ["kamen"]=testQ["kamen"]+1;testQ["nikQK"]=antc(testQ["kamen"])if ach_ach[11]==nil then SendAddonMessage("#achVSE",11,"guild")end;SendAddonMessage("ns_kP","3","guild")PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\k.ogg")elseif bb==4 then testQ["kamen"]=testQ["kamen"]+1;testQ["nikQK"]=antc(testQ["kamen"])if ach_ach[11]==nil then SendAddonMessage("#achVSE",11,"guild")end;SendAddonMessage("ns_kP","4","guild")PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\k.ogg")elseif bb==5 then testQ["kamen"]=testQ["kamen"]+1;testQ["nikQK"]=antc(testQ["kamen"])if ach_ach[11]==nil then SendAddonMessage("#achVSE",11,"guild")end;SendAddonMessage("ns_kP","5","guild")PlaySoundFile("Interface\\AddOns\\NSQC\\libs\\k.ogg")end end end;function bdf(ba)if testQ==nil then testQ={}end;if testQ["myNome"]==nil then testQ["myNome"]={}end;if testQ[ba]["настройки"]==nil then testQ[ba]["настройки"]={}end;if testQ[ba]["настройки"]["debuffChkB"]==nil then testQ[ba]["настройки"]["debuffChkB"]={}end;if DebuffButton1~=nil then if tonumber(testQ["buffX"])~=nil and tonumber(testQ["buffX"])~=0 then local b9,b9,b9,bc=DebuffButton1:GetPoint()local b9,b9,b9,bd=btn[991]:GetPoint()if bc~=bd then local x,y=DebuffButton1:GetSize()local be=UIParent:GetSize()/2;j=1;for o=1,DEBUFF_MAX_DISPLAY do if AuraButton_Update("DebuffButton",o,"HARMFUL")then local name,b9,b9,b9,b9,b9,b9,b9=UnitDebuff("player",o)local bf=_G["DebuffButton"..o]if bf~=nil and(testQ[ba]["настройки"]["debuffChkB"][name]==nil or testQ[ba]["настройки"]["debuffChkB"][name]=="Disable")then bf:ClearAllPoints()if tonumber(testQ["buffX"])<be then bf:SetPoint("BOTTOMLEFT",UIParent,"BOTTOMLEFT",tonumber(testQ["buffX"])+x*j,testQ["buffY"])j=j+1 else bf:SetPoint("BOTTOMLEFT",UIParent,"BOTTOMLEFT",tonumber(testQ["buffX"])-x*j,testQ["buffY"])j=j+1 end else if bf~=nil and bf:IsVisible()then bf:Hide()end end end end end;if testQ["buffX"]==0 then testQ["buffX"]=nil end end end end;function gtest()gTest=nil;gTest={}for o=1,50 do local bg,bh,aW,r,bi,bj,d=GetWhoInfo(o)if bh==""then if r~="Дреней"and r~="Ночная эльфийка"and r~="Человек"and r~="Ночной эльф"and r~="Гном"and r~="Дворф"then table.insert(gTest,bg)end end end end;function closeFld()for o=1,100 do fBtn[o]:Hide()end;for o=1,100 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[o]~=nil then if o==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[o]:Hide()end end end end;btn[989]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("BOTTOMLEFT",GuildMemberDetailFrame,"TOPLEFT",96,-3)end;function hX()quesT("hide")okNo:configure(1,"hide")rtnTextF("fdsa",1,"hide")for o=1,100 do fBtn[o]:Hide()end;if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end;if okNo~=nil then okNo[1]:Hide()okNo[2]:Hide()end;btn[989]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("BOTTOMLEFT",GuildMemberDetailFrame,"TOPLEFT",96,-3)end;function showFld(bk,ba)local n;local bl;local bm;if not fBtn[1]:IsVisible()then if not GuildFrameLFGButton:GetChecked()or bk=="1"then if bk=="0"then n=GuildFrame["selectedName"]else n=ba end;btn[989]:ClearAllPoints()btn[989]:SetPoint("BOTTOMRIGHT",fBtn[10],"TOPRIGHT",1,1)for bn=1,GetNumGuildMembers(true)do local name,bo,bp,level,bq,br,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD=GetGuildRosterInfo(bn)if n~=ba then if name==n then bl=string.sub(bu,1,1)bm=string.sub(bu,2,2)if bu~=""and bl~="1"and bl~="0"then testQ["fldLvl"]=tonumber(bl)testQ["qNum"]=string.sub(bu,8,8)testQ["qDay"]=string.sub(bu,6,7)elseif bl=="1"then testQ["fldLvl"]=0.9;testQ["qNum"]=string.sub(bu,8,8)testQ["qDay"]=string.sub(bu,6,7)elseif bl=="0"then testQ["fldLvl"]=0.5;testQ["qNum"]=0;testQ["qDay"]=0 elseif bl==""then testQ["fldLvl"]=0.5;testQ["qNum"]=0;testQ["qDay"]=0 end;if bm==nil then testQ["fldLvl"]=0.5;testQ["qNum"]=0;testQ["qDay"]=0 end end;if name==ba then bl=string.sub(bu,1,1)if bu~=""and bl~="1"and bl~="0"then testQ["mioFldLvl"]=string.sub(bu,1,1)elseif bl=="1"then testQ["mioFldLvl"]=0.9 elseif bl=="0"then testQ["mioFldLvl"]=0.5 elseif bl==""then testQ["mioFldLvl"]=0.5 end end else if name==ba then bl=string.sub(bu,1,1)bm=string.sub(bu,2,2)if bu~=""and bl~="1"and bl~="0"then testQ["mioFldLvl"]=string.sub(bu,1,1)testQ["fldLvl"]=testQ["mioFldLvl"]testQ["qNum"]=string.sub(bu,8,8)testQ["qDay"]=string.sub(bu,6,7)elseif bl=="1"then testQ["mioFldLvl"]=0.9;testQ["fldLvl"]=testQ["mioFldLvl"]testQ["qNum"]=string.sub(bu,8,8)testQ["qDay"]=string.sub(bu,6,7)elseif bl=="0"then testQ["mioFldLvl"]=0.5;testQ["fldLvl"]=testQ["mioFldLvl"]testQ["qNum"]=0;testQ["qDay"]=0 elseif bl==""then testQ["mioFldLvl"]=0.5;testQ["fldLvl"]=testQ["mioFldLvl"]testQ["qNum"]=0;testQ["qDay"]=0 end;if bm==nil then testQ["mioFldLvl"]=0.5;testQ["fldLvl"]=testQ["mioFldLvl"]testQ["qNum"]=0;testQ["qDay"]=0 end end end;if tonumber(testQ["mioFldLvl"])==0 then testQ["mioFldLvl"]=0.5 end;if tonumber(testQ["fldLvl"])==0 then testQ["fldLvl"]=0.5 end end;testQ["fRand1"]=math.random(1,1000000)testQ['sign']=bk;SendAddonMessage("shMFld "..testQ["fRand1"],n.." "..ba,"guild")FriendsFrame:Hide()else for o=1,100 do fBtn[o]:Hide()end;btn[989]:ClearAllPoints()btn[989]:SetPoint("BOTTOMLEFT",GuildMemberDetailFrame,"TOPLEFT",96,-3)if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end;for o=1,100 do if dmG[o]~=nil and dmG[o]:IsVisible()then dmG[o]:Hide()end end;for o=1,3 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[o]~=nil then if o==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[o]:Hide()end end end end;for o=101,103 do if dmG[o]~=nil then dmG[o]:Hide()end end;if tonumber(testQ['sign'])==0 then FriendsFrame:Show()end;testQ['sign']=nil;testQ["fRandD1nome"]=nil end else for o=1,100 do fBtn[o]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("BOTTOMLEFT",GuildMemberDetailFrame,"TOPLEFT",96,-3)end;if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end;for o=1,100 do if dmG[o]~=nil and dmG[o]:IsVisible()then dmG[o]:Hide()end end;for o=1,100 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[o]~=nil then if o==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[o]:Hide()end end end end;for o=101,103 do if dmG[o]~=nil then dmG[o]:Hide()end end;if tonumber(testQ['sign'])==0 then FriendsFrame:Show()end;testQ['sign']=nil end end;function qLvl33c1()local bE;local bF;local bG;local bH;local bI;local bJ;local bK;bI=rndTblc(eMotC)["квест"]print(bI)bJ=eMotC[bI]["поиск"]bK=eMotC[bI]["ответ"]bE=rndTblc(npcListC1)["айди"]bF=npcListC1[bE]["имя"]bE=rndTblc(npcListC1)["айди"]bG=npcListC1[bE]["имя"]while true do if bF==bG then bE=rndTblc(npcListC1)["айди"]bG=npcListC1[bE]["имя"]else break end end;bE=rndTblc(npcListC1)["айди"]bH=npcListC1[bE]["имя"]while true do if bH==bG or bH==bF then bE=rndTblc(npcListC1)["айди"]bH=npcListC1[bE]["имя"]else break end end;return bI,bF,bG,bH,bJ,bK end;function qLvl33c2()local bE;local bF;local bG;local bH;local bI;local bJ;local bK;bI=rndTblc(eMotC)["квест"]print(bI)bJ=eMotC[bI]["поиск"]bK=eMotC[bI]["ответ"]bE=rndTblc(npcListC2)["айди"]bF=npcListC2[bE]["имя"]bE=rndTblc(npcListC2)["айди"]bG=npcListC2[bE]["имя"]while true do if bF==bG then bE=rndTblc(npcListC2)["айди"]bG=npcListC2[bE]["имя"]else break end end;bE=rndTblc(npcListC2)["айди"]bH=npcListC2[bE]["имя"]while true do if bH==bG or bH==bF then bE=rndTblc(npcListC2)["айди"]bH=npcListC2[bE]["имя"]else break end end;return bI,bF,bG,bH,bJ,bK end;function qLvl33c3()local bE;local bF;local bG;local bH;local bI;local bJ;local bK;bI=rndTblc(eMotC)["квест"]print(bI)bJ=eMotC[bI]["поиск"]bK=eMotC[bI]["ответ"]bE=rndTblc(npcListC3)["айди"]bF=npcListC3[bE]["имя"]bE=rndTblc(npcListC3)["айди"]bG=npcListC3[bE]["имя"]while true do if bF==bG then bE=rndTblc(npcListC3)["айди"]bG=npcListC3[bE]["имя"]else break end end;bE=rndTblc(npcListC3)["айди"]bH=npcListC3[bE]["имя"]while true do if bH==bG or bH==bF then bE=rndTblc(npcListC3)["айди"]bH=npcListC3[bE]["имя"]else break end end;return bI,bF,bG,bH,bJ,bK end;function rndTblc(bL)local bM={}for k in pairs(bL)do table.insert(bM,k)end;return bL[bM[math.random(#bM)]]end;function htimer(ba)local bN=0;for o=1,100 do if mioFld[ba]["объекты"][tostring(o)]=="to"then bN="to"end end;if testQ[ba]["dTimer"][30]==nil then testQ[ba]["dTimer"][30]=26000 end;if testQ[ba]["dTimer"][tonumber(date("%d"))-1]==nil then testQ[ba]["dTimer"][tonumber(date("%d"))-1]=26000 end;if tonumber(testQ["mioFldLvl"])==0.5 or tonumber(testQ["mioFldLvl"])==0.9 then if testQ[ba]["hTimer"]==nil then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]==nil and testQ[ba]["dTimer"][30]==nil then if bN~="to"then testQ[ba]["hTimer"]=50400 else testQ[ba]["hTimer"]=26000 end else if tonumber(date("%d"))~=1 then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]>10800 then if bN~="to"then testQ[ba]["hTimer"]=testQ[ba]["dTimer"][tonumber(date("%d"))-1]else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(testQ[ba]["dTimer"][tonumber(date("%d"))-1])/1.5))end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end else if testQ[ba]["dTimer"][30]~=nil and testQ[ba]["dTimer"][30]>10800 then if bN~="to"then testQ[ba]["hTimer"]=testQ[ba]["dTimer"][30]else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(testQ[ba]["dTimer"][30])/1.5))end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end end end end elseif tonumber(testQ["mioFldLvl"])==2 then if testQ[ba]["hTimer"]==nil then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]==nil and testQ[ba]["dTimer"][30]==nil then if bN~="to"then testQ[ba]["hTimer"]=25200 else testQ[ba]["hTimer"]=16000 end else if tonumber(date("%d"))~=1 then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/2))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/2))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end else if testQ[ba]["dTimer"][30]~=nil and testQ[ba]["dTimer"][30]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/2))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/2))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end end end end elseif tonumber(testQ["mioFldLvl"])==3 then if testQ[ba]["hTimer"]==nil then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]==nil and testQ[ba]["dTimer"][30]==nil then if bN~="to"then testQ[ba]["hTimer"]=14500 else testQ[ba]["hTimer"]=10000 end else if tonumber(date("%d"))~=1 then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/3))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/3))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end else if testQ[ba]["dTimer"][30]~=nil and testQ[ba]["dTimer"][30]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/3))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/3))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end end end end elseif tonumber(testQ["mioFldLvl"])==4 then if testQ[ba]["hTimer"]==nil then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]==nil and testQ[ba]["dTimer"][30]==nil then if bN~="to"then testQ[ba]["hTimer"]=11000 else testQ[ba]["hTimer"]=8000 end else if tonumber(date("%d"))~=1 then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/4))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/4))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end else if testQ[ba]["dTimer"][30]~=nil and testQ[ba]["dTimer"][30]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/4))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/4))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end end end end elseif tonumber(testQ["mioFldLvl"])==5 then if testQ[ba]["hTimer"]==nil then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]==nil and testQ[ba]["dTimer"][30]==nil then if bN~="to"then testQ[ba]["hTimer"]=10500 else testQ[ba]["hTimer"]=7000 end else if tonumber(date("%d"))~=1 then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/5))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/5))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end else if testQ[ba]["dTimer"][30]~=nil and testQ[ba]["dTimer"][30]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/5))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/5))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end end end end elseif tonumber(testQ["mioFldLvl"])==6 then if testQ[ba]["hTimer"]==nil then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]==nil and testQ[ba]["dTimer"][30]==nil then if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end else if tonumber(date("%d"))~=1 then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/6))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/6))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end else if testQ[ba]["dTimer"][30]~=nil and testQ[ba]["dTimer"][30]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/6))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/6))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end end end end elseif tonumber(testQ["mioFldLvl"])==7 then if testQ[ba]["hTimer"]==nil then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]==nil and testQ[ba]["dTimer"][30]==nil then if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end else if tonumber(date("%d"))~=1 then if testQ[ba]["dTimer"][tonumber(date("%d"))-1]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/7))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/7))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end else if testQ[ba]["dTimer"][30]~=nil and testQ[ba]["dTimer"][30]>10800 then if bN~="to"then testQ[ba]["hTimer"]=tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/7))if testQ[ba]["hTimer"]<10800 then testQ[ba]["hTimer"]=10800 end else testQ[ba]["hTimer"]=tonumber(string.format("%u",tonumber(string.format("%u",testQ[ba]["dTimer"][tonumber(date("%d"))-1]/7))/1.5))if testQ[ba]["hTimer"]<7000 then testQ[ba]["hTimer"]=7000 end end else if bN~="to"then testQ[ba]["hTimer"]=10800 else testQ[ba]["hTimer"]=7000 end end end end end end end;function ml1(ml1)for k,aA in pairs(AuctionFrame)do print(k,aA,aA[1],aA[2],aA[3])end end;function ml()if BrowseBuyoutButton~=nil then if aucBtn==nil then aucBtn=CreateFrame("Button",nil,UIParent,"")aucBtn:SetFrameStrata("TOOLTIP")aucBtn:SetSize(222,32)aucBtn:SetPoint("CENTER",BrowseBidButton,"CENTER",22,0)aucBtn:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\auk.tga")aucBtn:Hide()end;name,texture,count,quality,canUse,level,levelColHeader,minBid,minIncrement,buyoutPrice,bidAmount,highBidder,owner,saleStatus,itemId,hasAllInfo=GetAuctionItemInfo("list",tonumber(GetSelectedAuctionItem("list")))if name=="Обычное письмо"then aucBtn:Show()if highBidder=="Хефе"then aucBtn:Hide()end else if aucBtn~=nil then aucBtn:Hide()end end end;if Atr_Buy1_Button~=nil and Atr_Buy1_Button:IsVisible()then if aucBtn==nil then aucBtn=CreateFrame("Button",nil,UIParent,"")aucBtn:SetFrameStrata("TOOLTIP")aucBtn:SetSize(222,32)aucBtn:SetPoint("CENTER",BrowseBidButton,"CENTER",22,0)aucBtn:SetNormalTexture("Interface\\AddOns\\NSQC\\libs\\auk.tga")aucBtn:Hide()end;if Atr_Search_Box:IsVisible()and Atr_Search_Box:GetText()=="Обычное письмо"then aucBtn:Show()aucBtn:SetSize(422,32)else if aucBtn~=nil then aucBtn:Hide()end end end end;function diffT(d,bg)for o=1,100 do if d[o]~=bg[o]then return false end end;return true end;function antc(bO)shablon="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ !?,.-0123456789'()"myB=string.find(shablon,tostring(bO):sub(1,1),1,true)if tonumber(#tostring(bO))>=2 then for o=2,#tostring(bO)do myB=myB..string.find(shablon,tostring(bO):sub(o,o),1,true)end end;return myB end;function ochered(bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY)local bZ=UnitClass("player")local b_=0;local x;for o=1,24 do if bR==1 then x=UnitDebuff("target",o)end;if bS==1 then x=UnitBuff("player",o)end;if x~=nil then if x==bP then b_=1 end end end;for k,aA in pairs(testQ["skills"])do if testQ["skills"][k]==bP then b_=1 end end;local c0=0;if bW~=nil then c0=c0+1 end;if bX~=nil then c0=c0+1 end;if bY~=nil then c0=c0+1 end;local b9,b9,b9,c1=GetSpellInfo(bP)if c1==nil then c1=0 end;if bZ=="Друид"then c1=30 end;if bU=="m"then if UnitPower("player")<c1 and IsUsableSpell(bP)and GetSpellCooldown(bP)==0 then if b_~=1 then if bQ==0 then table.insert(testQ["skills"],bQ,bP)end;if bQ==1 then table.insert(testQ["skills"],bP)end end else for k,aA in pairs(testQ["skills"])do if testQ["skills"][k]~=nil then if testQ["skills"][k]==bP then testQ["skills"][k]=nil end end end end end;local b9,b9,b9,c1=GetSpellInfo(bP)if c1==nil then c1=0 end;if bU=="b"then if UnitPower("player")>=c1 and IsUsableSpell(bP)and GetSpellCooldown(bP)==0 then if b_~=1 then if bQ==0 then table.insert(testQ["skills"],1,bP)end;if bQ==1 then table.insert(testQ["skills"],bP)end else end else for k,aA in pairs(testQ["skills"])do if testQ["skills"][k]~=nil then if testQ["skills"][k]==bP then testQ["skills"][k]=nil end end end end end;if bT~=nil and IsUsableSpell(bP)and GetSpellCooldown(bP)==0 and bV==nil then if bZ=="Паладин"then if bP=="Праведное неистовство"then if b_~=1 then PlaySoundFile(bT)end end else if bP~="Власть льда"then PlaySoundFile(bT)end end;if bZ=="Рыцарь смерти"then if bP=="Власть льда"then if b_~=1 then PlaySoundFile(bT)end end else if bP~="Праведное неистовство"then PlaySoundFile(bT)end end end;if bP=="Мясорубка"then if tonumber(GetComboPoints("player",target))==1 and b_~=1 then PlaySoundFile("Interface\\AddOns\\NSQC\\punto.ogg")end end;if bV==1 then if UnitHealth("player")<=tonumber(UnitHealthMax("player"))/2 and GetSpellCooldown(bP)==0 then table.insert(testQ["skills"],bQ,bP)if bT~=nil then PlaySoundFile(bT)end else for k,aA in pairs(testQ["skills"])do if testQ["skills"][k]~=nil then if testQ["skills"][k]==bP then testQ["skills"][k]=nil end end end end end end;function partyFrameHide()for o=1,25 do local c2=_G["PartyMemberFrame"..o]if c2~=nil and c2:IsVisible()then c2:Hide()end end end;function bs()local bs;local bZ=UnitClass("player")local c3=UnitStat("player",1)local c4=UnitStat("player",2)local c5=UnitStat("player",3)local c6=UnitStat("player",4)local c7=UnitStat("player",5)local c8=GetSpellBonusHealing()local c9=GetCombatRating(6)local ca=GetCombatRating(9)local cb=GetCombatRating(24)local cc=GetCombatRating(2)local cd=GetCombatRating(3)local ce=GetCombatRating(4)local cf=GetCombatRating(5)local c1=GetManaRegen()local cg=GetCombatRating(25)local x,y=UnitAttackPower("player")local ch=GetCombatRating(18)local ci=x+y;local e;local cj=0;if bZ=="Жрец"or bZ=="Жрица"then local b9,b9,b9,b9,ck=GetTalentInfo(3,27)if ck>=1 then bs=c6+c7*0.5+c8*2+c9+ca*2+c1*0.5+ch;cj=c9 .."/".."446"else bs=c6+c7*1.5+c8*2+ca+c1*1.5+ch;cj=c9 .."/".."0"end end;if bZ=="Паладин"then local b9,b9,b9,b9,cl=GetTalentInfo(1,26)local b9,b9,b9,b9,cm=GetTalentInfo(2,26)local b9,b9,b9,b9,cn=GetTalentInfo(3,26)if cl>=1 then bs=c6*2+c7+c8*1.5+ca+c1+ch*1.5;cj=c9 .."/".."0"end;if cm>=1 then bs=c3+c4+c5*2+c9+cb+cc*1.5+cd*1.5+ce*1.5+cf*1.5;cj=c9 .."/".."263".." маст./кап: "..cb.."/185"end;if cn>=1 then bs=c3*2+c4+c9+ca+ci+ch+cb;cj=c9 .."/".."263".." маст./кап: "..cb.."/148"end end;if bZ=="Воин"then local b9,b9,b9,b9,co=GetTalentInfo(3,7)if co>=1 then bs=c3+c4+c5*2+c9+cb+cc*1.5+cd*1.5+ce*1.5+cf*1.5;cj=c9 .."/".."263".." маст./кап: "..cb.."/164"else bs=c3*2+c4+c9+ca*1.5+cb+cg*2+ci+ch;cj=c9 .."/".."263".." маст./кап: "..cb.."/164".." рпб/кап: "..cg.."/1400"end end;if bZ=="Друид"then local b9,b9,b9,b9,cp=GetTalentInfo(3,27)local b9,b9,b9,b9,cq=GetTalentInfo(2,5)local b9,b9,b9,b9,cr=GetTalentInfo(1,13)local b9,b9,b9,b9,cs=GetTalentInfo(2,9)if cp>=1 then bs=c6+c7*1.5+c8*2+ch*1.5+ca+c1*1.5;cj=c9 .."/".."0"end;if cq>=1 then bs=c3+c4*2+c5*2+c9+ca+ch*1.5+cb+cc*1.5+cd*2+cg;cj=c9 .."/".."263".." маст./кап: "..cb.."/132/282".." рпб/кап: "..cg.."/??"end;if cr>=1 then bs=c6+c7*0.5+c8*2+c9+ca*2+c1*0.5+ch;cj=c9 .."/".."263"end;if cs>=1 then bs=c3+c4*2+c9+ca*1.5+cb+cg*2+ci+ch;cj=c9 .."/".."263".." маст./кап: "..cb.."/132".." рпб/кап: "..cg.."/1400"end end;if bZ=="Разбойник"or bZ=="Разбойница"then bs=c3+c4*2+c9+ca+cg*2+cb+ci+ch;cj=c9 .."/".."263".."/".."722".." маст./кап: "..cb.."/132".." рпб/кап: "..cg.."/1400"end;if bZ=="Чернокнижник"or bZ=="Чернокнижница"then bs=c6+c7*1.5+c8*2+c9+ca*1.5+c1*0.5+ch*1.5;cj=c9 .."/".."290"end;if bZ=="Шаман"then local b9,b9,b9,b9,ct=GetTalentInfo(1,3)local b9,b9,b9,b9,cu=GetTalentInfo(2,9)local b9,b9,b9,b9,cv=GetTalentInfo(3,1)if ct>=1 then bs=c6+c8*2+ca+c9+ch*1.5;cj=c9 .."/".."368"end;if cu>=1 then bs=c3+c4*2+c9+ca*1.5+cg+ci+ch*1.5+cb+c8*0.5;cj=c9 .."/".."386".."/".."689".." маст./кап: "..cb.."/140"end;if cv>=1 then bs=c6+c7+c8*2+ca+c1*2+ch*2;cj=c9 .."/".."0".." c./кап: "..ch.."/1269/2100"end end;if bZ=="Охотник"or bZ=="Охотница"then bs=c4*2+c9+ca+cg*2+ci+ch;cj=c9 .."/".."263".." рпб/кап: "..cg.."/1400"end;if bZ=="Рыцарь смерти"then local b9,b9,b9,b9,co=GetTalentInfo(1,7)local b9,b9,b9,b9,cw=GetTalentInfo(2,3)local b9,b9,b9,b9,cx=GetTalentInfo(3,3)if co>=1 or cw>=1 or cx>=1 then bs=c3+c4+c5*2+c9+cb+cc*1.5+cd*1.5;cj=c9 .."/".."263".." маст./кап: "..cb.."/170/409"else bs=c3*2+c4+c9+ca+cb+cg+ci;cj=c9 .."/".."263".." маст./кап: "..cb.."/170".." рпб/кап: "..cg.."/1400"end end;if bZ=="Маг"then bs=c6+c7+c8*2+c9+ca*1.5+ch*1.5;cj=c9 .."/".."446"end;return string.format("%d",bs).." хит/кап: "..cj end;GameTooltip:HookScript("OnShow",function(self)local bZ=UnitClass("player")local bs=0;local cy;local c3=0;local c4=0;local c5=0;local c6=0;local c7=0;local c8=0;local c9=0;local ca=0;local cb=0;local cc=0;local cd=0;local ce=0;local cf=0;local c1=0;local cg=0;local ci=0;local ch=0;local cz=0;local cA=0;local cB=0;local cC=0;local cD=0;local cE=0;local cF=0;local cG=0;local cH=0;local cI=0;local cJ=0;local cK=0;local ii;for o=1,self:NumLines()do if _G["GameTooltipTextLeft"..o]:GetText()~=nil then if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,1)=="+"or string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,1)=="|"then cy=mysplit(_G["GameTooltipTextLeft"..o]:GetText())if cy[3]~=nil and string.utf8sub(cy[3],1,3)=="вын"then if c5==0 then c5=tonumber(string.utf8sub(cy[1],2))end;if c5==nil then c5=tonumber(string.utf8sub(cy[1],11))ii=o end;if c5~=0 and ii~=o then if tonumber(cy[1]:sub(2))~=nil then else c5=c5+tonumber(cy[1]:sub(11))end end end;if cy[3]~=nil and string.utf8sub(cy[3],1,3)=="лов"then if c4==0 then c4=tonumber(string.utf8sub(cy[1],2))end;if c4==nil then c4=tonumber(string.utf8sub(cy[1],11))ii=o end;if c4~=0 and ii~=o then if tonumber(cy[1]:sub(2))~=nil then else c4=c4+tonumber(cy[1]:sub(11))end end end;if cy[3]~=nil and string.utf8sub(cy[3],1,3)=="сил"then if cy[4]==nil then if c3==0 then c3=tonumber(string.utf8sub(cy[1],2))end;if c3==nil then c3=tonumber(string.utf8sub(cy[1],11))ii=o end;if c3~=0 and ii~=o then if tonumber(cy[1]:sub(2))~=nil then else c3=c3+tonumber(cy[1]:sub(11))end end end end;if cy[3]~=nil and string.utf8sub(cy[3],1,3)=="инт"then if c6==0 then c6=tonumber(string.utf8sub(cy[1],2))end;if c6==nil then c6=tonumber(string.utf8sub(cy[1],11))ii=o end;if c6~=0 and ii~=o then if tonumber(cy[1]:sub(2))~=nil then else c6=c6+tonumber(cy[1]:sub(11))end end end;if cy[3]~=nil and string.utf8sub(cy[3],1,3)=="дух"then if c7==0 then c7=tonumber(string.utf8sub(cy[1],2))end;if c7==nil then c7=tonumber(string.utf8sub(cy[1],11))ii=o end;if c7~=0 and ii~=o then if tonumber(cy[1]:sub(2))~=nil then else c7=c7+tonumber(cy[1]:sub(11))end end end;if cy[4]~=nil and string.utf8sub(cy[4],1,3)=="ата"then ci=tonumber(cy[1]:sub(2))if ci==nil then ci=tonumber(cy[1]:sub(11))end end;if cy[4]~=nil and string.utf8sub(cy[4],1,3)=="кри"then ca=tonumber(cy[1]:sub(2))if ca==nil then ca=tonumber(cy[1]:sub(11))end end;if cy[4]~=nil and string.utf8sub(cy[4],1,3)=="мас"then cb=tonumber(cy[1]:sub(2))if cb==nil then cb=tonumber(cy[1]:sub(11))end end;if cy[4]~=nil and string.utf8sub(cy[4],1,3)=="зак"then c8=tonumber(cy[1]:sub(2))if c8==nil then c8=tonumber(cy[1]:sub(11))end end;if cy[4]~=nil and string.utf8sub(cy[4],1,3)=="мет"then c9=tonumber(cy[1]:sub(2))if c9==nil then c9=tonumber(cy[1]:sub(11))end end;if cy[4]~=nil and string.utf8sub(cy[4],1,3)=="ско"then c9=tonumber(cy[1]:sub(2))if c9==nil then c9=tonumber(cy[1]:sub(11))end end;if cy[4]~=nil and string.utf8sub(cy[4],1,3)=="защ"then cc=tonumber(cy[1]:sub(2))if cc==nil then cc=tonumber(cy[1]:sub(11))end end;if cy[4]~=nil and string.utf8sub(cy[4],1,3)=="укл"then cd=tonumber(cy[1]:sub(2))if cd==nil then cd=tonumber(cy[1]:sub(11))end end;if cy[4]~=nil and string.utf8sub(cy[4],1,3)=="пар"then ce=tonumber(cy[1]:sub(2))if ce==nil then ce=tonumber(cy[1]:sub(11))end end;if cy[4]~=nil and string.utf8sub(cy[4],1,3)=="бло"then cf=tonumber(cy[1]:sub(2))if cf==nil then cf=tonumber(cy[1]:sub(11))end end;if cy[4]~=nil and string.utf8sub(cy[4],1,3)=="про"then cg=tonumber(cy[1]:sub(2))if cg==nil then cg=tonumber(cy[1]:sub(11))end end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"атаки")then cJ=tonumber(string.match(_G["GameTooltipTextLeft"..o]:GetText(),'%S+$'))end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"критического")then cB=tonumber(string.match(_G["GameTooltipTextLeft"..o]:GetText(),'%S+$'))end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"мастерства")then cC=tonumber(string.match(_G["GameTooltipTextLeft"..o]:GetText(),'%S+$'))end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"заклинаний")then cz=tonumber(string.match(_G["GameTooltipTextLeft"..o]:GetText(),'%S+$'))end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"меткости")then cA=tonumber(string.match(_G["GameTooltipTextLeft"..o]:GetText(),'%S+$'))end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"скорости")then cK=tonumber(string.match(_G["GameTooltipTextLeft"..o]:GetText(),'%S+$'))end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"защиты")then cD=tonumber(string.match(_G["GameTooltipTextLeft"..o]:GetText(),'%S+$'))end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"уклонения")then cE=tonumber(string.match(_G["GameTooltipTextLeft"..o]:GetText(),'%S+$'))end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"парирования")then cF=tonumber(string.match(_G["GameTooltipTextLeft"..o]:GetText(),'%S+$'))end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"блокирования")then cG=tonumber(string.match(_G["GameTooltipTextLeft"..o]:GetText(),'%S+$'))end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"Восполнение")then cH=mysplit(_G["GameTooltipTextLeft"..o]:GetText())cH=tonumber(cH[5])end end;if string.utf8sub(_G["GameTooltipTextLeft"..o]:GetText(),1,4)=="Если"then if string.find(_G["GameTooltipTextLeft"..o]:GetText(),"пробивания")then cI=tonumber(string.match(_G["GameTooltipTextLeft"..o]:GetText(),'%S+$'))end end end end;if ci==nil then ci=0 end;if c3==nil then c3=0 end;if c4==nil then c4=0 end;if c5==nil then c5=0 end;if c6==nil then c6=0 end;if c7==nil then c7=0 end;if c8==nil then c8=0 end;if c9==nil then c9=0 end;if ca==nil then ca=0 end;if cb==nil then cb=0 end;if cc==nil then cc=0 end;if cd==nil then cd=0 end;if ce==nil then ce=0 end;if cf==nil then cf=0 end;if c1==nil then c1=0 end;if cg==nil then cg=0 end;if cJ==nil then cJ=0 end;if cz==nil then cz=0 end;if cA==nil then cA=0 end;if cB==nil then cB=0 end;if cC==nil then cC=0 end;if cD==nil then cD=0 end;if cE==nil then cE=0 end;if cF==nil then cF=0 end;if cG==nil then cG=0 end;if cH==nil then cH=0 end;if cI==nil then cI=0 end;if cK==nil then cK=0 end;if ch==nil then ch=0 end;if bZ=="Жрец"or bZ=="Жрица"then local b9,b9,b9,b9,ck=GetTalentInfo(3,27)if ck>=1 then bs=c6+c7*0.5+c8*2+cz*2+c9+cA+ca*2+cB*2+c1*0.5+cH*0.5+ch+cK else bs=c6+c7*1.5+c8*2+ca+c1*1.5+ch+cz*2+cB+cH*1.5+cK end end;if bZ=="Паладин"then local b9,b9,b9,b9,cl=GetTalentInfo(1,26)local b9,b9,b9,b9,cm=GetTalentInfo(2,26)local b9,b9,b9,b9,cn=GetTalentInfo(3,26)if cl>=1 then bs=c6*2+c7+c8*1.5+ca+c1+ch*1.5+cz*1.5+cB+cH+cK*1.5 end;if cm>=1 then bs=c3+c4+c5*2+c9+cb+cc*1.5+cd*1.5+ce*1.5+cf*1.5+cA+cC+cD*1.5+cE*1.5+cF*1.5+cG*1.5 end;if cn>=1 then bs=c3*2+c4+c9+ca+ci+ch+cb+cA+cB+cJ+cK+cC end end;if bZ=="Воин"then local b9,b9,b9,b9,co=GetTalentInfo(3,7)if co>=1 then bs=c3+c4+c5*2+c9+cb+cc*1.5+cd*1.5+ce*1.5+cf*1.5+cA+cC+cD*1.5+cE*1.5+cF*1.5+cG*1.5 else bs=c3*2+c4+c9+ca*1.5+cb+cg*2+ci+ch+cA+cB*1.5+cC+cI*2+cJ+cK end end;if bZ=="Друид"then local b9,b9,b9,b9,cp=GetTalentInfo(3,27)local b9,b9,b9,b9,cq=GetTalentInfo(2,5)local b9,b9,b9,b9,cr=GetTalentInfo(1,13)local b9,b9,b9,b9,cs=GetTalentInfo(2,9)if cp>=1 then bs=c6+c7*1.5+c8*2+ch*1.5+ca+c1*1.5+cz*2+cK*1.5+cB+cH*1.5 end;if cq>=1 then bs=c3+c4*2+c5*2+c9+ca+ch*1.5+cb+cc*1.5+cd*2+cg+cA+cB+cK*1.5+cC+cD*1.5+cE*2+cI end;if cr>=1 then bs=c6+c7*0.5+c8*2+c9+ca*2+c1*0.5+ch+cz*2+cA+cB*2+cH*0.5+cK end;if cs>=1 then bs=c3+c4*2+c9+ca*1.5+cb+cg*2+ci+ch+cA+cB*1.5+cC+cI*2+cJ+cK end end;if bZ=="Разбойник"or bZ=="Разбойница"then bs=c3+c4*2+c9+ca+cg*2+cb+ci+ch+cA+cB+cI*2+cC+cJ+cK end;if bZ=="Чернокнижник"or bZ=="Чернокнижница"then bs=c6+c7*1.5+c8*2+c9+ca*1.5+c1*0.5+ch*1.5+cz*2+cA+cB*1.5+cH*0.5+cK*1.5 end;if bZ=="Шаман"then local b9,b9,b9,b9,ct=GetTalentInfo(1,3)local b9,b9,b9,b9,cu=GetTalentInfo(2,9)local b9,b9,b9,b9,cv=GetTalentInfo(3,1)if ct>=1 then bs=c6+c8*2+ca+c9+(ch*1.5)(cz*2)+cB+cA+cK*1.5 end;if cu>=1 then bs=c3+c4*2+c9+ca*1.5+cg+ci+ch*1.5+cb+c8+cA+cB*1.5+cI+cJ+cK*1.5+cC+cz end;if cv>=1 then bs=c6+c7+c8*2+ca+c1*2+ch*2+cz*2+cB+cH*2+cK*2 end end;if bZ=="Охотник"or bZ=="Охотница"then bs=c4*2+c9+ca+cg*2+ci+ch+cA+cB+cI*2+cJ+cK end;if bZ=="Рыцарь смерти"then local b9,b9,b9,b9,co=GetTalentInfo(1,7)local b9,b9,b9,b9,cw=GetTalentInfo(2,3)local b9,b9,b9,b9,cx=GetTalentInfo(3,3)if co>=1 or cw>=1 or cx>=1 then bs=c3+c4+c5*2+c9+cb+cc*1.5+cd*1.5+cA+cC+cD*1.5+cE*1.5 else bs=c3*2+c4+c9+ca+cb+cg+ci+cA+cB+cC+cI+cJ end end;if bZ=="Маг"then bs=c6+c7+c8*2+c9+ca*1.5+ch*1.5+cz*2+cA+cB*1.5+cK*1.5 end;GameTooltip:AddLine("|cff00BFFFбс: |cffFF8C00"..bs)GameTooltip:Show()end)
