function mysplit(B,I)if I==nil then I="\037\115"end local o={}for B in string.gmatch(B,"\040\091\094"..(I.."\093\043\041"))do table.insert(o,B)end return o end local function B()return GetNumRaidMembers()>0 end function round(B)if(B-B%.1)-(B-B%1)<.5 then B=B-B%1 else B=(B-B%1)+1 end return B end function nsplit(B)lines={}for B in B:gmatch("\091\094\r\n\093\043")do table.insert(lines,B)end return lines end function all_trim(B)return B:match("\094\037\115\042\040\046-\041\037\115\042\036")end function kirTest(B,I)test1=B:sub(I,I)testN=B:byte(7)testN=tonumber(testN)if testN==208 then r=B:sub(I*2-1,I*2)else r=test1 end return r end function alfabet(B)shablon="\208\176\208\177\208\178\208\179\208\180\208\181\209\145\208\182\208\183\208\184\208\185\208\186\208\187\208\188\208\189\208\190\208\191\209\128\209\129\209\130\209\131\209\132\209\133\209\134\209\135\209\136\209\137\209\138\209\139\209\140\209\141\209\142\209\143\208\144\208\145\208\146\208\147\208\148\208\149\208\129\208\150\208\151\208\152\208\153\208\154\208\155\208\156\208\157\208\158\208\159\208\160\208\161\208\162\208\163\208\164\208\165\208\166\208\167\208\168\208\169\208\170\208\171\208\172\208\173\208\174\208\175\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"myB=string.find(shablon,B,1,true)return myB end function alfabetC(B,I)shablon="\208\176\208\177\208\178\208\179\208\180\208\181\209\145\208\182\208\183\208\184\208\185\208\186\208\187\208\188\208\189\208\190\208\191\209\128\209\129\209\130\209\131\209\132\209\133\209\134\209\135\209\136\209\137\209\138\209\139\209\140\209\141\209\142\209\143\208\144\208\145\208\146\208\147\208\148\208\149\208\129\208\150\208\151\208\152\208\153\208\154\208\155\208\156\208\157\208\158\208\159\208\160\208\161\208\162\208\163\208\164\208\165\208\166\208\167\208\168\208\169\208\170\208\171\208\172\208\173\208\174\208\175\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"local o if I==0 then o=string.find(shablon,B,1,true)end if I==1 then if B<133 then o=string.utf8sub(shablon,B/2+.5,B/2+.5)else o=string.sub(shablon,B,B)end end return o end function hashStr(B)local I=time()I=I%10000 I=tostring(I)I=string.utf8sub(I,2,3)I=string.format("\037\048\051\100",I)nomeLen=string.utf8len(B)nome1={}for I=1,nomeLen,1 do nome1[I]=string.utf8sub(B,I,I)tmNome=nome1[I]nome1[I]=alfabet(tmNome)end nome11=0 for B=1,nomeLen,1 do nome11=nome11+nome1[B]end nome11=nome11%1000 hNome=string.format("\037\048\051\100",nome11)iN=tostring(I)r1=string.utf8sub(iN,1,1)r2=string.utf8sub(hNome,1,1)r3=string.utf8sub(iN,2,2)r4=string.utf8sub(hNome,2,2)r5=string.utf8sub(iN,3,3)r6=string.utf8sub(hNome,3,3)r=r1 ..(r2 ..(r3 ..(r4 ..(r5 ..r6))))return r end function tablelength(B)local I=0 for B in pairs(B)do I=I+1 end return I end function getPOS(B,I)local o=(1-I)*668 local X=B*1002 return X,o end function hshStrNuovo(B,I)nomeLen=string.utf8len(I)nome1={}for B=1,nomeLen,1 do nome1[B]=string.utf8sub(I,B,B)tmNome=nome1[B]nome1[B]=alfabet(tmNome)end nome11=0 for B=1,nomeLen,1 do nome11=nome11+nome1[B]end nome11=nome11%1000 hNome=string.format("\037\048\051\100",nome11)local o=string.sub(B,2,2)local X=string.sub(B,4,4)local j=string.sub(B,6,6)local c=math.random(0,9)local H=math.random(0,9)local V=math.random(0,9)local l=o..(X..j)local r=hashStr(I)local d=string.utf8sub(nome11,2,2)local q=string.utf8sub(nome11,4,4)local Z=string.utf8sub(nome11,6,6)local N=d..(q..Z)local e=c..(q..(H..(d..(V..Z))))return l,N,e end function hshStrNuovo(B,I)local o local X local j local c local H local V local l local r local d local q local Z local N local e o=string.utf8len(I)local g={}for B=1,o,1 do g[B]=string.utf8sub(I,B,B)X=g[B]g[B]=alfabet(X)end j=0 for B=1,o,1 do j=j+g[B]end j=j%1000 c=string.format("\037\048\051\100",j)H=string.sub(c,1,1)V=string.sub(c,2,2)l=string.sub(c,3,3)r=string.sub(B,2,2)r=tonumber(r)if r==0 then d=string.sub(B,3,3)q=string.sub(B,4,4)Z=string.sub(B,6,6)elseif r==1 then d=string.sub(B,4,4)q=string.sub(B,3,3)Z=string.sub(B,6,6)elseif r==2 then d=string.sub(B,4,4)q=string.sub(B,6,6)Z=string.sub(B,3,3)elseif r==3 then d=string.sub(B,3,3)q=string.sub(B,6,6)Z=string.sub(B,4,4)elseif r==4 then d=string.sub(B,1,1)q=string.sub(B,6,6)Z=string.sub(B,4,4)elseif r==5 then d=string.sub(B,1,1)q=string.sub(B,6,6)Z=string.sub(B,3,3)elseif r==6 then d=string.sub(B,6,6)q=string.sub(B,1,1)Z=string.sub(B,3,3)elseif r==7 then d=string.sub(B,6,6)q=string.sub(B,3,3)Z=string.sub(B,1,1)elseif r==8 then d=string.sub(B,4,4)q=string.sub(B,5,5)Z=string.sub(B,6,6)elseif r==9 then d=string.sub(B,5,5)q=string.sub(B,1,1)Z=string.sub(B,3,3)end N=d..(q..Z)e=H..(V..l)return N,e end function hshSenderNomeC(B)local I local o local X local j local c local H local V local l local r local d local q I=string.utf8len(B)o={}for I=1,I,1 do o[I]=string.utf8sub(B,I,I)tmNome=o[I]o[I]=alfabet(tmNome)end X=0 for B=1,I,1 do X=X+o[B]end X=X%1000 j=string.format("\037\048\051\100",X)c=string.sub(j,1,1)H=string.sub(j,2,2)V=string.sub(j,3,3)l=math.random(0,9)r=math.random(0,9)d=math.random(0,9)if r==0 then q=l..(r..(c..(H..(d..V))))elseif r==1 then q=l..(r..(H..(c..(d..V))))elseif r==2 then q=l..(r..(V..(c..(d..H))))elseif r==3 then q=l..(r..(c..(V..(d..H))))elseif r==4 then q=c..(r..(l..(V..(d..H))))elseif r==5 then q=c..(r..(V..(l..(d..H))))elseif r==6 then q=H..(r..(V..(l..(d..c))))elseif r==7 then q=V..(r..(H..(d..(l..c))))elseif r==8 then q=l..(r..(d..(c..(H..V))))elseif r==8 then q=c..(r..(V..(l..(H..d))))elseif r==9 then q=H..(r..(V..(l..(c..d))))end if testQ~=nil then if testQ[B]~=nil then if testQ[B].rarHSH1==nil then testQ[B].rarHSH1={}end if testQ[B].rarHSH==nil then testQ[B].rarHSH={}end testDate=date("\037\100")testDate=tonumber(testDate)if testDate%2==0 then tableHSH="\114\097\114\072\083\072"testQ[B].rarHSH1=nil else tableHSH="\114\097\114\072\083\072\049"testQ[B].rarHSH=nil end if q==testQ[B][tableHSH]then q=hshSenderNomeC(B)end table.insert(testQ[B][tableHSH],q)return q end end end function gmTest(B)local I for o=1,#gmList,1 do if B==gmList[o]then I="\208\179\208\188"break end o=o+1 end return I end function proverkaVypolneniyaKvestySachivkoj(B,I)local o=testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]if I=="\050"then I="\208\186\208\178\208\181\209\129\209\130\095\208\187\208\178\208\187\050"elseif I=="\051"then I="\208\186\208\178\208\181\209\129\209\130\095\208\187\208\178\208\187\051"end local X=testQ[B][I][o]X=tonumber(X)local c=GetAchievementNumCriteria(o)j=0 k=0 for B=1,c,1 do local I,X,c,H,V,l,r,d,q,Z=GetAchievementCriteriaInfo(o,B)prov=c if prov==true then j=j+1 else k=k+1 end B=B+1 end local H=X-j if H<0 then H=0 end SendChatMessage("\208\158\209\129\209\130\208\176\208\187\208\190\209\129\209\140 \208\178\209\139\208\191\208\190\208\187\208\189\208\184\209\130\209\140 "..(H..(" \208\191\209\131\208\189\208\186\209\130\208\190\208\178 \208\176\209\135\208\184\208\178\208\186\208\184 "..(o..(" "..(GetAchievementLink(o)..(" \208\184\208\183 "..X)))))),"\071\085\073\076\068",nil,1)end function npcXY(B,I,o,X,j)local c=nil local H=B local V=I H=tostring(H)V=tostring(V)if npcScan[H]==nil then npcScan[H]={}end if npcScan[H][V]==nil then npcScan[H][V]={}end local l=j if l~=nil then local B=o local I=X B=tostring(B)I=tostring(I)if npcScan[H][V][l]==nil then npcCount=1 npcCount=tostring(npcCount)npcScan[H][V][l]={}npcScan[H][V][l][npcCount]={}npcScan[H][V][l][npcCount].x=B npcScan[H][V][l][npcCount].y=I else local o={}local X={}npcCount=tablelength(npcScan[H][V][l])+1 npcCount=tostring(npcCount)B=tostring(B)I=tostring(I)npcScan[H][V][l][npcCount]={}npcScan[H][V][l][npcCount].x=B npcScan[H][V][l][npcCount].y=I end else print("\208\146\209\139\208\177\208\181\209\128\208\184 \209\134\208\181\208\187\209\140")end end function testNpc(B)local I CreateFrame("\071\097\109\101\084\111\111\108\116\105\112","\077\121\083\099\097\110\110\105\110\103\084\111\111\108\116\105\112",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\109\112\108\097\116\101")MyScanningTooltip:SetOwner(WorldFrame,"\065\078\067\072\079\082\095\078\079\078\069")MyScanningTooltip:AddFontStrings(MyScanningTooltip:CreateFontString("\036\112\097\114\101\110\116\084\101\120\116\076\101\102\116\049",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116"),MyScanningTooltip:CreateFontString("\036\112\097\114\101\110\116\084\101\120\116\082\105\103\104\116\049",nil,"\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116"))MyScanningTooltip:SetHyperlink("\117\110\105\116\058"..B)I=EnumerateTooltipLines(MyScanningTooltip)return I end local function I(...)local B for I=1,select("\035",...),1 do local o=select(I,...)if o and o:GetObjectType()=="\070\111\110\116\083\116\114\105\110\103"then local I=o:GetText()if I~=nil then print(I)if string.find(I,"\208\163\209\128\208\190\208\178\208\181\208\189\209\140")then testLvlNpc=mysplit(I)end if string.find(I,"\209\131\209\128\208\190\208\178\208\189\209\143")then testLvlNpc=mysplit(I)if string.find(testLvlNpc[3],"\037\063\037\063")then else B="\049"end if string.find(testLvlNpc[2],"\037\063\037\063")then SendAddonMessage("\078\083\071\097\100\100","\035\110\112\099\079\102\102","\103\117\105\108\100")end if string.find(testLvlNpc[1],"\208\162\209\128\209\131\208\191")then SendAddonMessage("\078\083\071\097\100\100","\035\110\112\099\068\105\101","\103\117\105\108\100")end end end end end return B end function EnumerateTooltipLines(B)local o o=I(B:GetRegions())return o end function pLid()if UnitIsPartyLeader("\112\097\114\116\121\049")then pL=1 elseif UnitIsPartyLeader("\112\097\114\116\121\050")then pL=2 elseif UnitIsPartyLeader("\112\097\114\116\121\051")then pL=3 elseif UnitIsPartyLeader("\112\097\114\116\121\052")then pL=4 else pL=0 end return pL end function pM(B)if B==UnitName("\112\097\114\116\121\049")then r=1 elseif B==UnitName("\112\097\114\116\121\050")then r=1 elseif B==UnitName("\112\097\114\116\121\051")then r=1 elseif B==UnitName("\112\097\114\116\121\052")then r=1 else r=0 end return r end function testN()testNpc(UnitGUID("\116\097\114\103\101\116"))end function tblAllFail(B,I)if mmList[B]~=nil then for o=1,mmList[B]["\208\186\208\190\208\187\208\184\209\135\208\181\209\129\209\130\208\178\208\190\095\208\177\208\190\209\129\209\129\208\190\208\178"],1 do if I==mmList[B][o]then r=o break else r=0 end end end return r end function testMarsh(B,I)trovMarsh(B,I)local o=0 for I,o in pairs(mapTables[B])do if type(I)=="\115\116\114\105\110\103"then tKont=I end for B,I in pairs(mapTables[B][I])do if type(B)=="\115\116\114\105\110\103"then tLok=B end end end if testQ.schet1~=nil then for I=testQ.schet1-10,testQ.schet1+10,1 do if testQ.schet[I]~=nil then marshrut(I,tablelength(mapTables[B][tKont][tLok]))o=o+testQ.schet[I]if o>0 then break end end end end return o end function trovMarsh(B,I)if testKontLok(B)~=nil then local o,X=GetPlayerMapPosition("\112\108\097\121\101\114")local c=GetCurrentMapContinent()c=tostring(c)local H=GetCurrentMapZone()H=tostring(H)local V=GetMapInfo()if V=="\082\097\103\101\102\105\114\101"then c="\057\057"H="\049"end local l=tablelength(mapTables[B][c][H])testQ.schet={}testQ.numPunti={}if testQ.num==nil then if testKontLok(B)<I then testQ.num=1 testQ.schet1=1 end end for V=testQ.num-10,testQ.num+10,1 do testQ.schet1=V j=tostring(V)if testQ["\209\129\209\130\208\176\209\128\209\130"]~=nil then if mapTables[B][c][H][j]~=nil then mioCel=sqrt((o-mapTables[B][c][H][j].x)^2+(X-mapTables[B][c][H][j].y)^2)if mioCel<I then testQ.schet[V]=1 j=testQ.num j=tostring(j)mioCel1=sqrt((o-mapTables[B][c][H][j].x)^2+(X-mapTables[B][c][H][j].y)^2)if mioCel1>mioCel then testQ.num=V testQ.marshF[V]=V if testQ.marshF[V]==math.modf(l/4)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \209\135\208\181\209\130\208\178\208\181\209\128\209\130\209\140 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if testQ.marshF[V]==math.modf(l/2)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \208\191\208\190\208\187\208\190\208\178\208\184\208\189\209\131 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if testQ.marshF[V]==math.modf((l/4)*3)then SendChatMessage("\208\175 \208\191\209\128\208\190\209\136\208\181\208\187 \209\130\209\128\208\184 \209\135\208\181\209\130\208\178\208\181\209\128\209\130\208\184 \208\188\208\176\209\128\209\136\209\128\209\131\209\130\208\176","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end if tonumber(l)==tonumber(V)then SendChatMessage("\208\156\208\176\209\128\209\136\209\128\209\131\209\130 \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")if marshruT~=nil then for B=1,9999,1 do if marshruT[B]~=nil then marshruT[B]:Hide()end end end marshruT=nil testQ["\209\129\209\130\208\176\209\128\209\130"]=nil testQ.num=nil testQ.marshF=nil if B=="\101\118\079\048\049\048\050"then testQ.evO0102=true testQ.startChern=nil end if B=="\101\118\079\048\050\048\051"then testQ.evO0203=true testQ.startChern=nil end if B=="\101\118\079\048\051\048\052"then testQ.evO0304=true testQ.startChern=nil end if B=="\101\118\079\048\052\048\053"then testQ.evO0405=true testQ.startChern=nil end if B=="\101\118\079\048\053\048\054"then testQ.evO0506=true testQ.startChern=nil end if B=="\101\118\079\048\054\048\055"then testQ.evO0607=true testQ.startChern=nil end if B=="\101\118\079\048\055\048\056"then testQ.evO0708=true testQ.startChern=nil end if B=="\101\118\079\048\056\048\057"then testQ.evO0809=true testQ.startChern=nil end if B=="\101\118\079\048\057\049\048"then testQ.evO0910=true testQ.startChern=nil end if B=="\101\118\079\049\048\049\049"then testQ.evO1011=true testQ.startChern=nil end if B=="\101\118\079\049\049"then testQ.evO11=true testQ.startChern=nil end if B=="\101\118\079\049\050"then testQ.evO12=true testQ.startChern=nil end if B=="\101\118\079\049\051"then testQ.evO13=true testQ.startChern=nil end if B=="\101\118\079\049\052"then testQ.evO14=true testQ.startChern=nil end testQ.start=nil end end else testQ.schet[V]=0 end end end end end end function testKontLok(B)local I=GetCurrentMapContinent()I=tostring(I)local o=GetCurrentMapZone()o=tostring(o)local X local j,c=GetPlayerMapPosition("\112\108\097\121\101\114")local H,V local l=GetMapInfo()if l=="\082\097\103\101\102\105\114\101"then I="\057\057"o="\049"end if mapTables~=nil then if mapTables[B]~=nil then for I,o in pairs(mapTables[B])do if type(I)=="\115\116\114\105\110\103"then H=I end for B,I in pairs(mapTables[B][I])do if type(B)=="\115\116\114\105\110\103"then V=B end end end if tostring(o)==tostring(V)then if B~=nil then if mapTables[B]~=nil then if H==I then if mapTables[B][I][o]~=nil then if V==o then X=sqrt((j-mapTables[B][I][o]["\049"].x)^2+(c-mapTables[B][I][o]["\049"].y)^2)return X end end end end end end end end end function startFchern(B,I,o)I=tostring(I)o=tostring(o)if krt[I]==true and krt[o]==true then testQ.start=B testQ["\209\129\209\130\208\176\209\128\209\130"]=0 testQ[B]="\209\129\209\130\208\176\209\128\209\130"marshruT={}end end function testFchern(B,I,o)I=tostring(I)o=tostring(o)local X,j if testQ[B]==nil then for I,o in pairs(mapTables[B])do if type(I)=="\115\116\114\105\110\103"then X=I end for B,I in pairs(mapTables[B][X])do if type(B)=="\115\116\114\105\110\103"then j=B end end end if mapTables.lokRasstoyanie[tostring(X)]~=nil then if mapTables.lokRasstoyanie[tostring(X)][tostring(j)]~=nil then if testKontLok(B)~=nil then if tonumber(testKontLok(B))<=tonumber(mapTables.lokRasstoyanie[tostring(X)][tostring(j)])*3 then startFchern(B,I,o)testQ.startChern=B end end end end end end function printPar(B)local I={}local o for B,o in pairs(B)do if B~=nil then table.insert(I,B)end end o=table.concat(I," ")return o end function otladka(B,I,o,X,j,c,H)local V numF=tonumber(B)if numF==1 then if I=="\116\101\115\116\081"then V=testQ end end if numF==2 then if I=="\116\101\115\116\081"then V=testQ[o]end end if numF==3 then if I=="\116\101\115\116\081"then V=testQ[o][X]end end if numF==4 then if I=="\116\101\115\116\081"then V=testQ[o][X][j]end end if numF==5 then if I=="\116\101\115\116\081"then V=testQ[o][X][j][c]end end if numF==6 then if I=="\116\101\115\116\081"then V=testQ[o][X][j][c][H]end end V=type(V)y=V return V,y end function tabellaFind(B,I)local o=1 while B[o]do print(I)print(B[o])if I==B[o]then return 1 end o=o+1 end return nil end function krtChernGetXY(B)B=tostring(B)for B,I in pairs(krt.chernila[B])do kont=B end for B,I in pairs(krt.chernila[B][kont])do lok=B end for B,I in pairs(krt.chernila[B][kont][lok])do if B=="\120"then x=I end if B=="\121"then y=I end if B=="\109\115\103"then m=I end end return kont,lok,x,y,m end function mapQuest(B)B=tostring(B)for B,I in pairs(testQ.mapQuest[B])do kont=B end for B,I in pairs(testQ.mapQuest[B][kont])do lok=B end for B,I in pairs(testQ.mapQuest[B][kont][lok])do if B=="\120"then x=I end if B=="\121"then y=I end if B=="\109\115\103"then m=I end if B=="\099\101\108"then c=I end end return kont,lok,x,y,m,c end function mapQuestP(B)B=tostring(B)testQ.mapQuest.podskazkiRez={}for B,I in pairs(testQ.mapQuest[B])do kont=B end for B,I in pairs(testQ.mapQuest[B][kont])do lok=B end for I,o in pairs(testQ.mapQuest[B][kont][lok])do if I=="\112\111\100\115\107\097\122\107\105"then for B,I in pairs(testQ.mapQuest[B][kont][lok].podskazki)do testQ.mapQuest.podskazkiRez[B]=I end end end end function chern1P(B)B=tostring(B)krt.chernila.podskazkiRez={}for B,I in pairs(krt.chernila[B])do kont=B end for B,I in pairs(krt.chernila[B][kont])do lok=B end for I,o in pairs(krt.chernila[B][kont][lok])do if I=="\112\111\100\115\107\097\122\107\105"then for B,I in pairs(krt.chernila[B][kont][lok].podskazki)do krt.chernila.podskazkiRez[B]=I end end end end function tabellaEnStr(B,I)local o,X,j,c,H,V B=tostring(B)I=tostring(I)if testQ.chD==nil then testQ.chD={}end if testQ.chD[tostring(B)]==nil then j="\048"for B,I in pairs(krt.chernila[B])do H=B end for B,I in pairs(krt.chernila[B][H])do V=B end o=tablelength(krt.chernila[B][H][V].podskazki)for o=1,o,1 do c=tostring(o)if X==nil then X=c..(" "..(txtXor(krt.chernila[B][H][V].podskazki[c]).."\n"))else X=X..(c..(" "..(txtXor(krt.chernila[B][H][V].podskazki[c]).."\n")))end j=tonumber(j)j=j+1 j=tostring(j)if j==I then break end end else for B,I in pairs(krt.chernila[B])do H=B end for B,I in pairs(krt.chernila[B][H])do V=B end X=B.." \208\178\209\139\208\191\208\190\208\187\208\189\208\181\208\189\208\190\n"j=tablelength(krt.chernila[B][H][V].podskazki)end return X,j end function txtXor(B)local I=B:utf8sub(1,3)local o local X if I~="\035\035\035"then o=string.utf8len(B)X="\035\035\035"for I=1,o,1 do X=X..string.format("\037\048\051\100",alfabet(string.utf8sub(B,I,I)))end end if I=="\035\035\035"then X=alfabetC(tonumber(string.sub(B,4,6)),1)for I=7,#B,3 do X=X..alfabetC(tonumber(string.sub(B,I,I+2)),1)end end return X end bcsQuickFrame={}function createQuickHtmlFrame(B,I,o)local X=GetTime()bcsQuickFrame[o]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)bcsQuickFrame[o]:SetSize(222,222)bcsQuickFrame[o]:SetFrameStrata("\072\073\071\072")bcsQuickFrame[o]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",33,I)bcsQuickFrame[o]:SetBackdropColor(0,103,51,1)bcsQuickFrame[o]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",32)bcsQuickFrame[o]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\057\048\101\101\057\048"..(B.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))end dmG={}function dmgText(B,I,o,X,j)if dmG[o]==nil then dmG[o]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",I)else dmG[o]:Show()end dmG[o]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG[o]:ClearAllPoints()dmG[o]:SetBackdropColor(0,103,51,1)dmG[o]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")if B~=""then if tonumber(B)<=9999 then dmG[o]:SetSize(48,48)end if tonumber(B)>9999 then dmG[o]:SetSize(54,48)end if tonumber(B)<=9999 then dmG[o]:SetPoint("\067\069\078\084\069\082",I,"\067\069\078\084\069\082",5,-10)end if tonumber(B)>9999 then dmG[o]:SetPoint("\067\069\078\084\069\082",I,"\067\069\078\084\069\082",1,-10)end end dmG[o]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(j..(B.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end dmG1={}function dmgText1(B,I,o,X,j)if dmG1[o]==nil then dmG1[o]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",I)dmG1[o]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG1[o]:ClearAllPoints()dmG1[o]:SetBackdropColor(0,103,51,1)dmG1[o]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end if B~=""then if tonumber(B)<=9999 then dmG1[o]:SetSize(48,48)end if tonumber(B)>9999 then dmG1[o]:SetSize(54,48)end if tonumber(B)<=9999 then dmG1[o]:SetPoint("\067\069\078\084\069\082",I,"\067\069\078\084\069\082",5,-10)end if tonumber(B)>9999 then dmG1[o]:SetPoint("\067\069\078\084\069\082",I,"\067\069\078\084\069\082",1,-10)end end dmG1[o]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(j..(B.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end dmG2={}function dmgText2(B,I,o,X,j)if dmG2[o]==nil then dmG2[o]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\100\109\071",I)dmG2[o]:SetFrameStrata("\070\085\076\076\083\067\082\069\069\078\095\068\073\065\076\079\071")dmG2[o]:ClearAllPoints()dmG2[o]:SetBackdropColor(0,103,51,1)dmG2[o]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",13,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end if B~=nil and B~=""then if tonumber(B)<=9999 then dmG2[o]:SetSize(48,48)end if tonumber(B)>9999 then dmG2[o]:SetSize(54,48)end if tonumber(B)<=9999 then dmG2[o]:SetPoint("\067\069\078\084\069\082",I,"\067\069\078\084\069\082",5,-10)end if tonumber(B)>9999 then dmG2[o]:SetPoint("\067\069\078\084\069\082",I,"\067\069\078\084\069\082",1,-10)end end if B~=nil then dmG2[o]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112 \115\116\121\108\101\061\'\098\097\099\107\103\114\111\117\110\100-\099\111\108\111\114\058 \035\049\050\051\052\053\097\'\062 \124\099\102\102"..(j..(B.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")))end end rtnText={}function rtnTextF(B,I,o)if o=="\115\104\111\119"then if rtnText[I]==nil then rtnText[I]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)rtnText[I]:SetSize(415,396)rtnText[I]:SetFrameStrata("\084\079\079\076\084\073\080")rtnText[I]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",5,-55)rtnText[I]:SetBackdropColor(0,0,0,0)if tonumber(string.utf8len(B))<200 then rtnText[I]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",33)elseif tonumber(string.utf8len(B))>200 and tonumber(string.utf8len(B))<300 then rtnText[I]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",27)elseif tonumber(string.utf8len(B))>=400 then rtnText[I]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",16)end end rtnText[I]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\048\048\048\048\048\048"..(B.."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))rtnText[I]:Show()else if rtnText[I]~=nil then rtnText[I]:Hide()end end end function versFail(B)if VerF==nil then VerF=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\066\067\083\081\117\105\099\107\070\114\097\109\101",UIParent)end VerF:SetSize(1111,888)VerF:SetFrameStrata("\072\073\071\072")if testQ.VerF==nil then testQ.VerF=600 end VerF:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",testQ.VerF,-355)VerF:SetBackdropColor(0,103,51,1)VerF:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",B+10)VerF:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\102\102\048\048\048\048\208\158\208\145\208\157\208\158\208\146\208\152 \208\144\208\148\208\148\208\158\208\157\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062")end function marshrut(B,I)local o=B-1 local X=B+1 local j=B+2 local c=B-2 local H=B+3 local V=B-3 if testQ.start~="\101\118\079\051"then if marshruT~=nil then if marshruT[B]==nil then marshruT[B]=CreateFrame("\083\105\109\112\108\101\072\084\077\076","\109\097\114\115\104\114\117\116",UIParent)marshruT[B]:SetSize(222,222)marshruT[B]:SetFrameStrata("\072\073\071\072")marshruT[B]:SetPoint("\067\069\078\084\069\082",UIParent,"\067\069\078\084\069\082",333,111)marshruT[B]:SetBackdropColor(0,103,51,1)marshruT[B]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",32)marshruT[B]:SetText("\060\104\116\109\108\062\060\098\111\100\121\062\060\112\062\124\099\102\102\057\048\101\101\057\048"..(B..(" \208\184\208\183 "..(tostring(I).."\060\047\112\062\060\047\098\111\100\121\062\060\047\104\116\109\108\062"))))end if marshruT[o]~=nil then marshruT[o]:Hide()marshruT[o]=nil end if marshruT[X]~=nil then marshruT[X]:Hide()marshruT[X]=nil end if marshruT[j]~=nil then marshruT[j]:Hide()marshruT[j]=nil end if marshruT[c]~=nil then marshruT[c]:Hide()marshruT[c]=nil end if marshruT[H]~=nil then marshruT[H]:Hide()marshruT[H]=nil end if marshruT[V]~=nil then marshruT[V]:Hide()marshruT[V]=nil end end end end function showRB(B)if debuffChkB==nil then debuffChkB={}end if pokazat==1 and btn[1]~=nil then for B=1,15,1 do if btn[B]~=nil then btn[B]:Hide()end end btn[991]:Show()if tonumber(testQ.mioFldLvl)~=.5 and(tonumber(testQ.mioFldLvl)~=.9 and tonumber(testQ.mioFldLvl)~=nil)then btn[14]:Show()end myCheckButton1:Show()myCheckButton2:Show()myCheckButton3:Show()myCheckButton4:Show()myCheckButton5:Show()myCheckButton6:Show()myCheckButton7:Show()btn[998]:Show()btn[997]:Show()for I=1,20,1 do local o,X,j,c,H,V,l,r=UnitDebuff("\112\108\097\121\101\114",I)if o~=nil then debuffChkB[o]=createCheckbutton(UIParent,150,-20*I+230,o)debuffChkB[o].tooltip="\208\161\208\186\209\128\209\139\208\178\208\176\209\130\209\140 \208\184\208\186\208\190\208\189\208\186\209\131 "..o debuffChkB[o]:SetScript("\079\110\067\108\105\099\107",function()if testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB==nil then testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB={}end if testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[o]=="\068\105\115\097\098\108\101"or testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[o]==nil then testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[o]="\069\110\097\098\108\101"debuffChkB[o]:SetChecked(true)elseif testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[o]=="\069\110\097\098\108\101"then testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[o]="\068\105\115\097\098\108\101"debuffChkB[o]:SetChecked(false)end end)end end pokazat=0 pokazatChk=1 elseif pokazat==0 then btn[991]:Hide()if tonumber(testQ.mioFldLvl)~=.5 and(tonumber(testQ.mioFldLvl)~=.9 and tonumber(testQ.mioFldLvl)~=nil)then for B=1,15,1 do if btn[B]~=nil then btn[B]:Show()end end if btn[ii]~=nil then if testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]=="\057\057\057\057"then btn[1]:Show()btn[2]:Hide()end if testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130"]~="\057\057\057\057"then btn[1]:Hide()btn[2]:Show()end end end testQ.lvlProv=nil myCheckButton1:Hide()myCheckButton2:Hide()myCheckButton3:Hide()myCheckButton4:Hide()myCheckButton5:Hide()myCheckButton6:Hide()myCheckButton7:Show()for B,I in pairs(debuffChkB)do if debuffChkB[B]~=nil then debuffChkB[B]:Hide()end end btn[998]:Hide()btn[997]:Hide()pokazat=1 pokazatChk=0 end end function marSh()local B=GetCurrentMapContinent()local I=GetCurrentMapZone()local o,X=GetPlayerMapPosition("\112\108\097\121\101\114")local j B=tostring(B)I=tostring(I)local c=GetMapInfo()if c=="\082\097\103\101\102\105\114\101"then B="\057\057"I="\049"end if marsh==nil then marsh={}end if marsh[B]==nil then marsh[B]={}end if marsh[B][I]==nil then marsh[B][I]={}end local H=tablelength(marsh[B][I])H=tostring(H+1)marsh[B][I][H]={}testQ.marshK=B testQ.marshL=I testQ.marshN=H marsh[B][I][H].x=string.format("\037\046\051\102",o)marsh[B][I][H].y=string.format("\037\046\051\102",X)print(H)end function resObj1(B,I,o)if krt==nil then krt={}end if krt.podskazki==nil then krt.podskazki=1 end if testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]==nil then testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]={}testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=0 end if I==o then if mioFld~=nil then if mioFld[I]~=nil then if mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"]~=nil then if tonumber(testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"])<=tonumber(krt.podskazki)then if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\104\115"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\115"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\120"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\115\120"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\099"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\097\115"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\099"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\115"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\120"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\099"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\112"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\122"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\118"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\109\102"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\109\048"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\108\120"and mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\108\112")))))))))))))))then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\102"then SendAddonMessage("\116\114\101\101 "..tostring(B),I,"\103\117\105\108\100")end mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\109\048"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\104\115"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<9999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=9999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\116\122"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\108\120"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\122\099"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<9999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=9999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\097\115"or mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\098\099"or mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\098\115"or mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\098\120"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<14999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=14999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\122\115"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\116\099"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<4999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=4999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\122\120"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\115\120"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+50 testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]=testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"]+.02 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end else if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\104\115"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\115"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\120"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\115\120"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\099"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\097\115"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\120"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\099"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\115"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\099"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\112"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\122"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\118"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\109\102"and(mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\109\048"and mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\108\120"))))))))))))))then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+5 else if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\102"then SendAddonMessage("\116\114\101\101 "..tostring(B),I,"\103\117\105\108\100")end mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\104\115"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<9999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+5 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=9999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\108\120"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+5 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\116\122"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+5 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\109\048"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+5 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\122\099"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<9999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+5 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=9999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\097\115"or mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\098\099"or mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\098\115"or mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\098\120"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<14999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+5 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=14999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\122\115"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+5 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\116\099"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<4999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+5 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=4999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\122\120"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+5 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[I]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\115\120"then if tonumber(mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]+5 else mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end end SendAddonMessage("\114\101\115\079\098\106 "..(B..(" "..mioFld[I]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])),o,"\103\117\105\108\100")end end end else if mioFld~=nil then if mioFld[o]~=nil then if mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"]~=nil then if tonumber(testQ["\209\130\209\128\209\131\208\180\208\190\208\178\209\139\208\181\095\209\128\208\181\209\129\209\131\209\128\209\129\209\139"])<=tonumber(krt.podskazki)then if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\104\115"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\115"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\120"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\115\120"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\099"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\097\115"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\099"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\115"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\120"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\099"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\112"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\122"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\118"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\109\048"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\109\102"and mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\108\120"))))))))))))))then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\104\115"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<9999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=9999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\108\120"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\116\122"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\109\048"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\122\099"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<9999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=9999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\097\115"or mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\098\099"or mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\098\115"or mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\098\120"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<14999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=14999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\122\115"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\122\120"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\116\099"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<4999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=4999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\115\120"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then if(5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((5*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end else if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\104\115"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\115"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\120"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\115\120"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\099"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\097\115"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\099"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\115"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\098\120"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\099"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\122\112"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\122"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\116\118"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\109\048"and(mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\109\102"and mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]~="\108\120"))))))))))))))then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\104\115"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<9999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=9999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\108\120"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\116\122"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\109\048"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\116\099"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<4999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=4999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\097\115"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<14999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=14999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\122\115"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\122\120"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<19999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=19999 end end if mioFld[o]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(B)]=="\115\120"then if tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])<29999 then if(1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl)<1 then local I=math.random(((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))*10,9)if I==9 then mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=tonumber(mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])+round((1*tonumber(testQ.mioFldLvl))/tonumber(testQ.fldLvl))end else mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)]=29999 end end end SendAddonMessage("\114\101\115\079\098\106 "..(B..(" "..mioFld[o]["\209\134\208\181\208\187\208\190\209\129\209\130\208\189\208\190\209\129\209\130\209\140"][tostring(B)])),o,"\103\117\105\108\100")end end end end end function gKam(B,I)local o=nil if tonumber(I)==500 then for I=1,100,1 do if mioFld1[B]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(I)]=="\115\107"then if o==nil then o=1 else o=o+1 end end end if o==nil then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\048","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif o==1 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\049","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif o==2 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\050","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif o==3 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\051","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif o==4 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\052","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")elseif o==5 then testQ.kamen=testQ.kamen+1 testQ.nikQK=antc(testQ.kamen)SendAddonMessage("\110\115\095\107\080","\053","\103\117\105\108\100")PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\107\046\111\103\103")end end end function bdf(B)if testQ==nil then testQ={}end if testQ.myNome==nil then testQ.myNome={}end if testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"]==nil then testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"]={}end if testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB==nil then testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB={}end if DebuffButton1~=nil then if tonumber(testQ.buffX)~=nil and tonumber(testQ.buffX)~=0 then local I,o,X,c=DebuffButton1:GetPoint()local H,V,l,r=btn[991]:GetPoint()if c~=r then local I,o=DebuffButton1:GetSize()local X=UIParent:GetSize()/2 j=1 for o=1,DEBUFF_MAX_DISPLAY,1 do if AuraButton_Update("\068\101\098\117\102\102\066\117\116\116\111\110",o,"\072\065\082\077\070\085\076")then local c,H,V,l,r,d,q,Z=UnitDebuff("\112\108\097\121\101\114",o)local N=_G["\068\101\098\117\102\102\066\117\116\116\111\110"..o]if N~=nil and(testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[c]==nil or testQ[B]["\208\189\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184"].debuffChkB[c]=="\068\105\115\097\098\108\101")then N:ClearAllPoints()if tonumber(testQ.buffX)<X then N:SetPoint("\066\079\084\084\079\077\076\069\070\084",UIParent,"\066\079\084\084\079\077\076\069\070\084",tonumber(testQ.buffX)+I*j,testQ.buffY)j=j+1 else N:SetPoint("\066\079\084\084\079\077\076\069\070\084",UIParent,"\066\079\084\084\079\077\076\069\070\084",tonumber(testQ.buffX)-I*j,testQ.buffY)j=j+1 end else if N~=nil and N:IsVisible()then N:Hide()end end end end end if testQ.buffX==0 then testQ.buffX=nil end end end end function gtest()gTest=nil gTest={}for B=1,50,1 do local I,o,X,j,c,H,V=GetWhoInfo(B)if o==""then if j~="\208\148\209\128\208\181\208\189\208\181\208\185"and(j~="\208\157\208\190\209\135\208\189\208\176\209\143 \209\141\208\187\209\140\209\132\208\184\208\185\208\186\208\176"and(j~="\208\167\208\181\208\187\208\190\208\178\208\181\208\186"and(j~="\208\157\208\190\209\135\208\189\208\190\208\185 \209\141\208\187\209\140\209\132"and(j~="\208\147\208\189\208\190\208\188"and j~="\208\148\208\178\208\190\209\128\209\132"))))then table.insert(gTest,I)end end end end function ns_q5()ns_q5Test=nil ns_q5Test={}for B=1,50,1 do local I,o,X,j,c,H,V=GetWhoInfo(B)if o==""then table.insert(ns_q5Test,I)end end end function closeFld()for B=1,100,1 do fBtn[B]:Hide()end for B=1,100,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[B]~=nil then if B==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[B]:Hide()end end end end btn[989]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end function hX()quesT("\104\105\100\101")okNo:configure(1,"\104\105\100\101")rtnTextF("\102\100\115\097",1,"\104\105\100\101")for B=1,100,1 do fBtn[B]:Hide()end if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end if okNo~=nil then okNo[1]:Hide()okNo[2]:Hide()end btn[989]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end function showFld(B,I)local o local X local j local c if mBtn[1]~=nil then if mBtn[1]:IsVisible()then c=1 end end if dBtn[1]~=nil then if dBtn[1]:IsVisible()then c=1 end end if not fBtn[1]:IsVisible()and c~=1 then if not GuildFrameLFGButton:GetChecked()or B=="\049"then if B=="\048"then o=GuildFrame.selectedName else o=I end btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",fBtn[10],"\084\079\080\082\073\071\072\084",1,1)for B=1,GetNumGuildMembers(true),1 do local c,H,V,l,r,d,q,Z,N,e,g,f,a,R,i,G,z=GetGuildRosterInfo(B)if o~=I then if c==o then X=string.sub(Z,1,1)j=string.sub(Z,2,2)if Z~=""and(X~="\049"and X~="\048")then testQ.fldLvl=tonumber(X)testQ.qNum=string.sub(Z,8,8)testQ.qDay=string.sub(Z,6,7)elseif X=="\049"then testQ.fldLvl=.9 testQ.qNum=string.sub(Z,8,8)testQ.qDay=string.sub(Z,6,7)elseif X=="\048"then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 elseif X==""then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 end if j==nil then testQ.fldLvl=.5 testQ.qNum=0 testQ.qDay=0 end end if c==I then X=string.sub(Z,1,1)if Z~=""and(X~="\049"and X~="\048")then testQ.mioFldLvl=string.sub(Z,1,1)elseif X=="\049"then testQ.mioFldLvl=.9 elseif X=="\048"then testQ.mioFldLvl=.5 elseif X==""then testQ.mioFldLvl=.5 end end else if c==I then X=string.sub(Z,1,1)j=string.sub(Z,2,2)if Z~=""and(X~="\049"and X~="\048")then testQ.mioFldLvl=string.sub(Z,1,1)testQ.fldLvl=testQ.mioFldLvl testQ.qNum=string.sub(Z,8,8)testQ.qDay=string.sub(Z,6,7)elseif X=="\049"then testQ.mioFldLvl=.9 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=string.sub(Z,8,8)testQ.qDay=string.sub(Z,6,7)elseif X=="\048"then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 elseif X==""then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 end if j==nil then testQ.mioFldLvl=.5 testQ.fldLvl=testQ.mioFldLvl testQ.qNum=0 testQ.qDay=0 end end end if tonumber(testQ.mioFldLvl)==0 then testQ.mioFldLvl=.5 end if tonumber(testQ.fldLvl)==0 then testQ.fldLvl=.5 end end testQ.fRand1=math.random(1,1000000)testQ.sign=B SendAddonMessage("\115\104\077\070\108\100 "..testQ.fRand1,o..(" "..I),"\103\117\105\108\100")FriendsFrame:Hide()else local B=tablelength(risPet)for B=1,100,1 do if risPet[B]~=nil then risPetShow(B,"\104\105\100\101","")end end for B=1,100,1 do fBtn[B]:Hide()end btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end for B=1,100,1 do if dmG[B]~=nil and dmG[B]:IsVisible()then dmG[B]:Hide()end end for B=1,3,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[B]~=nil then if B==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[B]:Hide()end end end end for B=101,103,1 do if dmG[B]~=nil then dmG[B]:Hide()end end if tonumber(testQ.sign)==0 then FriendsFrame:Show()end testQ.sign=nil testQ.fRandD1nome=nil end else local B=tablelength(risPet)for B=1,100,1 do if risPet[B]~=nil then risPetShow(B,"\104\105\100\101","")end end for B=1,100,1 do fBtn[B]:Hide()btn[989]:ClearAllPoints()btn[989]:SetPoint("\066\079\084\084\079\077\076\069\070\084",GuildMemberDetailFrame,"\084\079\080\076\069\070\084",96,-3)end if resursy[1]~=nil then resursy[1]:Hide()resursy[2]:Hide()resursy[3]:Hide()end for B=1,100,1 do if dmG[B]~=nil and dmG[B]:IsVisible()then dmG[B]:Hide()end end for B=1,100,1 do if mgznIcon[1]==nil or not mgznIcon[1]:IsVisible()then if resursy[B]~=nil then if B==5 then if mgznIcon[1]~=nil and mgznIcon[1]:IsVisible()then end else resursy[B]:Hide()end end end end for B=101,103,1 do if dmG[B]~=nil then dmG[B]:Hide()end end if tonumber(testQ.sign)==0 then FriendsFrame:Show()end if tostring(testQ.sign)=="\049"then btn[989]:Hide()end testQ.sign=nil end end function qLvl33c1()local B local I local o local X local j local c local H j=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(j)c=eMotC[j]["\208\191\208\190\208\184\209\129\208\186"]H=eMotC[j]["\208\190\209\130\208\178\208\181\209\130"]B=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]I=npcListC1[B]["\208\184\208\188\209\143"]B=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]o=npcListC1[B]["\208\184\208\188\209\143"]while true do if I==o then B=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]o=npcListC1[B]["\208\184\208\188\209\143"]else break end end B=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]X=npcListC1[B]["\208\184\208\188\209\143"]while true do if X==o or X==I then B=(rndTblc(npcListC1))["\208\176\208\185\208\180\208\184"]X=npcListC1[B]["\208\184\208\188\209\143"]else break end end return j,I,o,X,c,H end function qLvl33c2()local B local I local o local X local j local c local H j=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(j)c=eMotC[j]["\208\191\208\190\208\184\209\129\208\186"]H=eMotC[j]["\208\190\209\130\208\178\208\181\209\130"]B=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]I=npcListC2[B]["\208\184\208\188\209\143"]B=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]o=npcListC2[B]["\208\184\208\188\209\143"]while true do if I==o then B=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]o=npcListC2[B]["\208\184\208\188\209\143"]else break end end B=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]X=npcListC2[B]["\208\184\208\188\209\143"]while true do if X==o or X==I then B=(rndTblc(npcListC2))["\208\176\208\185\208\180\208\184"]X=npcListC2[B]["\208\184\208\188\209\143"]else break end end return j,I,o,X,c,H end function qLvl33c3()local B local I local o local X local j local c local H j=(rndTblc(eMotC))["\208\186\208\178\208\181\209\129\209\130"]print(j)c=eMotC[j]["\208\191\208\190\208\184\209\129\208\186"]H=eMotC[j]["\208\190\209\130\208\178\208\181\209\130"]B=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]I=npcListC3[B]["\208\184\208\188\209\143"]B=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]o=npcListC3[B]["\208\184\208\188\209\143"]while true do if I==o then B=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]o=npcListC3[B]["\208\184\208\188\209\143"]else break end end B=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]X=npcListC3[B]["\208\184\208\188\209\143"]while true do if X==o or X==I then B=(rndTblc(npcListC3))["\208\176\208\185\208\180\208\184"]X=npcListC3[B]["\208\184\208\188\209\143"]else break end end return j,I,o,X,c,H end function rndTblc(B)local I={}for B in pairs(B)do table.insert(I,B)end return B[I[math.random(#I)]]end function htimer(B)local I=0 for o=1,100,1 do if mioFld1[B]["\208\190\208\177\209\138\208\181\208\186\209\130\209\139"][tostring(o)]=="\116\111"then I="\116\111"end end if testQ[B].dTimer[30]==nil then testQ[B].dTimer[30]=26000 end if testQ[B].dTimer[tonumber(date("\037\100"))-1]==nil then testQ[B].dTimer[tonumber(date("\037\100"))-1]=26000 end if tonumber(testQ.mioFldLvl)==.5 or tonumber(testQ.mioFldLvl)==.9 then if testQ[B].hTimer==nil then if testQ[B].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[B].dTimer[30]==nil then if I~="\116\111"then testQ[B].hTimer=50400 else testQ[B].hTimer=26000 end else if tonumber(date("\037\100"))~=1 then if testQ[B].dTimer[tonumber(date("\037\100"))-1]>10800 then if I~="\116\111"then testQ[B].hTimer=testQ[B].dTimer[tonumber(date("\037\100"))-1]else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(testQ[B].dTimer[tonumber(date("\037\100"))-1])/1.5))end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end else if testQ[B].dTimer[30]~=nil and testQ[B].dTimer[30]>10800 then if I~="\116\111"then testQ[B].hTimer=testQ[B].dTimer[30]else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(testQ[B].dTimer[30])/1.5))end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==2 then if testQ[B].hTimer==nil then if testQ[B].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[B].dTimer[30]==nil then if I~="\116\111"then testQ[B].hTimer=25200 else testQ[B].hTimer=16000 end else if tonumber(date("\037\100"))~=1 then if testQ[B].dTimer[tonumber(date("\037\100"))-1]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/2))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/2))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end else if testQ[B].dTimer[30]~=nil and testQ[B].dTimer[30]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/2))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/2))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==3 then if testQ[B].hTimer==nil then if testQ[B].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[B].dTimer[30]==nil then if I~="\116\111"then testQ[B].hTimer=14500 else testQ[B].hTimer=10000 end else if tonumber(date("\037\100"))~=1 then if testQ[B].dTimer[tonumber(date("\037\100"))-1]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/3))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/3))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end else if testQ[B].dTimer[30]~=nil and testQ[B].dTimer[30]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/3))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/3))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==4 then if testQ[B].hTimer==nil then if testQ[B].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[B].dTimer[30]==nil then if I~="\116\111"then testQ[B].hTimer=11000 else testQ[B].hTimer=8000 end else if tonumber(date("\037\100"))~=1 then if testQ[B].dTimer[tonumber(date("\037\100"))-1]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/4))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/4))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end else if testQ[B].dTimer[30]~=nil and testQ[B].dTimer[30]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/4))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/4))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==5 then if testQ[B].hTimer==nil then if testQ[B].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[B].dTimer[30]==nil then if I~="\116\111"then testQ[B].hTimer=10500 else testQ[B].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[B].dTimer[tonumber(date("\037\100"))-1]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/5))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/5))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end else if testQ[B].dTimer[30]~=nil and testQ[B].dTimer[30]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/5))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/5))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==6 then if testQ[B].hTimer==nil then if testQ[B].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[B].dTimer[30]==nil then if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[B].dTimer[tonumber(date("\037\100"))-1]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/6))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/6))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end else if testQ[B].dTimer[30]~=nil and testQ[B].dTimer[30]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/6))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/6))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end end end end elseif tonumber(testQ.mioFldLvl)==7 then if testQ[B].hTimer==nil then if testQ[B].dTimer[tonumber(date("\037\100"))-1]==nil and testQ[B].dTimer[30]==nil then if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end else if tonumber(date("\037\100"))~=1 then if testQ[B].dTimer[tonumber(date("\037\100"))-1]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/7))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/7))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end else if testQ[B].dTimer[30]~=nil and testQ[B].dTimer[30]>10800 then if I~="\116\111"then testQ[B].hTimer=tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/7))if testQ[B].hTimer<10800 then testQ[B].hTimer=10800 end else testQ[B].hTimer=tonumber(string.format("\037\117",tonumber(string.format("\037\117",testQ[B].dTimer[tonumber(date("\037\100"))-1]/7))/1.5))if testQ[B].hTimer<7000 then testQ[B].hTimer=7000 end end else if I~="\116\111"then testQ[B].hTimer=10800 else testQ[B].hTimer=7000 end end end end end end SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..B,testQ[B].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..B,testQ[B].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")SendAddonMessage("\035\109\105\111\084\105\109\101\114 "..B,testQ[B].hTimer..(" "..tonumber(testQ.mioFldLvl)),"\103\117\105\108\100")end function ml()if BrowseBuyoutButton~=nil then if aucBtn==nil then aucBtn=CreateFrame("\066\117\116\116\111\110",nil,UIParent,"")aucBtn:SetFrameStrata("\084\079\079\076\084\073\080")aucBtn:SetSize(222,32)aucBtn:SetPoint("\067\069\078\084\069\082",BrowseBidButton,"\067\069\078\084\069\082",22,0)aucBtn:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\097\117\107\046\116\103\097")aucBtn:Hide()end name,texture,count,quality,canUse,level,levelColHeader,minBid,minIncrement,buyoutPrice,bidAmount,highBidder,owner,saleStatus,itemId,hasAllInfo=GetAuctionItemInfo("\108\105\115\116",tonumber(GetSelectedAuctionItem("\108\105\115\116")))if name=="\208\158\208\177\209\139\209\135\208\189\208\190\208\181 \208\191\208\184\209\129\209\140\208\188\208\190"then aucBtn:Show()if highBidder=="\208\165\208\181\209\132\208\181"then aucBtn:Hide()end else if aucBtn~=nil then aucBtn:Hide()end end end if Atr_Buy1_Button~=nil and Atr_Buy1_Button:IsVisible()then if aucBtn==nil then aucBtn=CreateFrame("\066\117\116\116\111\110",nil,UIParent,"")aucBtn:SetFrameStrata("\084\079\079\076\084\073\080")aucBtn:SetSize(222,32)aucBtn:SetPoint("\067\069\078\084\069\082",BrowseBidButton,"\067\069\078\084\069\082",22,0)aucBtn:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\097\117\107\046\116\103\097")aucBtn:Hide()end if Atr_Search_Box:IsVisible()and Atr_Search_Box:GetText()=="\208\158\208\177\209\139\209\135\208\189\208\190\208\181 \208\191\208\184\209\129\209\140\208\188\208\190"then aucBtn:Show()aucBtn:SetSize(422,32)else if aucBtn~=nil then aucBtn:Hide()end end end end function diffT(B,I)for o=1,100,1 do if B[o]~=I[o]then return false end end return true end function antc(B)shablon="\097\098\099\100\101\102\103\104\105\106\107\108\109\110\111\112\113\114\115\116\117\118\119\120\121\122\065\066\067\068\069\070\071\072\073\074\075\076\077\078\079\080\081\082\083\084\085\086\087\088\089\090 \033\063\044\046-\048\049\050\051\052\053\054\055\056\057\'\040\041"myB=string.find(shablon,(tostring(B)):sub(1,1),1,true)if tonumber(#tostring(B))>=2 then for I=2,#tostring(B),1 do myB=myB..string.find(shablon,(tostring(B)):sub(I,I),1,true)end end return myB end function ochered(B,I,o,X,j,c,H,V,l,r)if B~="\208\156\208\190\209\128"then local d=UnitClass("\112\108\097\121\101\114")local q=0 local Z,N,e,g for I=1,24,1 do if o==1 then Z,__,__,__,__,N,e,g=UnitDebuff("\116\097\114\103\101\116",I)if g=="\112\108\097\121\101\114"then if Z=="\208\158\208\183\208\189\208\190\208\177"then if e~=nil and tonumber(e)-tonumber(GetTime())<=5 then testQ.o=1 else testQ.o=nil end end if Z=="\208\154\209\128\208\190\208\178\208\176\208\178\208\176\209\143 \209\135\209\131\208\188\208\176"then if e~=nil and tonumber(e)-tonumber(GetTime())<=5 then testQ.c=1 else testQ.c=nil end end end end if X==1 then Z=UnitBuff("\112\108\097\121\101\114",I)end if Z~=nil then if Z==B then q=1 end end end local f=UnitClass("\112\108\097\121\101\114")if f=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then if testQ.o==1 and testQ.c==1 then local B for I,o in pairs(testQ.skills)do if testQ.skills[I]~=nil then if testQ.skills[I]=="\208\156\208\190\209\128"then B=1 end end end if B~=1 then table.insert(testQ.skills,I,"\208\156\208\190\209\128")end end end for I,o in pairs(testQ.skills)do if testQ.skills[I]==B then q=1 end end local a=0 if V~=nil then a=a+1 end if l~=nil then a=a+1 end if r~=nil then a=a+1 end local R,i,G,z=GetSpellInfo(B)if z==nil then z=0 end if f=="\208\148\209\128\209\131\208\184\208\180"then z=30 end if c=="\109"then if UnitPower("\112\108\097\121\101\114")<z and(IsUsableSpell(B)and GetSpellCooldown(B)==0)then if q~=1 then if I==0 then table.insert(testQ.skills,I,B)end if I==1 then table.insert(testQ.skills,B)end end else for I,o in pairs(testQ.skills)do if testQ.skills[I]~=nil then if testQ.skills[I]==B then testQ.skills[I]=nil end end end end end local D,U,k,u=GetSpellInfo(B)if u==nil then u=0 end if c=="\098"then if UnitPower("\112\108\097\121\101\114")>=u and(IsUsableSpell(B)and GetSpellCooldown(B)==0)then if q~=1 then if I==0 then table.insert(testQ.skills,1,B)end if I==1 then table.insert(testQ.skills,B)end else end else for I,o in pairs(testQ.skills)do if testQ.skills[I]~=nil then if testQ.skills[I]==B then testQ.skills[I]=nil end end end end end if j~=nil and(IsUsableSpell(B)and(GetSpellCooldown(B)==0 and H==nil))then if f=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then if B=="\208\159\209\128\208\176\208\178\208\181\208\180\208\189\208\190\208\181 \208\189\208\181\208\184\209\129\209\130\208\190\208\178\209\129\209\130\208\178\208\190"then if q~=1 then PlaySoundFile(j)end end else if B~="\208\146\208\187\208\176\209\129\209\130\209\140 \208\187\209\140\208\180\208\176"then PlaySoundFile(j)end end if f=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then if B=="\208\146\208\187\208\176\209\129\209\130\209\140 \208\187\209\140\208\180\208\176"then if q~=1 then end end else if B~="\208\159\209\128\208\176\208\178\208\181\208\180\208\189\208\190\208\181 \208\189\208\181\208\184\209\129\209\130\208\190\208\178\209\129\209\130\208\178\208\190"then PlaySoundFile(j)end end end if B=="\208\156\209\143\209\129\208\190\209\128\209\131\208\177\208\186\208\176"then if tonumber(GetComboPoints("\112\108\097\121\101\114",target))==1 and q~=1 then end end if H==1 then if UnitHealth("\112\108\097\121\101\114")<=tonumber(UnitHealthMax("\112\108\097\121\101\114"))/2 and GetSpellCooldown(B)==0 then table.insert(testQ.skills,I,B)if j~=nil then end else for I,o in pairs(testQ.skills)do if testQ.skills[I]~=nil then if testQ.skills[I]==B then testQ.skills[I]=nil end end end end end end end function partyFrameHide()for B=1,25,1 do local I=_G["\080\097\114\116\121\077\101\109\098\101\114\070\114\097\109\101"..B]if I~=nil and I:IsVisible()then I:Hide()end end end function bs(B)local I local o=UnitClass("\112\108\097\121\101\114")local X=UnitStat("\112\108\097\121\101\114",1)local j=UnitStat("\112\108\097\121\101\114",2)local c=UnitStat("\112\108\097\121\101\114",3)local H=UnitStat("\112\108\097\121\101\114",4)local V=UnitStat("\112\108\097\121\101\114",5)local l=GetSpellBonusHealing()local r=GetCombatRating(6)local d=GetCombatRating(9)local q=GetCombatRating(24)local Z=GetCombatRating(2)local N=GetCombatRating(3)local e=GetCombatRating(4)local g=GetCombatRating(5)local f=GetManaRegen()local a=GetCombatRating(25)local R,i=UnitAttackPower("\112\108\097\121\101\114")local G=GetCombatRating(18)local z=R+i local D local U=0 if o=="\208\150\209\128\208\181\209\134"or o=="\208\150\209\128\208\184\209\134\208\176"then local B,o,X,j,c=GetTalentInfo(3,27)if c>=1 then I=(((((H+V*.5)+l*2)+r)+d*2)+f*.5)+G U=r.."\047\050\056\057\047\052\052\054"else I=((((H+V*1.5)+l*2)+d)+f*1.5)+G U=r.."\047\048"end end if o=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then local B,o,a,R,i=GetTalentInfo(1,26)local D,k,u,Y,W=GetTalentInfo(2,26)local y,K,C,s,Q=GetTalentInfo(3,26)if i>=1 then I=((((H*2+V)+l*1.5)+d)+f)+G*1.5 U=r.."\047\048"end if W>=1 then I=(((((((X+j)+c*2)+r)+q)+Z*1.5)+N*1.5)+e*1.5)+g*1.5 U=r..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(q.."\047\049\056\053"))))end if Q>=1 then I=(((((X*2+j)+r)+d)+z)+G)+q U=r..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(q.."\047\049\052\056"))))end end if o=="\208\146\208\190\208\184\208\189"then local B,o,H,V,l=GetTalentInfo(3,7)if l>=1 then I=(((((((X+j)+c*2)+r)+q)+Z*1.5)+N*1.5)+e*1.5)+g*1.5 U=r..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(q.."\047\049\054\052"))))else I=((((((X*2+j)+r)+d*1.5)+q)+a*2)+z)+G U=r..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(q..("\047\050\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(a.."\047\049\052\048\048")))))))end end if o=="\208\148\209\128\209\131\208\184\208\180"then local o,e,g,R,i=GetTalentInfo(3,27)local D,k,u,Y,W=GetTalentInfo(2,5)local y,K,C,s,Q=GetTalentInfo(1,13)local w,S,h,M,P=GetTalentInfo(2,9)if i>=1 or B=="\209\133\208\184\208\187"then I=((((H+V*1.5)+l*2)+G*1.5)+d)+f*1.5 U=r.."\047\048"end if W>=1 or B=="\208\188\208\181\208\180\208\178\208\181\208\180\209\140"then I=((((((((X+j*2)+c*2)+r)+d)+G*1.5)+q)+Z*1.5)+N*2)+a U=r..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(q..("\047\049\051\050\047\050\056\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(a.."\047\063\063")))))))end if Q>=1 or B=="\209\129\208\190\208\178\208\176"then I=(((((H+V*.5)+l*2)+r)+d*2)+f*.5)+G U=r.."\047\050\054\051"end if P>=1 or B=="\208\186\208\190\209\130"then I=((((((X+j*2)+r)+d*1.5)+q)+a*2)+z)+G U=r..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(q..("\047\049\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(a.."\047\049\052\048\048")))))))end end if o=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\208\186"or o=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\209\134\208\176"then I=((((((X+j*2)+r)+d)+a*2)+q)+z)+G U=r..("\047"..("\050\054\051"..("\047"..("\055\050\050"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(q..("\047\049\051\050"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(a.."\047\049\052\048\048")))))))))end if o=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\208\186"or o=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\209\134\208\176"then I=(((((H+V*1.5)+l*2)+r)+d*1.5)+f*.5)+G*1.5 U=r..("\047"..("\050\056\057\047\052\052\054 "..("\208\165\208\176\209\129\209\130\058 "..(G.." \049\049\048\048\047\049\052\048\048"))))end if o=="\208\168\208\176\208\188\208\176\208\189"or o=="\208\168\208\176\208\188\208\176\208\189\208\186\208\176"then local B,o,c,Z,N=GetTalentInfo(1,3)local e,g,R,i,D=GetTalentInfo(2,9)local k,u,Y,W,y=GetTalentInfo(3,1)if N>=3 and D>=1 then W,W,W,W,N=GetTalentInfo(1,7)W,W,W,W,D=GetTalentInfo(2,11)end if N>=1 then I=(((H+l*2)+d)+r)+G*1.5 U=r.."\047\051\054\056"end if D>=1 then I=(((((((X+j*2)+r)+d*1.5)+a)+z)+G*1.5)+q)+l*.5 U=r..("\047"..("\050\051\050"..("\047"..("\051\054\056"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(q.."\047\049\052\048"))))))end if y>=1 then I=((((H+V)+l*2)+d)+f*2)+G*2 U=r..("\047"..("\048"..(" \099\046\047\208\186\208\176\208\191\058 "..(G.."\047\049\050\054\057\047\050\049\048\048"))))end end if o=="\208\158\209\133\208\190\209\130\208\189\208\184\208\186"or o=="\208\158\209\133\208\190\209\130\208\189\208\184\209\134\208\176"then I=((((j*2+r)+d)+a*2)+z)+G U=r..("\047"..("\050\054\051"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(a.."\047\049\052\048\048"))))end if o=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then local B,o,H,V,l=GetTalentInfo(1,7)local e,g,f,R,i=GetTalentInfo(2,3)local G,D,k,u,Y=GetTalentInfo(3,3)if l>=1 or i>=1 or Y>=1 then I=(((((X+j)+c*2)+r)+q)+Z*1.5)+N*1.5 U=r..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(q.."\047\049\055\048\047\052\048\057"))))else I=(((((X*2+j)+r)+d)+q)+a)+z U=r..("\047"..("\050\054\051"..(" \208\188\208\176\209\129\209\130\046\047\208\186\208\176\208\191\058 "..(q..("\047\049\055\048"..(" \209\128\208\191\208\177\047\208\186\208\176\208\191\058 "..(a.."\047\049\052\048\048")))))))end end if o=="\208\156\208\176\208\179"then I=((((H+V)+l*2)+r)+d*1.5)+G*1.5 U=r..("\047"..("\051\055\054 \209\133\208\176\209\129\209\130\047\208\186\208\176\208\191\058 "..(G..("\047\049\049\051\048 \208\154\209\128\208\184\209\130\047\208\186\208\176\208\191\058 "..(d.."\047\049\049\053\048\063\040\052\053\037\041")))))end if I~=nil then return string.format("\037\100",I)..(" \209\133\208\184\209\130\047\208\186\208\176\208\191\058 "..U)else SendChatMessage("\208\159\208\190\209\135\208\181\208\188\209\131 \209\130\208\190 \208\191\209\131\209\129\209\130\208\190\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\046 \208\175\058 "..o,"\079\070\070\073\067\069\082",nil,1)end end GameTooltip:HookScript("\079\110\083\104\111\119",function(B)local I=UnitClass("\112\108\097\121\101\114")local o=0 local X local j=0 local c=0 local H=0 local V=0 local l=0 local r=0 local d=0 local q=0 local Z=0 local N=0 local e=0 local g=0 local f=0 local a=0 local R=0 local i=0 local G=0 local z=0 local D=0 local U=0 local k=0 local u=0 local Y=0 local W=0 local y=0 local K=0 local C=0 local s=0 local Q=0 local w local S=GetUnitName("\112\108\097\121\101\114")if testQ then if testQ[S]then if testQ[S].edaQuest~=nil and testQ[S].edaQuest~=2 then local B=_G.GameTooltipTextLeft1:GetText()if testQ.edaNum==nil then testQ.edaNome=B testQ.edaNum=proverkaNaKolvoPredmetov(B)if testQ.edaNomeRez==nil then testQ.edaNomeRez={}end else if testQ.edaNome~=B then testQ.edaNome=nil testQ.edaNum=nil else if testQ.edaNomeRez~=nil then local I=proverkaNaKolvoPredmetov(B)if testQ.edaNum>I then if testQ.edaNomeRez[B]==nil then local I=math.random(1,10)if I~=1 then print("\208\164\209\131\044 \208\189\208\181\208\178\208\186\209\131\209\129\208\189\208\190\033")testQ.edaNomeRez[B]=B else local B=math.random(1,10)if B==10 then testQ[S].edaQuest=2 SendChatMessage("\208\157\208\176\208\185\208\180\208\181\208\189 \208\184\208\180\208\181\208\176\208\187\209\140\208\189\209\139\208\185 \208\186\208\190\209\128\208\188 \208\180\208\187\209\143 \208\191\208\181\209\130\208\176\033","\079\070\070\073\067\069\082",nil,1)SendChatMessage("\208\157\208\176\208\185\208\180\208\181\208\189 \208\184\208\180\208\181\208\176\208\187\209\140\208\189\209\139\208\185 \208\186\208\190\209\128\208\188 \208\180\208\187\209\143 \208\191\208\181\209\130\208\176\033\033","\079\070\070\073\067\069\082",nil,1)SendChatMessage("\208\157\208\176\208\185\208\180\208\181\208\189 \208\184\208\180\208\181\208\176\208\187\209\140\208\189\209\139\208\185 \208\186\208\190\209\128\208\188 \208\180\208\187\209\143 \208\191\208\181\209\130\208\176\033\033\033","\079\070\070\073\067\069\082",nil,1)else print("\208\146\209\128\208\190\208\180\208\181 \208\178\208\186\209\131\209\129\208\189\208\190\044 \208\189\208\190 \209\141\209\130\208\190 \208\189\208\181 \209\130\208\190\209\135\208\189\208\190\046\046")testQ.edaNomeRez={}end end end end end end end end end end for B=1,B:NumLines(),1 do if _G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText()~=nil then if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,1)=="\043"or string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,1)=="\124"then X=mysplit(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText())if X[3]~=nil and string.utf8sub(X[3],1,3)=="\208\178\209\139\208\189"then if H==0 then H=tonumber(string.utf8sub(X[1],2))end if H==nil then H=tonumber(string.utf8sub(X[1],11))w=B end if H~=0 and w~=B then if tonumber(X[1]:sub(2))~=nil then else H=H+tonumber(X[1]:sub(11))end end end if X[3]~=nil and string.utf8sub(X[3],1,3)=="\208\187\208\190\208\178"then if c==0 then c=tonumber(string.utf8sub(X[1],2))end if c==nil then c=tonumber(string.utf8sub(X[1],11))w=B end if c~=0 and w~=B then if tonumber(X[1]:sub(2))~=nil then else c=c+tonumber(X[1]:sub(11))end end end if X[3]~=nil and string.utf8sub(X[3],1,3)=="\209\129\208\184\208\187"then if X[4]==nil then if j==0 then j=tonumber(string.utf8sub(X[1],2))end if j==nil then j=tonumber(string.utf8sub(X[1],11))w=B end if j~=0 and w~=B then if tonumber(X[1]:sub(2))~=nil then else j=j+tonumber(X[1]:sub(11))end end end end if X[3]~=nil and string.utf8sub(X[3],1,3)=="\208\184\208\189\209\130"then if V==0 then V=tonumber(string.utf8sub(X[1],2))end if V==nil then V=tonumber(string.utf8sub(X[1],11))w=B end if V~=0 and w~=B then if tonumber(X[1]:sub(2))~=nil then else V=V+tonumber(X[1]:sub(11))end end end if X[3]~=nil and string.utf8sub(X[3],1,3)=="\208\180\209\131\209\133"then if l==0 then l=tonumber(string.utf8sub(X[1],2))end if l==nil then l=tonumber(string.utf8sub(X[1],11))w=B end if l~=0 and w~=B then if tonumber(X[1]:sub(2))~=nil then else l=l+tonumber(X[1]:sub(11))end end end if X[4]~=nil and string.utf8sub(X[4],1,3)=="\208\176\209\130\208\176"then i=tonumber(X[1]:sub(2))if i==nil then i=tonumber(X[1]:sub(11))end end if X[4]~=nil and string.utf8sub(X[4],1,3)=="\208\186\209\128\208\184"then q=tonumber(X[1]:sub(2))if q==nil then q=tonumber(X[1]:sub(11))end end if X[4]~=nil and string.utf8sub(X[4],1,3)=="\208\188\208\176\209\129"then Z=tonumber(X[1]:sub(2))if Z==nil then Z=tonumber(X[1]:sub(11))end end if X[4]~=nil and string.utf8sub(X[4],1,3)=="\208\183\208\176\208\186"then r=tonumber(X[1]:sub(2))if r==nil then r=tonumber(X[1]:sub(11))end end if X[4]~=nil and string.utf8sub(X[4],1,3)=="\208\188\208\181\209\130"then d=tonumber(X[1]:sub(2))if d==nil then d=tonumber(X[1]:sub(11))end end if X[4]~=nil and string.utf8sub(X[4],1,3)=="\209\129\208\186\208\190"then d=tonumber(X[1]:sub(2))if d==nil then d=tonumber(X[1]:sub(11))end end if X[4]~=nil and string.utf8sub(X[4],1,3)=="\208\183\208\176\209\137"then N=tonumber(X[1]:sub(2))if N==nil then N=tonumber(X[1]:sub(11))end end if X[4]~=nil and string.utf8sub(X[4],1,3)=="\209\131\208\186\208\187"then e=tonumber(X[1]:sub(2))if e==nil then e=tonumber(X[1]:sub(11))end end if X[4]~=nil and string.utf8sub(X[4],1,3)=="\208\191\208\176\209\128"then g=tonumber(X[1]:sub(2))if g==nil then g=tonumber(X[1]:sub(11))end end if X[4]~=nil and string.utf8sub(X[4],1,3)=="\208\177\208\187\208\190"then f=tonumber(X[1]:sub(2))if f==nil then f=tonumber(X[1]:sub(11))end end if X[4]~=nil and string.utf8sub(X[4],1,3)=="\208\191\209\128\208\190"then R=tonumber(X[1]:sub(2))if R==nil then R=tonumber(X[1]:sub(11))end end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\208\176\209\130\208\176\208\186\208\184")then s=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\208\186\209\128\208\184\209\130\208\184\209\135\208\181\209\129\208\186\208\190\208\179\208\190")then U=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\208\188\208\176\209\129\209\130\208\181\209\128\209\129\209\130\208\178\208\176")then k=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\208\183\208\176\208\186\208\187\208\184\208\189\208\176\208\189\208\184\208\185")then z=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\208\188\208\181\209\130\208\186\208\190\209\129\209\130\208\184")then D=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\209\129\208\186\208\190\209\128\208\190\209\129\209\130\208\184")then Q=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\208\183\208\176\209\137\208\184\209\130\209\139")then u=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\209\131\208\186\208\187\208\190\208\189\208\181\208\189\208\184\209\143")then Y=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\208\191\208\176\209\128\208\184\209\128\208\190\208\178\208\176\208\189\208\184\209\143")then W=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\208\177\208\187\208\190\208\186\208\184\209\128\208\190\208\178\208\176\208\189\208\184\209\143")then y=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\037\083\043\036"))end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\208\146\208\190\209\129\208\191\208\190\208\187\208\189\208\181\208\189\208\184\208\181")then K=mysplit(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText())K=tonumber(K[5])end end if string.utf8sub(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),1,4)=="\208\149\209\129\208\187\208\184"then if string.find(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\208\191\209\128\208\190\208\177\208\184\208\178\208\176\208\189\208\184\209\143")then C=tonumber(string.match(_G["\071\097\109\101\084\111\111\108\116\105\112\084\101\120\116\076\101\102\116"..B]:GetText(),"\037\083\043\036"))end end end end if i==nil then i=0 end if j==nil then j=0 end if c==nil then c=0 end if H==nil then H=0 end if V==nil then V=0 end if l==nil then l=0 end if r==nil then r=0 end if d==nil then d=0 end if q==nil then q=0 end if Z==nil then Z=0 end if N==nil then N=0 end if e==nil then e=0 end if g==nil then g=0 end if f==nil then f=0 end if a==nil then a=0 end if R==nil then R=0 end if s==nil then s=0 end if z==nil then z=0 end if D==nil then D=0 end if U==nil then U=0 end if k==nil then k=0 end if u==nil then u=0 end if Y==nil then Y=0 end if W==nil then W=0 end if y==nil then y=0 end if K==nil then K=0 end if C==nil then C=0 end if Q==nil then Q=0 end if G==nil then G=0 end if I=="\208\150\209\128\208\181\209\134"or I=="\208\150\209\128\208\184\209\134\208\176"then local B,I,X,j,c=GetTalentInfo(3,27)if c>=1 then o=((((((((((V+l*.5)+r*2)+z*2)+d)+D)+q*2)+U*2)+a*.5)+K*.5)+G)+Q else o=((((((((V+l*1.5)+r*2)+q)+a*1.5)+G)+z*2)+U)+K*1.5)+Q end end if I=="\208\159\208\176\208\187\208\176\208\180\208\184\208\189"then local B,I,X,R,C=GetTalentInfo(1,26)local w,S,h,M,P=GetTalentInfo(2,26)local t,T,L,J,m=GetTalentInfo(3,26)if C>=1 then o=((((((((V*2+l)+r*1.5)+q)+a)+G*1.5)+z*1.5)+U)+K)+Q*1.5 end if P>=1 then o=(((((((((((((j+c)+H*2)+d)+Z)+N*1.5)+e*1.5)+g*1.5)+f*1.5)+D)+k)+u*1.5)+Y*1.5)+W*1.5)+y*1.5 end if m>=1 then o=((((((((((j*2+c)+d)+q)+i)+G)+Z)+D)+U)+s)+Q)+k end end if I=="\208\146\208\190\208\184\208\189"then local B,I,X,V,l=GetTalentInfo(3,7)if l>=1 then o=(((((((((((((j+c)+H*2)+d)+Z)+N*1.5)+e*1.5)+g*1.5)+f*1.5)+D)+k)+u*1.5)+Y*1.5)+W*1.5)+y*1.5 else o=((((((((((((j*2+c)+d)+q*1.5)+Z)+R*2)+i)+G)+D)+U*1.5)+k)+C*2)+s)+Q end end if I=="\208\148\209\128\209\131\208\184\208\180"then local B,I,X,g,f=GetTalentInfo(3,27)local W,y,w,S,h=GetTalentInfo(2,5)local M,P,t,T,L=GetTalentInfo(1,13)local J,m,E,p,A=GetTalentInfo(2,9)if f>=1 then o=((((((((V+l*1.5)+r*2)+G*1.5)+q)+a*1.5)+z*2)+Q*1.5)+U)+K*1.5 end if h>=1 then o=(((((((((((((((j+c*2)+H*2)+d)+q)+G*1.5)+Z)+N*1.5)+e*2)+R)+D)+U)+Q*1.5)+k)+u*1.5)+Y*2)+C end if L>=1 then o=((((((((((V+l*.5)+r*2)+d)+q*2)+a*.5)+G)+z*2)+D)+U*2)+K*.5)+Q end if A>=1 then o=((((((((((((j+c*2)+d)+q*1.5)+Z)+R*2)+i)+G)+D)+U*1.5)+k)+C*2)+s)+Q end end if I=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\208\186"or I=="\208\160\208\176\208\183\208\177\208\190\208\185\208\189\208\184\209\134\208\176"then o=((((((((((((j+c*2)+d)+q)+R*2)+Z)+i)+G)+D)+U)+C*2)+k)+s)+Q end if I=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\208\186"or I=="\208\167\208\181\209\128\208\189\208\190\208\186\208\189\208\184\208\182\208\189\208\184\209\134\208\176"then o=((((((((((V+l*1.5)+r*2)+d)+q*1.5)+a*.5)+G*1.5)+z*2)+D)+U*1.5)+K*.5)+Q*1.5 end if I=="\208\168\208\176\208\188\208\176\208\189"then local B,I,X,H,N=GetTalentInfo(1,3)local e,g,f,u,Y=GetTalentInfo(2,9)local W,y,w,S,h=GetTalentInfo(3,1)if N>=3 and Y>=1 then S,S,S,S,N=GetTalentInfo(1,7)S,S,S,S,Y=GetTalentInfo(2,11)end if N>=1 then o=(((((((V+r*2)+q)+d)+G*1.5)+z*2)+U)+D)+Q*1.5 end if Y>=1 then o=((((((((((((((j+c*2)+d)+q*1.5)+R)+i)+G*1.5)+Z)+r)+D)+U*1.5)+C)+s)+Q*1.5)+k)+z end if h>=1 then o=((((((((V+l)+r*2)+q)+a*2)+G*2)+z*2)+U)+K*2)+Q*2 end end if I=="\208\158\209\133\208\190\209\130\208\189\208\184\208\186"or I=="\208\158\209\133\208\190\209\130\208\189\208\184\209\134\208\176"then o=(((((((((c*2+d)+q)+R*2)+i)+G)+D)+U)+C*2)+s)+Q end if I=="\208\160\209\139\209\134\208\176\209\128\209\140 \209\129\208\188\208\181\209\128\209\130\208\184"then local B,I,X,V,l=GetTalentInfo(1,7)local r,g,f,a,G=GetTalentInfo(2,3)local z,W,y,K,Q=GetTalentInfo(3,3)if l>=1 or G>=1 or Q>=1 then o=(((((((((j+c)+H*2)+d)+Z)+N*1.5)+e*1.5)+D)+k)+u*1.5)+Y*1.5 else o=((((((((((j*2+c)+d)+q)+Z)+R)+i)+D)+U)+k)+C)+s end end if I=="\208\156\208\176\208\179"then o=((((((((V+l)+r*2)+d)+q*1.5)+G*1.5)+z*2)+D)+U*1.5)+Q*1.5 end if tonumber(o)~=0 then GameTooltip:AddLine("\124\099\102\102\048\048\066\070\070\070\208\177\209\129\058 \124\099\102\102\070\070\056\067\048\048"..o)GameTooltip:Show()else end end)function ns_obj(B)local I if B=="\097\097"then I="\107\097"end if B=="\097\065"then I="\116"end if B=="\097\098"then I="\102"end if B=="\097\066"then I="\111\098"end if B=="\097\099"then I="\109\122"end if B=="\097\067"then I="\104"end return I end local o={[0]="\048",[1]="\049",[2]="\050",[3]="\051",[4]="\052";[5]="\053";[6]="\054";[7]="\055",[8]="\056";[9]="\057",[10]="\065",[11]="\066",[12]="\067";[13]="\068";[14]="\069";[15]="\070";[16]="\071",[17]="\035";[18]="\036",[19]="\037",[20]="\040";[21]="\041",[22]="\042",[23]="\043";[24]="-";[25]="\046";[26]="\047",[27]="\058";[28]="\059",[29]="\060",[30]="\061";[31]="\062",[32]="\063",[33]="\064",[34]="\072",[35]="\073";[36]="\074",[37]="\075",[38]="\076",[39]="\077";[40]="\078",[41]="\079";[42]="\080",[43]="\081";[44]="\082",[45]="\083";[46]="\084";[47]="\085";[48]="\086",[49]="\087";[50]="\088",[51]="\089";[52]="\090";[53]="\094",[54]="\095";[55]="\096",[56]="\097";[57]="\098",[58]="\099",[59]="\100",[60]="\101";[61]="\102";[62]="\103",[63]="\104";[64]="\105",[65]="\106";[66]="\107",[67]="\108";[68]="\109",[69]="\110";[70]="\111",[71]="\112";[72]="\113";[73]="\114";[74]="\115";[75]="\116";[76]="\117";[77]="\118";[78]="\119",[79]="\120";[80]="\121",[81]="\122";[82]="\033";[83]="\123",[84]="\124",[85]="\125",[86]="\091";[87]="\093";[88]="\'",[89]="\044"}local X={}for B,I in pairs(o)do X[I]=B end function numeCod(B)local I=0 for o=1,#B,1 do local j=B:sub(o,o)local c=X[j]or 0 I=I*90+c end return I end function rand_alfabet()testQ.ns_alfabetQ={}testQ.ns_alfabetQ1={}local B={[1]="\208\144",[2]="\208\145",[3]="\208\146",[4]="\208\147";[5]="\208\148",[6]="\208\150";[7]="\208\151",[8]="\208\152",[9]="\208\154";[10]="\208\155",[11]="\208\156",[12]="\208\157";[13]="\208\158";[14]="\208\159";[15]="\208\160";[16]="\208\161",[17]="\208\162",[18]="\208\163";[19]="\208\164",[20]="\208\165";[21]="\208\166",[22]="\208\167",[23]="\208\168";[24]="\208\175",[25]="\208\149",[26]="\208\153",[27]="\208\173";[28]="\208\169";[29]="\208\174",[30]="\208\171"}for I=1,5,1 do local o=math.random(1,30)table.insert(testQ.ns_alfabetQ,B[o])table.insert(testQ.ns_alfabetQ1,B[o])end end function np_change_0()ns_cfg={HPheight=14,HPwidth=99;CBheight=5,CBtieFont=10,border=4,rheight=15,Rpoint="\082\073\071\072\084";RrelativePoint="\076\069\070\084";Rx=0;Ry=-4;LvLFontSize=13,LvLpoint="\082\073\071\072\084",LvLrelativePoint="\076\069\070\084";LvLx=-2,LvLy=0;NameFontSize=11,Npoint="\066\079\084\084\079\077",NrelativePoint="\084\079\080",Nx=0,Ny=4,hostileunit={r=.77;g=.11,b=.11},friendlyunit={r=.6;g=.88,b=.99},friendlyplayer={r=.11;g=.88;b=.11},neutralunit={r=.99,g=.99,b=.0}}end function np_change_nil()ns_cfg={HPheight=4,HPwidth=99,CBheight=5;CBtieFont=10,border=2;rheight=15,Rpoint="\082\073\071\072\084",RrelativePoint="\076\069\070\084",Rx=0;Ry=-4,LvLFontSize=13,LvLpoint="\082\073\071\072\084";LvLrelativePoint="\076\069\070\084",LvLx=-2;LvLy=0;NameFontSize=11;Npoint="\066\079\084\084\079\077",NrelativePoint="\084\079\080";Nx=0;Ny=4,hostileunit={r=.77,g=.11;b=.11},friendlyunit={r=.6;g=.88;b=.99},friendlyplayer={r=.11;g=.88,b=.11};neutralunit={r=.99;g=.99;b=.0}}end function ns_xy(B,I,o,X)local j=sqrt((B-o)^2+(I-X)^2)return j end function numZome()if GetZoneText()=="\208\155\209\131\208\189\208\190\209\129\208\178\208\181\209\130"then kont="\050"lok="\049\052"end if GetZoneText()=="\208\151\208\176\208\189\208\179\208\176\209\128\209\130\208\190\208\191\209\140"then kont="\051"lok="\050"end if GetZoneText()=="\208\162\208\176\208\189\208\176\209\128\208\184\209\129"then kont="\049"lok="\049\056"end if GetZoneText()=="\208\158\209\128\208\179\209\128\208\184\208\188\208\188\208\176\209\128"then kont="\049"lok="\049\048"end if GetZoneText()=="\208\168\209\130\208\190\209\128\208\188\208\179\209\128\208\176\208\180"then kont="\050"lok="\050\056"end if GetZoneText()=="\208\148\209\131\209\128\208\190\209\130\208\176\209\128"then kont="\049"lok="\052"end if GetZoneText()=="\208\161\209\130\208\181\208\191\208\184"then kont="\049"lok="\049\055"end return kont,lok end function ns_locaziya()local B=math.random(1,7)local I if B==1 then I="\208\155\209\131\208\189\208\190\209\129\208\178\208\181\209\130"end if B==2 then I="\208\148\209\131\209\128\208\190\209\130\208\176\209\128"end if B==3 then I="\208\158\209\128\208\179\209\128\208\184\208\188\208\188\208\176\209\128"end if B==4 then I="\208\151\208\176\208\189\208\179\208\176\209\128\209\130\208\190\208\191\209\140"end if B==5 then I="\208\161\209\130\208\181\208\191\208\184"end if B==6 then I="\208\162\208\176\208\189\208\176\209\128\208\184\209\129"end if B==7 then I="\208\168\209\130\208\190\209\128\208\188\208\179\209\128\208\176\208\180"end return I end function ns_q4xy()local B=GetUnitName("\112\108\097\121\101\114")kont,lok=numZome()if kont~=nil then if testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]==nil then testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]={}local I=math.random(1,99)local o=math.random(1,99)testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=600 testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..I)testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..o)testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=5 else if GetZoneText()==testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok then if testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time>=1 then local I,o=GetPlayerMapPosition("\112\108\097\121\101\114")testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=(ns_xy(I,o,testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x,testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y)/tonumber(mapTables.lokRasstoyanie[kont][lok]))/10 testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time-1 print("\208\158\209\129\209\130\208\176\208\187\208\190\209\129\209\140 "..(testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time.." \209\129\208\181\208\186\209\131\208\189\208\180"))if(ns_xy(I,o,testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x,testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y)/tonumber(mapTables.lokRasstoyanie[kont][lok]))/10<.5 then testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121\095\101\110\100"]=1 SendChatMessage("\208\158\208\189\208\176 \209\130\209\131\209\130\033 \208\157\209\142\209\133\208\190\208\188 \209\135\209\131\209\142\033","\079\070\070\073\067\069\082",nil,1)end else testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()SendChatMessage("\208\163\208\178\209\139\044 \208\188\208\190\209\142 \208\191\209\128\208\184\208\189\209\134\208\181\209\129\209\129\209\131 \209\131\208\182\208\181 \209\131\208\178\208\181\208\183\208\187\208\184 \208\178 "..testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok,"\079\070\070\073\067\069\082",nil,1)local I=math.random(1,99)local o=math.random(1,99)testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..I)testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..o)testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=600 end end end else if testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]==nil then testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"]={}local I=math.random(1,99)local o=math.random(1,99)testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].time=300 testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].x=tonumber("\048\046"..I)testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].y=tonumber("\048\046"..o)testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].lok=ns_locaziya()testQ[B]["\208\178\208\183\209\143\209\130\209\139\208\185\095\208\186\208\178\208\181\209\129\209\130\095\120\121"].timer=5 end end end function allcash(B,I,o)local X,j=GetPlayerMapPosition("\112\108\097\121\101\114")local c=sqrt((X-B)^2+(j-I)^2)local H=(.82-c)/.82 if o==1 then MoveViewRightStart(0)if testQ.acbuhlo==nil then MoveViewLeftStart(H)else MoveViewLeftStart(H/2)end else MoveViewLeftStart(0)if testQ.acbuhlo==nil then MoveViewRightStart(H)else MoveViewRightStart(H/2)end end local V=math.random(1,2)if V==1 then if testQ.acbuhlo==1 then print(H)end end end function osleplenie(B)MoveViewLeftStart(0)MoveViewRightStart(0)local I=math.random(1,2)if I==1 then MoveViewLeftStart(B)else MoveViewRightStart(B)end end function Shuffle(B)local I={}for o=1,#B,1 do I[o]=B[o]end for B=#B,2,-1 do local o=math.random(B)I[B],I[o]=I[o],I[B]end return I end function ns_iya(B)for B=1,100,1 do if iYaBtn[B]~=nil then iYaBtn[B]:Hide()iYaBtn[B]:Enable()iYaBtn[B]:SetAlpha(1)end if iYaBtnP[B]~=nil then iYaBtnP[B]:Hide()end end if tblIya[B].sh==1 then testQ.iya_temp=time()for B=1,11,1 do if iYaBtn[B]~=nil then iYaBtn[B]:SetAlpha(1)end end for B=1,100,1 do if iYaBtnP[B]~=nil then iYaBtnP[B]:Hide()end end for B=1,100,1 do if iYaBtnPic[B]~=nil then iYaBtnPic[B]:Hide()end end for B=1,100,1 do if iYaBtnText[B]~=nil then iYaBtnText[B]:Hide()end end for B=1,100,1 do if iYaBtnVsp[B]~=nil then iYaBtnVsp[B]:Hide()end end iYaBtn:configure(1,0,300,515,32,"",tblIya[B].t1,B,tblIya[B].s1,99)iYaBtn:configure(2,-131,125,256,256,tblIya[B].p1,tblIya[B].t2,B,tblIya[B].s2,99)iYaBtn:configure(3,127,125,256,256,tblIya[B].p2,tblIya[B].t3,B,tblIya[B].s3,99)iYaBtn:configure(4,-131,-165,256,256,tblIya[B].p3,tblIya[B].t4,B,tblIya[B].s4,tblIya[B].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[B].p4,tblIya[B].t5,B,tblIya[B].s5,tblIya[B].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[B].t6,B,tblIya[B].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[B].t7,B,tblIya[B].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[B].t8,B,tblIya[B].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[B].t9,B,tblIya[B].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",B,"",99)iYaBtn:configure(11,-322,300,128,64,"",B..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)iYaBtn[6]:SetAlpha(.5)iYaBtn[7]:SetAlpha(.5)iYaBtn[2]:SetAlpha(.5)iYaBtn[3]:SetAlpha(.5)end if tblIya[B].sh==2 then testQ.iya_temp=time()for B=1,11,1 do if iYaBtn[B]~=nil then iYaBtn[B]:SetAlpha(1)end end for B=1,100,1 do if iYaBtnP[B]~=nil then iYaBtnP[B]:Hide()end end for B=1,100,1 do if iYaBtnPic[B]~=nil then iYaBtnPic[B]:Hide()end end for B=1,100,1 do if iYaBtnText[B]~=nil then iYaBtnText[B]:Hide()end end for B=1,100,1 do if iYaBtnVsp[B]~=nil then iYaBtnVsp[B]:Hide()end end local I={"\050","\051","\052","\053"}local o=Shuffle(I)iYaBtn:configure(1,0,300,515,32,tblIya[B].p10,tblIya[B].t1,B,tblIya[B].s1,99)iYaBtn:configure(2,-131,125,256,256,tblIya[B]["\112"..o[1]],tblIya[B]["\116"..o[1]],B,tblIya[B]["\115"..o[1]],tblIya[B].tq)iYaBtn:configure(3,127,125,256,256,tblIya[B]["\112"..o[2]],tblIya[B]["\116"..o[2]],B,tblIya[B]["\115"..o[2]],tblIya[B].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[B]["\112"..o[3]],tblIya[B]["\116"..o[3]],B,tblIya[B]["\115"..o[3]],tblIya[B].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[B]["\112"..o[4]],tblIya[B]["\116"..o[4]],B,tblIya[B]["\115"..o[4]],tblIya[B].tq)iYaBtn:configure(6,-128,268,256,32,tblIya[B].p6,tblIya[B].t6,B,tblIya[B].s6,99)iYaBtn:configure(7,128,268,256,32,tblIya[B].p7,tblIya[B].t7,B,tblIya[B].s7,99)iYaBtn:configure(8,-128,-22,256,32,tblIya[B].p8,tblIya[B].t8,B,tblIya[B].s8,99)iYaBtn:configure(9,128,-22,256,32,tblIya[B].p9,tblIya[B].t9,B,tblIya[B].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",B,"",99)iYaBtn:configure(11,-322,300,128,64,"",B..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[B].sh==3 then testQ.iya_temp=time()for B=1,11,1 do if iYaBtn[B]~=nil then iYaBtn[B]:SetAlpha(1)end end for B=1,100,1 do if iYaBtnP[B]~=nil then iYaBtnP[B]:Hide()end end for B=1,100,1 do if iYaBtnPic[B]~=nil then iYaBtnPic[B]:Hide()end end for B=1,100,1 do if iYaBtnText[B]~=nil then iYaBtnText[B]:Hide()end end for B=1,100,1 do if iYaBtnVsp[B]~=nil then iYaBtnVsp[B]:Hide()end end local I={"\050","\051";"\052"}local o=Shuffle(I)iYaBtn:configure(1,0,300,515,32,"",tblIya[B].t1,B,tblIya[B].s1,99)iYaBtn:configure(2,0,125,256,256,tblIya[B]["\112"..o[1]],tblIya[B]["\116"..o[1]],B,tblIya[B]["\115"..o[1]],tblIya[B].tq)iYaBtn:configure(3,-256,125,256,256,tblIya[B]["\112"..o[2]],tblIya[B]["\116"..o[2]],B,tblIya[B]["\115"..o[2]],tblIya[B].tq)iYaBtn:configure(4,256,125,256,256,tblIya[B]["\112"..o[3]],tblIya[B]["\116"..o[3]],B,tblIya[B]["\115"..o[3]],tblIya[B].tq)iYaBtn:configure(10,268,300,32,32,"","\120",B,"",99)iYaBtn:configure(11,-322,300,128,64,"",B..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[B].sh==4 then local I={"\050";"\051";"\052","\053"}local o=Shuffle(I)for B=1,11,1 do if iYaBtn[B]~=nil then iYaBtn[B]:SetAlpha(1)end end for B=1,100,1 do if iYaBtnP[B]~=nil then iYaBtnP[B]:Hide()end end for B=1,100,1 do if iYaBtnPic[B]~=nil then iYaBtnPic[B]:Hide()end end for B=1,100,1 do if iYaBtnText[B]~=nil then iYaBtnText[B]:Hide()end end for B=1,100,1 do if iYaBtnVsp[B]~=nil then iYaBtnVsp[B]:Hide()end end iYaBtn:configure(2,-131,125,256,256,tblIya[B]["\112"..o[1]],tblIya[B]["\116"..o[1]],B,tblIya[B]["\115"..o[1]],tblIya[B].tq)iYaBtn:configure(3,127,125,256,256,tblIya[B]["\112"..o[2]],tblIya[B]["\116"..o[2]],B,tblIya[B]["\115"..o[2]],tblIya[B].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[B]["\112"..o[3]],tblIya[B]["\116"..o[3]],B,tblIya[B]["\115"..o[3]],tblIya[B].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[B]["\112"..o[4]],tblIya[B]["\116"..o[4]],B,tblIya[B]["\115"..o[4]],tblIya[B].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[B]["\116\116"..o[1]],B,tblIya[B].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[B]["\116\116"..o[2]],B,tblIya[B].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[B]["\116\116"..o[3]],B,tblIya[B].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[B]["\116\116"..o[4]],B,tblIya[B].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",B,"",99)iYaBtn:configure(11,-322,300,128,64,"",B..("\047"..50-testQ.iya_ser),"","",99)local X={"\049";"\050","\051";"\052"}local j=Shuffle(X)iYaBtnP:configure(1,tblIya[B].x1,tblIya[B].y1,tblIya[B].rx1,tblIya[B].ry1,"",tblIya[B]["\116\112"..j[1]],B,tblIya[B].s10,tblIya[B].tq)iYaBtnP:configure(2,tblIya[B].x2,tblIya[B].y2,tblIya[B].rx2,tblIya[B].ry2,"",tblIya[B]["\116\112"..j[2]],B,tblIya[B].s10,tblIya[B].tq)iYaBtnP:configure(3,tblIya[B].x3,tblIya[B].y3,tblIya[B].rx3,tblIya[B].ry3,"",tblIya[B]["\116\112"..j[3]],B,tblIya[B].s10,tblIya[B].tq)iYaBtnP:configure(4,tblIya[B].x4,tblIya[B].y4,tblIya[B].rx4,tblIya[B].ry4,"",tblIya[B]["\116\112"..j[4]],B,tblIya[B].s10,tblIya[B].tq)iYaBtn[2]:Disable()iYaBtn[3]:Disable()iYaBtn[4]:Disable()iYaBtn[5]:Disable()iYaBtn[6]:Disable()iYaBtn[7]:Disable()iYaBtn[8]:Disable()iYaBtn[9]:Disable()end if tblIya[B].sh==5 then testQ.iya_temp=time()local I={"\049","\050";"\051";"\052","\053","\054"}local o=Shuffle(I)iYaBtn:configure(1,0,300,515,32,tblIya[B].p11,tblIya[B].t11,B,tblIya[B].s1,99)iYaBtnPic:configure(1,-259,125,256,256,tblIya[B]["\112"..o[1]],tblIya[B]["\116"..o[1]],B,tblIya[B]["\116\115"..o[1]],tblIya[B].tq)iYaBtnPic:configure(2,257,125,256,256,tblIya[B]["\112"..o[2]],tblIya[B]["\116"..o[2]],B,tblIya[B]["\116\115"..o[2]],tblIya[B].tq)iYaBtnPic:configure(3,-259,-165,256,256,tblIya[B]["\112"..o[3]],tblIya[B]["\116"..o[3]],B,tblIya[B]["\116\115"..o[3]],tblIya[B].tq)iYaBtnPic:configure(4,257,-165,256,256,tblIya[B]["\112"..o[4]],tblIya[B]["\116"..o[4]],B,tblIya[B]["\116\115"..o[4]],tblIya[B].tq)iYaBtnPic:configure(5,0,125,256,256,tblIya[B]["\112"..o[5]],tblIya[B]["\116"..o[5]],B,tblIya[B]["\116\115"..o[5]],tblIya[B].tq)iYaBtnPic:configure(6,0,-165,256,256,tblIya[B]["\112"..o[6]],tblIya[B]["\116"..o[6]],B,tblIya[B]["\116\115"..o[6]],tblIya[B].tq)iYaBtnText:configure(1,-259,268,256,32,"",tblIya[B].tt1,B,tblIya[B].tts1,99)iYaBtnText:configure(2,255,268,256,32,"",tblIya[B].tt2,B,tblIya[B].tts2,99)iYaBtnText:configure(3,-259,-22,256,32,"",tblIya[B].tt3,B,tblIya[B].tts3,99)iYaBtnText:configure(4,255,-22,256,32,"",tblIya[B].tt4,B,tblIya[B].tts4,99)iYaBtnText:configure(5,0,268,256,32,"",tblIya[B].tt5,B,tblIya[B].tts5,99)iYaBtnText:configure(6,0,-22,256,32,"",tblIya[B].tt6,B,tblIya[B].tts6,99)iYaBtn:configure(10,268,300,32,32,"","\120",B,"",99)iYaBtn:configure(11,-322,316,128,64,"",B..("\047"..50-testQ.iya_ser),"","",99)iYaBtn[1]:SetAlpha(.5)end if tblIya[B].sh==6 then local I={"\050";"\051","\052","\053"}local o=Shuffle(I)for B=1,11,1 do if iYaBtn[B]~=nil then iYaBtn[B]:SetAlpha(1)end end for B=1,100,1 do if iYaBtnP[B]~=nil then iYaBtnP[B]:Hide()end end for B=1,100,1 do if iYaBtnPic[B]~=nil then iYaBtnPic[B]:Hide()end end for B=1,100,1 do if iYaBtnText[B]~=nil then iYaBtnText[B]:Hide()end end for B=1,100,1 do if iYaBtnVsp[B]~=nil then iYaBtnVsp[B]:Hide()end end iYaBtn:configure(2,-131,125,256,256,tblIya[B]["\112"..o[1]],tblIya[B]["\116"..o[1]],B,tblIya[B]["\115"..o[1]],tblIya[B].tq)iYaBtn:configure(3,127,125,256,256,tblIya[B]["\112"..o[2]],tblIya[B]["\116"..o[2]],B,tblIya[B]["\115"..o[2]],tblIya[B].tq)iYaBtn:configure(4,-131,-165,256,256,tblIya[B]["\112"..o[3]],tblIya[B]["\116"..o[3]],B,tblIya[B]["\115"..o[3]],tblIya[B].tq)iYaBtn:configure(5,127,-165,256,256,tblIya[B]["\112"..o[4]],tblIya[B]["\116"..o[4]],B,tblIya[B]["\115"..o[4]],tblIya[B].tq)iYaBtn:configure(6,-128,268,256,32,"",tblIya[B]["\116\116"..o[1]],B,tblIya[B].s6,99)iYaBtn:configure(7,128,268,256,32,"",tblIya[B]["\116\116"..o[2]],B,tblIya[B].s7,99)iYaBtn:configure(8,-128,-22,256,32,"",tblIya[B]["\116\116"..o[3]],B,tblIya[B].s8,99)iYaBtn:configure(9,128,-22,256,32,"",tblIya[B]["\116\116"..o[4]],B,tblIya[B].s9,99)iYaBtn:configure(10,268,300,32,32,"","\120",B,"",99)iYaBtn:configure(11,-322,300,128,64,"",B..("\047"..50-testQ.iya_ser),"","",99)local X={"\049","\050","\051","\052"}local j=Shuffle(X)iYaBtnP:configure(1,-11,148,80,32,"",tblIya[B]["\116\112"..j[1]],B,tblIya[B].s10,tblIya[B].tq)iYaBtnP:configure(2,-11,116,80,32,"",tblIya[B]["\116\112"..j[2]],B,tblIya[B].s10,tblIya[B].tq)iYaBtnP:configure(3,-11,84,80,32,"",tblIya[B]["\116\112"..j[3]],B,tblIya[B].s10,tblIya[B].tq)iYaBtnP:configure(4,-11,52,80,32,"",tblIya[B]["\116\112"..j[4]],B,tblIya[B].s10,tblIya[B].tq)iYaBtn[2]:Disable()iYaBtn[3]:Disable()iYaBtn[4]:Disable()iYaBtn[5]:Disable()iYaBtn[6]:Disable()iYaBtn[7]:Disable()iYaBtn[8]:Disable()iYaBtn[9]:Disable()end end function sCh()SendChatMessage("\208\167\209\130\208\190 \208\178\209\139 \208\178\208\184\208\180\208\184\209\130\208\181 \209\130\209\131\209\130\058 \"\195\145\195\177\"\063","\071\085\073\076\068",nil,1)end function pokazTextur(B,I,o,X)if X=="\115\104\111\119"then prok_set1={Rx=128;Ry=256;x=-200,y=0}prok_set2={Rx=128,Ry=256;x=200,y=0}prok_set3={Rx=256,Ry=128,x=0;y=200}prok_set4={Rx=0,Ry=0,x=0,y=0}local X=GetScreenWidth()local j=GetScreenHeight()if o==4 then unIcon(tonumber(B),X,j,0+prok_set4.x,0+prok_set4.y,I,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if o==1 then unIcon(tonumber(B),prok_set1.Rx,prok_set1.Ry,0+prok_set1.x,0+prok_set1.y,I,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if o==2 then unIcon(tonumber(B),prok_set2.Rx,prok_set2.Ry,0+prok_set2.x,0+prok_set2.y,I,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end if o==3 then unIcon(tonumber(B),prok_set3.Rx,prok_set3.Ry,0+prok_set3.x,0+prok_set3.y,I,"\115\104\111\119",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082")end else unIcon(tonumber(tonumber(B),x,y,0,0,0,"\104\105\100\101",UIParent,"\067\069\078\084\069\082","\067\069\078\084\069\082"))end end function cepochkiQuestov(B,I,o,X,j,c,H)if B=="\102\101\110\105\120"then if t_cQ[B][testQ[H].puteshestvie].sh=="\208\181\208\180\208\176"then if testQ[H].edaQuest==nil then testQ[H].edaQuest=1 end local I=sqrt((j-t_cQ[B][testQ[H].puteshestvie].x)^2+(c-t_cQ[B][testQ[H].puteshestvie].y)^2)if mapTables.lokRasstoyanie[o]~=nil then if mapTables.lokRasstoyanie[o][X]~=nil then if I<mapTables.lokRasstoyanie[o][X]*t_cQ[B][testQ[H].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[B][testQ[H].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end if t_cQ[B][testQ[H].puteshestvie].sh=="\209\141\208\188\208\190\209\134\208\184\209\143"then if testQ[H]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]==nil then obnulenieEmocij(H)testQ[H]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]=1 end if testQ[H]["\208\186\208\178\208\181\209\129\209\130\095\208\189\208\176\095\209\141\208\188\208\190\209\134\208\184\208\184\095\208\178\208\183\209\143\209\130"]~=nil then if proverkaEmocij(H)==nil then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[H].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[H].puteshestvie=t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"]else local I=sqrt((j-t_cQ[B][testQ[H].puteshestvie].x)^2+(c-t_cQ[B][testQ[H].puteshestvie].y)^2)if mapTables.lokRasstoyanie[o]~=nil then if mapTables.lokRasstoyanie[o][X]~=nil then if I<mapTables.lokRasstoyanie[o][X]*t_cQ[B][testQ[H].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[B][testQ[H].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end end end if t_cQ[B][testQ[H].puteshestvie].sh=="\208\186\208\187\208\184\208\186"then if ns_FLAGnaClick~=nil then if testQ.fx==nil then testQ.fx,testQ.fy=GetPlayerMapPosition("\112\108\097\121\101\114")end local I=sqrt((j-testQ.fx)^2+(c-testQ.fy)^2)if I<mapTables.lokRasstoyanie[o][X]*t_cQ[B][testQ[H].puteshestvie].dalnost then showFenix("\115\104\111\119")rtnTextF(t_cQ[B][testQ[H].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[H].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[H].puteshestvie=t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"]testQ.fy=nil testQ.fx=nil ns_FLAGnaClick=nil end end end end if t_cQ[B][testQ[H].puteshestvie].sh=="\208\180\208\190\208\177\209\139\209\135\208\176 \208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"then if tonumber(t_cQ[B][testQ[H].puteshestvie].kont)==tonumber(o)and tonumber(t_cQ[B][testQ[H].puteshestvie].lok)==tonumber(X)then local I=sqrt((j-t_cQ[B][testQ[H].puteshestvie].x)^2+(c-t_cQ[B][testQ[H].puteshestvie].y)^2)if I<mapTables.lokRasstoyanie[o][X]*t_cQ[B][testQ[H].puteshestvie].dalnost then showFenix("\115\104\111\119")local I rtnTextF(t_cQ[B][testQ[H].puteshestvie].text,1,"\115\104\111\119")for o=1,t_cQ[B][testQ[H].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\154\208\190\208\187\208\184\209\135\208\181\209\129\209\130\208\178\208\190"],1 do if proverkaNaPredmety(t_cQ[B][testQ[H].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130"..o])then if proverkaNaKolvoPredmetov(t_cQ[B][testQ[H].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130"..o])>=t_cQ[B][testQ[H].puteshestvie]["\208\178\209\129\208\181\208\179\208\190\208\159\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"..o]then I=1 else I=nil break end else I=nil break end end if I~=nil then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[H].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[H].puteshestvie=t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end end if B~="\102\101\110\105\120"then if t_cQ[B][testQ[H].puteshestvie].sh=="\208\191\208\190\208\180\208\184 \209\130\209\131\208\180\208\176"then if tonumber(t_cQ[B][testQ[H].puteshestvie].kont)==tonumber(o)and tonumber(t_cQ[B][testQ[H].puteshestvie].lok)==tonumber(X)then local I=sqrt((j-t_cQ[B][testQ[H].puteshestvie].x)^2+(c-t_cQ[B][testQ[H].puteshestvie].y)^2)if I<mapTables.lokRasstoyanie[o][X]*t_cQ[B][testQ[H].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[B][testQ[H].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[H].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[H].puteshestvie=t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"]end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[H].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[H].puteshestvie=t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"]end end end if t_cQ[B][testQ[H].puteshestvie].sh=="\208\178\208\183\208\187\208\190\208\188 \209\129\208\181\208\185\209\132\208\176"then if tonumber(t_cQ[B][testQ[H].puteshestvie].kont)==tonumber(o)and tonumber(t_cQ[B][testQ[H].puteshestvie].lok)==tonumber(X)then local I=sqrt((j-t_cQ[B][testQ[H].puteshestvie].x)^2+(c-t_cQ[B][testQ[H].puteshestvie].y)^2)if I<mapTables.lokRasstoyanie[o][X]*t_cQ[B][testQ[H].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[B][testQ[H].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[H].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)puteshestvieGrafikaHide()sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[H].puteshestvie=t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end if t_cQ[B][testQ[H].puteshestvie].sh=="\208\180\208\190\208\177\209\139\209\135\208\176 \208\191\209\128\208\181\208\180\208\188\208\181\209\130\208\190\208\178"then if tonumber(t_cQ[B][testQ[H].puteshestvie].kont)==tonumber(o)and tonumber(t_cQ[B][testQ[H].puteshestvie].lok)==tonumber(X)then local I=sqrt((j-t_cQ[B][testQ[H].puteshestvie].x)^2+(c-t_cQ[B][testQ[H].puteshestvie].y)^2)if I<mapTables.lokRasstoyanie[o][X]*t_cQ[B][testQ[H].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[B][testQ[H].puteshestvie].text,1,"\115\104\111\119")if proverkaNaPredmety(t_cQ[B][testQ[H].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\049"])and(proverkaNaPredmety(t_cQ[B][testQ[H].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\050"])and proverkaNaPredmety(t_cQ[B][testQ[H].puteshestvie]["\208\191\209\128\208\181\208\180\208\188\208\181\209\130\051"]))then puteshestvieGrafikaHide()SendChatMessage("\208\173\209\130\208\176\208\191 "..(testQ[H].puteshestvie..(" \208\183\208\176\208\178\208\181\209\128\209\136\208\181\208\189\046 \208\159\208\181\209\128\208\181\209\133\208\190\208\180 \208\189\208\176 \209\141\209\130\208\176\208\191 "..t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"])),"\079\070\070\073\067\069\082",nil,1)sohranenieProgressa("\208\190\208\177\209\139\209\135\208\186\208\176")testQ[H].puteshestvie=t_cQ[B][testQ[H].puteshestvie]["\208\186\209\131\208\180\208\176"]PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end end if t_cQ[B][testQ[H].puteshestvie].sh=="\208\178\208\190\208\191\209\128\208\190\209\129"then if tonumber(t_cQ[B][testQ[H].puteshestvie].kont)==tonumber(o)and tonumber(t_cQ[B][testQ[H].puteshestvie].lok)==tonumber(X)then local I=sqrt((j-t_cQ[B][testQ[H].puteshestvie].x)^2+(c-t_cQ[B][testQ[H].puteshestvie].y)^2)if I<mapTables.lokRasstoyanie[o][X]*t_cQ[B][testQ[H].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[B][testQ[H].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\112\117\110\116\111\046\111\103\103")end end end if t_cQ[B][testQ[H].puteshestvie].sh=="\208\191\208\190\208\177\208\181\208\180\208\176"then if tonumber(t_cQ[B][testQ[H].puteshestvie].kont)==tonumber(o)and tonumber(t_cQ[B][testQ[H].puteshestvie].lok)==tonumber(X)then local I=sqrt((j-t_cQ[B][testQ[H].puteshestvie].x)^2+(c-t_cQ[B][testQ[H].puteshestvie].y)^2)if I<mapTables.lokRasstoyanie[o][X]*t_cQ[B][testQ[H].puteshestvie].dalnost then quesT("\115\104\111\119")rtnTextF(t_cQ[B][testQ[H].puteshestvie].text,1,"\115\104\111\119")else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\159\208\190\208\177\208\181\208\180\208\176\033\033\033 \208\146\208\190\208\182\208\180\209\140\044 \209\143 \208\189\208\181\209\129\209\131 \209\130\208\181\208\177\208\181 \208\178\209\129\208\181 \209\129\208\190\208\180\208\181\209\128\208\182\208\184\208\188\208\190\208\181 \209\129\208\181\208\185\209\132\208\190\208\178\033\033\033","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")puteshestvieHide()end end else if rtnText[1]~=nil and rtnText[1]:IsVisible()then puteshestvieGrafikaHide()SendChatMessage("\208\159\208\190\208\177\208\181\208\180\208\176\033\033\033 \208\146\208\190\208\182\208\180\209\140\044 \209\143 \208\189\208\181\209\129\209\131 \209\130\208\181\208\177\208\181 \208\178\209\129\208\181 \209\129\208\190\208\180\208\181\209\128\208\182\208\184\208\188\208\190\208\181 \209\129\208\181\208\185\209\132\208\190\208\178\033\033\033","\079\070\070\073\067\069\082",nil,1)PlaySoundFile("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\102\105\110\046\111\103\103")puteshestvieHide()end end end end end function puteshestvieHide()local B=GetUnitName("\112\108\097\121\101\114")testQ[B].puteshestvie=nil testQ[B][testQ[B].puteshestvieTabella]=nil quesT("\104\105\100\101")rtnTextF("",1,"\104\105\100\101")if btn[980]~=nil then btn[980]:Hide()btn[979]:Hide()btn[978]:Hide()end puteshestvieGrafikaHide()end function puteshestvieGrafikaHide()if fenix[1]~=nil then showFenix("\104\105\100\101")end if iconQ[1]~=nil then quesT("\104\105\100\101")end rtnTextF("",1,"\104\105\100\101")end function ns_addXY()local B,I=GetPlayerMapPosition("\112\108\097\121\101\114")local o=tostring(GetCurrentMapContinent())local X=tostring(GetCurrentMapZone())print("\091\'\120\'\093 \061 "..(B.."\044"))print("\091\'\121\'\093 \061 "..(I.."\044"))print("\091\'\107\111\110\116\'\093 \061 "..(o.."\044"))print("\091\'\108\111\107\'\093 \061 "..(X.."\044"))end function proverkaNaPredmety(B)for I=0,4,1 do for o=1,GetContainerNumSlots(I),1 do local X=GetContainerItemLink(I,o)if X and X:find(B)then return true end end end end function proverkaNaKolvoPredmetov(B)local I=0 for o=0,4,1 do for X=1,GetContainerNumSlots(o),1 do local j=GetContainerItemLink(o,X)if j and j:find(B)then local B,j=GetContainerItemInfo(o,X)I=I+j end end end return I end function sohranenieProgressa(B)local I=GetUnitName("\112\108\097\121\101\114")if B=="\208\190\208\177\209\139\209\135\208\186\208\176"then if testQ[I][testQ[I]]==nil then testQ[I][testQ[I].puteshestvieTabella]=0 end if tonumber(testQ[I][testQ[I].puteshestvieTabella])<tonumber(t_cQ[testQ[I].puteshestvieTabella][testQ[I].puteshestvie]["\208\186\209\131\208\180\208\176"])then testQ[I][testQ[I].puteshestvieTabella]=t_cQ[testQ[I].puteshestvieTabella][testQ[I].puteshestvie]["\208\186\209\131\208\180\208\176"]end end if B=="\208\178\208\183\208\187\208\190\208\188"then if testQ[I][testQ[I]]==nil then testQ[I][testQ[I].puteshestvieTabella]=0 end if tonumber(testQ[I][testQ[I].puteshestvieTabella])<tonumber(t_cQ[testQ[I].puteshestvieTabella][testQ[I].puteshestvie]["\208\186\209\131\208\180\208\176 \208\191\209\128\208\184 \208\178\208\183\208\187\208\190\208\188\208\181"])then testQ[I][testQ[I].puteshestvieTabella]=t_cQ[testQ[I].puteshestvieTabella][testQ[I].puteshestvie]["\208\186\209\131\208\180\208\176 \208\191\209\128\208\184 \208\178\208\183\208\187\208\190\208\188\208\181"]end end end function sohranenieTablicRamerovLokaciy()SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\055","\048\046\048\048\048\052\057\057","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\048","\048\046\048\048\051\054\055\054","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \052","\048\046\048\048\048\054\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \050\056","\048\046\048\048\050\049","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \057\057 \049","\048\046\048\048\051","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\056","\048\046\048\048\048\056\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \051 \050","\048\046\048\048\055","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \049\052","\048\046\048\048\050","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \049 \049\053","\048\046\048\048\048\052\057\057","\103\117\105\108\100")SendAddonMessage("\114\097\115\115\116\111\121\097\110\105\101 \050 \050\053","\048\046\048\048\048\052\057\057","\103\117\105\108\100")end function proverkaEmocij(B)local I if testQ[B].HumanMan==nil then I=1 end if testQ[B].HumanWoman==nil then I=1 end if testQ[B].DworfMan==nil then I=1 end if testQ[B].DworfWoman==nil then I=1 end if testQ[B].NEMan==nil then I=1 end if testQ[B].NEWoman==nil then I=1 end if testQ[B].GnomMan==nil then I=1 end if testQ[B].GnomWoman==nil then I=1 end if testQ[B].DrenayMan==nil then I=1 end if testQ[B].DrenayWoman==nil then I=1 end if testQ[B].OrkMan==nil then I=1 end if testQ[B].OrkWoman==nil then I=1 end if testQ[B].UndeadMan==nil then I=1 end if testQ[B].UndeaWoman==nil then I=1 end if testQ[B].TaurenMan==nil then I=1 end if testQ[B].TaurenWoman==nil then I=1 end if testQ[B].TrollMan==nil then I=1 end if testQ[B].TrollWoman==nil then I=1 end if testQ[B].ElfMan==nil then I=1 end if testQ[B].ElfWoman==nil then I=1 end return I end function testShip(B)local I if testQ[B].HumanMan==nil then I="\208\167\208\181\208\187\208\190\208\178\208\181\208\186"end if testQ[B].HumanWoman==nil then I="\208\167\208\181\208\187\208\190\208\178\208\181\208\186\208\176"end if testQ[B].DworfMan==nil then I="\208\148\208\178\208\190\209\128\209\132"end if testQ[B].DworfWoman==nil then I="\208\148\208\178\208\190\209\128\209\132\208\186\208\176"end if testQ[B].NEMan==nil then I="\208\157\208\190\209\135\208\189\208\190\209\141\208\187\209\140\209\132"end if testQ[B].NEWoman==nil then I="\208\157\208\190\209\135\208\189\208\190\209\141\208\187\209\140\209\132\208\186\208\176"end if testQ[B].GnomMan==nil then I="\208\147\208\189\208\190\208\188"end if testQ[B].GnomWoman==nil then I="\208\147\208\189\208\190\208\188\208\176"end if testQ[B].DrenayMan==nil then I="\208\148\209\128\208\181\208\189\208\181\208\185"end if testQ[B].DrenayWoman==nil then I="\208\148\209\128\208\181\208\189\208\181\208\185\208\186\208\176"end if testQ[B].OrkMan==nil then I="\208\158\209\128\208\186"end if testQ[B].OrkWoman==nil then I="\208\158\209\128\209\135\208\186\208\176"end if testQ[B].UndeadMan==nil then I="\208\144\208\189\208\180\208\181\208\180"end if testQ[B].UndeaWoman==nil then I="\208\149\209\137\208\181 \051\048 \208\188\208\184\208\189\209\131\209\130 \208\182\208\181\208\189\209\137\208\184\208\189\208\176"end if testQ[B].TaurenMan==nil then I="\208\162\208\176\209\131\209\128\208\181\208\189"end if testQ[B].TaurenWoman==nil then I="\208\162\208\181\208\187\208\190\209\135\208\186\208\176"end if testQ[B].TrollMan==nil then I="\208\162\209\128\208\190\208\187\208\187\209\140"end if testQ[B].TrollWoman==nil then I="\208\162\209\128\208\190\208\187\208\187\209\140\208\186\208\176"end if testQ[B].ElfMan==nil then I="\208\173\208\187\209\140\209\132"end if testQ[B].ElfWoman==nil then I="\208\173\208\187\209\140\209\132\208\176"end return I end function obnulenieEmocij(B)testQ[B].HumanMan=nil testQ[B].HumanWoman=nil testQ[B].DworfMan=nil testQ[B].DworfWoman=nil testQ[B].NEMan=nil testQ[B].NEWoman=nil testQ[B].GnomMan=nil testQ[B].GnomWoman=nil testQ[B].DrenayMan=nil testQ[B].DrenayWoman=nil testQ[B].OrkMan=nil testQ[B].OrkWoman=nil testQ[B].UndeadMan=nil testQ[B].UndeaWoman=nil testQ[B].TaurenMan=nil testQ[B].TaurenWoman=nil testQ[B].TrollMan=nil testQ[B].TrollWoman=nil testQ[B].ElfMan=nil testQ[B].ElfWoman=nil end function obnulenieEmocij1(B)testQ[B].HumanMan=1 testQ[B].HumanWoman=1 testQ[B].DworfMan=1 testQ[B].DworfWoman=1 testQ[B].NEMan=1 testQ[B].NEWoman=1 testQ[B].GnomMan=1 testQ[B].GnomWoman=1 testQ[B].DrenayMan=1 testQ[B].DrenayWoman=1 testQ[B].OrkMan=1 testQ[B].OrkWoman=1 testQ[B].UndeadMan=1 testQ[B].UndeaWoman=1 testQ[B].TaurenMan=1 testQ[B].TaurenWoman=1 testQ[B].TrollMan=1 testQ[B].TrollWoman=1 testQ[B].ElfMan=1 testQ[B].ElfWoman=1 end function nsGP()local B={}local I=GetNumRaidMembers()for I=1,I,1 do local o for X=1,GetNumGuildMembers(true),1 do local j,c,H,V,l,r,d,q,Z,N,e,g,f,a,R,i,G=GetGuildRosterInfo(X)if j==UnitName("\114\097\105\100"..I)then B[I]={}local X=mysplit(q)B[I].nome=j B[I].public=d B[I].rank=c if X[3]~=nil then B[I].znach=tonumber(X[3])else B[I].znach=tonumber("\048\048\048\048")end o=1 end end if o==nil then B[I]={}if UnitName("\114\097\105\100"..I)~=nil then B[I].nome=UnitName("\114\097\105\100"..I)B[I].znach=tonumber("\048\048\048\048")B[I].public="\208\157\208\149 \208\146 \208\147\208\152\208\155\208\172\208\148\208\152\208\152"else B[I].nome="\208\191\209\131\209\129\209\130\208\190"B[I].znach=tonumber("\048\048\048\048")end end end table.sort(B,function(B,I)return B.znach<I.znach end)local o={}local X=tostring(1)for B,I in ipairs(B)do o[X]={}o[X].nome=I.nome o[X].znach=I.znach o[X].public=I.public o[X].rank=I.rank X=tostring(tonumber(X)+1)end return o end function gpEnTg()FriendsFrame:Show()GuildFrame:Show()testQ.gpEnTg={}for B=1,GetNumGuildMembers(true),1 do local I,o,X,j,c,H,V,l,r,d,q,Z,N,e,g,f,a=GetGuildRosterInfo(B)local R=mysplit(l)if R[3]~=nil then testQ.gpEnTg[I]=tonumber(R[3])end end FriendsFrame:Hide()GuildFrame:Hide()end function addMioFld(B,I,o,X)if mioFld1~=nil then if mioFld1[B]~=nil then if mioFld1[B][I]~=nil then mioFld1[B][I][tostring(o)]=tostring(X)end end end end function readMioFld(B,I,o)if mioFld1~=nil then if mioFld1[B]~=nil then if mioFld1[B][I]~=nil then return mioFld1[B][I][tostring(o)]end end end end nBtn={}function nBtn.new(z,B,I,o,X,j,c,H,V,l,r,d,q,Z,N,e,g,f,a,R,i,G)local D={}local U local k local u local Y=R D.message=q function D.configure(c)if G==nil then c[B]=c[B]or CreateFrame("\066\117\116\116\111\110",nil,o,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")else c[B]=c[B]or CreateFrame("\066\117\116\116\111\110",nil,o,"")c[B]:SetNormalTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092"..(G.."\046\116\103\097"))if i~=0 then c[B]:SetHighlightTexture("\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092"..(G.."\046\116\103\097"))end U={}D:SetText(q)end c[B]:SetPoint(Z,o,N,X,j)c[B]:SetSize(r,d)c[B]:SetText(q)c[B]:SetFrameStrata(f)if I~=nil then I(D)end end function D.reMove(j,I,X)j[B]:SetPoint(Z,o,N,I,X)end function D.reSize(X,I,o)X[B]:SetSize(I,o)end function D.getID(I)print(B)end function D.Hide(I)I[B]:Hide()end function D.Show(I)I[B]:Show()end function D.textSize(o,I)U[B]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",I,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")end function D.textMove(X,I,o)U[B]:SetPoint("\066\079\084\084\079\077\076\069\070\084",D[B],"\066\079\084\084\079\077\076\069\070\084",I,o)end function D.SetText(o,I)if G~=nil then U[B]=U[B]or D[B]:CreateFontString(nil,"\079\086\069\082\076\065\089")U[B]:SetSize(r,d)U[B]:SetPoint("\084\079\080\076\069\070\084")U[B]:SetFont("\070\111\110\116\115\092\070\082\073\090\081\084\095\095\046\084\084\070",l,"\079\085\084\076\073\078\069","\077\079\078\079\067\072\082\079\077\069")U[B]:SetText("\124\099\102\102"..(a..(I.."\124\114")))U[B]:Show()else D[B]:SetText(I)end end function D.getSaveNome(B)return Y end function D.setOnUpdate(X,I,o)I(X[B],o)end function D.setOnEnter(o,I)I(o[B],q)end function D.setOnClick(o,I)I(o[B],q)end function D.setClick(j,I,o,X)j[B]:RegisterForClicks("\082\105\103\104\116\066\117\116\116\111\110\068\111\119\110","\076\101\102\116\066\117\116\116\111\110\068\111\119\110")j[B]:SetScript("\079\110\067\108\105\099\107",function(B,j,c)if I~=nil then if arg1=="\076\101\102\116\066\117\116\116\111\110"then I(B,j,Y,X)end end if o~=nil then if arg1=="\082\105\103\104\116\066\117\116\116\111\110"then o(B,j,Y,X)end end end)end function D.gesture(X,I,o)k=CreateFrame("\070\082\065\077\069")u=0 k:SetScript("\079\110\085\112\100\097\116\101",function(X,j)u=u+j if u>.1 then local X,j=WorldFrame:GetSize()local c,H=GetCursorPosition()if c<=20 and H>=j-20 then I(D[B])end if c>=X-20 and H>=j-20 then o(D[B])end end end)end function D.killall(I)k:SetScript("\079\110\085\112\100\097\116\101",nil)D[B]:SetScript("\079\110\067\108\105\099\107",nil)end setmetatable(D,z)z.__index=z return D end function gpBtn1_enter(B,I)B:SetScript("\079\110\069\110\116\101\114",function(B,o,X)GameTooltip:SetOwner(B,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\155\208\154\208\156\058 \208\189\208\176\209\135\208\184\209\129\208\187\208\184\209\130\209\140 "..(" \124\099\102\102\070\070\056\067\048\048"..(I.." \124\099\102\102\057\057\102\102\057\057\208\147\208\159")))GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\159\208\154\208\156\058 \209\129\208\189\209\143\209\130\209\140 "..(" \124\099\102\102\070\070\056\067\048\048"..(I.." \124\099\102\102\057\057\102\102\057\057\208\147\208\159")))GameTooltip:Show()gpBtn1:Show()gpBtn2:Show()gpBtn3:Show()gpBtn4:Show()gpBtn5:Show()gpBtn6:Show()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",0,-20)ShowCheckboxWindow()end)B:SetScript("\079\110\076\101\097\118\101",function(B,I,o)GameTooltip:Hide()end)end function gpBtn1_click(B,I)B:RegisterForClicks("\082\105\103\104\116\066\117\116\116\111\110\068\111\119\110","\076\101\102\116\066\117\116\116\111\110\068\111\119\110")B:SetScript("\079\110\067\108\105\099\107",function(B,o)if testQ.gpRez==nil or#testQ.gpRez==0 then if arg1=="\076\101\102\116\066\117\116\116\111\110"then SendChatMessage("\208\147\208\159 "..I,"\071\085\073\076\068",nil,1)else SendChatMessage("\208\147\208\159 -"..I,"\071\085\073\076\068",nil,1)end gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)HideCheckboxWindow()gplabels={}testQ.gpRez=nil else if arg1=="\076\101\102\116\066\117\116\116\111\110"then sendGPnik(I)HideCheckboxWindow()gplabels={}testQ.gpRez=nil gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)else sendGPnik(-I)HideCheckboxWindow()gplabels={}testQ.gpRez=nil gpBtn1:Hide()gpBtn2:Hide()gpBtn3:Hide()gpBtn4:Hide()gpBtn5:Hide()gpBtn6:Hide()btn[973]:SetPoint("\076\069\070\084",MinimapZoomOut,"\082\073\071\072\084",25,-20)end end end)end function change_spek(B,I,o,X)SendChatMessage("\033\208\183\208\176\208\188\208\181\209\130\208\186\208\176 "..X.message,"\071\085\073\076\068",nil,1)spek1:Hide()spek2:Hide()spek3:Hide()end function duelOnUpdate(B,I)B:SetScript("\079\110\069\110\116\101\114",function(B,o)GameTooltip:SetOwner(B,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine("\124\099\070\070\054\052\057\053\069\068\208\159\209\128\208\184\208\189\209\143\209\130\209\140 \208\180\209\131\209\141\208\187\209\140 \208\190\209\130 \208\184\208\179\209\128\208\190\208\186\208\176\058 \124\099\102\102\057\057\102\102\057\057"..I)GameTooltip:Show()end)B:SetScript("\079\110\076\101\097\118\101",function(B,I)GameTooltip:Hide()end)end function btnHide(B)B:Hide()end function btnShow(B)B:Show()end function gpBtnClick(B)if IsRaidLeader()then if testQ.raidAUKPobeda~=nil then SendChatMessage(testQ.raidAUKPobeda..(" \208\191\208\190\208\177\208\181\208\182\208\180\208\176\208\181\209\130\044 \208\191\208\190\209\129\209\130\208\176\208\178\208\184\208\178 "..(testQ.raidAUKPobeda_gp.." \208\147\208\159")),"\082\065\073\068",nil,1)end SendAddonMessage("\110\115\065\085\075\101\110\100 ","\049\048","\082\065\073\068")end end function ns_duelTrue(B,I,o)SendAddonMessage("\110\115\095\100\117\101\108\095\111\116\118\101\116",o,"\103\117\105\108\100")duelBtn[o.."\049"]:Hide()duelBtn[o.."\050"]:Hide()end function ns_duelFalse(B,I,o)SendChatMessage("\208\162\208\176\208\186 \209\143 \208\182 \209\130\209\128\209\131\209\129 \208\184 \208\191\208\190\208\180\208\187\208\181\209\134\046 \208\158\209\130\208\186\208\176\208\183\209\139\208\178\208\176\209\142\209\129\209\140\046","\071\085\073\076\068",nil,1)duelBtn[o.."\049"]:Hide()duelBtn[o.."\050"]:Hide()SendAddonMessage("\110\115\095\100\117\101\108\095\111\116\107\097\122",o,"\103\117\105\108\100")end function nsAUK(B,I,o)if testQ.raidAUK~=nil then I=tonumber(I)if I~=nil then local X=tablelength(testQ.raidAUK)local j local c local H=tablelength(testQ.rez)local V=""local l=nil for I=1,H,1 do if testQ.rez[tostring(I)].nome==B then c=testQ.rez[tostring(I)].public j=tonumber(testQ.rez[tostring(I)].znach)break end end if X>=1 then for o=1,X,1 do if testQ.raidAUK[o].nome==B then if tonumber(I)<=j then testQ.raidAUK[o].auk=I end l=1 break end end if l==nil then testQ.raidAUK[X+1]={nome=B,auk=0;public=c;rezultat=j}if testQ.raidAUK[X+1].auk+tonumber(I)<=j then testQ.raidAUK[X+1].auk=testQ.raidAUK[X+1].auk+tonumber(I)end end else testQ.raidAUK[1]={nome=B;auk=0;public=c,rezultat=j}if testQ.raidAUK[1].auk+tonumber(I)<=j then testQ.raidAUK[1].auk=testQ.raidAUK[1].auk+tonumber(I)end end table.sort(testQ.raidAUK,function(B,I)return B.auk<I.auk end)local r={}local d=""for B,I in ipairs(testQ.raidAUK)do r[B]={nome=I.nome,znach=I.auk;public=I.public,rezultat=I.rezultat}d=d..("\124\099\070\070\054\052\057\053\069\068"..(I.nome..(" \124\099\102\102\070\070\056\067\048\048\040"..(I.public..("\124\099\102\102\056\048\056\048\056\048\124\124"..("\124\099\102\102\102\102\048\048\048\048"..(I.rezultat..("\124\099\102\102\070\070\056\067\048\048\041\058 \124\099\102\102\057\057\102\102\057\057"..(I.auk.."\n")))))))))if B==#testQ.raidAUK and IsRaidLeader()then SendChatMessage(I.nome..("\058 "..(I.auk.."\044 \208\186\209\130\208\190 \208\177\208\190\208\187\209\140\209\136\208\181\063")),"\082\065\073\068",nil,1)testQ.raidAUKPobeda=I.nome testQ.raidAUKPobeda_gp=I.auk end end print(o)TextWindow(o..("\n\n"..d))end end end function lastWords(B)local I=mysplit(B)I=I[1]local o=string.utf8len(I)local X=string.utf8len(B)local j=string.utf8sub(B,o+1,X)return j end function sendGPnik(B)local I=""for B=1,#testQ.gpRez,1 do I=I..(testQ.gpRez[B].." ")end SendAddonMessage("\110\115\071\080"..(" "..B),I,"\103\117\105\108\100")end function sendGP(B)local I=GetUnitName("\112\108\097\121\101\114")msg={}msg[2]=B for B=1,GetNumGuildMembers(true),1 do local o,X,j,c,H,V,l,r,d,q,Z,N,e,g,f,a,R=GetGuildRosterInfo(B)if o==I then if X=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"or X=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"then if GetNumRaidMembers()<=10 then local B=""B=UnitName("\114\097\105\100\049").." "for I=2,GetNumRaidMembers(),1 do B=B..(UnitName("\114\097\105\100"..I).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),B,"\103\117\105\108\100")elseif GetNumRaidMembers()>10 and GetNumRaidMembers()<=20 then local B=""B=UnitName("\114\097\105\100\049").." "for I=2,10,1 do B=B..(UnitName("\114\097\105\100"..I).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),B,"\103\117\105\108\100")local I=""I=UnitName("\114\097\105\100\049\049").." "for B=12,GetNumRaidMembers(),1 do I=I..(UnitName("\114\097\105\100"..B).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),I,"\103\117\105\108\100")elseif GetNumRaidMembers()>20 then local B=""B=UnitName("\114\097\105\100\049").." "for I=2,10,1 do B=B..(UnitName("\114\097\105\100"..I).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),B,"\103\117\105\108\100")local I=""I=UnitName("\114\097\105\100\049\049").." "for B=12,20,1 do I=I..(UnitName("\114\097\105\100"..B).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),I,"\103\117\105\108\100")local o=""o=UnitName("\114\097\105\100\050\049").." "for B=22,GetNumRaidMembers(),1 do o=o..(UnitName("\114\097\105\100"..B).." ")end SendAddonMessage("\110\115\071\080"..(" "..msg[2]),o,"\103\117\105\108\100")end end end end end function createParent()parentFrame=CreateFrame("\070\114\097\109\101",nil,UIParent)parentFrame:SetSize(200,200)parentFrame:SetPoint("\067\069\078\084\069\082")parentFrame:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100",edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114";tile=true;tileSize=32,edgeSize=32,insets={left=11;right=12,top=12,bottom=11}})parentFrame:SetBackdropColor(0,0,0,1)parentFrame:SetMovable(true)parentFrame:EnableMouse(true)parentFrame:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")parentFrame:SetScript("\079\110\068\114\097\103\083\116\097\114\116",function(B)B:StartMoving()end)parentFrame:SetScript("\079\110\068\114\097\103\083\116\111\112",function(B)B:StopMovingOrSizing()ClampFrameToScreen(B)SaveFramePosition(B)end)if testQ.pgChbX and testQ.pgChbY then parentFrame:ClearAllPoints()parentFrame:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",testQ.pgChbX,testQ.pgChbY)end HideCheckboxWindow()end function ClampFrameToScreen(B)local I=UIParent:GetWidth()local o=UIParent:GetHeight()local X=B:GetWidth()local j=B:GetHeight()local c,H=B:GetCenter()c=c or 0 H=H or 0 c=math.max(X/2,math.min(I-X/2,c))H=math.max(j/2,math.min(o-j/2,H))B:ClearAllPoints()B:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",c,H)end function SaveFramePosition(B)local I,o=B:GetCenter()testQ.pgChbX=I testQ.pgChbY=o end function CreateCheckboxes(B,I)local o={}local X=-10 local j=0 for I,c in ipairs(I)do local H=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,B,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")H:SetSize(24,24)H:SetPoint("\084\079\080\076\069\070\084",10,X)local V=H:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")V:SetPoint("\076\069\070\084",H,"\082\073\071\072\084",5,0)V:SetText(c)H.label=c H:SetScript("\079\110\067\108\105\099\107",function(B)if testQ.gpRez==nil then testQ.gpRez={}end local I=mysplit(B.label)if B:GetChecked()then table.insert(testQ.gpRez,I[1])else for B=1,#testQ.gpRez,1 do if testQ.gpRez[B]==I[1]then table.remove(testQ.gpRez,B)end end end end)o[I]=H local l=V:GetStringWidth()if l>j then j=l end X=X-30 end local c=j+50 local H=#I*30+20 B:SetSize(c,H)return o end function HideCheckboxWindow()if parentFrame then parentFrame:Hide()end end function ShowCheckboxWindow()if parentFrame then parentFrame:Show()end end function DestroyCheckboxWindow()if parentFrame then parentFrame:Hide()parentFrame:ClearAllPoints()parentFrame:SetParent(nil)parentFrame=nil end end gplabels={}textWindow=nil local function H(B)local I=UIParent:GetWidth()local o=UIParent:GetHeight()local X=B:GetWidth()local j=B:GetHeight()local c,H=B:GetCenter()c=c or 0 H=H or 0 c=math.max(X/2,math.min(I-X/2,c))H=math.max(j/2,math.min(o-j/2,H))B:ClearAllPoints()B:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",c,H)end function TextWindow(B)if textWindow then textWindow.textLabel:SetText(B)local I=textWindow.textLabel:GetStringWidth()local o=textWindow.textLabel:GetStringHeight()local X=20 textWindow:SetSize(I+X,o+X)H(textWindow)textWindow:Show()return end textWindow=CreateFrame("\070\114\097\109\101",nil,UIParent)textWindow:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100";edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114";tile=true,tileSize=32,edgeSize=32,insets={left=11,right=12;top=12,bottom=11}})textWindow:SetBackdropColor(0,0,0,1)textWindow:SetMovable(true)textWindow:EnableMouse(true)textWindow:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")textWindow:SetScript("\079\110\068\114\097\103\083\116\097\114\116",function(B)B:StartMoving()end)textWindow:SetScript("\079\110\068\114\097\103\083\116\111\112",function(B)B:StopMovingOrSizing()H(B)testQ.textWinX,testQ.textWinY=B:GetCenter()end)textWindow.textLabel=textWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")textWindow.textLabel:SetPoint("\067\069\078\084\069\082",textWindow,"\067\069\078\084\069\082",0,0)textWindow.textLabel:SetText(B)local I=textWindow.textLabel:GetStringWidth()local o=textWindow.textLabel:GetStringHeight()local X=20 textWindow:SetSize(I+X,o+X)if testQ.textWinX and testQ.textWinY then textWindow:SetPoint("\067\069\078\084\069\082",UIParent,"\066\079\084\084\079\077\076\069\070\084",testQ.textWinX,testQ.textWinY)else textWindow:SetPoint("\082\073\071\072\084",btn[973],"\076\069\070\084",0,0)end end function HideTextWindow()if textWindow then textWindow:Hide()end end function ShowTextWindow()if textWindow then textWindow:Show()end end function DestroyTextWindow()if textWindow then textWindow:Hide()textWindow:ClearAllPoints()textWindow:SetParent(nil)textWindow=nil end end function GetFileName(B)return B:match("\091\094\092\047\093\043\036")or B end function CreateListUI()if TestListFrame then TestListFrame:Show()TestListFrame.UpdateList()return end local B=CreateFrame("\070\114\097\109\101","\084\101\115\116\076\105\115\116\070\114\097\109\101",UIParent)B:SetSize(400,500)B:SetPoint("\067\069\078\084\069\082")B:SetMovable(true)B:EnableMouse(true)B:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")B:SetScript("\079\110\068\114\097\103\083\116\097\114\116",B.StartMoving)B:SetScript("\079\110\068\114\097\103\083\116\111\112",B.StopMovingOrSizing)B:SetBackdrop({bgFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\097\099\107\103\114\111\117\110\100",edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",tile=true;tileSize=32,edgeSize=32;insets={left=11;right=12;top=12,bottom=11}})local I=CreateFrame("\066\117\116\116\111\110",nil,B,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")I:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)I:SetScript("\079\110\067\108\105\099\107",function()B:Hide()end)local o=B:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")o:SetPoint("\084\079\080",0,-20)o:SetText("\208\163\208\191\209\128\208\176\208\178\208\187\208\181\208\189\208\184\208\181 \209\129\208\191\208\184\209\129\208\186\208\190\208\188")local X=CreateFrame("\069\100\105\116\066\111\120",nil,B,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")X:SetSize(200,30)X:SetPoint("\084\079\080",0,-60)X:SetAutoFocus(false)local j=CreateFrame("\066\117\116\116\111\110",nil,B,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")j:SetSize(100,30)j:SetPoint("\084\079\080\076\069\070\084",X,"\066\079\084\084\079\077\076\069\070\084",0,-20)j:SetText("\208\148\208\190\208\177\208\176\208\178\208\184\209\130\209\140")local c=CreateFrame("\066\117\116\116\111\110",nil,B,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")c:SetSize(100,30)c:SetPoint("\084\079\080\082\073\071\072\084",X,"\066\079\084\084\079\077\082\073\071\072\084",0,-20)c:SetText("\208\163\208\180\208\176\208\187\208\184\209\130\209\140")local H=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\084\101\115\116\083\099\114\111\108\108\070\114\097\109\101",B,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")H:SetSize(360,300)H:SetPoint("\084\079\080",j,"\066\079\084\084\079\077",0,-30)local V=_G.TestScrollFrameScrollBar V:SetPoint("\084\079\080\076\069\070\084",H,"\084\079\080\082\073\071\072\084",32,-16)local l=CreateFrame("\070\114\097\109\101",nil,H)l:SetSize(335,0)H:SetScrollChild(l)testQ=testQ or{}testQ.fls=testQ.fls or{}local r={}for B,I in pairs(testQ.fls)do if type(B)~="\115\116\114\105\110\103"or type(I)~="\115\116\114\105\110\103"then table.insert(r,B)end end for B,I in ipairs(r)do testQ.fls[I]=nil end l.entries={}function B.UpdateList(B)local I=0 for B,I in ipairs(l.entries)do I:Hide()end l.entries=l.entries or{}local o={}for B in pairs(testQ.fls)do table.insert(o,B)end table.sort(o,function(B,I)return B<I end)for B,o in ipairs(o)do local X=testQ.fls[o]local j=l.entries[B]if not j then j=CreateFrame("\070\114\097\109\101",nil,l)j:SetSize(335,20)j.text=j:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")j.text:SetPoint("\076\069\070\084",5,0)j.text:SetWidth(200)j.dropdown=CreateFrame("\070\114\097\109\101","\084\101\115\116\068\114\111\112\068\111\119\110"..B,j,"\085\073\068\114\111\112\068\111\119\110\077\101\110\117\084\101\109\112\108\097\116\101")j.dropdown:SetPoint("\082\073\071\072\084",j,"\082\073\071\072\084",-10,0)j.dropdown:SetWidth(120)local I=_G["\084\101\115\116\068\114\111\112\068\111\119\110"..(B.."\066\117\116\116\111\110")]I:SetScript("\079\110\067\108\105\099\107",function(B)ToggleDropDownMenu(1,nil,j.dropdown,B,0,0)end)local o=_G["\084\101\115\116\068\114\111\112\068\111\119\110"..(B.."\084\101\120\116")]if o then o:SetWidth(150)end UIDropDownMenu_Initialize(j.dropdown,function(B,I)if not I then return end if I==1 then for B,o in ipairs(ns_alert_sounds)do local X=UIDropDownMenu_CreateInfo()X.text=o.label X.value=o X.hasArrow=true X.notCheckable=true UIDropDownMenu_AddButton(X,I)end elseif I==2 then local B=UIDROPDOWNMENU_MENU_VALUE if B and B.sounds then for B,o in ipairs(B.sounds)do local X=UIDropDownMenu_CreateInfo()X.text=GetFileName(o)X.value=o X.func=function()testQ.fls[j.name]=o UIDropDownMenu_SetText(j.dropdown,GetFileName(o))PlaySoundFile(o,"\077\097\115\116\101\114")CloseDropDownMenus()end X.checked=testQ.fls[j.name]==o UIDropDownMenu_AddButton(X,I)end end end end)l.entries[B]=j end j.name=o j.text:SetText(o)if X then UIDropDownMenu_SetText(j.dropdown,GetFileName(X))else UIDropDownMenu_SetText(j.dropdown,"\208\157\208\181 \208\178\209\139\208\177\209\128\208\176\208\189\208\190")end j:SetPoint("\084\079\080\076\069\070\084",5,-I)j:Show()I=I+20 end for B=#o+1,#l.entries,1 do l.entries[B]:Hide()end l:SetHeight(math.max(I,1))H:UpdateScrollChildRect()V:SetValue(0)end j:SetScript("\079\110\067\108\105\099\107",function()local I=X:GetText()if I~=""and not testQ.fls[I]then testQ.fls[I]="\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\102\108\115\046\109\112\051"B:UpdateList()X:SetText("")X:ClearFocus()end end)c:SetScript("\079\110\067\108\105\099\107",function()local I=X:GetText()if I~=""and testQ.fls[I]then testQ.fls[I]=nil B:UpdateList()X:SetText("")X:ClearFocus()end end)B:UpdateList()end function SendGuildOfficerMessageWithBonus(B)local I=mysplit(B)local o=UnitName("\112\108\097\121\101\114")if#I<3 then return end local X=I[2]local j=table.concat(I," ",3)for B=1,GetNumGuildMembers(true),1 do local I,c=GetGuildRosterInfo(B)if I==o then if c=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"or c=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"then SendChatMessage(j..(" \208\191\208\187\209\142\209\129 "..X),"\079\070\070\073\067\069\082",nil,1)SendAddonMessage("\110\115\071\080"..(" "..X),j,"\103\117\105\108\100")end SendAddonMessage("\110\115\071\080\108\111\103\082",X..(" "..j),"\103\117\105\108\100")break end end end GpDb_old={}GpDb_old.__index=GpDb_old function GpDb_old.new(I,B)local o={gp_data={},sort_column="\110\105\099\107",sort_ascending=true,visible_rows=20,selected_indices={},last_selected_index=nil;logData={},filterText="";updateTimer=nil}setmetatable(o,I)o:_CreateWindow()o:_CreateRaidSelectionWindow()o:_CreateLogWindow()return o end function GpDb_old._CreateLogWindow(B)B.logWindow=CreateFrame("\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\087\105\110\100\111\119",B.window)B.logWindow:SetFrameStrata("\068\073\065\076\079\071")B.logWindow:SetSize(600,B.window:GetHeight())B.logWindow:SetPoint("\084\079\080\076\069\070\084",B.window,"\084\079\080\082\073\071\072\084",5,0)B.logWindow:SetMovable(false)B.logWindow:Hide()B.logWindow.background=B.logWindow:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")B.logWindow.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")B.logWindow.background:SetVertexColor(.1,.1,.1)B.logWindow.background:SetAlpha(.9)B.logWindow.background:SetAllPoints(true)B.logWindow.borderFrame=CreateFrame("\070\114\097\109\101",nil,B.logWindow)B.logWindow.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)B.logWindow.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)B.logWindow.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114";edgeSize=16,insets={left=4;right=4,top=4,bottom=4}})B.logWindow.closeButton=CreateFrame("\066\117\116\116\111\110",nil,B.logWindow,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")B.logWindow.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)B.logWindow.closeButton:SetScript("\079\110\067\108\105\099\107",function()B.logWindow:Hide()end)B.logWindow.filters=CreateFrame("\070\114\097\109\101",nil,B.logWindow)B.logWindow.filters:SetPoint("\084\079\080\076\069\070\084",10,-5)B.logWindow.filters:SetPoint("\082\073\071\072\084",-10,0)B.logWindow.filters:SetHeight(30)B.logWindow.countFilter=CreateFrame("\069\100\105\116\066\111\120",nil,B.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")B.logWindow.countFilter:SetSize(60,20)B.logWindow.countFilter:SetPoint("\076\069\070\084",B.logWindow.filters,"\076\069\070\084")B.logWindow.countFilter:SetAutoFocus(false)B.logWindow.countFilter:SetText("\208\154\208\190\208\187-\208\178\208\190")B.logWindow.countFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()B.logWindow.countFilter:ClearFocus()end)B.logWindow.countFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()B.logWindow.countFilter:ClearFocus()B:UpdateLogDisplay()end)B.logWindow.timeFilter=CreateFrame("\069\100\105\116\066\111\120",nil,B.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")B.logWindow.timeFilter:SetSize(70,20)B.logWindow.timeFilter:SetPoint("\076\069\070\084",B.logWindow.countFilter,"\082\073\071\072\084",5,0)B.logWindow.timeFilter:SetAutoFocus(false)B.logWindow.timeFilter:SetText("\208\146\209\128\208\181\208\188\209\143")B.logWindow.timeFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()B.logWindow.timeFilter:ClearFocus()end)B.logWindow.timeFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()B.logWindow.timeFilter:ClearFocus()B:UpdateLogDisplay()end)B.logWindow.rlFilter=CreateFrame("\069\100\105\116\066\111\120",nil,B.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")B.logWindow.rlFilter:SetSize(70,20)B.logWindow.rlFilter:SetPoint("\076\069\070\084",B.logWindow.timeFilter,"\082\073\071\072\084",5,0)B.logWindow.rlFilter:SetAutoFocus(false)B.logWindow.rlFilter:SetText("\208\160\208\155")B.logWindow.rlFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()B.logWindow.rlFilter:ClearFocus()end)B.logWindow.rlFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()B.logWindow.rlFilter:ClearFocus()B:UpdateLogDisplay()end)B.logWindow.raidFilter=CreateFrame("\069\100\105\116\066\111\120",nil,B.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")B.logWindow.raidFilter:SetSize(100,20)B.logWindow.raidFilter:SetPoint("\076\069\070\084",B.logWindow.rlFilter,"\082\073\071\072\084",5,0)B.logWindow.raidFilter:SetAutoFocus(false)B.logWindow.raidFilter:SetText("\208\160\208\181\208\185\208\180")B.logWindow.raidFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()B.logWindow.raidFilter:ClearFocus()end)B.logWindow.raidFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()B.logWindow.raidFilter:ClearFocus()B:UpdateLogDisplay()end)B.logWindow.nameFilter=CreateFrame("\069\100\105\116\066\111\120",nil,B.logWindow.filters,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")B.logWindow.nameFilter:SetSize(100,20)B.logWindow.nameFilter:SetPoint("\076\069\070\084",B.logWindow.raidFilter,"\082\073\071\072\084",5,0)B.logWindow.nameFilter:SetAutoFocus(false)B.logWindow.nameFilter:SetText("\208\157\208\184\208\186")B.logWindow.nameFilter:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()B.logWindow.nameFilter:ClearFocus()end)B.logWindow.nameFilter:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()B.logWindow.nameFilter:ClearFocus()B:UpdateLogDisplay()end)B.logWindow.showButton=CreateFrame("\066\117\116\116\111\110",nil,B.logWindow.filters,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")B.logWindow.showButton:SetSize(80,22)B.logWindow.showButton:SetPoint("\076\069\070\084",B.logWindow.nameFilter,"\082\073\071\072\084",5,0)B.logWindow.showButton:SetText("\208\159\208\190\208\186\208\176\208\183\208\176\209\130\209\140")B.logWindow.showButton:SetScript("\079\110\067\108\105\099\107",function()local function I(B)if B:find("\037\115")then B=B:gsub("\037\115\043","\095")end return B end local o=I(B.logWindow.countFilter:GetText())local X=I(B.logWindow.timeFilter:GetText())local j=I(B.logWindow.rlFilter:GetText())local c=I(B.logWindow.raidFilter:GetText())local H=I(B.logWindow.nameFilter:GetText())gpDb_old:ClearLog()SendAddonMessage("\078\083\083\104\111\119\077\101\076\111\103\115",o..(" "..(X..(" "..(j..(" "..(c..(" "..H))))))),"\103\117\105\108\100")end)B.logWindow.scrollFrame=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\083\099\114\111\108\108\070\114\097\109\101",B.logWindow,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")B.logWindow.scrollFrame:SetPoint("\084\079\080\076\069\070\084",0,-35)B.logWindow.scrollFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",0,10)B.logWindow.scrollChild=CreateFrame("\070\114\097\109\101")B.logWindow.scrollChild:SetSize(580,1000)B.logWindow.scrollFrame:SetScrollChild(B.logWindow.scrollChild)B.logRows={}for I=1,50,1 do local o=CreateFrame("\070\114\097\109\101","\071\112\068\098\095\111\108\100\076\111\103\082\111\119"..I,B.logWindow.scrollChild)o:SetSize(580,40)o:SetPoint("\084\079\080\076\069\070\084",0,-((I-1)*40))o.text=o:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")o.text:SetAllPoints(true)o.text:SetJustifyH("\076\069\070\084")o.text:SetJustifyV("\084\079\080")o.text:SetWordWrap(true)o.text:SetText("")B.logRows[I]=o end end function GpDb_old.ClearLog(B)B.logData={}B.logWindow.countFilter:SetText("\208\154\208\190\208\187-\208\178\208\190")B.logWindow.timeFilter:SetText("\208\146\209\128\208\181\208\188\209\143")B.logWindow.rlFilter:SetText("\208\160\208\155")B.logWindow.raidFilter:SetText("\208\160\208\181\208\185\208\180")B.logWindow.nameFilter:SetText("\208\157\208\184\208\186")B:UpdateLogDisplay()print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\155\208\190\208\179 \209\131\209\129\208\191\208\181\209\136\208\189\208\190 \208\190\209\135\208\184\209\137\208\181\208\189")end function GpDb_old._CreateWindow(B)B.window=CreateFrame("\070\114\097\109\101","\071\112\084\114\097\099\107\101\114\087\105\110\100\111\119",UIParent)B.window:SetFrameStrata("\068\073\065\076\079\071")B.window:SetSize(400,600)B.window:SetPoint("\076\069\070\084",5,100)B.window:SetMovable(true)B.window:EnableMouse(true)B.window:RegisterForDrag("\076\101\102\116\066\117\116\116\111\110")B.window:SetScript("\079\110\068\114\097\103\083\116\097\114\116",B.window.StartMoving)B.window:SetScript("\079\110\068\114\097\103\083\116\111\112",B.window.StopMovingOrSizing)B.window:Hide()B.window.background=B.window:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")B.window.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")B.window.background:SetVertexColor(0,0,0)B.window.background:SetAlpha(1)B.window.background:SetAllPoints(true)B.window.borderFrame=CreateFrame("\070\114\097\109\101",nil,B.window)B.window.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)B.window.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)B.window.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",edgeSize=16,insets={left=4;right=4,top=4,bottom=4}})B.window.title=B.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")B.window.title:SetPoint("\084\079\080",0,-15)B.window.title:SetText("")B.window.closeButton=CreateFrame("\066\117\116\116\111\110",nil,B.window,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")B.window.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)B.window.closeButton:SetScript("\079\110\067\108\105\099\107",function()B.window:Hide()end)B.window.logButton=CreateFrame("\066\117\116\116\111\110",nil,B.window,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")B.window.logButton:SetSize(24,24)B.window.logButton:SetPoint("\082\073\071\072\084",B.window.closeButton,"\076\069\070\084",-5,0)B.window.logButton:SetText("\076")B.window.logButton:SetScript("\079\110\067\108\105\099\107",function()B:ToggleLogWindow()end)B.window.raidOnlyCheckbox=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,B.window,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")B.window.raidOnlyCheckbox:SetPoint("\084\079\080\076\069\070\084",10,-15)B.window.raidOnlyCheckbox:SetSize(24,24)B.window.raidOnlyCheckbox.text=B.window.raidOnlyCheckbox:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")B.window.raidOnlyCheckbox.text:SetPoint("\076\069\070\084",B.window.raidOnlyCheckbox,"\082\073\071\072\084",5,0)B.window.raidOnlyCheckbox.text:SetText("\208\162\208\190\208\187\209\140\208\186\208\190 \209\128\208\181\208\185\208\180")B.window.raidOnlyCheckbox:SetScript("\079\110\067\108\105\099\107",function()B:_UpdateFromGuild()B:UpdateWindow()end)B.window.filterLabel=B.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")B.window.filterLabel:SetPoint("\084\079\080\076\069\070\084",B.window.raidOnlyCheckbox,"\066\079\084\084\079\077\076\069\070\084",0,-10)B.window.filterLabel:SetText("\208\164\208\184\208\187\209\140\209\130\209\128\058")B.window.filterEditBox=CreateFrame("\069\100\105\116\066\111\120",nil,B.window,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")B.window.filterEditBox:SetPoint("\084\079\080\076\069\070\084",B.window.filterLabel,"\066\079\084\084\079\077\076\069\070\084",0,-5)B.window.filterEditBox:SetPoint("\082\073\071\072\084",B.window.closeButton,"\076\069\070\084",-40,0)B.window.filterEditBox:SetHeight(20)B.window.filterEditBox:SetAutoFocus(false)B.window.filterEditBox:SetText("")B.window.filterEditBox:SetScript("\079\110\084\101\120\116\067\104\097\110\103\101\100",function(I)B.filterText=(I:GetText()):lower()B:_UpdateFromGuild()end)B.window.filterEditBox:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()B.window.filterEditBox:SetText("")B.window.filterEditBox:ClearFocus()end)B.window.filterEditBox:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()B.window.filterEditBox:ClearFocus()end)B.window.filterClearButton=CreateFrame("\066\117\116\116\111\110",nil,B.window,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")B.window.filterClearButton:SetSize(80,22)B.window.filterClearButton:SetPoint("\084\079\080\082\073\071\072\084",B.window.filterEditBox,"\066\079\084\084\079\077\082\073\071\072\084",60,20)B.window.filterClearButton:SetText("\208\158\209\135\208\184\209\129\209\130\208\184\209\130\209\140")B.window.filterClearButton:SetScript("\079\110\067\108\105\099\107",function()B.window.filterEditBox:SetText("")B.filterText=""B:_UpdateFromGuild()end)B.window.scrollFrame=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101","\083\099\114\111\108\108\070\114\097\109\101",B.window,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")B.window.scrollFrame:SetPoint("\084\079\080\076\069\070\084",0,-85)B.window.scrollFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",0,60)B.window.scrollChild=CreateFrame("\070\114\097\109\101")B.window.scrollChild:SetSize(380,500)B.window.scrollFrame:SetScrollChild(B.window.scrollChild)B.window.scrollBar=_G[B.window.scrollFrame:GetName().."\083\099\114\111\108\108\066\097\114"]B.window.scrollBar:SetPoint("\084\079\080\076\069\070\084",B.window.scrollFrame,"\084\079\080\082\073\071\072\084",-20,-16)B.window.scrollBar:SetPoint("\066\079\084\084\079\077\076\069\070\084",B.window.scrollFrame,"\066\079\084\084\079\077\082\073\071\072\084",-20,16)B.window.countText=B.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")B.window.countText:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,40)B.window.countText:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,40)B.window.countText:SetJustifyH("\076\069\070\084")B.window.countText:SetText("")B.window.totalText=B.window:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")B.window.totalText:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,20)B.window.totalText:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,20)B.window.totalText:SetJustifyH("\076\069\070\084")B.window.totalText:SetText("")B:_SetupTable()end function GpDb_old._SetupTable(I)local o={{text="\208\157\208\184\208\186",column="\110\105\099\107"},{text="\208\147\208\159",column="\103\112"}}for B,o in ipairs(o)do local X=CreateFrame("\066\117\116\116\111\110",nil,I.window.scrollChild)X:SetSize(B==1 and 290 or 50,20)X:SetPoint("\084\079\080\076\069\070\084",(B-1)*290+(B==2 and 10 or 0),-5)X:SetNormalFontObject("\071\097\109\101\070\111\110\116\078\111\114\109\097\108")X:SetHighlightFontObject("\071\097\109\101\070\111\110\116\072\105\103\104\108\105\103\104\116")local j=X:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")j:SetAllPoints(true)j:SetText(o.text)X:SetScript("\079\110\067\108\105\099\107",function()I:SortData(o.column)I:UpdateWindow()end)end I.rows={}for o=1,999,1 do local X=CreateFrame("\066\117\116\116\111\110","\071\112\068\098\095\111\108\100\082\111\119"..o,I.window.scrollChild)X:SetSize(350,20)X:SetPoint("\084\079\080\076\069\070\084",0,-25-(o-1)*25)X:EnableMouse(true)X:RegisterForClicks("\076\101\102\116\066\117\116\116\111\110\085\112","\082\105\103\104\116\066\117\116\116\111\110\085\112")X:SetHighlightTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056");(X:GetHighlightTexture()):SetVertexColor(.4,.4,.8,.4)X.selection=X:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")X.selection:SetAllPoints(true)X.selection:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")X.selection:SetVertexColor(.3,.3,.7,.7)X.selection:Hide()X.nick=X:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")X.nick:SetPoint("\076\069\070\084",10,0)X.nick:SetWidth(290)X.nick:SetJustifyH("\076\069\070\084")X.gp=X:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")X.gp:SetPoint("\082\073\071\072\084",5,0)X.gp:SetWidth(50)X.gp:SetJustifyH("\082\073\071\072\084")X.lastClickTime=0 X:SetScript("\079\110\067\108\105\099\107",function(j,c,H)local V=FauxScrollFrame_GetOffset(I.window.scrollFrame)local l=o+V if not I.gp_data or not I.gp_data[l]then return end local r=GetTime()if c=="\076\101\102\116\066\117\116\116\111\110"and(B()and r-X.lastClickTime<.5)then I:ClearSelection()for B=1,#I.gp_data,1 do I.selected_indices[B]=true end I.last_selected_index=l I:_UpdateSelectionCount()I:RefreshRowHighlights()I:UpdateRaidWindowVisibility()if I.raidWindow and I.raidWindow:IsShown()then I:_UpdateSelectedPlayersText()end X.lastClickTime=0 return end X.lastClickTime=r if c=="\076\101\102\116\066\117\116\116\111\110"then local B=I.selected_indices[l]if IsShiftKeyDown()then if not I.last_selected_index then I:ClearSelection()I.selected_indices[l]=true I.last_selected_index=l else local B=math.min(I.last_selected_index,l)local o=math.max(I.last_selected_index,l)if not IsControlKeyDown()then I:ClearSelection()end for B=B,o,1 do if I.gp_data[B]then I.selected_indices[B]=true end end end elseif IsControlKeyDown()then I.selected_indices[l]=not B for B in pairs(I.selected_indices)do if not I.gp_data[B]then I.selected_indices[B]=nil end end if I.selected_indices[l]then I.last_selected_index=l else I.last_selected_index=nil for B in pairs(I.selected_indices)do if I.selected_indices[B]then I.last_selected_index=B break end end end else if B then I:ClearSelection()else I:ClearSelection()I.selected_indices[l]=true I.last_selected_index=l end end I:_UpdateSelectionCount()I:RefreshRowHighlights()I:UpdateRaidWindowVisibility()if I.raidWindow and I.raidWindow:IsShown()then I:_UpdateSelectedPlayersText()end end end)I.rows[o]=X end I.window:SetScript("\079\110\072\105\100\101",function()I:ClearSelection()if I.raidWindow and I.raidWindow:IsShown()then I.raidWindow:Hide()end if I.logWindow and I.logWindow:IsShown()then I.logWindow:Hide()end end)end function GpDb_old.ToggleLogWindow(B)if not B.logWindow then B:_CreateLogWindow()end if B.logWindow:IsShown()then B.logWindow:Hide()else B.logWindow:Show()B:UpdateLogDisplay()if B.raidWindow and B.raidWindow:IsShown()then B.logWindow:SetHeight(B.window:GetHeight()/2)else B.logWindow:SetHeight(B.window:GetHeight())end end end function GpDb_old.UpdateLogDisplay(B)if not B.logWindow or not B.logWindow:IsShown()then return end local I=0 local o={}for X,j in ipairs(B.logData)do local c=B.logWindow.scrollChild:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")c:SetWidth(580)c:SetText(j.text)c:SetWordWrap(true)local H=c:GetStringHeight()+5 o[X]=H I=I+H c:Hide()end local X=0 for I=1,#B.logRows,1 do local j=I if j<=#B.logData then local c=B.logData[j]local H=o[j]B.logRows[I]:SetHeight(H)B.logRows[I]:SetPoint("\084\079\080\076\069\070\084",0,-X)B.logRows[I].text:SetText(c.text)B.logRows[I]:Show()X=X+H else B.logRows[I]:Hide()end end B.logWindow.scrollChild:SetHeight(I)B.logWindow.scrollFrame:UpdateScrollChildRect()end function GpDb_old._UpdateSelectionCount(B)local I=0 for o,X in pairs(B.selected_indices)do if X and B.gp_data[o]then I=I+1 else B.selected_indices[o]=nil end end B.window.countText:SetText(string.format("\208\146\209\139\208\180\208\181\208\187\208\181\208\189\208\190\058 \037\100",I))if I==0 then B.last_selected_index=nil end return I end function GpDb_old.IsValidIndex(I,B)return B and(type(B)=="\110\117\109\098\101\114"and(I.gp_data and I.gp_data[B]))end function GpDb_old.RefreshRowHighlights(B)local I=FauxScrollFrame_GetOffset(B.window.scrollFrame)for o,X in ipairs(B.rows)do local j=o+I if j<=#B.gp_data then if B.selected_indices[j]then X.selection:Show();(X:GetHighlightTexture()):SetAlpha(.2)else X.selection:Hide();(X:GetHighlightTexture()):SetAlpha(.4)end end end local o=0 for B in pairs(B.selected_indices)do o=o+1 end B.window.countText:SetText(string.format("\208\146\209\139\208\180\208\181\208\187\208\181\208\189\208\190\058 \037\100",o))end function GpDb_old.ClearSelection(B)B.selected_indices={}B.last_selected_index=nil B:_UpdateSelectionCount()B:RefreshRowHighlights()B:UpdateRaidWindowVisibility()end function GpDb_old.GetSelectedEntries(B)local I={}for o,X in pairs(B.selected_indices)do if o<=#B.gp_data then table.insert(I,B.gp_data[o])end end return I end function GpDb_old.AddLogEntry(c,B,I,o,X,j)if not c.logWindow then c:_CreateLogWindow()end local function H(B)if not B or type(B)~="\115\116\114\105\110\103"or B==""then return"\124\099\070\070\070\070\070\070\070\070"end for I=1,GetNumGuildMembers(),1 do local o,X,j,c,H,V,l,r,d,q,Z=GetGuildRosterInfo(I)if o and o==B then local B=RAID_CLASS_COLORS[Z]if B then return string.format("\124\099\070\070\037\048\050\120\037\048\050\120\037\048\050\120",B.r*255,B.g*255,B.b*255)end break end end return"\124\099\070\070\070\070\070\070\070\070"end local V=tonumber(I)or 0 local l="\124\099\070\070\065\048\065\048\065\048"..((B or"\063\063\058\063\063").."\124\114")local r=H(o)..((o or"\208\157\208\181\208\184\208\183\208\178\208\181\209\129\209\130\208\189\208\190").."\124\114")local d=V>=0 and"\124\099\070\070\048\048\070\070\048\048"or"\124\099\070\070\070\070\048\048\048\048"local q=d..(tostring(V).."\124\114")local Z="\124\099\070\070\070\070\070\070\048\048"..((X or"\208\157\208\181\208\184\208\183\208\178\208\181\209\129\209\130\208\189\208\190").."\124\114")local function N(B)if not B or type(B)~="\115\116\114\105\110\103"then return B end for I=1,GetNumGuildMembers(),1 do local o,X,j,c,H,V,l,r=GetGuildRosterInfo(I)if o and r then local I={}for B in r:gmatch("\037\083\043")do table.insert(I,B)end if#I>=2 and I[2]==B then return o end end end return B end local e={}if type(j)=="\115\116\114\105\110\103"then for B in j:gmatch("\037\083\043")do local I=N(B)table.insert(e,H(I)..(I.."\124\114"))end end local g=table.concat(e," ")local f=string.format("\037\115 \124 \037\115 \124 \037\115 \124 \037\115 \124 \037\115",l,r,q,Z,g)table.insert(c.logData,{text=f,raw={time=B;rl=o,gp=V,raid=X;targets=j}})if#c.logData>200 then table.remove(c.logData,1)end if c.logWindow and c.logWindow:IsShown()then c:UpdateLogDisplay()c.logWindow.scrollFrame:SetVerticalScroll(c.logWindow.scrollFrame:GetVerticalScrollRange())end end function GpDb_old.UpdateRaidWindowVisibility(I)if not I.raidWindow then return end local o=I:_CheckOfficerRank()if not o then if I.raidWindow:IsShown()then I.raidWindow:Hide()if I.logWindow and I.logWindow:IsShown()then I.logWindow:SetHeight(I.window:GetHeight())end end return end local X=next(I.selected_indices)~=nil if not X then if I.raidWindow:IsShown()then I.raidWindow:Hide()if I.logWindow and I.logWindow:IsShown()then I.logWindow:SetHeight(I.window:GetHeight())end end return end local j=B()local c=I.window.raidOnlyCheckbox:GetChecked()local H=not j or c if H and j then local B={}for I=1,GetNumGroupMembers(),1 do local o=GetRaidRosterInfo(I)if o then B[o]=true end end for o in pairs(I.selected_indices)do local X=I.gp_data[o]if X and not B[X.original_nick]then H=false print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\208\181\208\186\208\190\209\130\208\190\209\128\209\139\208\181 \208\178\209\139\208\180\208\181\208\187\208\181\208\189\208\189\209\139\208\181 \208\184\208\179\209\128\208\190\208\186\208\184 \208\189\208\181 \208\178 \209\128\208\181\208\185\208\180\208\181")break end end end if H then if not I.raidWindow:IsShown()then I.raidWindow:Show()I:RestoreRaidWindowState()I:_UpdateSelectedPlayersText()if I.logWindow and I.logWindow:IsShown()then I.logWindow:SetHeight(I.window:GetHeight()/2)end end else if I.raidWindow:IsShown()then I.raidWindow:Hide()end if I.logWindow and I.logWindow:IsShown()then I.logWindow:SetHeight(I.window:GetHeight())end end end function GpDb_old.UpdateWindow(B)if not B.window or not B.rows then return end local I=FauxScrollFrame_GetOffset(B.window.scrollFrame)local o=math.floor((B.window.scrollFrame:GetHeight()-30)/25)B.visible_rows=o for o=1,B.visible_rows,1 do local X=B.rows[o]local j=o+I if j<=#B.gp_data then local I=B.gp_data[j]X.nick:SetText(I.nick)X.gp:SetText(tostring(I.gp))if I.classColor then X.nick:SetTextColor(I.classColor.r,I.classColor.g,I.classColor.b)else X.nick:SetTextColor(1,1,1)end X:Show()else X:Hide()end end B:RefreshRowHighlights()FauxScrollFrame_Update(B.window.scrollFrame,#B.gp_data,B.visible_rows,25)B:UpdateRaidWindowVisibility()end function GpDb_old.GetNumSelected(B)local I=0 for o in pairs(B.selected_indices)do if B.gp_data[o]then I=I+1 else B.selected_indices[o]=nil end end print(string.format("\071\101\116\078\117\109\083\101\108\101\099\116\101\100\058 \208\189\208\176\208\185\208\180\208\181\208\189\208\190 \037\100 \209\141\208\187\208\181\208\188\208\181\208\189\209\130\208\190\208\178",I))return I end function GpDb_old.Show(I)I.window:Show()I.window.raidOnlyCheckbox:SetChecked(B())I:_UpdateFromGuild()I:UpdateWindow()end function GpDb_old.Hide(B)B.window:Hide()end function GpDb_old._UpdateFromGuild(I)if I.updateTimer then I.updateTimer:Cancel()I.updateTimer=nil end I.gp_data={}local o=0 local X=GetNumGuildMembers()local j=B()I.window.raidOnlyCheckbox:SetChecked(j)local c=j and I.window.raidOnlyCheckbox:GetChecked()if not IsInGuild()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\146\209\139 \208\189\208\181 \209\129\208\190\209\129\209\130\208\190\208\184\209\130\208\181 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184")I:UpdateWindow()return end GuildRoster()I.updateTimer=C_Timer(.01,function()local B={}for I=1,GetNumGuildMembers(),1 do local o,X,j,c,H,V,l,r,d,q,Z=GetGuildRosterInfo(I)if o then local I=o:match("\094\040\046-\041-")or o local X=nil if r then local B={}for I in r:gmatch("\037\083\043")do table.insert(B,I)end if#B>=2 then X=B[2]end end B[I]={publicNote=l,officerNote=r;classFileName=Z,playerID=X}end end if c then local j=GetNumGroupMembers()local c=true local H={}for I=1,j,1 do local o,X,j,V,l,r=GetRaidRosterInfo(I)if o then local I=o:match("\094\040\046-\041-")or o if not B[I]then c=false table.insert(H,o)end end end if not c then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\146 \209\128\208\181\208\185\208\180\208\181 \208\181\209\129\209\130\209\140 \208\189\208\181 \209\135\208\187\208\181\208\189\209\139 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\058 "..table.concat(H,"\044 "))I.window.countText:SetText("\208\158\209\130\208\190\208\177\209\128\208\176\208\182\208\176\208\181\209\130\209\129\209\143 \208\184\208\179\209\128\208\190\208\186\208\190\208\178\058 \048 \040\208\178 \209\128\208\181\208\185\208\180\208\181 \208\181\209\129\209\130\209\140 \208\189\208\181 \209\135\208\187\208\181\208\189\209\139 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041")I.window.totalText:SetText(string.format("\208\146\209\129\208\181\208\179\208\190 \208\184\208\179\209\128\208\190\208\186\208\190\208\178 \209\129 \208\147\208\159\058 \037\100 \040\208\184\208\183 \037\100 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041",o,X))I:UpdateWindow()return end for X=1,j,1 do local j,c,H,V,l,r=GetRaidRosterInfo(X)if j then local X=j:match("\094\040\046-\041-")or j local c=B[X]if c then local B=0 local H=c.publicNote or""if c.officerNote then local I={}for B in c.officerNote:gmatch("\037\083\043")do table.insert(I,B)end if#I>=3 then B=tonumber(I[3])or 0 end end if B>0 then o=o+1 end local V=j if H and H~=""then V=j..(" \124\099\070\070\070\070\070\070\048\048\040"..(H.."\041\124\114"))end table.insert(I.gp_data,{nick=V,original_nick=X;gp=B;classColor=RAID_CLASS_COLORS[r]or{r=1,g=1;b=1};classFileName=r;playerID=c.playerID})end end end else for B=1,GetNumGuildMembers(),1 do local X,j,c,H,V,l,r,d,q,Z,N=GetGuildRosterInfo(B)if X and(d and d~="")then local B=X:match("\094\040\046-\041-")or X local j={}for B in d:gmatch("\037\083\043")do table.insert(j,B)end if#j>=3 then local c=tonumber(j[3])or 0 local H=j[2]if c~=0 then o=o+1 local j=X if r and r~=""then j=X..(" \124\099\070\070\070\070\070\070\048\048\040"..(r.."\041\124\114"))end table.insert(I.gp_data,{nick=j;original_nick=B;gp=c;classColor=RAID_CLASS_COLORS[N]or{r=1;g=1,b=1};classFileName=N;playerID=H})end end end end end if I.filterText and I.filterText~=""then local B={}for o,X in ipairs(I.gp_data)do local j=string.find(X.original_nick:lower(),I.filterText,1,true)local c=string.find(X.nick:lower(),I.filterText,1,true)if j or c then table.insert(B,X)end end I.gp_data=B end I.window.countText:SetText(string.format("\208\158\209\130\208\190\208\177\209\128\208\176\208\182\208\176\208\181\209\130\209\129\209\143 \208\184\208\179\209\128\208\190\208\186\208\190\208\178\058 \037\100",#I.gp_data))I.window.totalText:SetText(string.format("\208\146\209\129\208\181\208\179\208\190 \208\184\208\179\209\128\208\190\208\186\208\190\208\178 \209\129 \208\147\208\159\058 \037\100 \040\208\184\208\183 \037\100 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\041",o,GetNumGuildMembers()))I:ClearSelection()I:SortData()I:UpdateWindow()end,false)end function GpDb_old.Show(I)I.window:Show()if B()then I.window.raidOnlyCheckbox:SetChecked(true)else I.window.raidOnlyCheckbox:SetChecked(false)end GuildRoster()C_Timer(.01,function()I:_UpdateFromGuild()I:UpdateWindow()end)end function GpDb_old.AddGpEntry(X,B,I,o)table.insert(X.gp_data,{nick=B;original_nick=B;gp=tonumber(I)or 0;playerID=o})X:SortData()X:UpdateWindow()end function GpDb_old.UpdateGpEntry(o,B,I)for o,X in ipairs(o.gp_data)do if X.original_nick==B then X.gp=tonumber(I)or 0 break end end o:SortData()o:UpdateWindow()end function GpDb_old.RemoveGpEntry(I,B)for o,X in ipairs(I.gp_data)do if X.original_nick==B then table.remove(I.gp_data,o)break end end I:UpdateWindow()end function GpDb_old.FindGpEntry(I,B)for I,o in ipairs(I.gp_data)do if o.original_nick==B then return o.gp end end return nil end function GpDb_old.ClearAll(B)B.gp_data={}B:UpdateWindow()end function GpDb_old.SortData(I,B)if B then if I.sort_column==B then I.sort_ascending=not I.sort_ascending else I.sort_column=B I.sort_ascending=true end end table.sort(I.gp_data,function(B,o)local X,j if I.sort_column=="\110\105\099\107"then X=string.lower(B.original_nick or"")j=string.lower(o.original_nick or"")else X=B.gp or 0 j=o.gp or 0 end if I.sort_ascending then return X<j else return X>j end end)I:ClearSelection()I:UpdateWindow()end function GpDb_old.UpdateWindow(B)if not B.window or not B.rows then return end for I,o in ipairs(B.rows)do local X=B.gp_data[I]if X then o.nick:SetText(X.nick)if X.classColor then local B=X.nick:match("\094\091\094\124\093\043")or X.nick o.nick:SetText(B)o.nick:SetTextColor(X.classColor.r,X.classColor.g,X.classColor.b)local I=X.nick:match("\124\099\046\043\036")if I then local B=o.nick:GetText()..(" "..I)o.nick:SetText(B)end else o.nick:SetTextColor(1,1,1)end o.gp:SetText(tostring(X.gp))o.gp:SetTextColor(1,1,1)o:Show()else o:Hide()end end B.window.scrollChild:SetHeight(#B.gp_data*25)B.window.scrollFrame:UpdateScrollChildRect()end function GpDb_old.SaveToNsDb(B)for I,o in ipairs(B.gp_data)do B.ns_db:addStaticStr("\071\080\095\068\065\084\065",o.original_nick,nil,tostring(o.gp))end end function GpDb_old.LoadFromNsDb(B)B.gp_data={}local I=B.ns_db.input_table.GP_DATA if I then for I,o in pairs(I)do table.insert(B.gp_data,{nick=I;original_nick=I;gp=tonumber(o)or 0})end end B:SortData()B:UpdateWindow()end function GpDb_old._CreateRaidSelectionWindow(B)B.raidWindow=CreateFrame("\070\114\097\109\101","\071\112\068\098\082\097\105\100\087\105\110\100\111\119",B.window)B.raidWindow:SetFrameStrata("\068\073\065\076\079\071")B.raidWindow:SetSize(250,B.window:GetHeight()*.5)B.raidWindow:SetPoint("\066\079\084\084\079\077\076\069\070\084",B.window,"\066\079\084\084\079\077\082\073\071\072\084",5,0)B.raidWindow:SetMovable(false)B.raidWindow.background=B.raidWindow:CreateTexture(nil,"\066\065\067\075\071\082\079\085\078\068")B.raidWindow.background:SetTexture("\073\110\116\101\114\102\097\099\101\092\066\117\116\116\111\110\115\092\087\072\073\084\069\056\088\056")B.raidWindow.background:SetVertexColor(0,0,0)B.raidWindow.background:SetAlpha(1)B.raidWindow.background:SetAllPoints(true)B.raidWindow.borderFrame=CreateFrame("\070\114\097\109\101",nil,B.raidWindow)B.raidWindow.borderFrame:SetPoint("\084\079\080\076\069\070\084",-3,3)B.raidWindow.borderFrame:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",3,-3)B.raidWindow.borderFrame:SetBackdrop({edgeFile="\073\110\116\101\114\102\097\099\101\092\068\105\097\108\111\103\070\114\097\109\101\092\085\073-\068\105\097\108\111\103\066\111\120-\066\111\114\100\101\114",edgeSize=16,insets={left=4;right=4,top=4;bottom=4}})B.raidWindow.closeButton=CreateFrame("\066\117\116\116\111\110",nil,B.raidWindow,"\085\073\080\097\110\101\108\067\108\111\115\101\066\117\116\116\111\110")B.raidWindow.closeButton:SetPoint("\084\079\080\082\073\071\072\084",-5,-5)B.raidWindow.closeButton:SetScript("\079\110\067\108\105\099\107",function()B.raidWindow:Hide()end)B.raidWindow.dropdown=CreateFrame("\070\114\097\109\101","\071\112\068\098\082\097\105\100\068\114\111\112\100\111\119\110",B.raidWindow,"\085\073\068\114\111\112\068\111\119\110\077\101\110\117\084\101\109\112\108\097\116\101")B.raidWindow.dropdown:SetPoint("\084\079\080\076\069\070\084",10,-10)B.raidWindow.dropdown:SetPoint("\082\073\071\072\084",B.raidWindow.closeButton,"\076\069\070\084",-10,0)B.raidWindow.dropdown:SetHeight(32)local function I()if B.raidWindow.selectedRaidId then for I=1,GetNumSavedInstances(),1 do local o,X=GetSavedInstanceInfo(I)if X==B.raidWindow.selectedRaidId then UIDropDownMenu_SetText(B.raidWindow.dropdown,string.format("\037\100\058 \037\115",X,o))return end end else UIDropDownMenu_SetText(B.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")end end local function o(o,X,j)local c=UIDropDownMenu_CreateInfo()for o=1,GetNumSavedInstances(),1 do local X,j,H,V,l,r,d,q,Z=GetSavedInstanceInfo(o)if X and j then c.text=string.format("\037\100\058 \037\115 \040\037\100\041",j,X,Z)c.arg1={id=j,name=X,players=Z}c.func=function(o,X)B.raidWindow.selectedRaidId=X.id B.raidWindow.selectedRaidName=X.name B.raidWindow.selectedRaidPlayers=X.players if B.saveSelectionEnabled then B.lastSelectionType="\114\097\105\100"B.lastRaidId=X.id B.lastRaidName=X.name B.lastRaidPlayers=X.players end I()B.raidWindow.editBox:SetText("")end c.checked=B.raidWindow.selectedRaidId==j UIDropDownMenu_AddButton(c)end end c.text="\208\158\209\135\208\184\209\129\209\130\208\184\209\130\209\140 \208\178\209\139\208\177\208\190\209\128"c.func=function()B.raidWindow.selectedRaidId=nil B.raidWindow.selectedRaidName=nil if B.saveSelectionEnabled then B.lastSelectionType=nil B.lastRaidId=nil B.lastRaidName=nil B.lastRaidPlayers=0 end I()end c.notCheckable=true UIDropDownMenu_AddButton(c)end UIDropDownMenu_Initialize(B.raidWindow.dropdown,o)UIDropDownMenu_SetWidth(B.raidWindow.dropdown,200)UIDropDownMenu_SetButtonWidth(B.raidWindow.dropdown,224)UIDropDownMenu_JustifyText(B.raidWindow.dropdown,"\076\069\070\084")I()B.raidWindow.otherText=B.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")B.raidWindow.otherText:SetPoint("\084\079\080\076\069\070\084",B.raidWindow.dropdown,"\066\079\084\084\079\077\076\069\070\084",0,-10)B.raidWindow.otherText:SetText("\208\148\209\128\209\131\208\179\208\190\208\181\058")B.raidWindow.editBox=CreateFrame("\069\100\105\116\066\111\120",nil,B.raidWindow,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")B.raidWindow.editBox:SetPoint("\084\079\080\076\069\070\084",B.raidWindow.otherText,"\066\079\084\084\079\077\076\069\070\084",0,-5)B.raidWindow.editBox:SetPoint("\082\073\071\072\084",-10,0)B.raidWindow.editBox:SetHeight(20)B.raidWindow.editBox:SetAutoFocus(false)B.raidWindow.editBox:SetScript("\079\110\084\101\120\116\067\104\097\110\103\101\100",function(o)if o:GetText()~=""then if B.saveSelectionEnabled then B.lastSelectionType="\111\116\104\101\114"B.lastOtherText=o:GetText()end B.raidWindow.selectedRaidId=nil B.raidWindow.selectedRaidName=nil I()end end)B.raidWindow.saveCheckbox=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",nil,B.raidWindow,"\085\073\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")B.raidWindow.saveCheckbox:SetPoint("\084\079\080\076\069\070\084",B.raidWindow.editBox,"\066\079\084\084\079\077\076\069\070\084",0,-10)B.raidWindow.saveCheckbox:SetSize(24,24)B.raidWindow.saveCheckbox.text=B.raidWindow.saveCheckbox:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")B.raidWindow.saveCheckbox.text:SetPoint("\076\069\070\084",B.raidWindow.saveCheckbox,"\082\073\071\072\084",5,0)B.raidWindow.saveCheckbox.text:SetText("\208\161\208\190\209\133\209\128\208\176\208\189\208\184\209\130\209\140 \208\178\209\139\208\177\208\190\209\128")B.raidWindow.saveCheckbox:SetChecked(true)B.saveSelectionEnabled=true B.raidWindow.saveCheckbox:SetScript("\079\110\067\108\105\099\107",function()B.saveSelectionEnabled=B.raidWindow.saveCheckbox:GetChecked()end)B.raidWindow.selectedPlayersText=B.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")B.raidWindow.selectedPlayersText:SetPoint("\084\079\080\076\069\070\084",B.raidWindow.saveCheckbox,"\066\079\084\084\079\077\076\069\070\084",0,-5)B.raidWindow.selectedPlayersText:SetPoint("\082\073\071\072\084",-10,0)B.raidWindow.selectedPlayersText:SetHeight(70)B.raidWindow.selectedPlayersText:SetJustifyH("\076\069\070\084")B.raidWindow.selectedPlayersText:SetJustifyV("\084\079\080")B.raidWindow.selectedPlayersText:SetWordWrap(true)local X={5,10,20,25;50;100}local j for I,o in ipairs(X)do local X=CreateFrame("\066\117\116\116\111\110",nil,B.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")X:SetSize(27,20)X:SetText(tostring(o))if I==1 then X:SetPoint("\066\079\084\084\079\077\076\069\070\084",B.raidWindow.selectedPlayersText,"\066\079\084\084\079\077\076\069\070\084",0,-20)else X:SetPoint("\076\069\070\084",j,"\082\073\071\072\084",5,0)end X:SetScript("\079\110\067\108\105\099\107",function()local I=tonumber(B.raidWindow.gpEditBox:GetText())or 0 B.raidWindow.gpEditBox:SetText(tostring(o))B.raidWindow.gpEditBox:HighlightText()end)j=X end local c=CreateFrame("\066\117\116\116\111\110",nil,B.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")c:SetSize(40,22)c:SetText("-\047\043")c:SetPoint("\076\069\070\084",j,"\082\073\071\072\084",5,0)c:SetScript("\079\110\067\108\105\099\107",function()local I=tonumber(B.raidWindow.gpEditBox:GetText())or 0 B.raidWindow.gpEditBox:SetText(tostring(-I))B.raidWindow.gpEditBox:HighlightText()end)B.raidWindow.gpEditBox=CreateFrame("\069\100\105\116\066\111\120",nil,B.raidWindow,"\073\110\112\117\116\066\111\120\084\101\109\112\108\097\116\101")B.raidWindow.gpEditBox:SetPoint("\066\079\084\084\079\077\076\069\070\084",10,5)B.raidWindow.gpEditBox:SetSize(100,20)B.raidWindow.gpEditBox:SetAutoFocus(false)B.raidWindow.gpEditBox:SetScript("\079\110\069\115\099\097\112\101\080\114\101\115\115\101\100",function()B.raidWindow.gpEditBox:ClearFocus()end)B.raidWindow.gpEditBox:SetScript("\079\110\069\110\116\101\114\080\114\101\115\115\101\100",function()B.raidWindow.gpEditBox:ClearFocus()end)B.raidWindow.awardButton=CreateFrame("\066\117\116\116\111\110",nil,B.raidWindow,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")B.raidWindow.awardButton:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-10,5)B.raidWindow.awardButton:SetSize(100,22)B.raidWindow.awardButton:SetText("\208\157\208\176\209\135\208\184\209\129\208\187\208\184\209\130\209\140")B.raidWindow.awardButton:SetScript("\079\110\067\108\105\099\107",function()if not B:_CheckOfficerRank()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\162\208\190\208\187\209\140\208\186\208\190 \208\190\209\132\208\184\209\134\208\181\209\128\209\139 \208\188\208\190\208\179\209\131\209\130 \208\189\208\176\209\135\208\184\209\129\208\187\209\143\209\130\209\140 \208\147\208\159")B.raidWindow:Hide()return end if next(B.selected_indices)==nil then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\208\181\209\130 \208\178\209\139\208\180\208\181\208\187\208\181\208\189\208\189\209\139\209\133 \208\184\208\179\209\128\208\190\208\186\208\190\208\178")B.raidWindow:Hide()return end local I=tonumber(B.raidWindow.gpEditBox:GetText())if not I then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\163\208\186\208\176\208\182\208\184\209\130\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181 \208\147\208\159")return end if not B.raidWindow.selectedRaidId and not(B.lastOtherText or""):match("\037\083")then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\157\209\131\208\182\208\189\208\190 \208\178\209\139\208\177\209\128\208\176\209\130\209\140 \209\128\208\181\208\185\208\180 \208\184\208\187\208\184 \209\131\208\186\208\176\208\183\208\176\209\130\209\140 \208\191\209\128\208\184\209\135\208\184\208\189\209\131")return end if not B.saveSelectionEnabled then B.lastSelectionType=nil B.lastRaidId=nil B.lastRaidName=nil B.lastRaidPlayers=0 B.lastOtherText=nil B.lastGPValue=0 else B.lastGPValue=I end local o if B.raidWindow.selectedRaidId then local X=(B.raidWindow.selectedRaidName or""):gsub("\037\115\043","\095")o=string.format("\037\048\052\100\095\037\115\095\037\100 \037\100",B.raidWindow.selectedRaidId,X,B.raidWindow.selectedRaidPlayers or 0,I)else local X=(B.lastOtherText or""):gsub("\037\115\043","\095")o=string.format("\037\115 \037\100",X,I)end for X in pairs(B.selected_indices)do if B.gp_data[X]then local j=B.gp_data[X].original_nick local c=B.gp_data[X].playerID or"\085\078\075\078\079\087\078"SendAddonMessage("\110\115\071\080"..(" "..I),j,"\103\117\105\108\100")o=o..(" "..c)B:AddLogEntry(I,date("\037\072\058\037\077"),UnitName("\112\108\097\121\101\114"),B.raidWindow.selectedRaidName or B.raidWindow.editBox:GetText(),j)end end SendAddonMessage("\110\115\071\080\108\111\103",o,"\103\117\105\108\100")for B,o in ipairs(B:GetSelectedEntries())do o.gp=(o.gp or 0)+I end B:UpdateWindow()B.raidWindow:Hide()end)B.raidWindow:SetScript("\079\110\072\105\100\101",function()if B.logWindow and B.logWindow:IsShown()then B.logWindow:SetHeight(B.window:GetHeight())end end)B.raidWindow:Hide()end function GpDb_old._UpdateSelectedPlayersText(B)if not B.raidWindow then return end local I=B:GetSelectedEntries()local o={}for B,I in ipairs(I)do table.insert(o,I.original_nick)end local X=table.concat(o,"\044 ")if not B.raidWindow.selectedPlayersText then B.raidWindow.selectedPlayersText=B.raidWindow:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\083\109\097\108\108")B.raidWindow.selectedPlayersText:SetPoint("\084\079\080\076\069\070\084",B.raidWindow.saveCheckbox,"\066\079\084\084\079\077\076\069\070\084",0,-5)B.raidWindow.selectedPlayersText:SetPoint("\082\073\071\072\084",-10,0)B.raidWindow.selectedPlayersText:SetHeight(80)B.raidWindow.selectedPlayersText:SetJustifyH("\076\069\070\084")B.raidWindow.selectedPlayersText:SetJustifyV("\084\079\080")B.raidWindow.selectedPlayersText:SetWordWrap(true)B.raidWindow.selectedPlayersTextContainer=CreateFrame("\070\114\097\109\101",nil,B.raidWindow)B.raidWindow.selectedPlayersTextContainer:SetAllPoints(B.raidWindow.selectedPlayersText)B.raidWindow.selectedPlayersTextContainer:SetScript("\079\110\069\110\116\101\114",function()if B.raidWindow.selectedPlayersText.tooltip then GameTooltip:SetOwner(B.raidWindow.selectedPlayersTextContainer,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:SetText("\208\146\209\139\208\177\209\128\208\176\208\189\208\189\209\139\208\181 \208\184\208\179\209\128\208\190\208\186\208\184\058")GameTooltip:AddLine(B.raidWindow.selectedPlayersText.tooltip,1,1,1,true)GameTooltip:Show()end end)B.raidWindow.selectedPlayersTextContainer:SetScript("\079\110\076\101\097\118\101",function()GameTooltip:Hide()end)end if#X>60 then local I=string.sub(X,1,600).."\046\046\046"B.raidWindow.selectedPlayersText:SetText(I)B.raidWindow.selectedPlayersText.tooltip=X else B.raidWindow.selectedPlayersText:SetText(X)B.raidWindow.selectedPlayersText.tooltip=nil end end function GpDb_old.RestoreRaidWindowState(B)if not B.raidWindow then return end if B.lastSelectionType=="\114\097\105\100"and B.lastRaidId then UIDropDownMenu_SetText(B.raidWindow.dropdown,string.format("\037\100\058 \037\115",B.lastRaidId,B.lastRaidName))B.raidWindow.editBox:SetText("")B.raidWindow.selectedRaidId=B.lastRaidId B.raidWindow.selectedRaidName=B.lastRaidName B.raidWindow.selectedRaidPlayers=B.lastRaidPlayers elseif B.lastSelectionType=="\111\116\104\101\114"and B.lastOtherText then UIDropDownMenu_SetText(B.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")B.raidWindow.editBox:SetText(B.lastOtherText)B.raidWindow.selectedRaidId=nil B.raidWindow.selectedRaidName=nil else UIDropDownMenu_SetText(B.raidWindow.dropdown,"\208\146\209\139\208\177\208\181\209\128\208\184\209\130\208\181 \209\128\208\181\208\185\208\180")B.raidWindow.editBox:SetText("")B.raidWindow.selectedRaidId=nil B.raidWindow.selectedRaidName=nil end if not B.lastGPValue then B.lastGPValue=0 end B.raidWindow.gpEditBox:SetText(tostring(B.lastGPValue))B.raidWindow.saveCheckbox:SetChecked(B.saveSelectionEnabled)B:_UpdateSelectedPlayersText()end function GpDb_old._CheckOfficerRank(B)if not IsInGuild()then return false end local I=UnitName("\112\108\097\121\101\114")for B=1,GetNumGuildMembers(),1 do local o,X,j=GetGuildRosterInfo(B)if o and o==I then local B=GuildControlGetRankName(j+1)if B=="\208\154\208\176\208\191\208\184\209\130\208\176\208\189"or B=="\208\155\208\181\208\185\209\130\208\181\208\189\208\176\208\189\209\130"then return true end break end end return false end function GpDb_old.ToggleRaidWindow(I)if not I:_CheckOfficerRank()then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\162\208\190\208\187\209\140\208\186\208\190 \208\190\209\132\208\184\209\134\208\181\209\128\209\139 \208\188\208\190\208\179\209\131\209\130 \208\189\208\176\209\135\208\184\209\129\208\187\209\143\209\130\209\140 \208\147\208\159")if I.raidWindow and I.raidWindow:IsShown()then I.raidWindow:Hide()end return end if not I.raidWindow then I:_CreateRaidSelectionWindow()end local o=B()local X=I.window.raidOnlyCheckbox:GetChecked()local j=next(I.selected_indices)~=nil if not j and not I.raidWindow:IsShown()then I.raidWindow:Show()UIDropDownMenu_Initialize(I.raidWindow.dropdown,nil)return end if j then if o and not X then print("\124\099\070\070\070\070\048\048\048\048\208\147\208\159\058\124\114 \208\148\208\187\209\143 \208\189\208\176\209\135\208\184\209\129\208\187\208\181\208\189\208\184\209\143 \208\147\208\159 \208\178 \209\128\208\181\208\185\208\180\208\181 \208\178\208\186\208\187\209\142\209\135\208\184\209\130\208\181 \'\208\162\208\190\208\187\209\140\208\186\208\190 \209\128\208\181\208\185\208\180\'")I.raidWindow:Hide()return end if I.raidWindow:IsShown()then I.raidWindow:Hide()else I.raidWindow:Show()UIDropDownMenu_Initialize(I.raidWindow.dropdown,nil)end end end if type(C_Timer)~="\116\097\098\108\101"then C_Timer={}end function C_Timer.After(B,I)local o=CreateFrame("\070\114\097\109\101")o.elapsed=0 o:SetScript("\079\110\085\112\100\097\116\101",function(o,X)o.elapsed=o.elapsed+X if o.elapsed>=B then I()o:SetScript("\079\110\085\112\100\097\116\101",nil)end end)return o end function C_Timer.NewTicker(B,I,o)local X={_remaining=o or math.huge;Cancel=function(B)B._remaining=0 end}local function j()if X._remaining<=0 then return end I()X._remaining=X._remaining-1 if X._remaining>0 then C_Timer.After(B,j)end end C_Timer.After(B,j)return X end setmetatable(C_Timer,{__call=function(B,I,o,X)if X then return C_Timer.NewTicker(I,o,nil)else return C_Timer.After(I,o)end end})function GetNumGroupMembers()if GetNumRaidMembers()>0 then return GetNumRaidMembers()else return GetNumPartyMembers()+1 end end local V={}local function l(B,I)if type(B)=="\116\097\098\108\101"and type(I)=="\110\117\109\098\101\114"then UIDropDownMenu_AddButton(B,I)end end local function d(B)return B:match("\091\094\092\047\093\043\036")or B end local function q(B)local I=CreateFrame("\070\114\097\109\101","\080\108\097\121\101\114\083\111\117\110\100\077\101\110\117\095"..B,nil,"\085\073\068\114\111\112\068\111\119\110\077\101\110\117\084\101\109\112\108\097\116\101")I.initialize=function(I,o)if not o then return end if o==1 then l({text="\208\148\208\190\208\177\208\176\208\178\208\184\209\130\209\140 \208\178 \209\129\208\191\208\184\209\129\208\190\208\186";notCheckable=1,func=function()testQ=testQ or{}testQ.fls=testQ.fls or{}if not testQ.fls[B]then testQ.fls[B]="\073\110\116\101\114\102\097\099\101\092\065\100\100\079\110\115\092\078\083\081\067\092\108\105\098\115\092\102\108\115\046\109\112\051"print("\208\148\208\190\208\177\208\176\208\178\208\187\208\181\208\189\058",B,"\208\151\208\178\209\131\208\186\058",testQ.fls[B])end CloseDropDownMenus()end},1)l({text="";disabled=1;notCheckable=1},1)if ns_alert_sounds and type(ns_alert_sounds)=="\116\097\098\108\101"then for I,o in ipairs(ns_alert_sounds)do if o.label and(o.sounds and type(o.sounds)=="\116\097\098\108\101")then l({text=o.label;notCheckable=1,hasArrow=1;value=o.label..("\095"..B)},1)end end end elseif o==2 then local I=UIDROPDOWNMENU_MENU_VALUE if I and(ns_alert_sounds and type(ns_alert_sounds)=="\116\097\098\108\101")then local o=I:match("\094\040\046\043\041\095"..(B.."\036"))if o then for I,X in ipairs(ns_alert_sounds)do if X.label==o and(X.sounds and type(X.sounds)=="\116\097\098\108\101")then for I,o in ipairs(X.sounds)do l({text=d(o);notCheckable=1;func=function()testQ.fls[B]=o PlaySoundFile(o,"\077\097\115\116\101\114")print("\208\148\208\190\208\177\208\176\208\178\208\187\208\181\208\189\058",B,"\208\151\208\178\209\131\208\186\058",o)CloseDropDownMenus()end},2)end break end end end end end end return I end local function Z(B)local I=""local o=""local X=false for j=1,GetNumGuildMembers(),1 do local c,H,V,l,r,d,q,Z=GetGuildRosterInfo(j)if c and strsplit("-",c)==B then o=q or""I=Z or""X=true break end end if X then SendChatMessage("\208\152\208\189\209\132\208\190\209\128\208\188\208\176\209\134\208\184\209\143 \208\190\208\177 \208\184\208\179\209\128\208\190\208\186\208\181\058 "..B,"\079\070\070\073\067\069\082")SendChatMessage("  \208\158\209\132\208\184\209\134\208\181\209\128\209\129\208\186\208\176\209\143 \208\183\208\176\208\188\208\181\209\130\208\186\208\176\058 "..(I~=""and I or"\040\208\189\208\181\209\130\041"),"\079\070\070\073\067\069\082")SendChatMessage("  \208\159\209\131\208\177\208\187\208\184\209\135\208\189\208\176\209\143 \208\183\208\176\208\188\208\181\209\130\208\186\208\176\058 "..(o~=""and o or"\040\208\189\208\181\209\130\041"),"\079\070\070\073\067\069\082")SendChatMessage("\"\209\128\208\181\208\191\209\131\209\130\208\176\209\134\208\184\209\143 "..(B.." \048"),"\071\085\073\076\068")else SendChatMessage("\208\152\208\179\209\128\208\190\208\186 "..(B.." \208\189\208\181 \208\189\208\176\208\185\208\180\208\181\208\189 \208\178 \208\179\208\184\208\187\209\140\208\180\208\184\208\184\046"),"\079\070\070\073\067\069\082")end end local function N()hooksecurefunc("\070\114\105\101\110\100\115\070\114\097\109\101\095\083\104\111\119\068\114\111\112\100\111\119\110",function(B)if B and B~=UNKNOWNOBJECT then l({text="\208\157\208\176\209\129\209\130\209\128\208\190\208\184\209\130\209\140 \208\183\208\178\209\131\208\186 \208\180\208\187\209\143 "..B;notCheckable=1;func=function()V[B]=V[B]or q(B)ToggleDropDownMenu(1,nil,V[B],"\099\117\114\115\111\114",0,0)end},1)l({text="\208\159\208\190\209\129\208\188\208\190\209\130\209\128\208\181\209\130\209\140 \208\184\208\189\209\132\208\190\209\128\208\188\208\176\209\134\208\184\209\142";notCheckable=1;func=function()Z(B)end},1)end end)hooksecurefunc("\085\110\105\116\080\111\112\117\112\095\079\110\067\108\105\099\107",function()local B=UIDROPDOWNMENU_OPEN_MENU if B and(B.which=="\067\072\065\084\095\082\079\083\084\069\082"or B.which=="\070\082\073\069\078\068")then local I=B.name if I and I~=UNKNOWNOBJECT then l({text="\208\157\208\176\209\129\209\130\209\128\208\190\208\184\209\130\209\140 \208\183\208\178\209\131\208\186 \208\180\208\187\209\143 "..I,notCheckable=1,func=function()V[I]=V[I]or q(I)ToggleDropDownMenu(1,nil,V[I],"\099\117\114\115\111\114",0,0)end},1)l({text="\208\159\208\190\209\129\208\188\208\190\209\130\209\128\208\181\209\130\209\140 \208\184\208\189\209\132\208\190\209\128\208\188\208\176\209\134\208\184\209\142";notCheckable=1;func=function()Z(I)end},1)end end end)end local e=CreateFrame("\070\114\097\109\101")e:RegisterEvent("\080\076\065\089\069\082\095\076\079\071\073\078")e:SetScript("\079\110\069\118\101\110\116",function()N()_G.testQ=_G.testQ or{}_G.testQ.fls=_G.testQ.fls or{}end)NSQCMenu_old={}NSQCMenu_old.__index=NSQCMenu_old function NSQCMenu_old.new(o,B,I)local X=setmetatable({},o)X.addonName=B X.subMenus={}X.elements={}X.mainFrame=CreateFrame("\070\114\097\109\101",B.."\077\097\105\110\070\114\097\109\101",InterfaceOptionsFramePanelContainer)X.mainFrame.name=B X.mainFrame:Hide()X.currentY=-50 local j=X.mainFrame:CreateFontString(nil,"\065\082\084\087\079\082\075","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\076\097\114\103\101")j:SetPoint("\084\079\080\076\069\070\084",16,-16)j:SetText(B)InterfaceOptions_AddCategory(X.mainFrame)return X end function NSQCMenu_old.addInfoSection(o,B,I)local X=o.mainFrame local j=o.currentY local c=X:CreateFontString(nil,"\065\082\084\087\079\082\075","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")c:SetPoint("\084\079\080\076\069\070\084",20,j-10)c:SetText(B)c:SetTextColor(1,.82,0)local H=X:CreateFontString(nil,"\065\082\084\087\079\082\075","\071\097\109\101\070\111\110\116\087\104\105\116\101")H:SetPoint("\084\079\080\076\069\070\084",30,j-30)H:SetWidth(550)H:SetJustifyH("\076\069\070\084")H:SetJustifyV("\084\079\080")H:SetText(o:wrapText(I,540,"\071\097\109\101\070\111\110\116\087\104\105\116\101"))local V=H:GetStringHeight()o.currentY=(j-40)-V table.insert(o.elements,{c;H})end function NSQCMenu_old.wrapText(X,B,I,o)local j=""local c=""for B in B:gmatch("\037\083\043")do local H=c..(" "..B)local V=X:getStringWidth(X.mainFrame,H,o)if V>I then j=j..(c.."\n")c=B else c=H end end return j..c end function NSQCMenu_old.getStringWidth(X,B,I,o)if not B then print("\069\114\114\111\114\058 \070\114\097\109\101 \105\115 \110\105\108 \105\110 \103\101\116\083\116\114\105\110\103\087\105\100\116\104")return 0 end local j=B:CreateFontString(nil,"\065\082\084\087\079\082\075",o)j:SetText(I)local c=j:GetStringWidth()j:Hide()return c end function NSQCMenu_old.addSubMenu(o,B,I)I=I or o local X=o.addonName..(B.."\083\117\098\070\114\097\109\101")local j=CreateFrame("\070\114\097\109\101",X,InterfaceOptionsFramePanelContainer)j.name=B j.parent=I.addonName or I.name j:Hide()local c=CreateFrame("\083\099\114\111\108\108\070\114\097\109\101",X.."\083\099\114\111\108\108\070\114\097\109\101",j,"\085\073\080\097\110\101\108\083\099\114\111\108\108\070\114\097\109\101\084\101\109\112\108\097\116\101")c:SetPoint("\084\079\080\076\069\070\084",16,-50)c:SetPoint("\066\079\084\084\079\077\082\073\071\072\084",-32,16)local H=CreateFrame("\070\114\097\109\101",X.."\083\099\114\111\108\108\067\111\110\116\101\110\116",c)H:SetWidth(c:GetWidth()-20)H:SetHeight(1)c:SetScrollChild(H)local V=_G[X.."\083\099\114\111\108\108\070\114\097\109\101\083\099\114\111\108\108\066\097\114"]V:ClearAllPoints()V:SetPoint("\084\079\080\076\069\070\084",c,"\084\079\080\082\073\071\072\084",12,-16)V:SetPoint("\066\079\084\084\079\077\076\069\070\084",c,"\066\079\084\084\079\077\082\073\071\072\084",12,16)local l=j:CreateFontString(nil,"\065\082\084\087\079\082\075","\071\097\109\101\070\111\110\116\078\111\114\109\097\108\076\097\114\103\101")l:SetPoint("\084\079\080\076\069\070\084",16,-16)l:SetText(B)InterfaceOptions_AddCategory(j)local r={frame=j;scrollFrame=c;scrollContent=H,elements={},lastY=0,totalHeight=0,maxHeight=c:GetHeight();parent=I,name=B}table.insert(o.subMenus,r)return r end function NSQCMenu_old.showSubMenu(I,B)if B.parent then B.parent.frame:Hide()end B.frame:Show()end function NSQCMenu_old.addSlider(o,B,I)local X=CreateFrame("\083\108\105\100\101\114",B.frame:GetName()..I.name,B.scrollContent,"\079\112\116\105\111\110\115\083\108\105\100\101\114\084\101\109\112\108\097\116\101")X:SetPoint("\084\079\080\076\069\070\084",16,-B.lastY)X:SetWidth(590)X:SetHeight(20)X:SetMinMaxValues(I.min,I.max)X:SetValueStep(I.step or 1)X:SetValue(I.default)X.tooltipText=I.tooltip _G[X:GetName().."\084\101\120\116"]:SetText(I.label)_G[X:GetName().."\076\111\119"]:SetText(I.min)_G[X:GetName().."\072\105\103\104"]:SetText(I.max)X:SetScript("\079\110\069\110\116\101\114",function(B)if B.tooltipText then GameTooltip:SetOwner(B,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine(B.tooltipText,1,1,1,true)GameTooltip:AddLine("\208\162\208\181\208\186\209\131\209\137\208\181\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\058 \124\099\102\102\102\102\102\102\102\102"..(B:GetValue().."\124\114"),1,1,1,true)GameTooltip:Show()end end)X:SetScript("\079\110\076\101\097\118\101",function(B)GameTooltip:Hide()end)X:SetScript("\079\110\086\097\108\117\101\067\104\097\110\103\101\100",function(B,o)if I.onChange then I.onChange(o)end if GameTooltip:IsOwned(B)then GameTooltip:ClearLines()GameTooltip:SetOwner(B,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine(B.tooltipText,1,1,1,true)GameTooltip:AddLine("\208\162\208\181\208\186\209\131\209\137\208\181\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\058 \124\099\102\102\102\102\102\102\102\102"..(o.."\124\114"),1,1,1,true)GameTooltip:Show()end end)B.lastY=B.lastY+40 B.totalHeight=B.totalHeight+40 B.scrollContent:SetHeight(B.totalHeight)table.insert(B.elements,X)o:updateScrollRange(B)return X end function NSQCMenu_old.addCheckbox(o,B,I)local X=CreateFrame("\067\104\101\099\107\066\117\116\116\111\110",B.frame:GetName()..I.name,B.scrollContent,"\067\104\097\116\067\111\110\102\105\103\067\104\101\099\107\066\117\116\116\111\110\084\101\109\112\108\097\116\101")X:SetPoint("\084\079\080\076\069\070\084",16,-B.lastY)X:SetChecked(I.default or false)X.tooltipText=I.tooltip local j=B.scrollContent:CreateFontString(nil,"\079\086\069\082\076\065\089","\071\097\109\101\070\111\110\116\078\111\114\109\097\108")j:SetPoint("\076\069\070\084",X,"\082\073\071\072\084",5,0)j:SetText(I.label)X:SetScript("\079\110\069\110\116\101\114",function(B)if B.tooltipText then GameTooltip:SetOwner(B,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine(B.tooltipText,1,1,1,true)local I=B:GetChecked()and"\124\099\102\102\048\048\102\102\048\048\208\146\208\186\208\187\209\142\209\135\208\181\208\189\208\190\124\114"or"\124\099\102\102\102\102\048\048\048\048\208\146\209\139\208\186\208\187\209\142\209\135\208\181\208\189\208\190\124\114"GameTooltip:AddLine("\208\162\208\181\208\186\209\131\209\137\208\181\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\058 "..I,1,1,1,true)GameTooltip:Show()end end)X:SetScript("\079\110\076\101\097\118\101",function(B)GameTooltip:Hide()end)X:SetScript("\079\110\067\108\105\099\107",function(B)if I.onClick then I.onClick(B:GetChecked())end if GameTooltip:IsOwned(B)then GameTooltip:ClearLines()GameTooltip:SetOwner(B,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine(B.tooltipText,1,1,1,true)local I=B:GetChecked()and"\124\099\102\102\048\048\102\102\048\048\208\146\208\186\208\187\209\142\209\135\208\181\208\189\208\190\124\114"or"\124\099\102\102\102\102\048\048\048\048\208\146\209\139\208\186\208\187\209\142\209\135\208\181\208\189\208\190\124\114"GameTooltip:AddLine("\208\162\208\181\208\186\209\131\209\137\208\181\208\181 \208\183\208\189\208\176\209\135\208\181\208\189\208\184\208\181\058 "..I,1,1,1,true)GameTooltip:Show()end end)B.lastY=B.lastY+30 B.totalHeight=B.totalHeight+30 B.scrollContent:SetHeight(B.totalHeight)table.insert(B.elements,X)o:updateScrollRange(B)return X end function NSQCMenu_old.updateScrollRange(I,B)local o=B.scrollFrame local X=_G[o:GetName().."\083\099\114\111\108\108\066\097\114"]if not X then error("\083\099\114\111\108\108\098\097\114 \110\111\116 \102\111\117\110\100 \102\111\114 \115\099\114\111\108\108\070\114\097\109\101\058 "..o:GetName())end local j=B.totalHeight-B.maxHeight if j<0 then j=0 end X:SetMinMaxValues(0,j)X:SetValue(0)o:UpdateScrollChildRect()end function NSQCMenu_old.addButton(o,B,I)local X=CreateFrame("\066\117\116\116\111\110",B.frame:GetName()..I.name,B.scrollContent,"\085\073\080\097\110\101\108\066\117\116\116\111\110\084\101\109\112\108\097\116\101")X:SetPoint("\084\079\080\076\069\070\084",16,-B.lastY)X:SetSize(I.width or 120,I.height or 24)X:SetText(I.label or"\208\154\208\189\208\190\208\191\208\186\208\176")X:SetScript("\079\110\067\108\105\099\107",function(B)if I.onClick then I.onClick()end end)if I.tooltip then X.tooltipText=I.tooltip X:SetScript("\079\110\069\110\116\101\114",function(B)if B.tooltipText then GameTooltip:SetOwner(B,"\065\078\067\072\079\082\095\082\073\071\072\084")GameTooltip:AddLine(B.tooltipText,1,1,1,true)GameTooltip:Show()end end)X:SetScript("\079\110\076\101\097\118\101",function(B)GameTooltip:Hide()end)end B.lastY=(B.lastY+(I.height or 24))+10 B.totalHeight=(B.totalHeight+(I.height or 24))+10 B.scrollContent:SetHeight(B.totalHeight)table.insert(B.elements,X)o:updateScrollRange(B)return X end function C_Timer(B,I,o)local X=CreateFrame("\070\114\097\109\101")X.duration=B X.elapsed=0 X.isLooping=o or false X:SetScript("\079\110\085\112\100\097\116\101",function(B,o)B.elapsed=B.elapsed+o if B.elapsed>=B.duration then if type(I)=="\102\117\110\099\116\105\111\110"then I()end if B.isLooping then B.elapsed=0 else B:SetScript("\079\110\085\112\100\097\116\101",nil)B=nil end end end)end C_Timer(10,function()if not menu then NS3Menu_old()if testQ["\209\129\208\186\209\128\209\139\209\130\209\140 \208\177\208\190\209\129\209\129\208\190\208\178"]then HideBossFrames()end end end)function NS3Menu_old()local B=NSQCMenu_old:new("\078\083\081\067")local I=B:addSubMenu("\208\157\208\176\209\129\209\130\209\128\208\190\208\185\208\186\208\184")B:addCheckbox(I,{name="\208\161\208\186\209\128\209\139\209\130\209\140 \209\132\209\128\208\181\208\185\208\188\209\139 \208\177\208\190\209\129\209\129\208\190\208\178 \208\191\208\190\208\180 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\190\208\185 \208\178 \208\191\208\191\208\179 \208\184 \209\128\208\181\208\185\208\180\208\176\209\133";label="\208\161\208\186\209\128\209\139\209\130\209\140 \209\132\209\128\208\181\208\185\208\188\209\139 \208\177\208\190\209\129\209\129\208\190\208\178 \208\191\208\190\208\180 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\190\208\185 \208\178 \208\191\208\191\208\179 \208\184 \209\128\208\181\208\185\208\180\208\176\209\133";default=testQ["\209\129\208\186\209\128\209\139\209\130\209\140 \208\177\208\190\209\129\209\129\208\190\208\178"]or false,tooltip="\208\161\208\186\209\128\209\139\209\130\209\140 \209\132\209\128\208\181\208\185\208\188\209\139 \208\177\208\190\209\129\209\129\208\190\208\178 \208\191\208\190\208\180 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\190\208\185 \208\178 \208\191\208\191\208\179 \208\184 \209\128\208\181\208\185\208\180\208\176\209\133",onClick=function(B)if testQ then if B then testQ["\209\129\208\186\209\128\209\139\209\130\209\140 \208\177\208\190\209\129\209\129\208\190\208\178"]=1 HideBossFrames()else testQ["\209\129\208\186\209\128\209\139\209\130\209\140 \208\177\208\190\209\129\209\129\208\190\208\178"]=nil end end end})B:addCheckbox(I,{name="\208\146\208\186\208\187\209\142\209\135\208\184\209\130\209\140 \208\176\208\178\209\130\208\190\209\129\208\188\208\181\208\189\209\131 \208\191\208\190\208\184\209\129\208\186\208\176 \208\189\208\176 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\181 \208\180\208\187\209\143 \209\133\208\176\208\189\209\130\208\176",label="\208\146\208\186\208\187\209\142\209\135\208\184\209\130\209\140 \208\176\208\178\209\130\208\190\209\129\208\188\208\181\208\189\209\131 \208\191\208\190\208\184\209\129\208\186\208\176 \208\189\208\176 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\181 \208\180\208\187\209\143 \209\133\208\176\208\189\209\130\208\176",default=testQ["\208\188\208\181\209\130\208\186\208\176 \208\190\209\133\208\190\209\130\208\189\208\184\208\186\208\176"]or false;tooltip="\208\146\208\186\208\187\209\142\209\135\208\184\209\130\209\140 \208\176\208\178\209\130\208\190\209\129\208\188\208\181\208\189\209\131 \208\191\208\190\208\184\209\129\208\186\208\176 \208\189\208\176 \208\188\208\184\208\189\208\184\208\186\208\176\209\128\209\130\208\181 \208\180\208\187\209\143 \209\133\208\176\208\189\209\130\208\176",onClick=function(B)if testQ then if B then testQ["\208\188\208\181\209\130\208\186\208\176 \208\190\209\133\208\190\209\130\208\189\208\184\208\186\208\176"]=1 HideBossFrames()else testQ["\208\188\208\181\209\130\208\186\208\176 \208\190\209\133\208\190\209\130\208\189\208\184\208\186\208\176"]=nil end end end})end function HideBossFrames()for B=1,4,1 do local I=_G["\066\111\115\115"..(B.."\084\097\114\103\101\116\070\114\097\109\101")]if I then I:UnregisterAllEvents()I:Hide()I.Show=function() end end end end